-- install_upgrade.sql
-- Install the last stable E-Maj version and immediately upgrade to the devel version, while groups are not yet created.
-- install E-Maj as an extension 
--
------------------------------------------------------------
-- install dblink and btree_gist
------------------------------------------------------------
CREATE EXTENSION IF NOT EXISTS dblink;
CREATE EXTENSION IF NOT EXISTS btree_gist;
-----------------------------
-- check the extension's availability
-----------------------------
-- check the extension is available in the right version 
select * from pg_available_extension_versions where name = 'emaj' order by version desc limit 2;
 name | version | installed | superuser | trusted | relocatable | schema |      requires       |                                            comment                                             
------+---------+-----------+-----------+---------+-------------+--------+---------------------+------------------------------------------------------------------------------------------------
 emaj | devel   | f         | t         | f       | f           | emaj   | {dblink,btree_gist} | E-Maj extension enables fine-grained write logging and time travel on subsets of the database.
 emaj | 3.4.0   | f         | t         | f       | f           | emaj   | {dblink,btree_gist} | E-Maj extension enables fine-grained write logging and time travel on subsets of the database.
(2 rows)

-- look at all available update paths
select * from pg_extension_update_paths('emaj') order by 1,2;;
   source   |   target   |                                                            path                                                            
------------+------------+----------------------------------------------------------------------------------------------------------------------------
 1.3.1      | 2.0.0      | 1.3.1--2.0.0
 1.3.1      | 2.0.1      | 1.3.1--2.0.0--2.0.1
 1.3.1      | 2.1.0      | 1.3.1--2.0.0--2.0.1--2.1.0
 1.3.1      | 2.2.0      | 1.3.1--2.0.0--2.0.1--2.1.0--2.2.0
 1.3.1      | 2.2.1      | 1.3.1--2.0.0--2.0.1--2.1.0--2.2.0--2.2.1
 1.3.1      | 2.2.2      | 1.3.1--2.0.0--2.0.1--2.1.0--2.2.0--2.2.1--2.2.2
 1.3.1      | 2.2.3      | 1.3.1--2.0.0--2.0.1--2.1.0--2.2.0--2.2.1--2.2.2--2.2.3
 1.3.1      | 2.3.0      | 1.3.1--2.0.0--2.0.1--2.1.0--2.2.0--2.2.1--2.2.2--2.2.3--2.3.0
 1.3.1      | 2.3.1      | 1.3.1--2.0.0--2.0.1--2.1.0--2.2.0--2.2.1--2.2.2--2.2.3--2.3.0--2.3.1
 1.3.1      | 3.0.0      | 1.3.1--2.0.0--2.0.1--2.1.0--2.2.0--2.2.1--2.2.2--2.2.3--2.3.0--2.3.1--3.0.0
 1.3.1      | 3.1.0      | 1.3.1--2.0.0--2.0.1--2.1.0--2.2.0--2.2.1--2.2.2--2.2.3--2.3.0--2.3.1--3.0.0--3.1.0
 1.3.1      | 3.2.0      | 1.3.1--2.0.0--2.0.1--2.1.0--2.2.0--2.2.1--2.2.2--2.2.3--2.3.0--2.3.1--3.0.0--3.1.0--3.2.0
 1.3.1      | 3.3.0      | 1.3.1--2.0.0--2.0.1--2.1.0--2.2.0--2.2.1--2.2.2--2.2.3--2.3.0--2.3.1--3.0.0--3.1.0--3.2.0--3.3.0
 1.3.1      | 3.4.0      | 1.3.1--2.0.0--2.0.1--2.1.0--2.2.0--2.2.1--2.2.2--2.2.3--2.3.0--2.3.1--3.0.0--3.1.0--3.2.0--3.3.0--3.4.0
 1.3.1      | devel      | 1.3.1--2.0.0--2.0.1--2.1.0--2.2.0--2.2.1--2.2.2--2.2.3--2.3.0--2.3.1--3.0.0--3.1.0--3.2.0--3.3.0--3.4.0--devel
 1.3.1      | unpackaged | 
 2.0.0      | 1.3.1      | 
 2.0.0      | 2.0.1      | 2.0.0--2.0.1
 2.0.0      | 2.1.0      | 2.0.0--2.0.1--2.1.0
 2.0.0      | 2.2.0      | 2.0.0--2.0.1--2.1.0--2.2.0
 2.0.0      | 2.2.1      | 2.0.0--2.0.1--2.1.0--2.2.0--2.2.1
 2.0.0      | 2.2.2      | 2.0.0--2.0.1--2.1.0--2.2.0--2.2.1--2.2.2
 2.0.0      | 2.2.3      | 2.0.0--2.0.1--2.1.0--2.2.0--2.2.1--2.2.2--2.2.3
 2.0.0      | 2.3.0      | 2.0.0--2.0.1--2.1.0--2.2.0--2.2.1--2.2.2--2.2.3--2.3.0
 2.0.0      | 2.3.1      | 2.0.0--2.0.1--2.1.0--2.2.0--2.2.1--2.2.2--2.2.3--2.3.0--2.3.1
 2.0.0      | 3.0.0      | 2.0.0--2.0.1--2.1.0--2.2.0--2.2.1--2.2.2--2.2.3--2.3.0--2.3.1--3.0.0
 2.0.0      | 3.1.0      | 2.0.0--2.0.1--2.1.0--2.2.0--2.2.1--2.2.2--2.2.3--2.3.0--2.3.1--3.0.0--3.1.0
 2.0.0      | 3.2.0      | 2.0.0--2.0.1--2.1.0--2.2.0--2.2.1--2.2.2--2.2.3--2.3.0--2.3.1--3.0.0--3.1.0--3.2.0
 2.0.0      | 3.3.0      | 2.0.0--2.0.1--2.1.0--2.2.0--2.2.1--2.2.2--2.2.3--2.3.0--2.3.1--3.0.0--3.1.0--3.2.0--3.3.0
 2.0.0      | 3.4.0      | 2.0.0--2.0.1--2.1.0--2.2.0--2.2.1--2.2.2--2.2.3--2.3.0--2.3.1--3.0.0--3.1.0--3.2.0--3.3.0--3.4.0
 2.0.0      | devel      | 2.0.0--2.0.1--2.1.0--2.2.0--2.2.1--2.2.2--2.2.3--2.3.0--2.3.1--3.0.0--3.1.0--3.2.0--3.3.0--3.4.0--devel
 2.0.0      | unpackaged | 
 2.0.1      | 1.3.1      | 
 2.0.1      | 2.0.0      | 
 2.0.1      | 2.1.0      | 2.0.1--2.1.0
 2.0.1      | 2.2.0      | 2.0.1--2.1.0--2.2.0
 2.0.1      | 2.2.1      | 2.0.1--2.1.0--2.2.0--2.2.1
 2.0.1      | 2.2.2      | 2.0.1--2.1.0--2.2.0--2.2.1--2.2.2
 2.0.1      | 2.2.3      | 2.0.1--2.1.0--2.2.0--2.2.1--2.2.2--2.2.3
 2.0.1      | 2.3.0      | 2.0.1--2.1.0--2.2.0--2.2.1--2.2.2--2.2.3--2.3.0
 2.0.1      | 2.3.1      | 2.0.1--2.1.0--2.2.0--2.2.1--2.2.2--2.2.3--2.3.0--2.3.1
 2.0.1      | 3.0.0      | 2.0.1--2.1.0--2.2.0--2.2.1--2.2.2--2.2.3--2.3.0--2.3.1--3.0.0
 2.0.1      | 3.1.0      | 2.0.1--2.1.0--2.2.0--2.2.1--2.2.2--2.2.3--2.3.0--2.3.1--3.0.0--3.1.0
 2.0.1      | 3.2.0      | 2.0.1--2.1.0--2.2.0--2.2.1--2.2.2--2.2.3--2.3.0--2.3.1--3.0.0--3.1.0--3.2.0
 2.0.1      | 3.3.0      | 2.0.1--2.1.0--2.2.0--2.2.1--2.2.2--2.2.3--2.3.0--2.3.1--3.0.0--3.1.0--3.2.0--3.3.0
 2.0.1      | 3.4.0      | 2.0.1--2.1.0--2.2.0--2.2.1--2.2.2--2.2.3--2.3.0--2.3.1--3.0.0--3.1.0--3.2.0--3.3.0--3.4.0
 2.0.1      | devel      | 2.0.1--2.1.0--2.2.0--2.2.1--2.2.2--2.2.3--2.3.0--2.3.1--3.0.0--3.1.0--3.2.0--3.3.0--3.4.0--devel
 2.0.1      | unpackaged | 
 2.1.0      | 1.3.1      | 
 2.1.0      | 2.0.0      | 
 2.1.0      | 2.0.1      | 
 2.1.0      | 2.2.0      | 2.1.0--2.2.0
 2.1.0      | 2.2.1      | 2.1.0--2.2.0--2.2.1
 2.1.0      | 2.2.2      | 2.1.0--2.2.0--2.2.1--2.2.2
 2.1.0      | 2.2.3      | 2.1.0--2.2.0--2.2.1--2.2.2--2.2.3
 2.1.0      | 2.3.0      | 2.1.0--2.2.0--2.2.1--2.2.2--2.2.3--2.3.0
 2.1.0      | 2.3.1      | 2.1.0--2.2.0--2.2.1--2.2.2--2.2.3--2.3.0--2.3.1
 2.1.0      | 3.0.0      | 2.1.0--2.2.0--2.2.1--2.2.2--2.2.3--2.3.0--2.3.1--3.0.0
 2.1.0      | 3.1.0      | 2.1.0--2.2.0--2.2.1--2.2.2--2.2.3--2.3.0--2.3.1--3.0.0--3.1.0
 2.1.0      | 3.2.0      | 2.1.0--2.2.0--2.2.1--2.2.2--2.2.3--2.3.0--2.3.1--3.0.0--3.1.0--3.2.0
 2.1.0      | 3.3.0      | 2.1.0--2.2.0--2.2.1--2.2.2--2.2.3--2.3.0--2.3.1--3.0.0--3.1.0--3.2.0--3.3.0
 2.1.0      | 3.4.0      | 2.1.0--2.2.0--2.2.1--2.2.2--2.2.3--2.3.0--2.3.1--3.0.0--3.1.0--3.2.0--3.3.0--3.4.0
 2.1.0      | devel      | 2.1.0--2.2.0--2.2.1--2.2.2--2.2.3--2.3.0--2.3.1--3.0.0--3.1.0--3.2.0--3.3.0--3.4.0--devel
 2.1.0      | unpackaged | 
 2.2.0      | 1.3.1      | 
 2.2.0      | 2.0.0      | 
 2.2.0      | 2.0.1      | 
 2.2.0      | 2.1.0      | 
 2.2.0      | 2.2.1      | 2.2.0--2.2.1
 2.2.0      | 2.2.2      | 2.2.0--2.2.1--2.2.2
 2.2.0      | 2.2.3      | 2.2.0--2.2.1--2.2.2--2.2.3
 2.2.0      | 2.3.0      | 2.2.0--2.2.1--2.2.2--2.2.3--2.3.0
 2.2.0      | 2.3.1      | 2.2.0--2.2.1--2.2.2--2.2.3--2.3.0--2.3.1
 2.2.0      | 3.0.0      | 2.2.0--2.2.1--2.2.2--2.2.3--2.3.0--2.3.1--3.0.0
 2.2.0      | 3.1.0      | 2.2.0--2.2.1--2.2.2--2.2.3--2.3.0--2.3.1--3.0.0--3.1.0
 2.2.0      | 3.2.0      | 2.2.0--2.2.1--2.2.2--2.2.3--2.3.0--2.3.1--3.0.0--3.1.0--3.2.0
 2.2.0      | 3.3.0      | 2.2.0--2.2.1--2.2.2--2.2.3--2.3.0--2.3.1--3.0.0--3.1.0--3.2.0--3.3.0
 2.2.0      | 3.4.0      | 2.2.0--2.2.1--2.2.2--2.2.3--2.3.0--2.3.1--3.0.0--3.1.0--3.2.0--3.3.0--3.4.0
 2.2.0      | devel      | 2.2.0--2.2.1--2.2.2--2.2.3--2.3.0--2.3.1--3.0.0--3.1.0--3.2.0--3.3.0--3.4.0--devel
 2.2.0      | unpackaged | 
 2.2.1      | 1.3.1      | 
 2.2.1      | 2.0.0      | 
 2.2.1      | 2.0.1      | 
 2.2.1      | 2.1.0      | 
 2.2.1      | 2.2.0      | 
 2.2.1      | 2.2.2      | 2.2.1--2.2.2
 2.2.1      | 2.2.3      | 2.2.1--2.2.2--2.2.3
 2.2.1      | 2.3.0      | 2.2.1--2.2.2--2.2.3--2.3.0
 2.2.1      | 2.3.1      | 2.2.1--2.2.2--2.2.3--2.3.0--2.3.1
 2.2.1      | 3.0.0      | 2.2.1--2.2.2--2.2.3--2.3.0--2.3.1--3.0.0
 2.2.1      | 3.1.0      | 2.2.1--2.2.2--2.2.3--2.3.0--2.3.1--3.0.0--3.1.0
 2.2.1      | 3.2.0      | 2.2.1--2.2.2--2.2.3--2.3.0--2.3.1--3.0.0--3.1.0--3.2.0
 2.2.1      | 3.3.0      | 2.2.1--2.2.2--2.2.3--2.3.0--2.3.1--3.0.0--3.1.0--3.2.0--3.3.0
 2.2.1      | 3.4.0      | 2.2.1--2.2.2--2.2.3--2.3.0--2.3.1--3.0.0--3.1.0--3.2.0--3.3.0--3.4.0
 2.2.1      | devel      | 2.2.1--2.2.2--2.2.3--2.3.0--2.3.1--3.0.0--3.1.0--3.2.0--3.3.0--3.4.0--devel
 2.2.1      | unpackaged | 
 2.2.2      | 1.3.1      | 
 2.2.2      | 2.0.0      | 
 2.2.2      | 2.0.1      | 
 2.2.2      | 2.1.0      | 
 2.2.2      | 2.2.0      | 
 2.2.2      | 2.2.1      | 
 2.2.2      | 2.2.3      | 2.2.2--2.2.3
 2.2.2      | 2.3.0      | 2.2.2--2.2.3--2.3.0
 2.2.2      | 2.3.1      | 2.2.2--2.2.3--2.3.0--2.3.1
 2.2.2      | 3.0.0      | 2.2.2--2.2.3--2.3.0--2.3.1--3.0.0
 2.2.2      | 3.1.0      | 2.2.2--2.2.3--2.3.0--2.3.1--3.0.0--3.1.0
 2.2.2      | 3.2.0      | 2.2.2--2.2.3--2.3.0--2.3.1--3.0.0--3.1.0--3.2.0
 2.2.2      | 3.3.0      | 2.2.2--2.2.3--2.3.0--2.3.1--3.0.0--3.1.0--3.2.0--3.3.0
 2.2.2      | 3.4.0      | 2.2.2--2.2.3--2.3.0--2.3.1--3.0.0--3.1.0--3.2.0--3.3.0--3.4.0
 2.2.2      | devel      | 2.2.2--2.2.3--2.3.0--2.3.1--3.0.0--3.1.0--3.2.0--3.3.0--3.4.0--devel
 2.2.2      | unpackaged | 
 2.2.3      | 1.3.1      | 
 2.2.3      | 2.0.0      | 
 2.2.3      | 2.0.1      | 
 2.2.3      | 2.1.0      | 
 2.2.3      | 2.2.0      | 
 2.2.3      | 2.2.1      | 
 2.2.3      | 2.2.2      | 
 2.2.3      | 2.3.0      | 2.2.3--2.3.0
 2.2.3      | 2.3.1      | 2.2.3--2.3.0--2.3.1
 2.2.3      | 3.0.0      | 2.2.3--2.3.0--2.3.1--3.0.0
 2.2.3      | 3.1.0      | 2.2.3--2.3.0--2.3.1--3.0.0--3.1.0
 2.2.3      | 3.2.0      | 2.2.3--2.3.0--2.3.1--3.0.0--3.1.0--3.2.0
 2.2.3      | 3.3.0      | 2.2.3--2.3.0--2.3.1--3.0.0--3.1.0--3.2.0--3.3.0
 2.2.3      | 3.4.0      | 2.2.3--2.3.0--2.3.1--3.0.0--3.1.0--3.2.0--3.3.0--3.4.0
 2.2.3      | devel      | 2.2.3--2.3.0--2.3.1--3.0.0--3.1.0--3.2.0--3.3.0--3.4.0--devel
 2.2.3      | unpackaged | 
 2.3.0      | 1.3.1      | 
 2.3.0      | 2.0.0      | 
 2.3.0      | 2.0.1      | 
 2.3.0      | 2.1.0      | 
 2.3.0      | 2.2.0      | 
 2.3.0      | 2.2.1      | 
 2.3.0      | 2.2.2      | 
 2.3.0      | 2.2.3      | 
 2.3.0      | 2.3.1      | 2.3.0--2.3.1
 2.3.0      | 3.0.0      | 2.3.0--2.3.1--3.0.0
 2.3.0      | 3.1.0      | 2.3.0--2.3.1--3.0.0--3.1.0
 2.3.0      | 3.2.0      | 2.3.0--2.3.1--3.0.0--3.1.0--3.2.0
 2.3.0      | 3.3.0      | 2.3.0--2.3.1--3.0.0--3.1.0--3.2.0--3.3.0
 2.3.0      | 3.4.0      | 2.3.0--2.3.1--3.0.0--3.1.0--3.2.0--3.3.0--3.4.0
 2.3.0      | devel      | 2.3.0--2.3.1--3.0.0--3.1.0--3.2.0--3.3.0--3.4.0--devel
 2.3.0      | unpackaged | 
 2.3.1      | 1.3.1      | 
 2.3.1      | 2.0.0      | 
 2.3.1      | 2.0.1      | 
 2.3.1      | 2.1.0      | 
 2.3.1      | 2.2.0      | 
 2.3.1      | 2.2.1      | 
 2.3.1      | 2.2.2      | 
 2.3.1      | 2.2.3      | 
 2.3.1      | 2.3.0      | 
 2.3.1      | 3.0.0      | 2.3.1--3.0.0
 2.3.1      | 3.1.0      | 2.3.1--3.0.0--3.1.0
 2.3.1      | 3.2.0      | 2.3.1--3.0.0--3.1.0--3.2.0
 2.3.1      | 3.3.0      | 2.3.1--3.0.0--3.1.0--3.2.0--3.3.0
 2.3.1      | 3.4.0      | 2.3.1--3.0.0--3.1.0--3.2.0--3.3.0--3.4.0
 2.3.1      | devel      | 2.3.1--3.0.0--3.1.0--3.2.0--3.3.0--3.4.0--devel
 2.3.1      | unpackaged | 
 3.0.0      | 1.3.1      | 
 3.0.0      | 2.0.0      | 
 3.0.0      | 2.0.1      | 
 3.0.0      | 2.1.0      | 
 3.0.0      | 2.2.0      | 
 3.0.0      | 2.2.1      | 
 3.0.0      | 2.2.2      | 
 3.0.0      | 2.2.3      | 
 3.0.0      | 2.3.0      | 
 3.0.0      | 2.3.1      | 
 3.0.0      | 3.1.0      | 3.0.0--3.1.0
 3.0.0      | 3.2.0      | 3.0.0--3.1.0--3.2.0
 3.0.0      | 3.3.0      | 3.0.0--3.1.0--3.2.0--3.3.0
 3.0.0      | 3.4.0      | 3.0.0--3.1.0--3.2.0--3.3.0--3.4.0
 3.0.0      | devel      | 3.0.0--3.1.0--3.2.0--3.3.0--3.4.0--devel
 3.0.0      | unpackaged | 
 3.1.0      | 1.3.1      | 
 3.1.0      | 2.0.0      | 
 3.1.0      | 2.0.1      | 
 3.1.0      | 2.1.0      | 
 3.1.0      | 2.2.0      | 
 3.1.0      | 2.2.1      | 
 3.1.0      | 2.2.2      | 
 3.1.0      | 2.2.3      | 
 3.1.0      | 2.3.0      | 
 3.1.0      | 2.3.1      | 
 3.1.0      | 3.0.0      | 
 3.1.0      | 3.2.0      | 3.1.0--3.2.0
 3.1.0      | 3.3.0      | 3.1.0--3.2.0--3.3.0
 3.1.0      | 3.4.0      | 3.1.0--3.2.0--3.3.0--3.4.0
 3.1.0      | devel      | 3.1.0--3.2.0--3.3.0--3.4.0--devel
 3.1.0      | unpackaged | 
 3.2.0      | 1.3.1      | 
 3.2.0      | 2.0.0      | 
 3.2.0      | 2.0.1      | 
 3.2.0      | 2.1.0      | 
 3.2.0      | 2.2.0      | 
 3.2.0      | 2.2.1      | 
 3.2.0      | 2.2.2      | 
 3.2.0      | 2.2.3      | 
 3.2.0      | 2.3.0      | 
 3.2.0      | 2.3.1      | 
 3.2.0      | 3.0.0      | 
 3.2.0      | 3.1.0      | 
 3.2.0      | 3.3.0      | 3.2.0--3.3.0
 3.2.0      | 3.4.0      | 3.2.0--3.3.0--3.4.0
 3.2.0      | devel      | 3.2.0--3.3.0--3.4.0--devel
 3.2.0      | unpackaged | 
 3.3.0      | 1.3.1      | 
 3.3.0      | 2.0.0      | 
 3.3.0      | 2.0.1      | 
 3.3.0      | 2.1.0      | 
 3.3.0      | 2.2.0      | 
 3.3.0      | 2.2.1      | 
 3.3.0      | 2.2.2      | 
 3.3.0      | 2.2.3      | 
 3.3.0      | 2.3.0      | 
 3.3.0      | 2.3.1      | 
 3.3.0      | 3.0.0      | 
 3.3.0      | 3.1.0      | 
 3.3.0      | 3.2.0      | 
 3.3.0      | 3.4.0      | 3.3.0--3.4.0
 3.3.0      | devel      | 3.3.0--3.4.0--devel
 3.3.0      | unpackaged | 
 3.4.0      | 1.3.1      | 
 3.4.0      | 2.0.0      | 
 3.4.0      | 2.0.1      | 
 3.4.0      | 2.1.0      | 
 3.4.0      | 2.2.0      | 
 3.4.0      | 2.2.1      | 
 3.4.0      | 2.2.2      | 
 3.4.0      | 2.2.3      | 
 3.4.0      | 2.3.0      | 
 3.4.0      | 2.3.1      | 
 3.4.0      | 3.0.0      | 
 3.4.0      | 3.1.0      | 
 3.4.0      | 3.2.0      | 
 3.4.0      | 3.3.0      | 
 3.4.0      | devel      | 3.4.0--devel
 3.4.0      | unpackaged | 
 devel      | 1.3.1      | 
 devel      | 2.0.0      | 
 devel      | 2.0.1      | 
 devel      | 2.1.0      | 
 devel      | 2.2.0      | 
 devel      | 2.2.1      | 
 devel      | 2.2.2      | 
 devel      | 2.2.3      | 
 devel      | 2.3.0      | 
 devel      | 2.3.1      | 
 devel      | 3.0.0      | 
 devel      | 3.1.0      | 
 devel      | 3.2.0      | 
 devel      | 3.3.0      | 
 devel      | 3.4.0      | 
 devel      | unpackaged | 
 unpackaged | 1.3.1      | unpackaged--1.3.1
 unpackaged | 2.0.0      | unpackaged--1.3.1--2.0.0
 unpackaged | 2.0.1      | unpackaged--1.3.1--2.0.0--2.0.1
 unpackaged | 2.1.0      | unpackaged--1.3.1--2.0.0--2.0.1--2.1.0
 unpackaged | 2.2.0      | unpackaged--1.3.1--2.0.0--2.0.1--2.1.0--2.2.0
 unpackaged | 2.2.1      | unpackaged--1.3.1--2.0.0--2.0.1--2.1.0--2.2.0--2.2.1
 unpackaged | 2.2.2      | unpackaged--1.3.1--2.0.0--2.0.1--2.1.0--2.2.0--2.2.1--2.2.2
 unpackaged | 2.2.3      | unpackaged--1.3.1--2.0.0--2.0.1--2.1.0--2.2.0--2.2.1--2.2.2--2.2.3
 unpackaged | 2.3.0      | unpackaged--1.3.1--2.0.0--2.0.1--2.1.0--2.2.0--2.2.1--2.2.2--2.2.3--2.3.0
 unpackaged | 2.3.1      | unpackaged--1.3.1--2.0.0--2.0.1--2.1.0--2.2.0--2.2.1--2.2.2--2.2.3--2.3.0--2.3.1
 unpackaged | 3.0.0      | unpackaged--1.3.1--2.0.0--2.0.1--2.1.0--2.2.0--2.2.1--2.2.2--2.2.3--2.3.0--2.3.1--3.0.0
 unpackaged | 3.1.0      | unpackaged--1.3.1--2.0.0--2.0.1--2.1.0--2.2.0--2.2.1--2.2.2--2.2.3--2.3.0--2.3.1--3.0.0--3.1.0
 unpackaged | 3.2.0      | unpackaged--1.3.1--2.0.0--2.0.1--2.1.0--2.2.0--2.2.1--2.2.2--2.2.3--2.3.0--2.3.1--3.0.0--3.1.0--3.2.0
 unpackaged | 3.3.0      | unpackaged--1.3.1--2.0.0--2.0.1--2.1.0--2.2.0--2.2.1--2.2.2--2.2.3--2.3.0--2.3.1--3.0.0--3.1.0--3.2.0--3.3.0
 unpackaged | 3.4.0      | unpackaged--1.3.1--2.0.0--2.0.1--2.1.0--2.2.0--2.2.1--2.2.2--2.2.3--2.3.0--2.3.1--3.0.0--3.1.0--3.2.0--3.3.0--3.4.0
 unpackaged | devel      | unpackaged--1.3.1--2.0.0--2.0.1--2.1.0--2.2.0--2.2.1--2.2.2--2.2.3--2.3.0--2.3.1--3.0.0--3.1.0--3.2.0--3.3.0--3.4.0--devel
(272 rows)

-----------------------------------------------------------
-- emaj update to next_version
-----------------------------------------------------------
CREATE EXTENSION emaj VERSION '3.4.0';
-- check impact in catalog
select extname, extversion from pg_extension where extname = 'emaj';
 extname | extversion 
---------+------------
 emaj    | 3.4.0
(1 row)

select relname from pg_catalog.pg_class, 
                    (select unnest(extconfig) as oid from pg_catalog.pg_extension where extname = 'emaj') as t 
  where t.oid = pg_class.oid
  order by 1;
           relname           
-----------------------------
 emaj_alter_plan
 emaj_global_seq
 emaj_group
 emaj_group_def
 emaj_hist
 emaj_hist_hist_id_seq
 emaj_ignored_app_trigger
 emaj_mark
 emaj_param
 emaj_rel_hist
 emaj_relation
 emaj_rlbk
 emaj_rlbk_plan
 emaj_rlbk_rlbk_id_seq
 emaj_rlbk_session
 emaj_rlbk_stat
 emaj_schema
 emaj_seq_hole
 emaj_sequence
 emaj_table
 emaj_time_stamp
 emaj_time_stamp_time_id_seq
(22 rows)

-- process the extension upgrade
ALTER EXTENSION emaj UPDATE TO 'devel';
server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.
connection to server was lost

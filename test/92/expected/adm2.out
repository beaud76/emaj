-- adm2.sql : complex scenario executed by an emaj_adm role. 
--            Follows adm1.sql, and includes more specific test cases
--
set role emaj_regression_tests_adm_user;
-----------------------------
-- Step 8 : use of multi-group functions, start_group(s) without log reset and use deleted marks
-----------------------------
-- stop both groups
select emaj.emaj_stop_groups(array['myGroup1','myGroup2']);
 emaj_stop_groups 
------------------
               14
(1 row)

-- start both groups
select emaj.emaj_start_groups(array['myGroup1','myGroup2'],'Multi-1', false);
WARNING:  _check_fk_groups: Foreign key mytbl6_col61_fkey, from table myschema2.mytbl6, references myschema2.mytbl7 that is outside groups (myGroup1,myGroup2).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._start_groups(text[],text,boolean,boolean) line 36 at PERFORM
SQL statement "SELECT emaj._start_groups(emaj._check_names_array(v_groupNames,'group'), v_mark, true, v_resetLog)"
PL/pgSQL function emaj.emaj_start_groups(text[],text,boolean) line 16 at SQL statement
WARNING:  _check_fk_groups: table myschema2.mytbl6 is referenced by foreign key mytbl8_col81_fkey from table myschema2.mytbl8 that is outside groups (myGroup1,myGroup2).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._start_groups(text[],text,boolean,boolean) line 36 at PERFORM
SQL statement "SELECT emaj._start_groups(emaj._check_names_array(v_groupNames,'group'), v_mark, true, v_resetLog)"
PL/pgSQL function emaj.emaj_start_groups(text[],text,boolean) line 16 at SQL statement
 emaj_start_groups 
-------------------
                14
(1 row)

-- set a mark for both groups
select emaj.emaj_set_mark_groups(array['myGroup1','myGroup2'],'Multi-2');
 emaj_set_mark_groups 
----------------------
                   14
(1 row)

-- logged rollback to Multi-1
select emaj.emaj_logged_rollback_groups(array['myGroup1','myGroup2'],'Multi-1');
WARNING:  _check_fk_groups: Foreign key mytbl6_col61_fkey, from table myschema2.mytbl6, references myschema2.mytbl7 that is outside groups (myGroup1,myGroup2).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._rlbk_init(text[],text,boolean,integer,boolean) line 66 at PERFORM
SQL statement "SELECT emaj._rlbk_init(v_groupNames, v_mark, v_isLoggedRlbk, 1, v_multiGroup)"
PL/pgSQL function emaj._rlbk_groups(text[],text,boolean,boolean) line 20 at SQL statement
PL/pgSQL function emaj.emaj_logged_rollback_groups(text[],text) line 11 at RETURN
WARNING:  _check_fk_groups: table myschema2.mytbl6 is referenced by foreign key mytbl8_col81_fkey from table myschema2.mytbl8 that is outside groups (myGroup1,myGroup2).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._rlbk_init(text[],text,boolean,integer,boolean) line 66 at PERFORM
SQL statement "SELECT emaj._rlbk_init(v_groupNames, v_mark, v_isLoggedRlbk, 1, v_multiGroup)"
PL/pgSQL function emaj._rlbk_groups(text[],text,boolean,boolean) line 20 at SQL statement
PL/pgSQL function emaj.emaj_logged_rollback_groups(text[],text) line 11 at RETURN
 emaj_logged_rollback_groups 
-----------------------------
                           3
(1 row)

-- rollback to Multi-2
select emaj.emaj_rollback_groups(array['myGroup1','myGroup2'],'Multi-2');
WARNING:  _check_fk_groups: Foreign key mytbl6_col61_fkey, from table myschema2.mytbl6, references myschema2.mytbl7 that is outside groups (myGroup1,myGroup2).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._rlbk_init(text[],text,boolean,integer,boolean) line 66 at PERFORM
SQL statement "SELECT emaj._rlbk_init(v_groupNames, v_mark, v_isLoggedRlbk, 1, v_multiGroup)"
PL/pgSQL function emaj._rlbk_groups(text[],text,boolean,boolean) line 20 at SQL statement
PL/pgSQL function emaj.emaj_rollback_groups(text[],text) line 7 at RETURN
WARNING:  _check_fk_groups: table myschema2.mytbl6 is referenced by foreign key mytbl8_col81_fkey from table myschema2.mytbl8 that is outside groups (myGroup1,myGroup2).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._rlbk_init(text[],text,boolean,integer,boolean) line 66 at PERFORM
SQL statement "SELECT emaj._rlbk_init(v_groupNames, v_mark, v_isLoggedRlbk, 1, v_multiGroup)"
PL/pgSQL function emaj._rlbk_groups(text[],text,boolean,boolean) line 20 at SQL statement
PL/pgSQL function emaj.emaj_rollback_groups(text[],text) line 7 at RETURN
 emaj_rollback_groups 
----------------------
                    3
(1 row)

-- rollback and stop to Multi-1
select emaj.emaj_rollback_groups(array['myGroup1','myGroup2'],'Multi-1');
WARNING:  _check_fk_groups: Foreign key mytbl6_col61_fkey, from table myschema2.mytbl6, references myschema2.mytbl7 that is outside groups (myGroup1,myGroup2).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._rlbk_init(text[],text,boolean,integer,boolean) line 66 at PERFORM
SQL statement "SELECT emaj._rlbk_init(v_groupNames, v_mark, v_isLoggedRlbk, 1, v_multiGroup)"
PL/pgSQL function emaj._rlbk_groups(text[],text,boolean,boolean) line 20 at SQL statement
PL/pgSQL function emaj.emaj_rollback_groups(text[],text) line 7 at RETURN
WARNING:  _check_fk_groups: table myschema2.mytbl6 is referenced by foreign key mytbl8_col81_fkey from table myschema2.mytbl8 that is outside groups (myGroup1,myGroup2).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._rlbk_init(text[],text,boolean,integer,boolean) line 66 at PERFORM
SQL statement "SELECT emaj._rlbk_init(v_groupNames, v_mark, v_isLoggedRlbk, 1, v_multiGroup)"
PL/pgSQL function emaj._rlbk_groups(text[],text,boolean,boolean) line 20 at SQL statement
PL/pgSQL function emaj.emaj_rollback_groups(text[],text) line 7 at RETURN
 emaj_rollback_groups 
----------------------
                    3
(1 row)

select emaj.emaj_stop_groups(array['myGroup1','myGroup2'],'Stop after rollback');
 emaj_stop_groups 
------------------
               14
(1 row)

-- try to start both groups, but with an old deleted mark name
select emaj.emaj_start_groups(array['myGroup1','myGroup2'],'Multi-1', false);
WARNING:  _check_fk_groups: Foreign key mytbl6_col61_fkey, from table myschema2.mytbl6, references myschema2.mytbl7 that is outside groups (myGroup1,myGroup2).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._start_groups(text[],text,boolean,boolean) line 36 at PERFORM
SQL statement "SELECT emaj._start_groups(emaj._check_names_array(v_groupNames,'group'), v_mark, true, v_resetLog)"
PL/pgSQL function emaj.emaj_start_groups(text[],text,boolean) line 16 at SQL statement
WARNING:  _check_fk_groups: table myschema2.mytbl6 is referenced by foreign key mytbl8_col81_fkey from table myschema2.mytbl8 that is outside groups (myGroup1,myGroup2).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._start_groups(text[],text,boolean,boolean) line 36 at PERFORM
SQL statement "SELECT emaj._start_groups(emaj._check_names_array(v_groupNames,'group'), v_mark, true, v_resetLog)"
PL/pgSQL function emaj.emaj_start_groups(text[],text,boolean) line 16 at SQL statement
ERROR:  _check_new_mark: Group myGroup1 already contains a mark named Multi-1.
CONTEXT:  SQL statement "SELECT emaj._check_new_mark(v_mark, v_groupNames)"
PL/pgSQL function emaj._start_groups(text[],text,boolean,boolean) line 45 at SQL statement
SQL statement "SELECT emaj._start_groups(emaj._check_names_array(v_groupNames,'group'), v_mark, true, v_resetLog)"
PL/pgSQL function emaj.emaj_start_groups(text[],text,boolean) line 16 at SQL statement
-- really start both groups
select emaj.emaj_start_groups(array['myGroup1','myGroup2'],'Multi-1b', false);
WARNING:  _check_fk_groups: Foreign key mytbl6_col61_fkey, from table myschema2.mytbl6, references myschema2.mytbl7 that is outside groups (myGroup1,myGroup2).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._start_groups(text[],text,boolean,boolean) line 36 at PERFORM
SQL statement "SELECT emaj._start_groups(emaj._check_names_array(v_groupNames,'group'), v_mark, true, v_resetLog)"
PL/pgSQL function emaj.emaj_start_groups(text[],text,boolean) line 16 at SQL statement
WARNING:  _check_fk_groups: table myschema2.mytbl6 is referenced by foreign key mytbl8_col81_fkey from table myschema2.mytbl8 that is outside groups (myGroup1,myGroup2).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._start_groups(text[],text,boolean,boolean) line 36 at PERFORM
SQL statement "SELECT emaj._start_groups(emaj._check_names_array(v_groupNames,'group'), v_mark, true, v_resetLog)"
PL/pgSQL function emaj.emaj_start_groups(text[],text,boolean) line 16 at SQL statement
 emaj_start_groups 
-------------------
                14
(1 row)

-- set again a mark for both groups
select emaj.emaj_set_mark_groups(array['myGroup1','myGroup2'],'Multi-2');
 emaj_set_mark_groups 
----------------------
                   14
(1 row)

-- delete the mark for only 1 group and get detailed statistics for the other group
select emaj.emaj_delete_mark_group('myGroup1','Multi-2');
 emaj_delete_mark_group 
------------------------
                      1
(1 row)

-- use this mark for the other group before delete it
select * from emaj.emaj_detailed_log_stat_group('myGroup2','Multi-2',NULL);
 stat_group | stat_schema | stat_table | stat_role | stat_verb | stat_rows 
------------+-------------+------------+-----------+-----------+-----------
(0 rows)

select emaj.emaj_rollback_group('myGroup2','Multi-2');
WARNING:  _check_fk_groups: Foreign key mytbl6_col61_fkey, from table myschema2.mytbl6, references myschema2.mytbl7 that is outside groups (myGroup2).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._rlbk_init(text[],text,boolean,integer,boolean) line 66 at PERFORM
SQL statement "SELECT emaj._rlbk_init(v_groupNames, v_mark, v_isLoggedRlbk, 1, v_multiGroup)"
PL/pgSQL function emaj._rlbk_groups(text[],text,boolean,boolean) line 20 at SQL statement
PL/pgSQL function emaj.emaj_rollback_group(text,text) line 7 at RETURN
WARNING:  _check_fk_groups: table myschema2.mytbl6 is referenced by foreign key mytbl8_col81_fkey from table myschema2.mytbl8 that is outside groups (myGroup2).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._rlbk_init(text[],text,boolean,integer,boolean) line 66 at PERFORM
SQL statement "SELECT emaj._rlbk_init(v_groupNames, v_mark, v_isLoggedRlbk, 1, v_multiGroup)"
PL/pgSQL function emaj._rlbk_groups(text[],text,boolean,boolean) line 20 at SQL statement
PL/pgSQL function emaj.emaj_rollback_group(text,text) line 7 at RETURN
 emaj_rollback_group 
---------------------
                   2
(1 row)

select emaj.emaj_delete_mark_group('myGroup2','Multi-2');
 emaj_delete_mark_group 
------------------------
                      1
(1 row)

-- get statistics using deleted marks
select * from emaj.emaj_detailed_log_stat_group('myGroup2','M1','M2');
 stat_group | stat_schema | stat_table | stat_role | stat_verb | stat_rows 
------------+-------------+------------+-----------+-----------+-----------
 myGroup2   | myschema2   | mytbl1     | postgres  | DELETE    |         1
 myGroup2   | myschema2   | mytbl1     | postgres  | INSERT    |        11
 myGroup2   | myschema2   | mytbl1     | postgres  | UPDATE    |         3
 myGroup2   | myschema2   | mytbl2     | postgres  | INSERT    |         2
 myGroup2   | myschema2   | myTbl3     | postgres  | INSERT    |        10
 myGroup2   | myschema2   | mytbl5     | postgres  | INSERT    |         2
 myGroup2   | myschema2   | mytbl5     | postgres  | UPDATE    |         1
 myGroup2   | myschema2   | mytbl6     | postgres  | INSERT    |         8
 myGroup2   | myschema2   | mytbl6     | postgres  | UPDATE    |         3
(9 rows)

-- delete intermediate deleted marks
select emaj.emaj_delete_mark_group('myGroup1','Multi-1');
 emaj_delete_mark_group 
------------------------
                      1
(1 row)

select emaj.emaj_delete_mark_group('myGroup2','Multi-1');
 emaj_delete_mark_group 
------------------------
                      1
(1 row)

-- ... and reuse mark names for parallel rollback test
select emaj.emaj_rename_mark_group('myGroup1','Multi-1b','Multi-1');
 emaj_rename_mark_group 
------------------------
 
(1 row)

select emaj.emaj_rename_mark_group('myGroup2','Multi-1b','Multi-1');
 emaj_rename_mark_group 
------------------------
 
(1 row)

-- rename a deleted mark
select emaj.emaj_rename_mark_group('myGroup2','M2','Deleted M2');
 emaj_rename_mark_group 
------------------------
 
(1 row)

-- use emaj_get_previous_mark_group and delete an initial deleted mark
select emaj.emaj_delete_before_mark_group('myGroup2',
      (select emaj.emaj_get_previous_mark_group('myGroup2',
             (select mark_datetime from emaj.emaj_mark where mark_group = 'myGroup2' and mark_name = 'M3')+'0.000001 SECOND'::interval)));
 emaj_delete_before_mark_group 
-------------------------------
                             2
(1 row)

-- comment a deleted mark
select emaj.emaj_comment_mark_group('myGroup2','M3','This mark is deleted');
 emaj_comment_mark_group 
-------------------------
 
(1 row)

-- try to get a rollback duration estimate on a deleted mark
select emaj.emaj_estimate_rollback_group('myGroup2','M3',TRUE);
ERROR:  _rlbk_check: mark M3 for group myGroup2 is not usable for rollback.
CONTEXT:  SQL statement "SELECT emaj._rlbk_check(v_groupNames, v_mark)"
PL/pgSQL function emaj._estimate_rollback_groups(text[],text,boolean) line 16 at SQL statement
PL/pgSQL function emaj.emaj_estimate_rollback_group(text,text,boolean) line 8 at RETURN
-- try to rollback on a deleted mark
select emaj.emaj_rollback_group('myGroup2','M3');
ERROR:  _rlbk_check: mark M3 for group myGroup2 is not usable for rollback.
CONTEXT:  SQL statement "SELECT emaj._rlbk_check(v_groupNames, v_mark)"
PL/pgSQL function emaj._rlbk_init(text[],text,boolean,integer,boolean) line 24 at SQL statement
SQL statement "SELECT emaj._rlbk_init(v_groupNames, v_mark, v_isLoggedRlbk, 1, v_multiGroup)"
PL/pgSQL function emaj._rlbk_groups(text[],text,boolean,boolean) line 20 at SQL statement
PL/pgSQL function emaj.emaj_rollback_group(text,text) line 7 at RETURN
-----------------------------
-- Checking step 8
-----------------------------
-- emaj tables
select mark_id, mark_group, regexp_replace(mark_name,E'\\d\\d\.\\d\\d\\.\\d\\d\\.\\d\\d\\d','%','g'), mark_global_seq, mark_is_deleted, mark_is_rlbk_protected, mark_comment, mark_last_sequence_id, mark_log_rows_before_next, mark_logged_rlbk_target_mark from emaj.emaj_mark order by mark_id;
 mark_id | mark_group |        regexp_replace        | mark_global_seq | mark_is_deleted | mark_is_rlbk_protected |     mark_comment     | mark_last_sequence_id | mark_log_rows_before_next | mark_logged_rlbk_target_mark 
---------+------------+------------------------------+-----------------+-----------------+------------------------+----------------------+-----------------------+---------------------------+------------------------------
     607 | myGroup2   | M3                           |          100086 | t               | f                      | This mark is deleted |                  6051 |                         0 | 
     613 | myGroup1   | M4                           |          100111 | t               | f                      |                      |                  6089 |                        10 | 
     614 | myGroup1   | M5                           |          100121 | t               | f                      |                      |                  6095 |                         3 | 
     620 | myGroup1   | Before logged rollback to M4 |          100133 | t               | f                      |                      |                  6123 |                        28 | 
     622 | myGroup1   | STOP_%                       |          100161 | t               | f                      |                      |                  6143 |                         0 | 
     623 | myGroup2   | STOP_%                       |          100161 | t               | f                      |                      |                  6143 |                         0 | 
     634 | myGroup1   | Stop after rollback          |          100161 | t               | f                      |                      |                  6213 |                         0 | 
     635 | myGroup2   | Stop after rollback          |          100161 | t               | f                      |                      |                  6213 |                         0 | 
     636 | myGroup1   | Multi-1                      |          100161 | f               | f                      |                      |                  6227 |                           | 
     637 | myGroup2   | Multi-1                      |          100161 | f               | f                      |                      |                  6227 |                           | 
(10 rows)

select sequ_id,sequ_schema, sequ_name, regexp_replace(sequ_mark,E'\\d\\d\.\\d\\d\\.\\d\\d\\.\\d\\d\\d','%','g'), sequ_last_val, sequ_is_called from emaj.emaj_sequence order by sequ_id;
 sequ_id | sequ_schema |         sequ_name          |        regexp_replace        | sequ_last_val | sequ_is_called 
---------+-------------+----------------------------+------------------------------+---------------+----------------
    6031 | emajC       | myschema1_myTbl3_log_seq   | M3                           |            10 | t
    6034 | emaj        | myschema1_mytbl2_log_seq   | M3                           |             2 | t
    6035 | emajb       | myschema1_mytbl2b_log_seq  | M3                           |             1 | f
    6044 | myschema2   | myseq1                     | M3                           |          1003 | t
    6045 | myschema2   | myTbl3_col31_seq           | M3                           |            20 | t
    6046 | emaj        | myschema2_mytbl1_log_seq   | M3                           |            15 | t
    6047 | emaj        | myschema2_mytbl2_log_seq   | M3                           |             2 | t
    6048 | emajC       | myschema2_myTbl3_log_seq   | M3                           |            10 | t
    6049 | emaj        | myschema2_mytbl4_log_seq   | M3                           |             4 | t
    6050 | emaj        | otherPrefix4mytbl5_log_seq | M3                           |             4 | t
    6051 | emaj        | myschema2_mytbl6_log_seq   | M3                           |            14 | t
    6054 | emaj        | myschema2_mytbl1_log_seq   | RLBK_M2_%_START              |            15 | t
    6055 | emaj        | myschema2_mytbl2_log_seq   | RLBK_M2_%_START              |             2 | t
    6056 | emajC       | myschema2_myTbl3_log_seq   | RLBK_M2_%_START              |            10 | t
    6062 | emaj        | myschema2_mytbl1_log_seq   | RLBK_M2_%_DONE               |            15 | t
    6063 | emaj        | myschema2_mytbl2_log_seq   | RLBK_M2_%_DONE               |             2 | t
    6064 | emajC       | myschema2_myTbl3_log_seq   | RLBK_M2_%_DONE               |            10 | t
    6070 | emaj        | myschema2_mytbl1_log_seq   | RLBK_M3_%_START              |            15 | t
    6071 | emaj        | myschema2_mytbl2_log_seq   | RLBK_M3_%_START              |             2 | t
    6072 | emajC       | myschema2_myTbl3_log_seq   | RLBK_M3_%_START              |            10 | t
    6078 | emaj        | myschema2_mytbl1_log_seq   | RLBK_M3_%_DONE               |            15 | t
    6079 | emaj        | myschema2_mytbl2_log_seq   | RLBK_M3_%_DONE               |             2 | t
    6080 | emajC       | myschema2_myTbl3_log_seq   | RLBK_M3_%_DONE               |            10 | t
    6084 | myschema1   | myTbl3_col31_seq           | M4                           |            20 | t
    6085 | emajC       | myschema1_myTbl3_log_seq   | M4                           |            10 | t
    6086 | emaj        | myschema1_mytbl1_log_seq   | M4                           |            30 | t
    6087 | emaj        | myschema1_mytbl4_log_seq   | M4                           |             8 | t
    6088 | emaj        | myschema1_mytbl2_log_seq   | M4                           |             3 | t
    6089 | emajb       | myschema1_mytbl2b_log_seq  | M4                           |             1 | f
    6090 | myschema1   | myTbl3_col31_seq           | M5                           |            20 | t
    6091 | emajC       | myschema1_myTbl3_log_seq   | M5                           |            20 | t
    6092 | emaj        | myschema1_mytbl1_log_seq   | M5                           |            30 | t
    6093 | emaj        | myschema1_mytbl4_log_seq   | M5                           |             8 | t
    6094 | emaj        | myschema1_mytbl2_log_seq   | M5                           |             3 | t
    6095 | emajb       | myschema1_mytbl2b_log_seq  | M5                           |             1 | f
    6097 | emajC       | myschema1_myTbl3_log_seq   | M6                           |            20 | t
    6100 | emaj        | myschema1_mytbl2_log_seq   | M6                           |             3 | t
    6101 | emajb       | myschema1_mytbl2b_log_seq  | M6                           |             1 | f
    6104 | emaj        | myschema2_mytbl1_log_seq   | RLBK_M2_%_START              |            15 | t
    6105 | emaj        | myschema2_mytbl2_log_seq   | RLBK_M2_%_START              |             2 | t
    6106 | emajC       | myschema2_myTbl3_log_seq   | RLBK_M2_%_START              |            10 | t
    6112 | emaj        | myschema2_mytbl1_log_seq   | RLBK_M2_%_DONE               |            15 | t
    6113 | emaj        | myschema2_mytbl2_log_seq   | RLBK_M2_%_DONE               |             2 | t
    6114 | emajC       | myschema2_myTbl3_log_seq   | RLBK_M2_%_DONE               |            10 | t
    6118 | myschema1   | myTbl3_col31_seq           | Before logged rollback to M4 |            20 | t
    6119 | emajC       | myschema1_myTbl3_log_seq   | Before logged rollback to M4 |            20 | t
    6120 | emaj        | myschema1_mytbl1_log_seq   | Before logged rollback to M4 |            32 | t
    6121 | emaj        | myschema1_mytbl4_log_seq   | Before logged rollback to M4 |            12 | t
    6122 | emaj        | myschema1_mytbl2_log_seq   | Before logged rollback to M4 |             3 | t
    6123 | emajb       | myschema1_mytbl2b_log_seq  | Before logged rollback to M4 |             1 | f
    6130 | myschema1   | myTbl3_col31_seq           | STOP_%                       |            20 | t
    6131 | myschema2   | myseq1                     | STOP_%                       |          1004 | f
    6132 | myschema2   | myTbl3_col31_seq           | STOP_%                       |            20 | t
    6133 | emajC       | myschema1_myTbl3_log_seq   | STOP_%                       |            45 | t
    6134 | emaj        | myschema1_mytbl1_log_seq   | STOP_%                       |            33 | t
    6135 | emaj        | myschema1_mytbl4_log_seq   | STOP_%                       |            14 | t
    6136 | emaj        | myschema1_mytbl2_log_seq   | STOP_%                       |             3 | t
    6137 | emajb       | myschema1_mytbl2b_log_seq  | STOP_%                       |             1 | f
    6138 | emaj        | myschema2_mytbl1_log_seq   | STOP_%                       |            15 | t
    6139 | emaj        | myschema2_mytbl2_log_seq   | STOP_%                       |             2 | t
    6140 | emajC       | myschema2_myTbl3_log_seq   | STOP_%                       |            10 | t
    6141 | emaj        | myschema2_mytbl4_log_seq   | STOP_%                       |            10 | t
    6142 | emaj        | otherPrefix4mytbl5_log_seq | STOP_%                       |             7 | t
    6143 | emaj        | myschema2_mytbl6_log_seq   | STOP_%                       |            23 | t
    6161 | emajC       | myschema1_myTbl3_log_seq   | Multi-2                      |            45 | t
    6162 | emaj        | myschema1_mytbl1_log_seq   | Multi-2                      |            33 | t
    6163 | emaj        | myschema1_mytbl4_log_seq   | Multi-2                      |            14 | t
    6164 | emaj        | myschema1_mytbl2_log_seq   | Multi-2                      |             3 | t
    6165 | emajb       | myschema1_mytbl2b_log_seq  | Multi-2                      |             1 | f
    6166 | emaj        | myschema2_mytbl1_log_seq   | Multi-2                      |            15 | t
    6167 | emaj        | myschema2_mytbl2_log_seq   | Multi-2                      |             2 | t
    6168 | emajC       | myschema2_myTbl3_log_seq   | Multi-2                      |            10 | t
    6169 | emaj        | myschema2_mytbl4_log_seq   | Multi-2                      |            10 | t
    6170 | emaj        | otherPrefix4mytbl5_log_seq | Multi-2                      |             7 | t
    6171 | emaj        | myschema2_mytbl6_log_seq   | Multi-2                      |            23 | t
    6175 | emajC       | myschema1_myTbl3_log_seq   | RLBK_Multi-1_%_START         |            45 | t
    6176 | emaj        | myschema1_mytbl1_log_seq   | RLBK_Multi-1_%_START         |            33 | t
    6177 | emaj        | myschema1_mytbl4_log_seq   | RLBK_Multi-1_%_START         |            14 | t
    6178 | emaj        | myschema1_mytbl2_log_seq   | RLBK_Multi-1_%_START         |             3 | t
    6179 | emajb       | myschema1_mytbl2b_log_seq  | RLBK_Multi-1_%_START         |             1 | f
    6180 | emaj        | myschema2_mytbl1_log_seq   | RLBK_Multi-1_%_START         |            15 | t
    6181 | emaj        | myschema2_mytbl2_log_seq   | RLBK_Multi-1_%_START         |             2 | t
    6182 | emajC       | myschema2_myTbl3_log_seq   | RLBK_Multi-1_%_START         |            10 | t
    6183 | emaj        | myschema2_mytbl4_log_seq   | RLBK_Multi-1_%_START         |            10 | t
    6184 | emaj        | otherPrefix4mytbl5_log_seq | RLBK_Multi-1_%_START         |             7 | t
    6185 | emaj        | myschema2_mytbl6_log_seq   | RLBK_Multi-1_%_START         |            23 | t
    6189 | emajC       | myschema1_myTbl3_log_seq   | RLBK_Multi-1_%_DONE          |            45 | t
    6190 | emaj        | myschema1_mytbl1_log_seq   | RLBK_Multi-1_%_DONE          |            33 | t
    6191 | emaj        | myschema1_mytbl4_log_seq   | RLBK_Multi-1_%_DONE          |            14 | t
    6192 | emaj        | myschema1_mytbl2_log_seq   | RLBK_Multi-1_%_DONE          |             3 | t
    6193 | emajb       | myschema1_mytbl2b_log_seq  | RLBK_Multi-1_%_DONE          |             1 | f
    6194 | emaj        | myschema2_mytbl1_log_seq   | RLBK_Multi-1_%_DONE          |            15 | t
    6195 | emaj        | myschema2_mytbl2_log_seq   | RLBK_Multi-1_%_DONE          |             2 | t
    6196 | emajC       | myschema2_myTbl3_log_seq   | RLBK_Multi-1_%_DONE          |            10 | t
    6197 | emaj        | myschema2_mytbl4_log_seq   | RLBK_Multi-1_%_DONE          |            10 | t
    6198 | emaj        | otherPrefix4mytbl5_log_seq | RLBK_Multi-1_%_DONE          |             7 | t
    6199 | emaj        | myschema2_mytbl6_log_seq   | RLBK_Multi-1_%_DONE          |            23 | t
    6200 | myschema1   | myTbl3_col31_seq           | Stop after rollback          |            20 | t
    6201 | myschema2   | myseq1                     | Stop after rollback          |          1004 | f
    6202 | myschema2   | myTbl3_col31_seq           | Stop after rollback          |            20 | t
    6203 | emajC       | myschema1_myTbl3_log_seq   | Stop after rollback          |            45 | t
    6204 | emaj        | myschema1_mytbl1_log_seq   | Stop after rollback          |            33 | t
    6205 | emaj        | myschema1_mytbl4_log_seq   | Stop after rollback          |            14 | t
    6206 | emaj        | myschema1_mytbl2_log_seq   | Stop after rollback          |             3 | t
    6207 | emajb       | myschema1_mytbl2b_log_seq  | Stop after rollback          |             1 | f
    6208 | emaj        | myschema2_mytbl1_log_seq   | Stop after rollback          |            15 | t
    6209 | emaj        | myschema2_mytbl2_log_seq   | Stop after rollback          |             2 | t
    6210 | emajC       | myschema2_myTbl3_log_seq   | Stop after rollback          |            10 | t
    6211 | emaj        | myschema2_mytbl4_log_seq   | Stop after rollback          |            10 | t
    6212 | emaj        | otherPrefix4mytbl5_log_seq | Stop after rollback          |             7 | t
    6213 | emaj        | myschema2_mytbl6_log_seq   | Stop after rollback          |            23 | t
    6214 | myschema1   | myTbl3_col31_seq           | Multi-1                      |            20 | t
    6215 | myschema2   | myseq1                     | Multi-1                      |          1004 | f
    6216 | myschema2   | myTbl3_col31_seq           | Multi-1                      |            20 | t
    6217 | emajC       | myschema1_myTbl3_log_seq   | Multi-1                      |            45 | t
    6218 | emaj        | myschema1_mytbl1_log_seq   | Multi-1                      |            33 | t
    6219 | emaj        | myschema1_mytbl4_log_seq   | Multi-1                      |            14 | t
    6220 | emaj        | myschema1_mytbl2_log_seq   | Multi-1                      |             3 | t
    6221 | emajb       | myschema1_mytbl2b_log_seq  | Multi-1                      |             1 | f
    6222 | emaj        | myschema2_mytbl1_log_seq   | Multi-1                      |            15 | t
    6223 | emaj        | myschema2_mytbl2_log_seq   | Multi-1                      |             2 | t
    6224 | emajC       | myschema2_myTbl3_log_seq   | Multi-1                      |            10 | t
    6225 | emaj        | myschema2_mytbl4_log_seq   | Multi-1                      |            10 | t
    6226 | emaj        | otherPrefix4mytbl5_log_seq | Multi-1                      |             7 | t
    6227 | emaj        | myschema2_mytbl6_log_seq   | Multi-1                      |            23 | t
(125 rows)

select sqhl_schema, sqhl_table, sqhl_begin_mark_id, sqhl_end_mark_id, sqhl_hole_size from emaj.emaj_seq_hole order by 1,2,3;
 sqhl_schema | sqhl_table | sqhl_begin_mark_id | sqhl_end_mark_id | sqhl_hole_size 
-------------+------------+--------------------+------------------+----------------
 myschema1   | mytbl1     |                614 |              619 |              1
 myschema1   | mytbl4     |                614 |              619 |              2
 myschema2   | mytbl4     |                607 |              618 |              6
 myschema2   | mytbl5     |                607 |              618 |              3
 myschema2   | mytbl6     |                607 |              618 |              9
(5 rows)

-- log tables
select col11, col12, col13, emaj_verb, emaj_tuple, emaj_gid from emaj.mySchema1_myTbl1_log order by emaj_gid, emaj_tuple desc;
 col11 |   col12    | col13 | emaj_verb | emaj_tuple | emaj_gid 
-------+------------+-------+-----------+------------+----------
     1 | Step 6     | \x01  | INS       | NEW        |   100131
     1 | Step 6     | \x01  | DEL       | OLD        |   100154
(2 rows)

select col21, col22, col23, emaj_verb, emaj_tuple, emaj_gid from emaj.mySchema1_myTbl2_log order by emaj_gid, emaj_tuple desc;
 col21 | col22 | col23 | emaj_verb | emaj_tuple | emaj_gid 
-------+-------+-------+-----------+------------+----------
(0 rows)

select col20, col21, emaj_verb, emaj_tuple, emaj_gid from emajb.mySchema1_myTbl2b_log order by emaj_gid, emaj_tuple desc;
 col20 | col21 | emaj_verb | emaj_tuple | emaj_gid 
-------+-------+-----------+------------+----------
(0 rows)

select col31, col33, emaj_verb, emaj_tuple, emaj_gid from "emajC"."myschema1_myTbl3_log" order by emaj_gid, emaj_tuple desc;
 col31 | col33 | emaj_verb | emaj_tuple | emaj_gid 
-------+-------+-----------+------------+----------
    11 | 10.00 | UPD       | OLD        |   100112
    11 |  5.00 | UPD       | NEW        |   100112
    12 | 10.00 | UPD       | OLD        |   100113
    12 |  5.00 | UPD       | NEW        |   100113
    13 | 10.00 | UPD       | OLD        |   100114
    13 |  5.00 | UPD       | NEW        |   100114
    14 | 10.00 | UPD       | OLD        |   100115
    14 |  5.00 | UPD       | NEW        |   100115
    15 | 10.00 | UPD       | OLD        |   100116
    15 |  5.00 | UPD       | NEW        |   100116
    16 | 10.00 | UPD       | OLD        |   100117
    16 |  5.00 | UPD       | NEW        |   100117
    17 | 10.00 | UPD       | OLD        |   100118
    17 |  5.00 | UPD       | NEW        |   100118
    18 | 10.00 | UPD       | OLD        |   100119
    18 |  5.00 | UPD       | NEW        |   100119
    19 | 10.00 | UPD       | OLD        |   100120
    19 |  5.00 | UPD       | NEW        |   100120
    20 | 10.00 | UPD       | OLD        |   100121
    20 |  5.00 | UPD       | NEW        |   100121
    11 |  5.00 | DEL       | OLD        |   100134
    16 |  5.00 | DEL       | OLD        |   100135
    14 |  5.00 | DEL       | OLD        |   100136
    17 |  5.00 | DEL       | OLD        |   100137
    15 |  5.00 | DEL       | OLD        |   100138
    19 |  5.00 | DEL       | OLD        |   100139
    20 |  5.00 | DEL       | OLD        |   100140
    12 |  5.00 | DEL       | OLD        |   100141
    18 |  5.00 | DEL       | OLD        |   100142
    13 |  5.00 | DEL       | OLD        |   100143
    11 | 10.00 | INS       | NEW        |   100144
    16 | 10.00 | INS       | NEW        |   100145
    14 | 10.00 | INS       | NEW        |   100146
    17 | 10.00 | INS       | NEW        |   100147
    15 | 10.00 | INS       | NEW        |   100148
    19 | 10.00 | INS       | NEW        |   100149
    20 | 10.00 | INS       | NEW        |   100150
    12 | 10.00 | INS       | NEW        |   100151
    18 | 10.00 | INS       | NEW        |   100152
    13 | 10.00 | INS       | NEW        |   100153
    14 | 10.00 | DEL       | OLD        |   100157
    15 | 10.00 | DEL       | OLD        |   100158
    16 | 10.00 | DEL       | OLD        |   100159
    17 | 10.00 | DEL       | OLD        |   100160
    18 | 10.00 | DEL       | OLD        |   100161
(45 rows)

select col41, col42, col43, col44, col45, emaj_verb, emaj_tuple, emaj_gid from emaj.mySchema1_myTbl4_log order by emaj_gid, emaj_tuple desc;
 col41 | col42 | col43 | col44 |   col45    | emaj_verb | emaj_tuple | emaj_gid 
-------+-------+-------+-------+------------+-----------+------------+----------
    11 |       |     1 |     1 | Step 6     | INS       | NEW        |   100132
    12 |       |     1 |     1 | Step 6     | INS       | NEW        |   100133
    11 |       |     1 |     1 | Step 6     | DEL       | OLD        |   100155
    12 |       |     1 |     1 | Step 6     | DEL       | OLD        |   100156
(4 rows)

select col11, col12, col13, emaj_verb, emaj_tuple, emaj_gid from emaj.mySchema2_myTbl1_log order by emaj_gid, emaj_tuple desc;
 col11 | col12 | col13 | emaj_verb | emaj_tuple | emaj_gid 
-------+-------+-------+-----------+------------+----------
(0 rows)

select col21, col22, col23, emaj_verb, emaj_tuple, emaj_gid from emaj.mySchema2_myTbl2_log order by emaj_gid, emaj_tuple desc;
 col21 | col22 | col23 | emaj_verb | emaj_tuple | emaj_gid 
-------+-------+-------+-----------+------------+----------
(0 rows)

select col31, col33, emaj_verb, emaj_tuple, emaj_gid from "emajC"."myschema2_myTbl3_log" order by emaj_gid, emaj_tuple desc;
 col31 | col33 | emaj_verb | emaj_tuple | emaj_gid 
-------+-------+-----------+------------+----------
(0 rows)

select col41, col42, col43, col44, col45, emaj_verb, emaj_tuple, emaj_gid from emaj.mySchema2_myTbl4_log order by emaj_gid, emaj_tuple desc;
 col41 | col42 | col43 | col44 | col45 | emaj_verb | emaj_tuple | emaj_gid 
-------+-------+-------+-------+-------+-----------+------------+----------
(0 rows)

select col51, col52, col53, col54, emaj_verb, emaj_tuple, emaj_gid from emaj."otherPrefix4mytbl5_log" order by emaj_gid, emaj_tuple desc;
 col51 | col52 | col53 | col54 | emaj_verb | emaj_tuple | emaj_gid 
-------+-------+-------+-------+-----------+------------+----------
(0 rows)

select col61, col62, col63, col64, col65, col66, emaj_verb, emaj_tuple, emaj_gid from emaj.mySchema2_myTbl6_log order by emaj_gid, emaj_tuple desc;
 col61 | col62 | col63 | col64 | col65 | col66 | emaj_verb | emaj_tuple | emaj_gid 
-------+-------+-------+-------+-------+-------+-----------+------------+----------
(0 rows)

-----------------------------
-- Step 9 : test the emaj_alter_group function with non rollbackable phil's group#3, group
-----------------------------
select emaj.emaj_create_group('phil''s group#3",',false);
NOTICE:  table "phil's schema3_myTbl2\_log" does not exist, skipping
CONTEXT:  SQL statement "DROP TABLE IF EXISTS emaj."phil's schema3_myTbl2\_log""
PL/pgSQL function emaj._create_tbl(emaj.emaj_group_def,text,boolean,text) line 69 at EXECUTE statement
SQL statement "SELECT emaj._create_tbl(r_grpdef, v_groupName, v_isRollbackable, v_defTsp)"
PL/pgSQL function emaj.emaj_create_group(text,boolean) line 64 at PERFORM
NOTICE:  trigger "emaj_log_trg" for table "phil's schema3.myTbl2\" does not exist, skipping
CONTEXT:  SQL statement "DROP TRIGGER IF EXISTS emaj_log_trg ON "phil's schema3"."myTbl2\""
PL/pgSQL function emaj._create_tbl(emaj.emaj_group_def,text,boolean,text) line 123 at EXECUTE statement
SQL statement "SELECT emaj._create_tbl(r_grpdef, v_groupName, v_isRollbackable, v_defTsp)"
PL/pgSQL function emaj.emaj_create_group(text,boolean) line 64 at PERFORM
NOTICE:  trigger "emaj_trunc_trg" for table "phil's schema3.myTbl2\" does not exist, skipping
CONTEXT:  SQL statement "DROP TRIGGER IF EXISTS emaj_trunc_trg ON "phil's schema3"."myTbl2\""
PL/pgSQL function emaj._create_tbl(emaj.emaj_group_def,text,boolean,text) line 130 at EXECUTE statement
SQL statement "SELECT emaj._create_tbl(r_grpdef, v_groupName, v_isRollbackable, v_defTsp)"
PL/pgSQL function emaj.emaj_create_group(text,boolean) line 64 at PERFORM
NOTICE:  table "phil's schema3_phil's tbl1_log" does not exist, skipping
CONTEXT:  SQL statement "DROP TABLE IF EXISTS "emaj #'3"."phil's schema3_phil's tbl1_log""
PL/pgSQL function emaj._create_tbl(emaj.emaj_group_def,text,boolean,text) line 69 at EXECUTE statement
SQL statement "SELECT emaj._create_tbl(r_grpdef, v_groupName, v_isRollbackable, v_defTsp)"
PL/pgSQL function emaj.emaj_create_group(text,boolean) line 64 at PERFORM
NOTICE:  trigger "emaj_log_trg" for table "phil's schema3.phil's tbl1" does not exist, skipping
CONTEXT:  SQL statement "DROP TRIGGER IF EXISTS emaj_log_trg ON "phil's schema3"."phil's tbl1""
PL/pgSQL function emaj._create_tbl(emaj.emaj_group_def,text,boolean,text) line 123 at EXECUTE statement
SQL statement "SELECT emaj._create_tbl(r_grpdef, v_groupName, v_isRollbackable, v_defTsp)"
PL/pgSQL function emaj.emaj_create_group(text,boolean) line 64 at PERFORM
NOTICE:  trigger "emaj_trunc_trg" for table "phil's schema3.phil's tbl1" does not exist, skipping
CONTEXT:  SQL statement "DROP TRIGGER IF EXISTS emaj_trunc_trg ON "phil's schema3"."phil's tbl1""
PL/pgSQL function emaj._create_tbl(emaj.emaj_group_def,text,boolean,text) line 130 at EXECUTE statement
SQL statement "SELECT emaj._create_tbl(r_grpdef, v_groupName, v_isRollbackable, v_defTsp)"
PL/pgSQL function emaj.emaj_create_group(text,boolean) line 64 at PERFORM
 emaj_create_group 
-------------------
                 4
(1 row)

reset role;
alter table "phil's schema3"."phil's tbl1" alter column "phil's col12" type char(11);
set role emaj_regression_tests_adm_user;
update emaj.emaj_group_def set grpdef_priority = 1 where grpdef_schema = 'phil''s schema3' and grpdef_tblseq = E'myTbl2\\';
select emaj.emaj_alter_group('phil''s group#3",');
NOTICE:  table "phil's schema3_phil's tbl1_log" does not exist, skipping
CONTEXT:  SQL statement "DROP TABLE IF EXISTS "emaj #'3"."phil's schema3_phil's tbl1_log""
PL/pgSQL function emaj._create_tbl(emaj.emaj_group_def,text,boolean,text) line 69 at EXECUTE statement
SQL statement "SELECT emaj._create_tbl(r_grpdef, v_groupName, v_isRollbackable, v_defTsp)"
PL/pgSQL function emaj.emaj_alter_group(text) line 189 at PERFORM
NOTICE:  trigger "emaj_log_trg" for table "phil's schema3.phil's tbl1" does not exist, skipping
CONTEXT:  SQL statement "DROP TRIGGER IF EXISTS emaj_log_trg ON "phil's schema3"."phil's tbl1""
PL/pgSQL function emaj._create_tbl(emaj.emaj_group_def,text,boolean,text) line 123 at EXECUTE statement
SQL statement "SELECT emaj._create_tbl(r_grpdef, v_groupName, v_isRollbackable, v_defTsp)"
PL/pgSQL function emaj.emaj_alter_group(text) line 189 at PERFORM
NOTICE:  trigger "emaj_trunc_trg" for table "phil's schema3.phil's tbl1" does not exist, skipping
CONTEXT:  SQL statement "DROP TRIGGER IF EXISTS emaj_trunc_trg ON "phil's schema3"."phil's tbl1""
PL/pgSQL function emaj._create_tbl(emaj.emaj_group_def,text,boolean,text) line 130 at EXECUTE statement
SQL statement "SELECT emaj._create_tbl(r_grpdef, v_groupName, v_isRollbackable, v_defTsp)"
PL/pgSQL function emaj.emaj_alter_group(text) line 189 at PERFORM
 emaj_alter_group 
------------------
                4
(1 row)

--select rel_priority from emaj.emaj_relation where rel_schema = 'phil''s schema3' and rel_tblseq = 'phil''s tbl1';
select emaj.emaj_start_group('phil''s group#3",','M1_after_alter_group');
 emaj_start_group 
------------------
                4
(1 row)

select emaj.emaj_stop_group('phil''s group#3",');
 emaj_stop_group 
-----------------
               4
(1 row)

reset role;
alter table "phil's schema3"."phil's tbl1" alter column "phil's col12" type char(10);
set role emaj_regression_tests_adm_user;
update emaj.emaj_group_def set grpdef_priority = NULL where grpdef_schema = 'phil''s schema3' and grpdef_tblseq = E'myTbl2\\';
select emaj.emaj_alter_group('phil''s group#3",');
NOTICE:  table "phil's schema3_phil's tbl1_log" does not exist, skipping
CONTEXT:  SQL statement "DROP TABLE IF EXISTS "emaj #'3"."phil's schema3_phil's tbl1_log""
PL/pgSQL function emaj._create_tbl(emaj.emaj_group_def,text,boolean,text) line 69 at EXECUTE statement
SQL statement "SELECT emaj._create_tbl(r_grpdef, v_groupName, v_isRollbackable, v_defTsp)"
PL/pgSQL function emaj.emaj_alter_group(text) line 189 at PERFORM
NOTICE:  trigger "emaj_log_trg" for table "phil's schema3.phil's tbl1" does not exist, skipping
CONTEXT:  SQL statement "DROP TRIGGER IF EXISTS emaj_log_trg ON "phil's schema3"."phil's tbl1""
PL/pgSQL function emaj._create_tbl(emaj.emaj_group_def,text,boolean,text) line 123 at EXECUTE statement
SQL statement "SELECT emaj._create_tbl(r_grpdef, v_groupName, v_isRollbackable, v_defTsp)"
PL/pgSQL function emaj.emaj_alter_group(text) line 189 at PERFORM
NOTICE:  trigger "emaj_trunc_trg" for table "phil's schema3.phil's tbl1" does not exist, skipping
CONTEXT:  SQL statement "DROP TRIGGER IF EXISTS emaj_trunc_trg ON "phil's schema3"."phil's tbl1""
PL/pgSQL function emaj._create_tbl(emaj.emaj_group_def,text,boolean,text) line 130 at EXECUTE statement
SQL statement "SELECT emaj._create_tbl(r_grpdef, v_groupName, v_isRollbackable, v_defTsp)"
PL/pgSQL function emaj.emaj_alter_group(text) line 189 at PERFORM
 emaj_alter_group 
------------------
                4
(1 row)

select emaj.emaj_drop_group('phil''s group#3",');
 emaj_drop_group 
-----------------
               4
(1 row)

-----------------------------
-- Step 10 : for phil''s group#3", recreate the group as rollbackable, update tables, 
--           rename a mark, then delete 2 marks then delete all before a mark 
-----------------------------
-- prepare phil's group#3, group
--
reset role;
alter table "phil's schema3"."myTbl2\" add primary key (col21);
NOTICE:  ALTER TABLE / ADD PRIMARY KEY will create implicit index "myTbl2\_pkey" for table "myTbl2\"
set role emaj_regression_tests_adm_user;
select emaj.emaj_create_group('phil''s group#3",',true);
NOTICE:  table "phil's schema3_myTbl2\_log" does not exist, skipping
CONTEXT:  SQL statement "DROP TABLE IF EXISTS emaj."phil's schema3_myTbl2\_log""
PL/pgSQL function emaj._create_tbl(emaj.emaj_group_def,text,boolean,text) line 69 at EXECUTE statement
SQL statement "SELECT emaj._create_tbl(r_grpdef, v_groupName, v_isRollbackable, v_defTsp)"
PL/pgSQL function emaj.emaj_create_group(text,boolean) line 64 at PERFORM
NOTICE:  trigger "emaj_log_trg" for table "phil's schema3.myTbl2\" does not exist, skipping
CONTEXT:  SQL statement "DROP TRIGGER IF EXISTS emaj_log_trg ON "phil's schema3"."myTbl2\""
PL/pgSQL function emaj._create_tbl(emaj.emaj_group_def,text,boolean,text) line 123 at EXECUTE statement
SQL statement "SELECT emaj._create_tbl(r_grpdef, v_groupName, v_isRollbackable, v_defTsp)"
PL/pgSQL function emaj.emaj_create_group(text,boolean) line 64 at PERFORM
NOTICE:  trigger "emaj_trunc_trg" for table "phil's schema3.myTbl2\" does not exist, skipping
CONTEXT:  SQL statement "DROP TRIGGER IF EXISTS emaj_trunc_trg ON "phil's schema3"."myTbl2\""
PL/pgSQL function emaj._create_tbl(emaj.emaj_group_def,text,boolean,text) line 130 at EXECUTE statement
SQL statement "SELECT emaj._create_tbl(r_grpdef, v_groupName, v_isRollbackable, v_defTsp)"
PL/pgSQL function emaj.emaj_create_group(text,boolean) line 64 at PERFORM
NOTICE:  table "phil's schema3_phil's tbl1_log" does not exist, skipping
CONTEXT:  SQL statement "DROP TABLE IF EXISTS "emaj #'3"."phil's schema3_phil's tbl1_log""
PL/pgSQL function emaj._create_tbl(emaj.emaj_group_def,text,boolean,text) line 69 at EXECUTE statement
SQL statement "SELECT emaj._create_tbl(r_grpdef, v_groupName, v_isRollbackable, v_defTsp)"
PL/pgSQL function emaj.emaj_create_group(text,boolean) line 64 at PERFORM
NOTICE:  trigger "emaj_log_trg" for table "phil's schema3.phil's tbl1" does not exist, skipping
CONTEXT:  SQL statement "DROP TRIGGER IF EXISTS emaj_log_trg ON "phil's schema3"."phil's tbl1""
PL/pgSQL function emaj._create_tbl(emaj.emaj_group_def,text,boolean,text) line 123 at EXECUTE statement
SQL statement "SELECT emaj._create_tbl(r_grpdef, v_groupName, v_isRollbackable, v_defTsp)"
PL/pgSQL function emaj.emaj_create_group(text,boolean) line 64 at PERFORM
NOTICE:  trigger "emaj_trunc_trg" for table "phil's schema3.phil's tbl1" does not exist, skipping
CONTEXT:  SQL statement "DROP TRIGGER IF EXISTS emaj_trunc_trg ON "phil's schema3"."phil's tbl1""
PL/pgSQL function emaj._create_tbl(emaj.emaj_group_def,text,boolean,text) line 130 at EXECUTE statement
SQL statement "SELECT emaj._create_tbl(r_grpdef, v_groupName, v_isRollbackable, v_defTsp)"
PL/pgSQL function emaj.emaj_create_group(text,boolean) line 64 at PERFORM
WARNING:  _check_fk_groups: Foreign key mytbl2_col21_fkey, from table phil's schema3.myTbl2\, references phil's schema3.mytbl4 that is outside groups (phil's group#3",).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups (array[v_groupName])"
PL/pgSQL function emaj.emaj_create_group(text,boolean) line 84 at PERFORM
WARNING:  _check_fk_groups: table phil's schema3.phil's tbl1 is referenced by foreign key mytbl4_col44_fkey from table phil's schema3.mytbl4 that is outside groups (phil's group#3",).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups (array[v_groupName])"
PL/pgSQL function emaj.emaj_create_group(text,boolean) line 84 at PERFORM
 emaj_create_group 
-------------------
                 4
(1 row)

select emaj.emaj_start_group('phil''s group#3",','M1_rollbackable');
WARNING:  _check_fk_groups: Foreign key mytbl2_col21_fkey, from table phil's schema3.myTbl2\, references phil's schema3.mytbl4 that is outside groups (phil's group#3",).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._start_groups(text[],text,boolean,boolean) line 36 at PERFORM
SQL statement "SELECT emaj._start_groups(array[v_groupName], v_mark, false, v_resetLog)"
PL/pgSQL function emaj.emaj_start_group(text,text,boolean) line 17 at SQL statement
WARNING:  _check_fk_groups: table phil's schema3.phil's tbl1 is referenced by foreign key mytbl4_col44_fkey from table phil's schema3.mytbl4 that is outside groups (phil's group#3",).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._start_groups(text[],text,boolean,boolean) line 36 at PERFORM
SQL statement "SELECT emaj._start_groups(array[v_groupName], v_mark, false, v_resetLog)"
PL/pgSQL function emaj.emaj_start_group(text,text,boolean) line 17 at SQL statement
 emaj_start_group 
------------------
                4
(1 row)

--
set search_path=public,"phil's schema3";
--
insert into "phil's tbl1" select i, 'AB''C', E'\\014'::bytea from generate_series (1,31) as i;
update "phil's tbl1" set "phil\s col13" = E'\\034'::bytea where "phil's col11" <= 3;
update "phil's tbl1" set "phil\s col13" = E'\\034'''::bytea where "phil's col11" between 18 and 22;
insert into myTbl4 (col41) values (1);
insert into myTbl4 (col41) values (2);
insert into "myTbl2\" values (1,'ABC','2010-12-31');
delete from "phil's tbl1" where "phil's col11" > 20;
insert into "myTbl2\" values (2,'DEF',NULL);
select nextval(E'"phil''s schema3"."phil''s seq\\1"');
 nextval 
---------
    1000
(1 row)

--
select emaj.emaj_set_mark_group('phil''s group#3",','M2_rollbackable');
 emaj_set_mark_group 
---------------------
                   4
(1 row)

select emaj.emaj_set_mark_group('phil''s group#3",','M2_again!');
 emaj_set_mark_group 
---------------------
                   4
(1 row)

--
delete from "phil's tbl1" where "phil's col11" = 10;
update "phil's tbl1" set "phil's col12" = 'DEF' where "phil's col11" <= 2;
select nextval(E'"phil''s schema3"."phil''s seq\\1"');
 nextval 
---------
    1001
(1 row)

--
select emaj.emaj_set_mark_groups(array['phil''s group#3",'],'phil''s mark #1');
 emaj_set_mark_groups 
----------------------
                    4
(1 row)

select emaj.emaj_comment_mark_group('phil''s group#3",','phil''s mark #1','Third mark set');
 emaj_comment_mark_group 
-------------------------
 
(1 row)

--
select emaj.emaj_rename_mark_group('phil''s group#3",','phil''s mark #1','phil''s mark #3');
 emaj_rename_mark_group 
------------------------
 
(1 row)

-- 
select emaj.emaj_delete_mark_group('phil''s group#3",','M2_again!');
 emaj_delete_mark_group 
------------------------
                      1
(1 row)

--
select * from emaj.emaj_log_stat_group('phil''s group#3",','','');
    stat_group    |  stat_schema   | stat_table  | stat_rows 
------------------+----------------+-------------+-----------
 phil's group#3", | phil's schema3 | myTbl2\     |         2
 phil's group#3", | phil's schema3 | phil's tbl1 |        53
(2 rows)

select * from emaj.emaj_detailed_log_stat_group('phil''s group#3",','phil''s mark #3','');
 stat_group | stat_schema | stat_table | stat_role | stat_verb | stat_rows 
------------+-------------+------------+-----------+-----------+-----------
(0 rows)

--
select emaj.emaj_logged_rollback_group('phil''s group#3",','phil''s mark #3');
WARNING:  _check_fk_groups: Foreign key mytbl2_col21_fkey, from table phil's schema3.myTbl2\, references phil's schema3.mytbl4 that is outside groups (phil's group#3",).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._rlbk_init(text[],text,boolean,integer,boolean) line 66 at PERFORM
SQL statement "SELECT emaj._rlbk_init(v_groupNames, v_mark, v_isLoggedRlbk, 1, v_multiGroup)"
PL/pgSQL function emaj._rlbk_groups(text[],text,boolean,boolean) line 20 at SQL statement
PL/pgSQL function emaj.emaj_logged_rollback_group(text,text) line 11 at RETURN
WARNING:  _check_fk_groups: table phil's schema3.phil's tbl1 is referenced by foreign key mytbl4_col44_fkey from table phil's schema3.mytbl4 that is outside groups (phil's group#3",).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._rlbk_init(text[],text,boolean,integer,boolean) line 66 at PERFORM
SQL statement "SELECT emaj._rlbk_init(v_groupNames, v_mark, v_isLoggedRlbk, 1, v_multiGroup)"
PL/pgSQL function emaj._rlbk_groups(text[],text,boolean,boolean) line 20 at SQL statement
PL/pgSQL function emaj.emaj_logged_rollback_group(text,text) line 11 at RETURN
 emaj_logged_rollback_group 
----------------------------
                          2
(1 row)

select emaj.emaj_rollback_group('phil''s group#3",','phil''s mark #3');
WARNING:  _check_fk_groups: Foreign key mytbl2_col21_fkey, from table phil's schema3.myTbl2\, references phil's schema3.mytbl4 that is outside groups (phil's group#3",).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._rlbk_init(text[],text,boolean,integer,boolean) line 66 at PERFORM
SQL statement "SELECT emaj._rlbk_init(v_groupNames, v_mark, v_isLoggedRlbk, 1, v_multiGroup)"
PL/pgSQL function emaj._rlbk_groups(text[],text,boolean,boolean) line 20 at SQL statement
PL/pgSQL function emaj.emaj_rollback_group(text,text) line 7 at RETURN
WARNING:  _check_fk_groups: table phil's schema3.phil's tbl1 is referenced by foreign key mytbl4_col44_fkey from table phil's schema3.mytbl4 that is outside groups (phil's group#3",).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._rlbk_init(text[],text,boolean,integer,boolean) line 66 at PERFORM
SQL statement "SELECT emaj._rlbk_init(v_groupNames, v_mark, v_isLoggedRlbk, 1, v_multiGroup)"
PL/pgSQL function emaj._rlbk_groups(text[],text,boolean,boolean) line 20 at SQL statement
PL/pgSQL function emaj.emaj_rollback_group(text,text) line 7 at RETURN
 emaj_rollback_group 
---------------------
                   2
(1 row)

-----------------------------
-- Checking step 10
-----------------------------
-- emaj tables
select mark_id, mark_group, regexp_replace(mark_name,E'\\d\\d\.\\d\\d\\.\\d\\d\\.\\d\\d\\d','%','g'), mark_global_seq, mark_is_deleted, mark_is_rlbk_protected, mark_comment, mark_last_sequence_id, mark_log_rows_before_next, mark_logged_rlbk_target_mark from emaj.emaj_mark order by mark_id;
 mark_id |    mark_group    |        regexp_replace        | mark_global_seq | mark_is_deleted | mark_is_rlbk_protected |     mark_comment     | mark_last_sequence_id | mark_log_rows_before_next | mark_logged_rlbk_target_mark 
---------+------------------+------------------------------+-----------------+-----------------+------------------------+----------------------+-----------------------+---------------------------+------------------------------
     607 | myGroup2         | M3                           |          100086 | t               | f                      | This mark is deleted |                  6051 |                         0 | 
     613 | myGroup1         | M4                           |          100111 | t               | f                      |                      |                  6089 |                        10 | 
     614 | myGroup1         | M5                           |          100121 | t               | f                      |                      |                  6095 |                         3 | 
     620 | myGroup1         | Before logged rollback to M4 |          100133 | t               | f                      |                      |                  6123 |                        28 | 
     622 | myGroup1         | STOP_%                       |          100161 | t               | f                      |                      |                  6143 |                         0 | 
     623 | myGroup2         | STOP_%                       |          100161 | t               | f                      |                      |                  6143 |                         0 | 
     634 | myGroup1         | Stop after rollback          |          100161 | t               | f                      |                      |                  6213 |                         0 | 
     635 | myGroup2         | Stop after rollback          |          100161 | t               | f                      |                      |                  6213 |                         0 | 
     636 | myGroup1         | Multi-1                      |          100161 | f               | f                      |                      |                  6227 |                           | 
     637 | myGroup2         | Multi-1                      |          100161 | f               | f                      |                      |                  6227 |                           | 
     643 | phil's group#3", | M1_rollbackable              |          100161 | f               | f                      |                      |                  6253 |                        52 | 
     644 | phil's group#3", | M2_rollbackable              |          100213 | f               | f                      |                      |                  6257 |                         3 | 
     646 | phil's group#3", | phil's mark #3               |          100216 | f               | f                      | Third mark set       |                  6265 |                           | 
(13 rows)

select sequ_id,sequ_schema, sequ_name, regexp_replace(sequ_mark,E'\\d\\d\.\\d\\d\\.\\d\\d\\.\\d\\d\\d','%','g'), sequ_last_val, sequ_is_called from emaj.emaj_sequence order by sequ_id;
 sequ_id |  sequ_schema   |             sequ_name              |        regexp_replace        | sequ_last_val | sequ_is_called 
---------+----------------+------------------------------------+------------------------------+---------------+----------------
    6031 | emajC          | myschema1_myTbl3_log_seq           | M3                           |            10 | t
    6034 | emaj           | myschema1_mytbl2_log_seq           | M3                           |             2 | t
    6035 | emajb          | myschema1_mytbl2b_log_seq          | M3                           |             1 | f
    6044 | myschema2      | myseq1                             | M3                           |          1003 | t
    6045 | myschema2      | myTbl3_col31_seq                   | M3                           |            20 | t
    6046 | emaj           | myschema2_mytbl1_log_seq           | M3                           |            15 | t
    6047 | emaj           | myschema2_mytbl2_log_seq           | M3                           |             2 | t
    6048 | emajC          | myschema2_myTbl3_log_seq           | M3                           |            10 | t
    6049 | emaj           | myschema2_mytbl4_log_seq           | M3                           |             4 | t
    6050 | emaj           | otherPrefix4mytbl5_log_seq         | M3                           |             4 | t
    6051 | emaj           | myschema2_mytbl6_log_seq           | M3                           |            14 | t
    6054 | emaj           | myschema2_mytbl1_log_seq           | RLBK_M2_%_START              |            15 | t
    6055 | emaj           | myschema2_mytbl2_log_seq           | RLBK_M2_%_START              |             2 | t
    6056 | emajC          | myschema2_myTbl3_log_seq           | RLBK_M2_%_START              |            10 | t
    6062 | emaj           | myschema2_mytbl1_log_seq           | RLBK_M2_%_DONE               |            15 | t
    6063 | emaj           | myschema2_mytbl2_log_seq           | RLBK_M2_%_DONE               |             2 | t
    6064 | emajC          | myschema2_myTbl3_log_seq           | RLBK_M2_%_DONE               |            10 | t
    6070 | emaj           | myschema2_mytbl1_log_seq           | RLBK_M3_%_START              |            15 | t
    6071 | emaj           | myschema2_mytbl2_log_seq           | RLBK_M3_%_START              |             2 | t
    6072 | emajC          | myschema2_myTbl3_log_seq           | RLBK_M3_%_START              |            10 | t
    6078 | emaj           | myschema2_mytbl1_log_seq           | RLBK_M3_%_DONE               |            15 | t
    6079 | emaj           | myschema2_mytbl2_log_seq           | RLBK_M3_%_DONE               |             2 | t
    6080 | emajC          | myschema2_myTbl3_log_seq           | RLBK_M3_%_DONE               |            10 | t
    6084 | myschema1      | myTbl3_col31_seq                   | M4                           |            20 | t
    6085 | emajC          | myschema1_myTbl3_log_seq           | M4                           |            10 | t
    6086 | emaj           | myschema1_mytbl1_log_seq           | M4                           |            30 | t
    6087 | emaj           | myschema1_mytbl4_log_seq           | M4                           |             8 | t
    6088 | emaj           | myschema1_mytbl2_log_seq           | M4                           |             3 | t
    6089 | emajb          | myschema1_mytbl2b_log_seq          | M4                           |             1 | f
    6090 | myschema1      | myTbl3_col31_seq                   | M5                           |            20 | t
    6091 | emajC          | myschema1_myTbl3_log_seq           | M5                           |            20 | t
    6092 | emaj           | myschema1_mytbl1_log_seq           | M5                           |            30 | t
    6093 | emaj           | myschema1_mytbl4_log_seq           | M5                           |             8 | t
    6094 | emaj           | myschema1_mytbl2_log_seq           | M5                           |             3 | t
    6095 | emajb          | myschema1_mytbl2b_log_seq          | M5                           |             1 | f
    6097 | emajC          | myschema1_myTbl3_log_seq           | M6                           |            20 | t
    6100 | emaj           | myschema1_mytbl2_log_seq           | M6                           |             3 | t
    6101 | emajb          | myschema1_mytbl2b_log_seq          | M6                           |             1 | f
    6104 | emaj           | myschema2_mytbl1_log_seq           | RLBK_M2_%_START              |            15 | t
    6105 | emaj           | myschema2_mytbl2_log_seq           | RLBK_M2_%_START              |             2 | t
    6106 | emajC          | myschema2_myTbl3_log_seq           | RLBK_M2_%_START              |            10 | t
    6112 | emaj           | myschema2_mytbl1_log_seq           | RLBK_M2_%_DONE               |            15 | t
    6113 | emaj           | myschema2_mytbl2_log_seq           | RLBK_M2_%_DONE               |             2 | t
    6114 | emajC          | myschema2_myTbl3_log_seq           | RLBK_M2_%_DONE               |            10 | t
    6118 | myschema1      | myTbl3_col31_seq                   | Before logged rollback to M4 |            20 | t
    6119 | emajC          | myschema1_myTbl3_log_seq           | Before logged rollback to M4 |            20 | t
    6120 | emaj           | myschema1_mytbl1_log_seq           | Before logged rollback to M4 |            32 | t
    6121 | emaj           | myschema1_mytbl4_log_seq           | Before logged rollback to M4 |            12 | t
    6122 | emaj           | myschema1_mytbl2_log_seq           | Before logged rollback to M4 |             3 | t
    6123 | emajb          | myschema1_mytbl2b_log_seq          | Before logged rollback to M4 |             1 | f
    6130 | myschema1      | myTbl3_col31_seq                   | STOP_%                       |            20 | t
    6131 | myschema2      | myseq1                             | STOP_%                       |          1004 | f
    6132 | myschema2      | myTbl3_col31_seq                   | STOP_%                       |            20 | t
    6133 | emajC          | myschema1_myTbl3_log_seq           | STOP_%                       |            45 | t
    6134 | emaj           | myschema1_mytbl1_log_seq           | STOP_%                       |            33 | t
    6135 | emaj           | myschema1_mytbl4_log_seq           | STOP_%                       |            14 | t
    6136 | emaj           | myschema1_mytbl2_log_seq           | STOP_%                       |             3 | t
    6137 | emajb          | myschema1_mytbl2b_log_seq          | STOP_%                       |             1 | f
    6138 | emaj           | myschema2_mytbl1_log_seq           | STOP_%                       |            15 | t
    6139 | emaj           | myschema2_mytbl2_log_seq           | STOP_%                       |             2 | t
    6140 | emajC          | myschema2_myTbl3_log_seq           | STOP_%                       |            10 | t
    6141 | emaj           | myschema2_mytbl4_log_seq           | STOP_%                       |            10 | t
    6142 | emaj           | otherPrefix4mytbl5_log_seq         | STOP_%                       |             7 | t
    6143 | emaj           | myschema2_mytbl6_log_seq           | STOP_%                       |            23 | t
    6161 | emajC          | myschema1_myTbl3_log_seq           | Multi-2                      |            45 | t
    6162 | emaj           | myschema1_mytbl1_log_seq           | Multi-2                      |            33 | t
    6163 | emaj           | myschema1_mytbl4_log_seq           | Multi-2                      |            14 | t
    6164 | emaj           | myschema1_mytbl2_log_seq           | Multi-2                      |             3 | t
    6165 | emajb          | myschema1_mytbl2b_log_seq          | Multi-2                      |             1 | f
    6166 | emaj           | myschema2_mytbl1_log_seq           | Multi-2                      |            15 | t
    6167 | emaj           | myschema2_mytbl2_log_seq           | Multi-2                      |             2 | t
    6168 | emajC          | myschema2_myTbl3_log_seq           | Multi-2                      |            10 | t
    6169 | emaj           | myschema2_mytbl4_log_seq           | Multi-2                      |            10 | t
    6170 | emaj           | otherPrefix4mytbl5_log_seq         | Multi-2                      |             7 | t
    6171 | emaj           | myschema2_mytbl6_log_seq           | Multi-2                      |            23 | t
    6175 | emajC          | myschema1_myTbl3_log_seq           | RLBK_Multi-1_%_START         |            45 | t
    6176 | emaj           | myschema1_mytbl1_log_seq           | RLBK_Multi-1_%_START         |            33 | t
    6177 | emaj           | myschema1_mytbl4_log_seq           | RLBK_Multi-1_%_START         |            14 | t
    6178 | emaj           | myschema1_mytbl2_log_seq           | RLBK_Multi-1_%_START         |             3 | t
    6179 | emajb          | myschema1_mytbl2b_log_seq          | RLBK_Multi-1_%_START         |             1 | f
    6180 | emaj           | myschema2_mytbl1_log_seq           | RLBK_Multi-1_%_START         |            15 | t
    6181 | emaj           | myschema2_mytbl2_log_seq           | RLBK_Multi-1_%_START         |             2 | t
    6182 | emajC          | myschema2_myTbl3_log_seq           | RLBK_Multi-1_%_START         |            10 | t
    6183 | emaj           | myschema2_mytbl4_log_seq           | RLBK_Multi-1_%_START         |            10 | t
    6184 | emaj           | otherPrefix4mytbl5_log_seq         | RLBK_Multi-1_%_START         |             7 | t
    6185 | emaj           | myschema2_mytbl6_log_seq           | RLBK_Multi-1_%_START         |            23 | t
    6189 | emajC          | myschema1_myTbl3_log_seq           | RLBK_Multi-1_%_DONE          |            45 | t
    6190 | emaj           | myschema1_mytbl1_log_seq           | RLBK_Multi-1_%_DONE          |            33 | t
    6191 | emaj           | myschema1_mytbl4_log_seq           | RLBK_Multi-1_%_DONE          |            14 | t
    6192 | emaj           | myschema1_mytbl2_log_seq           | RLBK_Multi-1_%_DONE          |             3 | t
    6193 | emajb          | myschema1_mytbl2b_log_seq          | RLBK_Multi-1_%_DONE          |             1 | f
    6194 | emaj           | myschema2_mytbl1_log_seq           | RLBK_Multi-1_%_DONE          |            15 | t
    6195 | emaj           | myschema2_mytbl2_log_seq           | RLBK_Multi-1_%_DONE          |             2 | t
    6196 | emajC          | myschema2_myTbl3_log_seq           | RLBK_Multi-1_%_DONE          |            10 | t
    6197 | emaj           | myschema2_mytbl4_log_seq           | RLBK_Multi-1_%_DONE          |            10 | t
    6198 | emaj           | otherPrefix4mytbl5_log_seq         | RLBK_Multi-1_%_DONE          |             7 | t
    6199 | emaj           | myschema2_mytbl6_log_seq           | RLBK_Multi-1_%_DONE          |            23 | t
    6200 | myschema1      | myTbl3_col31_seq                   | Stop after rollback          |            20 | t
    6201 | myschema2      | myseq1                             | Stop after rollback          |          1004 | f
    6202 | myschema2      | myTbl3_col31_seq                   | Stop after rollback          |            20 | t
    6203 | emajC          | myschema1_myTbl3_log_seq           | Stop after rollback          |            45 | t
    6204 | emaj           | myschema1_mytbl1_log_seq           | Stop after rollback          |            33 | t
    6205 | emaj           | myschema1_mytbl4_log_seq           | Stop after rollback          |            14 | t
    6206 | emaj           | myschema1_mytbl2_log_seq           | Stop after rollback          |             3 | t
    6207 | emajb          | myschema1_mytbl2b_log_seq          | Stop after rollback          |             1 | f
    6208 | emaj           | myschema2_mytbl1_log_seq           | Stop after rollback          |            15 | t
    6209 | emaj           | myschema2_mytbl2_log_seq           | Stop after rollback          |             2 | t
    6210 | emajC          | myschema2_myTbl3_log_seq           | Stop after rollback          |            10 | t
    6211 | emaj           | myschema2_mytbl4_log_seq           | Stop after rollback          |            10 | t
    6212 | emaj           | otherPrefix4mytbl5_log_seq         | Stop after rollback          |             7 | t
    6213 | emaj           | myschema2_mytbl6_log_seq           | Stop after rollback          |            23 | t
    6214 | myschema1      | myTbl3_col31_seq                   | Multi-1                      |            20 | t
    6215 | myschema2      | myseq1                             | Multi-1                      |          1004 | f
    6216 | myschema2      | myTbl3_col31_seq                   | Multi-1                      |            20 | t
    6217 | emajC          | myschema1_myTbl3_log_seq           | Multi-1                      |            45 | t
    6218 | emaj           | myschema1_mytbl1_log_seq           | Multi-1                      |            33 | t
    6219 | emaj           | myschema1_mytbl4_log_seq           | Multi-1                      |            14 | t
    6220 | emaj           | myschema1_mytbl2_log_seq           | Multi-1                      |             3 | t
    6221 | emajb          | myschema1_mytbl2b_log_seq          | Multi-1                      |             1 | f
    6222 | emaj           | myschema2_mytbl1_log_seq           | Multi-1                      |            15 | t
    6223 | emaj           | myschema2_mytbl2_log_seq           | Multi-1                      |             2 | t
    6224 | emajC          | myschema2_myTbl3_log_seq           | Multi-1                      |            10 | t
    6225 | emaj           | myschema2_mytbl4_log_seq           | Multi-1                      |            10 | t
    6226 | emaj           | otherPrefix4mytbl5_log_seq         | Multi-1                      |             7 | t
    6227 | emaj           | myschema2_mytbl6_log_seq           | Multi-1                      |            23 | t
    6250 | phil's schema3 | myTbl2\_col21_seq                  | M1_rollbackable              |             1 | f
    6251 | phil's schema3 | phil's seq\1                       | M1_rollbackable              |          1000 | f
    6252 | emaj           | phil's schema3_myTbl2\_log_seq     | M1_rollbackable              |             1 | f
    6253 | emaj #'3       | phil's schema3_phil's tbl1_log_seq | M1_rollbackable              |             1 | f
    6254 | phil's schema3 | myTbl2\_col21_seq                  | M2_rollbackable              |             1 | f
    6255 | phil's schema3 | phil's seq\1                       | M2_rollbackable              |          1000 | t
    6256 | emaj           | phil's schema3_myTbl2\_log_seq     | M2_rollbackable              |             2 | t
    6257 | emaj #'3       | phil's schema3_phil's tbl1_log_seq | M2_rollbackable              |            50 | t
    6262 | phil's schema3 | myTbl2\_col21_seq                  | phil's mark #3               |             1 | f
    6263 | phil's schema3 | phil's seq\1                       | phil's mark #3               |          1001 | t
    6264 | emaj           | phil's schema3_myTbl2\_log_seq     | phil's mark #3               |             2 | t
    6265 | emaj #'3       | phil's schema3_phil's tbl1_log_seq | phil's mark #3               |            53 | t
    6268 | emaj           | phil's schema3_myTbl2\_log_seq     | RLBK_phil's mark #3_%_START  |             2 | t
    6269 | emaj #'3       | phil's schema3_phil's tbl1_log_seq | RLBK_phil's mark #3_%_START  |            53 | t
    6272 | emaj           | phil's schema3_myTbl2\_log_seq     | RLBK_phil's mark #3_%_DONE   |             2 | t
    6273 | emaj #'3       | phil's schema3_phil's tbl1_log_seq | RLBK_phil's mark #3_%_DONE   |            53 | t
(141 rows)

select sqhl_schema, sqhl_table, sqhl_begin_mark_id, sqhl_end_mark_id, sqhl_hole_size from emaj.emaj_seq_hole order by 1,2,3;
 sqhl_schema | sqhl_table | sqhl_begin_mark_id | sqhl_end_mark_id | sqhl_hole_size 
-------------+------------+--------------------+------------------+----------------
 myschema1   | mytbl1     |                614 |              619 |              1
 myschema1   | mytbl4     |                614 |              619 |              2
 myschema2   | mytbl4     |                607 |              618 |              6
 myschema2   | mytbl5     |                607 |              618 |              3
 myschema2   | mytbl6     |                607 |              618 |              9
(5 rows)

select rlbt_rlbk_id, rlbt_step, rlbt_schema, rlbt_table, rlbt_fkey, rlbt_quantity from emaj.emaj_rlbk_stat
  order by rlbt_rlbk_id, rlbt_step, rlbt_schema, rlbt_table, rlbt_fkey;
 rlbt_rlbk_id |  rlbt_step  | rlbt_schema | rlbt_table |     rlbt_fkey     | rlbt_quantity 
--------------+-------------+-------------+------------+-------------------+---------------
          100 | DROP_FK     |             |            |                   |             1
          100 | SET_FK_DEF  |             |            |                   |             2
          100 | RLBK_TABLE  | myschema2   | mytbl4     |                   |             4
          100 | RLBK_TABLE  | myschema2   | mytbl5     |                   |             1
          100 | RLBK_TABLE  | myschema2   | mytbl6     |                   |             3
          100 | SET_FK_IMM  | myschema2   | mytbl4     | mytbl4_col43_fkey |             4
          100 | SET_FK_IMM  | myschema2   | mytbl6     | mytbl6_col61_fkey |             3
          100 | SET_FK_IMM  | myschema2   | mytbl8     | mytbl8_col81_fkey |             3
          100 | ADD_FK      | myschema2   | mytbl4     | mytbl4_col44_fkey |             2
          100 | CTRL-DBLINK |             |            |                   |            10
          101 | DROP_FK     |             |            |                   |             1
          101 | SET_FK_DEF  |             |            |                   |             2
          101 | RLBK_TABLE  | myschema2   | mytbl4     |                   |             2
          101 | RLBK_TABLE  | myschema2   | mytbl5     |                   |             1
          101 | RLBK_TABLE  | myschema2   | mytbl6     |                   |             3
          101 | SET_FK_IMM  | myschema2   | mytbl4     | mytbl4_col43_fkey |             2
          101 | SET_FK_IMM  | myschema2   | mytbl6     | mytbl6_col61_fkey |             3
          101 | SET_FK_IMM  | myschema2   | mytbl8     | mytbl8_col81_fkey |             3
          101 | ADD_FK      | myschema2   | mytbl4     | mytbl4_col44_fkey |             2
          101 | CTRL-DBLINK |             |            |                   |            10
          102 | DIS_LOG_TRG |             |            |                   |             2
          102 | DROP_FK     |             |            |                   |             1
          102 | SET_FK_DEF  |             |            |                   |             1
          102 | RLBK_TABLE  | myschema1   | mytbl1     |                   |             3
          102 | RLBK_TABLE  | myschema1   | mytbl4     |                   |             8
          102 | DELETE_LOG  | myschema1   | mytbl1     |                   |             3
          102 | DELETE_LOG  | myschema1   | mytbl4     |                   |             8
          102 | SET_FK_IMM  | myschema1   | mytbl4     | mytbl4_col43_fkey |             8
          102 | ADD_FK      | myschema1   | mytbl4     | mytbl4_col44_fkey |             0
          102 | ENA_LOG_TRG |             |            |                   |             2
          102 | CTRL+DBLINK |             |            |                   |            12
          103 | DROP_FK     |             |            |                   |             1
          103 | SET_FK_DEF  |             |            |                   |             2
          103 | RLBK_TABLE  | myschema2   | mytbl4     |                   |             8
          103 | RLBK_TABLE  | myschema2   | mytbl5     |                   |             3
          103 | RLBK_TABLE  | myschema2   | mytbl6     |                   |             9
          103 | SET_FK_IMM  | myschema2   | mytbl4     | mytbl4_col43_fkey |             8
          103 | SET_FK_IMM  | myschema2   | mytbl6     | mytbl6_col61_fkey |             9
          103 | SET_FK_IMM  | myschema2   | mytbl8     | mytbl8_col81_fkey |             9
          103 | ADD_FK      | myschema2   | mytbl4     | mytbl4_col44_fkey |             2
          103 | CTRL+DBLINK |             |            |                   |            10
          104 | DIS_LOG_TRG |             |            |                   |             3
          104 | DROP_FK     |             |            |                   |             1
          104 | SET_FK_DEF  |             |            |                   |             2
          104 | RLBK_TABLE  | myschema2   | mytbl4     |                   |             6
          104 | RLBK_TABLE  | myschema2   | mytbl5     |                   |             3
          104 | RLBK_TABLE  | myschema2   | mytbl6     |                   |             9
          104 | DELETE_LOG  | myschema2   | mytbl4     |                   |             6
          104 | DELETE_LOG  | myschema2   | mytbl5     |                   |             3
          104 | DELETE_LOG  | myschema2   | mytbl6     |                   |             9
          104 | SET_FK_IMM  | myschema2   | mytbl4     | mytbl4_col43_fkey |             6
          104 | SET_FK_IMM  | myschema2   | mytbl6     | mytbl6_col61_fkey |             9
          104 | SET_FK_IMM  | myschema2   | mytbl8     | mytbl8_col81_fkey |             9
          104 | ADD_FK      | myschema2   | mytbl4     | mytbl4_col44_fkey |             2
          104 | ENA_LOG_TRG |             |            |                   |             3
          104 | CTRL+DBLINK |             |            |                   |            19
          105 | DIS_LOG_TRG |             |            |                   |             2
          105 | DROP_FK     |             |            |                   |             1
          105 | SET_FK_DEF  |             |            |                   |             1
          105 | RLBK_TABLE  | myschema1   | mytbl1     |                   |             1
          105 | RLBK_TABLE  | myschema1   | mytbl4     |                   |             2
          105 | DELETE_LOG  | myschema1   | mytbl1     |                   |             1
          105 | DELETE_LOG  | myschema1   | mytbl4     |                   |             2
          105 | SET_FK_IMM  | myschema1   | mytbl4     | mytbl4_col43_fkey |             2
          105 | ADD_FK      | myschema1   | mytbl4     | mytbl4_col44_fkey |             0
          105 | ENA_LOG_TRG |             |            |                   |             2
          105 | CTRL+DBLINK |             |            |                   |            12
          106 | DROP_FK     |             |            |                   |             1
          106 | SET_FK_DEF  |             |            |                   |             1
          106 | RLBK_TABLE  | myschema1   | mytbl1     |                   |             1
          106 | RLBK_TABLE  | myschema1   | myTbl3     |                   |            10
          106 | RLBK_TABLE  | myschema1   | mytbl4     |                   |             2
          106 | SET_FK_IMM  | myschema1   | mytbl4     | mytbl4_col43_fkey |             2
          106 | ADD_FK      | myschema1   | mytbl4     | mytbl4_col44_fkey |             0
          106 | CTRL+DBLINK |             |            |                   |             7
(75 rows)

-- user tables
select * from "phil's schema3"."phil's tbl1" order by "phil's col11","phil's col12";
 phil's col11 | phil's col12 | phil\s col13 
--------------+--------------+--------------
            1 | DEF          | \x1c
            2 | DEF          | \x1c
            3 | AB'C         | \x1c
            4 | AB'C         | \x0c
            5 | AB'C         | \x0c
            6 | AB'C         | \x0c
            7 | AB'C         | \x0c
            8 | AB'C         | \x0c
            9 | AB'C         | \x0c
           11 | AB'C         | \x0c
           12 | AB'C         | \x0c
           13 | AB'C         | \x0c
           14 | AB'C         | \x0c
           15 | AB'C         | \x0c
           16 | AB'C         | \x0c
           17 | AB'C         | \x0c
           18 | AB'C         | \x1c27
           19 | AB'C         | \x1c27
           20 | AB'C         | \x1c27
(19 rows)

select * from "phil's schema3"."myTbl2\" order by col21;
 col21 | col22 |   col23    
-------+-------+------------
     1 | ABC   | 12-31-2010
     2 | DEF   | 
(2 rows)

-- log tables
select "phil's col11", "phil's col12", "phil\s col13", emaj_verb, emaj_tuple, emaj_gid from "emaj #'3"."phil's schema3_phil's tbl1_log" order by emaj_gid, emaj_tuple desc;
 phil's col11 | phil's col12 | phil\s col13 | emaj_verb | emaj_tuple | emaj_gid 
--------------+--------------+--------------+-----------+------------+----------
            1 | AB'C         | \x0c         | INS       | NEW        |   100162
            2 | AB'C         | \x0c         | INS       | NEW        |   100163
            3 | AB'C         | \x0c         | INS       | NEW        |   100164
            4 | AB'C         | \x0c         | INS       | NEW        |   100165
            5 | AB'C         | \x0c         | INS       | NEW        |   100166
            6 | AB'C         | \x0c         | INS       | NEW        |   100167
            7 | AB'C         | \x0c         | INS       | NEW        |   100168
            8 | AB'C         | \x0c         | INS       | NEW        |   100169
            9 | AB'C         | \x0c         | INS       | NEW        |   100170
           10 | AB'C         | \x0c         | INS       | NEW        |   100171
           11 | AB'C         | \x0c         | INS       | NEW        |   100172
           12 | AB'C         | \x0c         | INS       | NEW        |   100173
           13 | AB'C         | \x0c         | INS       | NEW        |   100174
           14 | AB'C         | \x0c         | INS       | NEW        |   100175
           15 | AB'C         | \x0c         | INS       | NEW        |   100176
           16 | AB'C         | \x0c         | INS       | NEW        |   100177
           17 | AB'C         | \x0c         | INS       | NEW        |   100178
           18 | AB'C         | \x0c         | INS       | NEW        |   100179
           19 | AB'C         | \x0c         | INS       | NEW        |   100180
           20 | AB'C         | \x0c         | INS       | NEW        |   100181
           21 | AB'C         | \x0c         | INS       | NEW        |   100182
           22 | AB'C         | \x0c         | INS       | NEW        |   100183
           23 | AB'C         | \x0c         | INS       | NEW        |   100184
           24 | AB'C         | \x0c         | INS       | NEW        |   100185
           25 | AB'C         | \x0c         | INS       | NEW        |   100186
           26 | AB'C         | \x0c         | INS       | NEW        |   100187
           27 | AB'C         | \x0c         | INS       | NEW        |   100188
           28 | AB'C         | \x0c         | INS       | NEW        |   100189
           29 | AB'C         | \x0c         | INS       | NEW        |   100190
           30 | AB'C         | \x0c         | INS       | NEW        |   100191
           31 | AB'C         | \x0c         | INS       | NEW        |   100192
            1 | AB'C         | \x0c         | UPD       | OLD        |   100193
            1 | AB'C         | \x1c         | UPD       | NEW        |   100193
            2 | AB'C         | \x0c         | UPD       | OLD        |   100194
            2 | AB'C         | \x1c         | UPD       | NEW        |   100194
            3 | AB'C         | \x0c         | UPD       | OLD        |   100195
            3 | AB'C         | \x1c         | UPD       | NEW        |   100195
           18 | AB'C         | \x0c         | UPD       | OLD        |   100196
           18 | AB'C         | \x1c27       | UPD       | NEW        |   100196
           19 | AB'C         | \x0c         | UPD       | OLD        |   100197
           19 | AB'C         | \x1c27       | UPD       | NEW        |   100197
           20 | AB'C         | \x0c         | UPD       | OLD        |   100198
           20 | AB'C         | \x1c27       | UPD       | NEW        |   100198
           21 | AB'C         | \x0c         | UPD       | OLD        |   100199
           21 | AB'C         | \x1c27       | UPD       | NEW        |   100199
           22 | AB'C         | \x0c         | UPD       | OLD        |   100200
           22 | AB'C         | \x1c27       | UPD       | NEW        |   100200
           23 | AB'C         | \x0c         | DEL       | OLD        |   100202
           24 | AB'C         | \x0c         | DEL       | OLD        |   100203
           25 | AB'C         | \x0c         | DEL       | OLD        |   100204
           26 | AB'C         | \x0c         | DEL       | OLD        |   100205
           27 | AB'C         | \x0c         | DEL       | OLD        |   100206
           28 | AB'C         | \x0c         | DEL       | OLD        |   100207
           29 | AB'C         | \x0c         | DEL       | OLD        |   100208
           30 | AB'C         | \x0c         | DEL       | OLD        |   100209
           31 | AB'C         | \x0c         | DEL       | OLD        |   100210
           21 | AB'C         | \x1c27       | DEL       | OLD        |   100211
           22 | AB'C         | \x1c27       | DEL       | OLD        |   100212
           10 | AB'C         | \x0c         | DEL       | OLD        |   100214
            1 | AB'C         | \x1c         | UPD       | OLD        |   100215
            1 | DEF          | \x1c         | UPD       | NEW        |   100215
            2 | AB'C         | \x1c         | UPD       | OLD        |   100216
            2 | DEF          | \x1c         | UPD       | NEW        |   100216
(63 rows)

select col21, col22, col23, emaj_verb, emaj_tuple, emaj_gid from emaj."phil's schema3_myTbl2\_log" order by emaj_gid, emaj_tuple desc;
 col21 | col22 |   col23    | emaj_verb | emaj_tuple | emaj_gid 
-------+-------+------------+-----------+------------+----------
     1 | ABC   | 12-31-2010 | INS       | NEW        |   100201
     2 | DEF   |            | INS       | NEW        |   100213
(2 rows)

-----------------------------
-- Step 11 : for myGroup1, in a transaction, update tables and rollback the transaction, 
--           then rollback to previous mark 
-----------------------------
set search_path=public,myschema1;
--
begin transaction;
  delete from mytbl1;
rollback;
--
select emaj.emaj_rollback_group('myGroup1','EMAJ_LAST_MARK');
 emaj_rollback_group 
---------------------
                   2
(1 row)

-----------------------------
-- Checking step 11
-----------------------------
-- emaj tables
select sqhl_schema, sqhl_table, sqhl_begin_mark_id, sqhl_end_mark_id, sqhl_hole_size from emaj.emaj_seq_hole order by 1,2,3;
 sqhl_schema | sqhl_table | sqhl_begin_mark_id | sqhl_end_mark_id | sqhl_hole_size 
-------------+------------+--------------------+------------------+----------------
 myschema1   | mytbl1     |                614 |              619 |              1
 myschema1   | mytbl1     |                636 |              650 |             20
 myschema1   | mytbl4     |                614 |              619 |              2
 myschema2   | mytbl4     |                607 |              618 |              6
 myschema2   | mytbl5     |                607 |              618 |              3
 myschema2   | mytbl6     |                607 |              618 |              9
(6 rows)

select rlbt_rlbk_id, rlbt_step, rlbt_schema, rlbt_table, rlbt_fkey, rlbt_quantity from emaj.emaj_rlbk_stat
  order by rlbt_rlbk_id, rlbt_step, rlbt_schema, rlbt_table, rlbt_fkey;
 rlbt_rlbk_id |  rlbt_step  | rlbt_schema | rlbt_table |     rlbt_fkey     | rlbt_quantity 
--------------+-------------+-------------+------------+-------------------+---------------
          100 | DROP_FK     |             |            |                   |             1
          100 | SET_FK_DEF  |             |            |                   |             2
          100 | RLBK_TABLE  | myschema2   | mytbl4     |                   |             4
          100 | RLBK_TABLE  | myschema2   | mytbl5     |                   |             1
          100 | RLBK_TABLE  | myschema2   | mytbl6     |                   |             3
          100 | SET_FK_IMM  | myschema2   | mytbl4     | mytbl4_col43_fkey |             4
          100 | SET_FK_IMM  | myschema2   | mytbl6     | mytbl6_col61_fkey |             3
          100 | SET_FK_IMM  | myschema2   | mytbl8     | mytbl8_col81_fkey |             3
          100 | ADD_FK      | myschema2   | mytbl4     | mytbl4_col44_fkey |             2
          100 | CTRL-DBLINK |             |            |                   |            10
          101 | DROP_FK     |             |            |                   |             1
          101 | SET_FK_DEF  |             |            |                   |             2
          101 | RLBK_TABLE  | myschema2   | mytbl4     |                   |             2
          101 | RLBK_TABLE  | myschema2   | mytbl5     |                   |             1
          101 | RLBK_TABLE  | myschema2   | mytbl6     |                   |             3
          101 | SET_FK_IMM  | myschema2   | mytbl4     | mytbl4_col43_fkey |             2
          101 | SET_FK_IMM  | myschema2   | mytbl6     | mytbl6_col61_fkey |             3
          101 | SET_FK_IMM  | myschema2   | mytbl8     | mytbl8_col81_fkey |             3
          101 | ADD_FK      | myschema2   | mytbl4     | mytbl4_col44_fkey |             2
          101 | CTRL-DBLINK |             |            |                   |            10
          102 | DIS_LOG_TRG |             |            |                   |             2
          102 | DROP_FK     |             |            |                   |             1
          102 | SET_FK_DEF  |             |            |                   |             1
          102 | RLBK_TABLE  | myschema1   | mytbl1     |                   |             3
          102 | RLBK_TABLE  | myschema1   | mytbl4     |                   |             8
          102 | DELETE_LOG  | myschema1   | mytbl1     |                   |             3
          102 | DELETE_LOG  | myschema1   | mytbl4     |                   |             8
          102 | SET_FK_IMM  | myschema1   | mytbl4     | mytbl4_col43_fkey |             8
          102 | ADD_FK      | myschema1   | mytbl4     | mytbl4_col44_fkey |             0
          102 | ENA_LOG_TRG |             |            |                   |             2
          102 | CTRL+DBLINK |             |            |                   |            12
          103 | DROP_FK     |             |            |                   |             1
          103 | SET_FK_DEF  |             |            |                   |             2
          103 | RLBK_TABLE  | myschema2   | mytbl4     |                   |             8
          103 | RLBK_TABLE  | myschema2   | mytbl5     |                   |             3
          103 | RLBK_TABLE  | myschema2   | mytbl6     |                   |             9
          103 | SET_FK_IMM  | myschema2   | mytbl4     | mytbl4_col43_fkey |             8
          103 | SET_FK_IMM  | myschema2   | mytbl6     | mytbl6_col61_fkey |             9
          103 | SET_FK_IMM  | myschema2   | mytbl8     | mytbl8_col81_fkey |             9
          103 | ADD_FK      | myschema2   | mytbl4     | mytbl4_col44_fkey |             2
          103 | CTRL+DBLINK |             |            |                   |            10
          104 | DIS_LOG_TRG |             |            |                   |             3
          104 | DROP_FK     |             |            |                   |             1
          104 | SET_FK_DEF  |             |            |                   |             2
          104 | RLBK_TABLE  | myschema2   | mytbl4     |                   |             6
          104 | RLBK_TABLE  | myschema2   | mytbl5     |                   |             3
          104 | RLBK_TABLE  | myschema2   | mytbl6     |                   |             9
          104 | DELETE_LOG  | myschema2   | mytbl4     |                   |             6
          104 | DELETE_LOG  | myschema2   | mytbl5     |                   |             3
          104 | DELETE_LOG  | myschema2   | mytbl6     |                   |             9
          104 | SET_FK_IMM  | myschema2   | mytbl4     | mytbl4_col43_fkey |             6
          104 | SET_FK_IMM  | myschema2   | mytbl6     | mytbl6_col61_fkey |             9
          104 | SET_FK_IMM  | myschema2   | mytbl8     | mytbl8_col81_fkey |             9
          104 | ADD_FK      | myschema2   | mytbl4     | mytbl4_col44_fkey |             2
          104 | ENA_LOG_TRG |             |            |                   |             3
          104 | CTRL+DBLINK |             |            |                   |            19
          105 | DIS_LOG_TRG |             |            |                   |             2
          105 | DROP_FK     |             |            |                   |             1
          105 | SET_FK_DEF  |             |            |                   |             1
          105 | RLBK_TABLE  | myschema1   | mytbl1     |                   |             1
          105 | RLBK_TABLE  | myschema1   | mytbl4     |                   |             2
          105 | DELETE_LOG  | myschema1   | mytbl1     |                   |             1
          105 | DELETE_LOG  | myschema1   | mytbl4     |                   |             2
          105 | SET_FK_IMM  | myschema1   | mytbl4     | mytbl4_col43_fkey |             2
          105 | ADD_FK      | myschema1   | mytbl4     | mytbl4_col44_fkey |             0
          105 | ENA_LOG_TRG |             |            |                   |             2
          105 | CTRL+DBLINK |             |            |                   |            12
          106 | DROP_FK     |             |            |                   |             1
          106 | SET_FK_DEF  |             |            |                   |             1
          106 | RLBK_TABLE  | myschema1   | mytbl1     |                   |             1
          106 | RLBK_TABLE  | myschema1   | myTbl3     |                   |            10
          106 | RLBK_TABLE  | myschema1   | mytbl4     |                   |             2
          106 | SET_FK_IMM  | myschema1   | mytbl4     | mytbl4_col43_fkey |             2
          106 | ADD_FK      | myschema1   | mytbl4     | mytbl4_col44_fkey |             0
          106 | CTRL+DBLINK |             |            |                   |             7
          113 | DIS_LOG_TRG |             |            |                   |             1
          113 | DROP_FK     |             |            |                   |             1
          113 | RLBK_TABLE  | myschema1   | mytbl1     |                   |            20
          113 | DELETE_LOG  | myschema1   | mytbl1     |                   |            20
          113 | ADD_FK      | myschema1   | mytbl4     | mytbl4_col44_fkey |             0
          113 | ENA_LOG_TRG |             |            |                   |             1
          113 | CTRL+DBLINK |             |            |                   |             6
(82 rows)

-----------------------------
-- Step 12 : tests snaps and script generation functions
-----------------------------
-- first add some updates for tables with unusual types (arrays, geometric)
set search_path=public,myschema2;
insert into myTbl5 values (10,'{"abc","def","ghi"}','{1,2,3}',NULL);
insert into myTbl5 values (20,array['abc','def','ghi'],array[3,4,5],array['2000/02/01'::date,'2000/02/28'::date]);
update myTbl5 set col54 = '{"2010/11/28","2010/12/03"}' where col54 is null;
insert into myTbl6 select i+10, point(i,1.3), '((0,0),(2,2))', circle(point(5,5),i),'((-2,-2),(3,0),(1,4))','10.20.30.40/27' from generate_series (1,8) as i;
update myTbl6 set col64 = '<(5,6),3.5>', col65 = null where col61 <= 13;
-- reset directory for snaps
\! rm -Rf /tmp/emaj_test/snaps
\! mkdir /tmp/emaj_test/snaps
-- ... and snap the all groups
select emaj.emaj_snap_group('myGroup1','/tmp/emaj_test/snaps','CSV HEADER');
 emaj_snap_group 
-----------------
               6
(1 row)

select emaj.emaj_snap_group('myGroup2','/tmp/emaj_test/snaps','CSV HEADER');
 emaj_snap_group 
-----------------
               8
(1 row)

select emaj.emaj_snap_group('phil''s group#3",','/tmp/emaj_test/snaps','CSV HEADER');
 emaj_snap_group 
-----------------
               4
(1 row)

\! ls /tmp/emaj_test/snaps
_INFO
myschema1_mytbl1.snap
myschema1_mytbl2b.snap
myschema1_mytbl2.snap
myschema1_myTbl3_col31_seq.snap
myschema1_myTbl3.snap
myschema1_mytbl4.snap
myschema2_myseq1.snap
myschema2_mytbl1.snap
myschema2_mytbl2.snap
myschema2_myTbl3_col31_seq.snap
myschema2_myTbl3.snap
myschema2_mytbl4.snap
myschema2_mytbl5.snap
myschema2_mytbl6.snap
phil's schema3_myTbl2\_col21_seq.snap
phil's schema3_myTbl2\.snap
phil's schema3_phil's seq\1.snap
phil's schema3_phil's tbl1.snap
-- reset directory for emaj_gen_sql_group tests
\! rm -Rf /tmp/emaj_test/sql_scripts
\! mkdir /tmp/emaj_test/sql_scripts
--select * from emaj.emaj_mark order by mark_group, mark_id;
-- generate sql script for each active group (and check the result with detailed log statistics + number of sequences)
select emaj.emaj_gen_sql_group('myGroup1', 'Multi-1', NULL, '/tmp/emaj_test/sql_scripts/myGroup1.sql');
NOTICE:  table "emaj_temp_script" does not exist, skipping
CONTEXT:  SQL statement "DROP TABLE IF EXISTS emaj_temp_script"
PL/pgSQL function emaj._gen_sql_groups(text[],text,text,text,text[]) line 147 at SQL statement
SQL statement "SELECT emaj._gen_sql_groups(CASE WHEN v_groupName IS NOT NULL THEN array[v_groupName] ELSE NULL END, v_firstMark, v_lastMark, v_location, v_tblseqs)"
PL/pgSQL function emaj.emaj_gen_sql_group(text,text,text,text,text[]) line 22 at SQL statement
 emaj_gen_sql_group 
--------------------
                  1
(1 row)

select coalesce(sum(stat_rows),0) + 1 as check from emaj.emaj_detailed_log_stat_group('myGroup1', 'Multi-1', NULL);
 check 
-------
     1
(1 row)

select emaj.emaj_gen_sql_group('myGroup2', 'Multi-1', NULL, '/tmp/emaj_test/sql_scripts/myGroup2.sql', array[
     'myschema2.mytbl1','myschema2.mytbl2','myschema2.myTbl3','myschema2.mytbl4',
     'myschema2.mytbl5','myschema2.mytbl6','myschema2.myseq1','myschema2.myTbl3_col31_seq']);
 emaj_gen_sql_group 
--------------------
                 22
(1 row)

select sum(stat_rows) + 2 as check from emaj.emaj_detailed_log_stat_group('myGroup2', 'Multi-1', NULL);
 check 
-------
    22
(1 row)

select emaj.emaj_gen_sql_group('phil''s group#3",', 'M1_rollbackable', NULL, '/tmp/emaj_test/sql_scripts/Group3.sql');
 emaj_gen_sql_group 
--------------------
                 57
(1 row)

select sum(stat_rows) + 1 as check from emaj.emaj_detailed_log_stat_group('phil''s group#3",', 'M1_rollbackable', NULL);
 check 
-------
    56
(1 row)

-- process \\ in script files
\! find /tmp/emaj_test/sql_scripts -name '*.sql' -type f -print0 | xargs -0 sed -i_s -s 's/\\\\/\\/g'
-- comment transaction commands for the need of the current test
\! find /tmp/emaj_test/sql_scripts -name '*.sql' -type f -print0 | xargs -0 sed -i -s 's/^BEGIN/--BEGIN/;s/^COMMIT/--COMMIT/'
-- mask timestamp in initial comment
\! find /tmp/emaj_test/sql_scripts -name '*.sql' -type f -print0 | xargs -0 sed -i -s 's/at .*$/at [ts]$/'
\! ls /tmp/emaj_test/sql_scripts
Group3.sql
Group3.sql_s
myGroup1.sql
myGroup1.sql_s
myGroup2.sql
myGroup2.sql_s
-- reset directory for second set of snaps
\! rm -Rf /tmp/emaj_test/snaps2
\! mkdir /tmp/emaj_test/snaps2
-- in a single transaction and as superuser:
--   rollback groups, replay updates with generated scripts, snap groups again and cancel the transaction
reset role;
begin;
  select emaj.emaj_rollback_group('myGroup1','Multi-1');
 emaj_rollback_group 
---------------------
                   1
(1 row)

  select emaj.emaj_rollback_group('myGroup2','Multi-1');
WARNING:  _check_fk_groups: Foreign key mytbl6_col61_fkey, from table myschema2.mytbl6, references myschema2.mytbl7 that is outside groups (myGroup2).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._rlbk_init(text[],text,boolean,integer,boolean) line 66 at PERFORM
SQL statement "SELECT emaj._rlbk_init(v_groupNames, v_mark, v_isLoggedRlbk, 1, v_multiGroup)"
PL/pgSQL function emaj._rlbk_groups(text[],text,boolean,boolean) line 20 at SQL statement
PL/pgSQL function emaj.emaj_rollback_group(text,text) line 7 at RETURN
WARNING:  _check_fk_groups: table myschema2.mytbl6 is referenced by foreign key mytbl8_col81_fkey from table myschema2.mytbl8 that is outside groups (myGroup2).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._rlbk_init(text[],text,boolean,integer,boolean) line 66 at PERFORM
SQL statement "SELECT emaj._rlbk_init(v_groupNames, v_mark, v_isLoggedRlbk, 1, v_multiGroup)"
PL/pgSQL function emaj._rlbk_groups(text[],text,boolean,boolean) line 20 at SQL statement
PL/pgSQL function emaj.emaj_rollback_group(text,text) line 7 at RETURN
 emaj_rollback_group 
---------------------
                   4
(1 row)

  select emaj.emaj_rollback_group('phil''s group#3",','M1_rollbackable');
WARNING:  _check_fk_groups: Foreign key mytbl2_col21_fkey, from table phil's schema3.myTbl2\, references phil's schema3.mytbl4 that is outside groups (phil's group#3",).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._rlbk_init(text[],text,boolean,integer,boolean) line 66 at PERFORM
SQL statement "SELECT emaj._rlbk_init(v_groupNames, v_mark, v_isLoggedRlbk, 1, v_multiGroup)"
PL/pgSQL function emaj._rlbk_groups(text[],text,boolean,boolean) line 20 at SQL statement
PL/pgSQL function emaj.emaj_rollback_group(text,text) line 7 at RETURN
WARNING:  _check_fk_groups: table phil's schema3.phil's tbl1 is referenced by foreign key mytbl4_col44_fkey from table phil's schema3.mytbl4 that is outside groups (phil's group#3",).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._rlbk_init(text[],text,boolean,integer,boolean) line 66 at PERFORM
SQL statement "SELECT emaj._rlbk_init(v_groupNames, v_mark, v_isLoggedRlbk, 1, v_multiGroup)"
PL/pgSQL function emaj._rlbk_groups(text[],text,boolean,boolean) line 20 at SQL statement
PL/pgSQL function emaj.emaj_rollback_group(text,text) line 7 at RETURN
 emaj_rollback_group 
---------------------
                   4
(1 row)

\i /tmp/emaj_test/sql_scripts/myGroup1.sql
-- SQL script generated by E-Maj at [ts]$
--    for tables group(s): myGroup1
--    processing logs between mark Multi-1 and the current situation
SET standard_conforming_strings = ON;
--BEGIN TRANSACTION;
ALTER SEQUENCE myschema1."myTbl3_col31_seq" RESTART 21 START 1 INCREMENT 1 MAXVALUE 9223372036854775807 MINVALUE 1 CACHE 1 NO CYCLE;
--COMMIT;
RESET standard_conforming_strings;
\i /tmp/emaj_test/sql_scripts/myGroup2.sql
-- SQL script generated by E-Maj at [ts]$
--    for tables group(s): myGroup2
--    processing logs between mark Multi-1 and the current situation
--    only for the following tables/sequences: myschema2.mytbl1,myschema2.mytbl2,myschema2.myTbl3,myschema2.mytbl4,myschema2.mytbl5,myschema2.mytbl6,myschema2.myseq1,myschema2.myTbl3_col31_seq
SET standard_conforming_strings = ON;
--BEGIN TRANSACTION;
INSERT INTO myschema2.mytbl5 VALUES (10, '{abc,def,ghi}', '{1,2,3}', NULL);
INSERT INTO myschema2.mytbl5 VALUES (20, '{abc,def,ghi}', '{3,4,5}', '{02-01-2000,02-28-2000}');
UPDATE ONLY myschema2.mytbl5 SET col51 = 10, col52 = '{abc,def,ghi}', col53 = '{1,2,3}', col54 = '{11-28-2010,12-03-2010}' WHERE col51 = 10;
INSERT INTO myschema2.mytbl6 VALUES (11, '(1,1.3)', '(2,2),(0,0)', '<(5,5),1>', '((-2,-2),(3,0),(1,4))', '10.20.30.40/27');
INSERT INTO myschema2.mytbl6 VALUES (12, '(2,1.3)', '(2,2),(0,0)', '<(5,5),2>', '((-2,-2),(3,0),(1,4))', '10.20.30.40/27');
INSERT INTO myschema2.mytbl6 VALUES (13, '(3,1.3)', '(2,2),(0,0)', '<(5,5),3>', '((-2,-2),(3,0),(1,4))', '10.20.30.40/27');
INSERT INTO myschema2.mytbl6 VALUES (14, '(4,1.3)', '(2,2),(0,0)', '<(5,5),4>', '((-2,-2),(3,0),(1,4))', '10.20.30.40/27');
INSERT INTO myschema2.mytbl6 VALUES (15, '(5,1.3)', '(2,2),(0,0)', '<(5,5),5>', '((-2,-2),(3,0),(1,4))', '10.20.30.40/27');
INSERT INTO myschema2.mytbl6 VALUES (16, '(6,1.3)', '(2,2),(0,0)', '<(5,5),6>', '((-2,-2),(3,0),(1,4))', '10.20.30.40/27');
INSERT INTO myschema2.mytbl6 VALUES (17, '(7,1.3)', '(2,2),(0,0)', '<(5,5),7>', '((-2,-2),(3,0),(1,4))', '10.20.30.40/27');
INSERT INTO myschema2.mytbl6 VALUES (18, '(8,1.3)', '(2,2),(0,0)', '<(5,5),8>', '((-2,-2),(3,0),(1,4))', '10.20.30.40/27');
UPDATE ONLY myschema2.mytbl6 SET col61 = 0, col62 = NULL, col63 = NULL, col64 = '<(5,6),3.5>', col65 = NULL, col66 = NULL WHERE col61 = 0;
UPDATE ONLY myschema2.mytbl6 SET col61 = 4, col62 = '(4,1.3)', col63 = '(2,2),(0,0)', col64 = '<(5,6),3.5>', col65 = NULL, col66 = '10.20.30.40/27' WHERE col61 = 4;
UPDATE ONLY myschema2.mytbl6 SET col61 = 5, col62 = '(5,1.3)', col63 = '(2,2),(0,0)', col64 = '<(5,6),3.5>', col65 = NULL, col66 = '10.20.30.40/27' WHERE col61 = 5;
UPDATE ONLY myschema2.mytbl6 SET col61 = 6, col62 = '(6,1.3)', col63 = '(2,2),(0,0)', col64 = '<(5,6),3.5>', col65 = NULL, col66 = '10.20.30.40/27' WHERE col61 = 6;
UPDATE ONLY myschema2.mytbl6 SET col61 = 7, col62 = '(7,1.3)', col63 = '(2,2),(0,0)', col64 = '<(5,6),3.5>', col65 = NULL, col66 = '10.20.30.40/27' WHERE col61 = 7;
UPDATE ONLY myschema2.mytbl6 SET col61 = 8, col62 = '(8,1.3)', col63 = '(2,2),(0,0)', col64 = '<(5,6),3.5>', col65 = NULL, col66 = '10.20.30.40/27' WHERE col61 = 8;
UPDATE ONLY myschema2.mytbl6 SET col61 = 11, col62 = '(1,1.3)', col63 = '(2,2),(0,0)', col64 = '<(5,6),3.5>', col65 = NULL, col66 = '10.20.30.40/27' WHERE col61 = 11;
UPDATE ONLY myschema2.mytbl6 SET col61 = 12, col62 = '(2,1.3)', col63 = '(2,2),(0,0)', col64 = '<(5,6),3.5>', col65 = NULL, col66 = '10.20.30.40/27' WHERE col61 = 12;
UPDATE ONLY myschema2.mytbl6 SET col61 = 13, col62 = '(3,1.3)', col63 = '(2,2),(0,0)', col64 = '<(5,6),3.5>', col65 = NULL, col66 = '10.20.30.40/27' WHERE col61 = 13;
ALTER SEQUENCE myschema2.myseq1 RESTART 1004 START 1000 INCREMENT 1 MAXVALUE 9223372036854775807 MINVALUE 1000 CACHE 1 NO CYCLE;
ALTER SEQUENCE myschema2."myTbl3_col31_seq" RESTART 21 START 1 INCREMENT 1 MAXVALUE 9223372036854775807 MINVALUE 1 CACHE 1 NO CYCLE;
--COMMIT;
RESET standard_conforming_strings;
\i /tmp/emaj_test/sql_scripts/Group3.sql
-- SQL script generated by E-Maj at [ts]$
--    for tables group(s): phil's group#3",
--    processing logs between mark M1_rollbackable and the current situation
SET standard_conforming_strings = ON;
--BEGIN TRANSACTION;
INSERT INTO "phil's schema3"."phil's tbl1" VALUES (1, 'AB''C', E'\\x0c');
INSERT INTO "phil's schema3"."phil's tbl1" VALUES (2, 'AB''C', E'\\x0c');
INSERT INTO "phil's schema3"."phil's tbl1" VALUES (3, 'AB''C', E'\\x0c');
INSERT INTO "phil's schema3"."phil's tbl1" VALUES (4, 'AB''C', E'\\x0c');
INSERT INTO "phil's schema3"."phil's tbl1" VALUES (5, 'AB''C', E'\\x0c');
INSERT INTO "phil's schema3"."phil's tbl1" VALUES (6, 'AB''C', E'\\x0c');
INSERT INTO "phil's schema3"."phil's tbl1" VALUES (7, 'AB''C', E'\\x0c');
INSERT INTO "phil's schema3"."phil's tbl1" VALUES (8, 'AB''C', E'\\x0c');
INSERT INTO "phil's schema3"."phil's tbl1" VALUES (9, 'AB''C', E'\\x0c');
INSERT INTO "phil's schema3"."phil's tbl1" VALUES (10, 'AB''C', E'\\x0c');
INSERT INTO "phil's schema3"."phil's tbl1" VALUES (11, 'AB''C', E'\\x0c');
INSERT INTO "phil's schema3"."phil's tbl1" VALUES (12, 'AB''C', E'\\x0c');
INSERT INTO "phil's schema3"."phil's tbl1" VALUES (13, 'AB''C', E'\\x0c');
INSERT INTO "phil's schema3"."phil's tbl1" VALUES (14, 'AB''C', E'\\x0c');
INSERT INTO "phil's schema3"."phil's tbl1" VALUES (15, 'AB''C', E'\\x0c');
INSERT INTO "phil's schema3"."phil's tbl1" VALUES (16, 'AB''C', E'\\x0c');
INSERT INTO "phil's schema3"."phil's tbl1" VALUES (17, 'AB''C', E'\\x0c');
INSERT INTO "phil's schema3"."phil's tbl1" VALUES (18, 'AB''C', E'\\x0c');
INSERT INTO "phil's schema3"."phil's tbl1" VALUES (19, 'AB''C', E'\\x0c');
INSERT INTO "phil's schema3"."phil's tbl1" VALUES (20, 'AB''C', E'\\x0c');
INSERT INTO "phil's schema3"."phil's tbl1" VALUES (21, 'AB''C', E'\\x0c');
INSERT INTO "phil's schema3"."phil's tbl1" VALUES (22, 'AB''C', E'\\x0c');
INSERT INTO "phil's schema3"."phil's tbl1" VALUES (23, 'AB''C', E'\\x0c');
INSERT INTO "phil's schema3"."phil's tbl1" VALUES (24, 'AB''C', E'\\x0c');
INSERT INTO "phil's schema3"."phil's tbl1" VALUES (25, 'AB''C', E'\\x0c');
INSERT INTO "phil's schema3"."phil's tbl1" VALUES (26, 'AB''C', E'\\x0c');
INSERT INTO "phil's schema3"."phil's tbl1" VALUES (27, 'AB''C', E'\\x0c');
INSERT INTO "phil's schema3"."phil's tbl1" VALUES (28, 'AB''C', E'\\x0c');
INSERT INTO "phil's schema3"."phil's tbl1" VALUES (29, 'AB''C', E'\\x0c');
INSERT INTO "phil's schema3"."phil's tbl1" VALUES (30, 'AB''C', E'\\x0c');
INSERT INTO "phil's schema3"."phil's tbl1" VALUES (31, 'AB''C', E'\\x0c');
UPDATE ONLY "phil's schema3"."phil's tbl1" SET "phil's col11" = 1, "phil's col12" = 'AB''C', "phil\s col13" = E'\\x1c' WHERE "phil's col11" = 1 AND "phil's col12" = 'AB''C';
UPDATE ONLY "phil's schema3"."phil's tbl1" SET "phil's col11" = 2, "phil's col12" = 'AB''C', "phil\s col13" = E'\\x1c' WHERE "phil's col11" = 2 AND "phil's col12" = 'AB''C';
UPDATE ONLY "phil's schema3"."phil's tbl1" SET "phil's col11" = 3, "phil's col12" = 'AB''C', "phil\s col13" = E'\\x1c' WHERE "phil's col11" = 3 AND "phil's col12" = 'AB''C';
UPDATE ONLY "phil's schema3"."phil's tbl1" SET "phil's col11" = 18, "phil's col12" = 'AB''C', "phil\s col13" = E'\\x1c27' WHERE "phil's col11" = 18 AND "phil's col12" = 'AB''C';
UPDATE ONLY "phil's schema3"."phil's tbl1" SET "phil's col11" = 19, "phil's col12" = 'AB''C', "phil\s col13" = E'\\x1c27' WHERE "phil's col11" = 19 AND "phil's col12" = 'AB''C';
UPDATE ONLY "phil's schema3"."phil's tbl1" SET "phil's col11" = 20, "phil's col12" = 'AB''C', "phil\s col13" = E'\\x1c27' WHERE "phil's col11" = 20 AND "phil's col12" = 'AB''C';
UPDATE ONLY "phil's schema3"."phil's tbl1" SET "phil's col11" = 21, "phil's col12" = 'AB''C', "phil\s col13" = E'\\x1c27' WHERE "phil's col11" = 21 AND "phil's col12" = 'AB''C';
UPDATE ONLY "phil's schema3"."phil's tbl1" SET "phil's col11" = 22, "phil's col12" = 'AB''C', "phil\s col13" = E'\\x1c27' WHERE "phil's col11" = 22 AND "phil's col12" = 'AB''C';
INSERT INTO "phil's schema3"."myTbl2\" VALUES (1, 'ABC', '12-31-2010');
DELETE FROM ONLY "phil's schema3"."phil's tbl1" WHERE "phil's col11" = 23 AND "phil's col12" = 'AB''C';
DELETE FROM ONLY "phil's schema3"."phil's tbl1" WHERE "phil's col11" = 24 AND "phil's col12" = 'AB''C';
DELETE FROM ONLY "phil's schema3"."phil's tbl1" WHERE "phil's col11" = 25 AND "phil's col12" = 'AB''C';
DELETE FROM ONLY "phil's schema3"."phil's tbl1" WHERE "phil's col11" = 26 AND "phil's col12" = 'AB''C';
DELETE FROM ONLY "phil's schema3"."phil's tbl1" WHERE "phil's col11" = 27 AND "phil's col12" = 'AB''C';
DELETE FROM ONLY "phil's schema3"."phil's tbl1" WHERE "phil's col11" = 28 AND "phil's col12" = 'AB''C';
DELETE FROM ONLY "phil's schema3"."phil's tbl1" WHERE "phil's col11" = 29 AND "phil's col12" = 'AB''C';
DELETE FROM ONLY "phil's schema3"."phil's tbl1" WHERE "phil's col11" = 30 AND "phil's col12" = 'AB''C';
DELETE FROM ONLY "phil's schema3"."phil's tbl1" WHERE "phil's col11" = 31 AND "phil's col12" = 'AB''C';
DELETE FROM ONLY "phil's schema3"."phil's tbl1" WHERE "phil's col11" = 21 AND "phil's col12" = 'AB''C';
DELETE FROM ONLY "phil's schema3"."phil's tbl1" WHERE "phil's col11" = 22 AND "phil's col12" = 'AB''C';
INSERT INTO "phil's schema3"."myTbl2\" VALUES (2, 'DEF', NULL);
DELETE FROM ONLY "phil's schema3"."phil's tbl1" WHERE "phil's col11" = 10 AND "phil's col12" = 'AB''C';
UPDATE ONLY "phil's schema3"."phil's tbl1" SET "phil's col11" = 1, "phil's col12" = 'DEF', "phil\s col13" = E'\\x1c' WHERE "phil's col11" = 1 AND "phil's col12" = 'AB''C';
UPDATE ONLY "phil's schema3"."phil's tbl1" SET "phil's col11" = 2, "phil's col12" = 'DEF', "phil\s col13" = E'\\x1c' WHERE "phil's col11" = 2 AND "phil's col12" = 'AB''C';
ALTER SEQUENCE "phil's schema3"."myTbl2\_col21_seq" RESTART 1 START 1 INCREMENT 1 MAXVALUE 9223372036854775807 MINVALUE 1 CACHE 1 NO CYCLE;
ALTER SEQUENCE "phil's schema3"."phil's seq\1" RESTART 1002 START 1000 INCREMENT 1 MAXVALUE 2000 MINVALUE 1000 CACHE 1 CYCLE;
--COMMIT;
RESET standard_conforming_strings;
  select emaj.emaj_snap_group('myGroup1','/tmp/emaj_test/snaps2','CSV HEADER');
 emaj_snap_group 
-----------------
               6
(1 row)

  select emaj.emaj_snap_group('myGroup2','/tmp/emaj_test/snaps2','CSV HEADER');
 emaj_snap_group 
-----------------
               8
(1 row)

  select emaj.emaj_snap_group('phil''s group#3",','/tmp/emaj_test/snaps2','CSV HEADER');
 emaj_snap_group 
-----------------
               4
(1 row)

rollback;
-- mask timestamp in _INFO files
\! sed -i_s -s 's/at .*/at [ts]/' /tmp/emaj_test/snaps/_INFO /tmp/emaj_test/snaps2/_INFO
-- and compare both snaps sets
-- sequences are detected as different because of :
-- - the effect of RESTART on is_called and next_val attributes
-- - internal log_cnt value being reset
\! diff --exclude _INFO_s /tmp/emaj_test/snaps /tmp/emaj_test/snaps2
diff --exclude _INFO_s /tmp/emaj_test/snaps/myschema1_myTbl3_col31_seq.snap /tmp/emaj_test/snaps2/myschema1_myTbl3_col31_seq.snap
2c2
< myTbl3_col31_seq,20,1,1,9223372036854775807,1,1,f,t
---
> myTbl3_col31_seq,21,1,1,9223372036854775807,1,1,f,f
diff --exclude _INFO_s /tmp/emaj_test/snaps/myschema2_myTbl3_col31_seq.snap /tmp/emaj_test/snaps2/myschema2_myTbl3_col31_seq.snap
2c2
< myTbl3_col31_seq,20,1,1,9223372036854775807,1,1,f,t
---
> myTbl3_col31_seq,21,1,1,9223372036854775807,1,1,f,f
diff --exclude _INFO_s "/tmp/emaj_test/snaps/phil's schema3_phil's seq\\1.snap" "/tmp/emaj_test/snaps2/phil's schema3_phil's seq\\1.snap"
2c2
< phil's seq\1,1001,1000,1,2000,1000,1,t,t
---
> phil's seq\1,1002,1000,1,2000,1000,1,t,f
set role emaj_regression_tests_adm_user;
-----------------------------
-- Step 12 : test use of a table with a very long name (63 characters long)
-----------------------------
select emaj.emaj_stop_group('phil''s group#3",');
 emaj_stop_group 
-----------------
               4
(1 row)

-- rename the "phil's tbl1" table and alter its group
reset role;
alter table "phil's schema3"."phil's tbl1" rename to table_with_very_looooooooooooooooooooooooooooooooooooooong_name;
set role emaj_regression_tests_adm_user;
update emaj.emaj_group_def set grpdef_tblseq = 'table_with_very_looooooooooooooooooooooooooooooooooooooong_name', grpdef_emaj_names_prefix = 'short' where grpdef_schema = 'phil''s schema3' and grpdef_tblseq = 'phil''s tbl1';
select emaj.emaj_alter_group('phil''s group#3",');
NOTICE:  drop cascades to trigger emaj_log_trg on table "phil's schema3".table_with_very_looooooooooooooooooooooooooooooooooooooong_name
CONTEXT:  SQL statement "DROP FUNCTION IF EXISTS "emaj #'3"."phil's schema3_phil's tbl1_log_fnct"() CASCADE"
PL/pgSQL function emaj._drop_tbl(emaj.emaj_relation) line 19 at EXECUTE statement
SQL statement "SELECT emaj._drop_tbl(r_rel)"
PL/pgSQL function emaj.emaj_alter_group(text) line 96 at PERFORM
NOTICE:  table "short_log" does not exist, skipping
CONTEXT:  SQL statement "DROP TABLE IF EXISTS "emaj #'3".short_log"
PL/pgSQL function emaj._create_tbl(emaj.emaj_group_def,text,boolean,text) line 69 at EXECUTE statement
SQL statement "SELECT emaj._create_tbl(r_grpdef, v_groupName, v_isRollbackable, v_defTsp)"
PL/pgSQL function emaj.emaj_alter_group(text) line 189 at PERFORM
NOTICE:  trigger "emaj_log_trg" for table "phil's schema3.table_with_very_looooooooooooooooooooooooooooooooooooooong_name" does not exist, skipping
CONTEXT:  SQL statement "DROP TRIGGER IF EXISTS emaj_log_trg ON "phil's schema3".table_with_very_looooooooooooooooooooooooooooooooooooooong_name"
PL/pgSQL function emaj._create_tbl(emaj.emaj_group_def,text,boolean,text) line 123 at EXECUTE statement
SQL statement "SELECT emaj._create_tbl(r_grpdef, v_groupName, v_isRollbackable, v_defTsp)"
PL/pgSQL function emaj.emaj_alter_group(text) line 189 at PERFORM
WARNING:  _check_fk_groups: Foreign key mytbl2_col21_fkey, from table phil's schema3.myTbl2\, references phil's schema3.mytbl4 that is outside groups (phil's group#3",).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(array[v_groupName])"
PL/pgSQL function emaj.emaj_alter_group(text) line 217 at PERFORM
WARNING:  _check_fk_groups: table phil's schema3.table_with_very_looooooooooooooooooooooooooooooooooooooong_name is referenced by foreign key mytbl4_col44_fkey from table phil's schema3.mytbl4 that is outside groups (phil's group#3",).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(array[v_groupName])"
PL/pgSQL function emaj.emaj_alter_group(text) line 217 at PERFORM
 emaj_alter_group 
------------------
                4
(1 row)

-- use the table and its group
select emaj.emaj_start_group('phil''s group#3",','M1_after_alter_group');
WARNING:  _check_fk_groups: Foreign key mytbl2_col21_fkey, from table phil's schema3.myTbl2\, references phil's schema3.mytbl4 that is outside groups (phil's group#3",).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._start_groups(text[],text,boolean,boolean) line 36 at PERFORM
SQL statement "SELECT emaj._start_groups(array[v_groupName], v_mark, false, v_resetLog)"
PL/pgSQL function emaj.emaj_start_group(text,text,boolean) line 17 at SQL statement
WARNING:  _check_fk_groups: table phil's schema3.table_with_very_looooooooooooooooooooooooooooooooooooooong_name is referenced by foreign key mytbl4_col44_fkey from table phil's schema3.mytbl4 that is outside groups (phil's group#3",).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._start_groups(text[],text,boolean,boolean) line 36 at PERFORM
SQL statement "SELECT emaj._start_groups(array[v_groupName], v_mark, false, v_resetLog)"
PL/pgSQL function emaj.emaj_start_group(text,text,boolean) line 17 at SQL statement
 emaj_start_group 
------------------
                4
(1 row)

update "phil's schema3".table_with_very_looooooooooooooooooooooooooooooooooooooong_name set "phil's col12" = 'GHI' where "phil's col11" between 6 and 9;
select emaj.emaj_set_mark_group('phil''s group#3",','M2');
 emaj_set_mark_group 
---------------------
                   4
(1 row)

delete from "phil's schema3".table_with_very_looooooooooooooooooooooooooooooooooooooong_name where "phil's col11" > 18;
select emaj.emaj_rollback_group('phil''s group#3",','M1_after_alter_group');
WARNING:  _check_fk_groups: Foreign key mytbl2_col21_fkey, from table phil's schema3.myTbl2\, references phil's schema3.mytbl4 that is outside groups (phil's group#3",).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._rlbk_init(text[],text,boolean,integer,boolean) line 66 at PERFORM
SQL statement "SELECT emaj._rlbk_init(v_groupNames, v_mark, v_isLoggedRlbk, 1, v_multiGroup)"
PL/pgSQL function emaj._rlbk_groups(text[],text,boolean,boolean) line 20 at SQL statement
PL/pgSQL function emaj.emaj_rollback_group(text,text) line 7 at RETURN
WARNING:  _check_fk_groups: table phil's schema3.table_with_very_looooooooooooooooooooooooooooooooooooooong_name is referenced by foreign key mytbl4_col44_fkey from table phil's schema3.mytbl4 that is outside groups (phil's group#3",).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._rlbk_init(text[],text,boolean,integer,boolean) line 66 at PERFORM
SQL statement "SELECT emaj._rlbk_init(v_groupNames, v_mark, v_isLoggedRlbk, 1, v_multiGroup)"
PL/pgSQL function emaj._rlbk_groups(text[],text,boolean,boolean) line 20 at SQL statement
PL/pgSQL function emaj.emaj_rollback_group(text,text) line 7 at RETURN
 emaj_rollback_group 
---------------------
                   3
(1 row)

select emaj.emaj_stop_group('phil''s group#3",');
 emaj_stop_group 
-----------------
               4
(1 row)

select emaj.emaj_drop_group('phil''s group#3",');
 emaj_drop_group 
-----------------
               4
(1 row)

-----------------------------
-- Step 13 : test use of groups or marks protection
-----------------------------
-- try to rollback a protected group
select emaj.emaj_protect_group('myGroup2');
 emaj_protect_group 
--------------------
                  1
(1 row)

select emaj.emaj_rollback_group('myGroup2','M3');
ERROR:  _rlbk_check: Group myGroup2 is currently protected against rollback.
CONTEXT:  SQL statement "SELECT emaj._rlbk_check(v_groupNames, v_mark)"
PL/pgSQL function emaj._rlbk_init(text[],text,boolean,integer,boolean) line 24 at SQL statement
SQL statement "SELECT emaj._rlbk_init(v_groupNames, v_mark, v_isLoggedRlbk, 1, v_multiGroup)"
PL/pgSQL function emaj._rlbk_groups(text[],text,boolean,boolean) line 20 at SQL statement
PL/pgSQL function emaj.emaj_rollback_group(text,text) line 7 at RETURN
select emaj.emaj_unprotect_group('myGroup2');
 emaj_unprotect_group 
----------------------
                    1
(1 row)

-- try to rollback over a protected mark
select emaj.emaj_set_mark_group('myGroup1','Mark_to_protect');
 emaj_set_mark_group 
---------------------
                   6
(1 row)

select emaj.emaj_protect_mark_group('myGroup1','Mark_to_protect');
 emaj_protect_mark_group 
-------------------------
                       1
(1 row)

select emaj.emaj_rollback_group('myGroup1','Multi-1');
ERROR:  _rlbk_check: protected marks (Mark_to_protect) for group myGroup1 block the rollback to mark Multi-1.
CONTEXT:  SQL statement "SELECT emaj._rlbk_check(v_groupNames, v_mark)"
PL/pgSQL function emaj._rlbk_init(text[],text,boolean,integer,boolean) line 24 at SQL statement
SQL statement "SELECT emaj._rlbk_init(v_groupNames, v_mark, v_isLoggedRlbk, 1, v_multiGroup)"
PL/pgSQL function emaj._rlbk_groups(text[],text,boolean,boolean) line 20 at SQL statement
PL/pgSQL function emaj.emaj_rollback_group(text,text) line 7 at RETURN
select emaj.emaj_unprotect_mark_group('myGroup1','Mark_to_protect');
 emaj_unprotect_mark_group 
---------------------------
                         1
(1 row)

select emaj.emaj_delete_mark_group('myGroup1','Mark_to_protect');
 emaj_delete_mark_group 
------------------------
                      1
(1 row)

-----------------------------
-- Step 14 : test complex use of rollbacks consolidations
-----------------------------
set search_path=public,myschema1;
-- 2 consolidations of 2 logged rollbacks
-- Multi-1 MC1 MC2 RMC1S RMC1D      MC3 MC4 MC5 RMC3S RMC3D
--         ^       lrg(MC1)         ^           lrg(MC3)
--         xxxxxxxxxxxxxxx conso(RMC1D)
-- 	       	                        xxxxxxxxxxxxxxxxxxx conso(RMC3D)
select emaj.emaj_set_mark_group('myGroup1','MC1');
 emaj_set_mark_group 
---------------------
                   6
(1 row)

insert into myTbl1 select i, 'Test', 'Conso' from generate_series (2000,2012) as i;
insert into myTbl2 values (2000,'TC1',NULL);
delete from myTbl1 where col11 > 2010;
select emaj.emaj_set_mark_group('myGroup1','MC2');
 emaj_set_mark_group 
---------------------
                   6
(1 row)

update myTbl2 set col22 = 'TC2' WHERE col22 ='TC1';
select emaj.emaj_logged_rollback_group('myGroup1','MC1');
 emaj_logged_rollback_group 
----------------------------
                          3
(1 row)

insert into myTbl2 values (2000,'TC3',NULL);
select emaj.emaj_rename_mark_group('myGroup1','EMAJ_LAST_MARK','RLBK_MC1_DONE');
 emaj_rename_mark_group 
------------------------
 
(1 row)

select emaj.emaj_set_mark_group('myGroup1','MC3');
 emaj_set_mark_group 
---------------------
                   6
(1 row)

insert into "myTbl3" (col33) select generate_series(2000,2039,4)/100;
insert into myTbl4 values (2000,'FK...',1,10,'ABC');
update myTbl4 set col43 = NULL where col41 = 2000;
select emaj.emaj_set_mark_group('myGroup1','MC4');
 emaj_set_mark_group 
---------------------
                   6
(1 row)

select emaj.emaj_set_mark_group('myGroup1','MC5');
 emaj_set_mark_group 
---------------------
                   6
(1 row)

select emaj.emaj_logged_rollback_group('myGroup1','MC3');
 emaj_logged_rollback_group 
----------------------------
                          3
(1 row)

select emaj.emaj_consolidate_rollback_group('myGroup1','RLBK_MC1_DONE');
 emaj_consolidate_rollback_group 
---------------------------------
                               3
(1 row)

select emaj.emaj_consolidate_rollback_group('myGroup1','EMAJ_LAST_MARK');
 emaj_consolidate_rollback_group 
---------------------------------
                               3
(1 row)

select * from emaj.emaj_detailed_log_stat_group('myGroup1','Multi-1',NULL);
 stat_group | stat_schema | stat_table | stat_role | stat_verb | stat_rows 
------------+-------------+------------+-----------+-----------+-----------
 myGroup1   | myschema1   | mytbl2     | postgres  | INSERT    |         1
(1 row)

-- 2 consolidations of 2 nested logged rollbacks
-- MC6 MC7 MC8  RMC8S RMC8D M9 RMC6S RMC6D
--         ^    lrg(MC8)
--         xxxxxxxxxxxx conso(RMC8D)
-- ^                           lrb(MC6)
-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx conso(RMC6D)
select emaj.emaj_set_mark_group('myGroup1','MC6');
 emaj_set_mark_group 
---------------------
                   6
(1 row)

insert into myTbl1 select i, 'Test', 'Conso' from generate_series (2000,2012) as i;
insert into myTbl2 values (3000,'TC6',NULL);
delete from myTbl1 where col11 > 2010;
select emaj.emaj_set_mark_group('myGroup1','MC7');
 emaj_set_mark_group 
---------------------
                   6
(1 row)

update myTbl2 set col22 = 'TC7' WHERE col22 ='TC6';
select emaj.emaj_set_mark_group('myGroup1','MC8');
 emaj_set_mark_group 
---------------------
                   6
(1 row)

insert into myTbl2 values (3001,'TC8',NULL);
select emaj.emaj_logged_rollback_group('myGroup1','MC8');
 emaj_logged_rollback_group 
----------------------------
                          2
(1 row)

select emaj.emaj_consolidate_rollback_group('myGroup1','EMAJ_LAST_MARK');
 emaj_consolidate_rollback_group 
---------------------------------
                               2
(1 row)

select emaj.emaj_set_mark_group('myGroup1','MC9');
 emaj_set_mark_group 
---------------------
                   6
(1 row)

insert into "myTbl3" (col33) select generate_series(2000,2039,4)/100;
insert into myTbl4 values (2000,'FK...',1,10,'ABC');
update myTbl4 set col43 = NULL where col41 = 2000;
select emaj.emaj_logged_rollback_group('myGroup1','MC6');
 emaj_logged_rollback_group 
----------------------------
                          5
(1 row)

select emaj.emaj_consolidate_rollback_group('myGroup1','EMAJ_LAST_MARK');
 emaj_consolidate_rollback_group 
---------------------------------
                               5
(1 row)

select * from emaj.emaj_detailed_log_stat_group('myGroup1','Multi-1',NULL);
 stat_group | stat_schema | stat_table | stat_role | stat_verb | stat_rows 
------------+-------------+------------+-----------+-----------+-----------
 myGroup1   | myschema1   | mytbl2     | postgres  | INSERT    |         1
(1 row)

-- consolidation of 2 logged rollbacks referencing the same mark
-- MC10  RMC10S RMC10D M11 RMC10S RMC10D
-- ^     lrg(MC10)
-- ^                       lrb(MC10)
-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx conso(RMC10D)
select emaj.emaj_set_mark_group('myGroup1','MC10');
 emaj_set_mark_group 
---------------------
                   6
(1 row)

insert into myTbl1 select i, 'Test', 'Conso' from generate_series (3000,3010) as i;
delete from myTbl1 where col11 > 3005;
select emaj.emaj_logged_rollback_group('myGroup1','MC10');
 emaj_logged_rollback_group 
----------------------------
                          2
(1 row)

update myTbl2 set col22 = 'TC7' WHERE col22 ='TC6';
select emaj.emaj_set_mark_group('myGroup1','MC11');
 emaj_set_mark_group 
---------------------
                   6
(1 row)

insert into myTbl4 values (3000,'FK...',1,10,'ABC');
update myTbl4 set col43 = NULL where col41 = 3000;
select emaj.emaj_logged_rollback_group('myGroup1','MC10');
 emaj_logged_rollback_group 
----------------------------
                          3
(1 row)

select emaj.emaj_consolidate_rollback_group('myGroup1','EMAJ_LAST_MARK');
 emaj_consolidate_rollback_group 
---------------------------------
                               3
(1 row)

select * from emaj.emaj_detailed_log_stat_group('myGroup1','Multi-1',NULL);
 stat_group | stat_schema | stat_table | stat_role | stat_verb | stat_rows 
------------+-------------+------------+-----------+-----------+-----------
 myGroup1   | myschema1   | mytbl2     | postgres  | INSERT    |         1
(1 row)

-- consolidation of 1 from 2 overlapping logged rollbacks
-- MC15 MC16 RMC15S RMC15D MC17 RMC16S RMC16D
-- ^         lrg(MC15)
--      ^                       lrg(MC16)
-- xxxxxxxxxxxxxxxxx conso(RMC15D)
select emaj.emaj_set_mark_group('myGroup1','MC15');
 emaj_set_mark_group 
---------------------
                   6
(1 row)

insert into myTbl1 select i, 'Test', 'Conso' from generate_series (4000,4012) as i;
insert into myTbl2 values (4000,'TC15',NULL);
delete from myTbl1 where col11 > 4010;
select emaj.emaj_set_mark_group('myGroup1','MC16');
 emaj_set_mark_group 
---------------------
                   6
(1 row)

update myTbl2 set col22 = 'TC16' WHERE col22 ='TC15';
select emaj.emaj_logged_rollback_group('myGroup1','MC15');
 emaj_logged_rollback_group 
----------------------------
                          3
(1 row)

select emaj.emaj_rename_mark_group('myGroup1','EMAJ_LAST_MARK','RLBK_MC15_DONE');
 emaj_rename_mark_group 
------------------------
 
(1 row)

select emaj.emaj_set_mark_group('myGroup1','MC17');
 emaj_set_mark_group 
---------------------
                   6
(1 row)

insert into myTbl2 values (4001,'TC15',NULL);
select emaj.emaj_logged_rollback_group('myGroup1','MC16');
 emaj_logged_rollback_group 
----------------------------
                          3
(1 row)

select emaj.emaj_consolidate_rollback_group('myGroup1','RLBK_MC15_DONE');
 emaj_consolidate_rollback_group 
---------------------------------
                               3
(1 row)

select * from emaj.emaj_detailed_log_stat_group('myGroup1','Multi-1',NULL);
 stat_group | stat_schema | stat_table | stat_role | stat_verb | stat_rows 
------------+-------------+------------+-----------+-----------+-----------
 myGroup1   | myschema1   | mytbl1     | postgres  | INSERT    |        11
 myGroup1   | myschema1   | mytbl2     | postgres  | DELETE    |         1
 myGroup1   | myschema1   | mytbl2     | postgres  | INSERT    |         3
(3 rows)

select * from myTbl1 order by col11;
 col11 |   col12    |    col13     
-------+------------+--------------
     2 | ABC        | \x1c
     3 | ABC        | \x1c
     4 | ABC        | \x0c
     5 | ABC        | \x0c
     6 | ABC        | \x0c
     7 | ABC        | \x0c
     8 | ABC        | \x0c
     9 | ABC        | \x0c
    10 | ABC        | \x0c
   100 | DEF        | \x00
   101 | DEF        | \x00
   102 | DEF        | \x00
   103 | DEF        | \x00
   104 | DEF        | \x00
   105 | DEF        | \x00
   106 | DEF        | \x00
   107 | DEF        | \x00
   108 | DEF        | \x00
   109 | DEF        | \x00
   110 | DEF        | \x00
  4000 | Test       | \x436f6e736f
  4001 | Test       | \x436f6e736f
  4002 | Test       | \x436f6e736f
  4003 | Test       | \x436f6e736f
  4004 | Test       | \x436f6e736f
  4005 | Test       | \x436f6e736f
  4006 | Test       | \x436f6e736f
  4007 | Test       | \x436f6e736f
  4008 | Test       | \x436f6e736f
  4009 | Test       | \x436f6e736f
  4010 | Test       | \x436f6e736f
(31 rows)

select * from myTbl2 order by col21;
 col21 | col22 |   col23    
-------+-------+------------
     1 | ABC   | 12-31-2010
     2 | DEF   | 
     3 | GHI   | 01-02-2010
  2000 | TC3   | 
  4000 | TC15  | 
(5 rows)

select mark_id, mark_group, regexp_replace(mark_name,E'\\d\\d\.\\d\\d\\.\\d\\d\\.\\d\\d\\d','%','g'), mark_global_seq, mark_is_deleted, mark_is_rlbk_protected, mark_comment, mark_last_sequence_id, mark_log_rows_before_next, mark_logged_rlbk_target_mark from emaj.emaj_mark where mark_group = 'myGroup1' order by mark_id;
 mark_id | mark_group |        regexp_replace        | mark_global_seq | mark_is_deleted | mark_is_rlbk_protected | mark_comment | mark_last_sequence_id | mark_log_rows_before_next | mark_logged_rlbk_target_mark 
---------+------------+------------------------------+-----------------+-----------------+------------------------+--------------+-----------------------+---------------------------+------------------------------
     613 | myGroup1   | M4                           |          100111 | t               | f                      |              |                  6089 |                        10 | 
     614 | myGroup1   | M5                           |          100121 | t               | f                      |              |                  6095 |                         3 | 
     620 | myGroup1   | Before logged rollback to M4 |          100133 | t               | f                      |              |                  6123 |                        28 | 
     622 | myGroup1   | STOP_%                       |          100161 | t               | f                      |              |                  6143 |                         0 | 
     634 | myGroup1   | Stop after rollback          |          100161 | t               | f                      |              |                  6213 |                         0 | 
     636 | myGroup1   | Multi-1                      |          100161 | f               | f                      |              |                  6227 |                         0 | 
     660 | myGroup1   | MC1                          |          100337 | f               | f                      |              |                  6301 |                         0 | 
     663 | myGroup1   | RLBK_MC1_DONE                |          100366 | f               | f                      |              |                  6319 |                         1 | MC1
     664 | myGroup1   | MC3                          |          100367 | f               | f                      |              |                  6325 |                         0 | 
     668 | myGroup1   | RLBK_MC3_%_DONE              |          100390 | f               | f                      |              |                  6349 |                         0 | MC3
     669 | myGroup1   | MC6                          |          100390 | f               | f                      |              |                  6355 |                         0 | 
     676 | myGroup1   | RLBK_MC6_%_DONE              |          100444 | f               | f                      |              |                  6397 |                         0 | MC6
     677 | myGroup1   | MC10                         |          100444 | f               | f                      |              |                  6403 |                         0 | 
     682 | myGroup1   | RLBK_MC10_%_DONE             |          100469 | f               | f                      |              |                  6433 |                         0 | MC10
     683 | myGroup1   | MC15                         |          100469 | f               | f                      |              |                  6439 |                         0 | 
     686 | myGroup1   | RLBK_MC15_DONE               |          100498 | f               | f                      |              |                  6457 |                         0 | MC15
     687 | myGroup1   | MC17                         |          100498 | f               | f                      |              |                  6463 |                         1 | 
     688 | myGroup1   | RLBK_MC16_%_START            |          100499 | f               | f                      |              |                  6469 |                        13 | 
     689 | myGroup1   | RLBK_MC16_%_DONE             |          100512 | f               | f                      |              |                  6475 |                           | 
(19 rows)

select sequ_id,sequ_schema, sequ_name, regexp_replace(sequ_mark,E'\\d\\d\.\\d\\d\\.\\d\\d\\.\\d\\d\\d','%','g'), sequ_last_val, sequ_is_called from emaj.emaj_sequence where sequ_name like 'myschema1%' order by sequ_id;
 sequ_id | sequ_schema |         sequ_name         |        regexp_replace        | sequ_last_val | sequ_is_called 
---------+-------------+---------------------------+------------------------------+---------------+----------------
    6031 | emajC       | myschema1_myTbl3_log_seq  | M3                           |            10 | t
    6034 | emaj        | myschema1_mytbl2_log_seq  | M3                           |             2 | t
    6035 | emajb       | myschema1_mytbl2b_log_seq | M3                           |             1 | f
    6085 | emajC       | myschema1_myTbl3_log_seq  | M4                           |            10 | t
    6086 | emaj        | myschema1_mytbl1_log_seq  | M4                           |            30 | t
    6087 | emaj        | myschema1_mytbl4_log_seq  | M4                           |             8 | t
    6088 | emaj        | myschema1_mytbl2_log_seq  | M4                           |             3 | t
    6089 | emajb       | myschema1_mytbl2b_log_seq | M4                           |             1 | f
    6091 | emajC       | myschema1_myTbl3_log_seq  | M5                           |            20 | t
    6092 | emaj        | myschema1_mytbl1_log_seq  | M5                           |            30 | t
    6093 | emaj        | myschema1_mytbl4_log_seq  | M5                           |             8 | t
    6094 | emaj        | myschema1_mytbl2_log_seq  | M5                           |             3 | t
    6095 | emajb       | myschema1_mytbl2b_log_seq | M5                           |             1 | f
    6097 | emajC       | myschema1_myTbl3_log_seq  | M6                           |            20 | t
    6100 | emaj        | myschema1_mytbl2_log_seq  | M6                           |             3 | t
    6101 | emajb       | myschema1_mytbl2b_log_seq | M6                           |             1 | f
    6119 | emajC       | myschema1_myTbl3_log_seq  | Before logged rollback to M4 |            20 | t
    6120 | emaj        | myschema1_mytbl1_log_seq  | Before logged rollback to M4 |            32 | t
    6121 | emaj        | myschema1_mytbl4_log_seq  | Before logged rollback to M4 |            12 | t
    6122 | emaj        | myschema1_mytbl2_log_seq  | Before logged rollback to M4 |             3 | t
    6123 | emajb       | myschema1_mytbl2b_log_seq | Before logged rollback to M4 |             1 | f
    6133 | emajC       | myschema1_myTbl3_log_seq  | STOP_%                       |            45 | t
    6134 | emaj        | myschema1_mytbl1_log_seq  | STOP_%                       |            33 | t
    6135 | emaj        | myschema1_mytbl4_log_seq  | STOP_%                       |            14 | t
    6136 | emaj        | myschema1_mytbl2_log_seq  | STOP_%                       |             3 | t
    6137 | emajb       | myschema1_mytbl2b_log_seq | STOP_%                       |             1 | f
    6161 | emajC       | myschema1_myTbl3_log_seq  | Multi-2                      |            45 | t
    6162 | emaj        | myschema1_mytbl1_log_seq  | Multi-2                      |            33 | t
    6163 | emaj        | myschema1_mytbl4_log_seq  | Multi-2                      |            14 | t
    6164 | emaj        | myschema1_mytbl2_log_seq  | Multi-2                      |             3 | t
    6165 | emajb       | myschema1_mytbl2b_log_seq | Multi-2                      |             1 | f
    6175 | emajC       | myschema1_myTbl3_log_seq  | RLBK_Multi-1_%_START         |            45 | t
    6176 | emaj        | myschema1_mytbl1_log_seq  | RLBK_Multi-1_%_START         |            33 | t
    6177 | emaj        | myschema1_mytbl4_log_seq  | RLBK_Multi-1_%_START         |            14 | t
    6178 | emaj        | myschema1_mytbl2_log_seq  | RLBK_Multi-1_%_START         |             3 | t
    6179 | emajb       | myschema1_mytbl2b_log_seq | RLBK_Multi-1_%_START         |             1 | f
    6189 | emajC       | myschema1_myTbl3_log_seq  | RLBK_Multi-1_%_DONE          |            45 | t
    6190 | emaj        | myschema1_mytbl1_log_seq  | RLBK_Multi-1_%_DONE          |            33 | t
    6191 | emaj        | myschema1_mytbl4_log_seq  | RLBK_Multi-1_%_DONE          |            14 | t
    6192 | emaj        | myschema1_mytbl2_log_seq  | RLBK_Multi-1_%_DONE          |             3 | t
    6193 | emajb       | myschema1_mytbl2b_log_seq | RLBK_Multi-1_%_DONE          |             1 | f
    6203 | emajC       | myschema1_myTbl3_log_seq  | Stop after rollback          |            45 | t
    6204 | emaj        | myschema1_mytbl1_log_seq  | Stop after rollback          |            33 | t
    6205 | emaj        | myschema1_mytbl4_log_seq  | Stop after rollback          |            14 | t
    6206 | emaj        | myschema1_mytbl2_log_seq  | Stop after rollback          |             3 | t
    6207 | emajb       | myschema1_mytbl2b_log_seq | Stop after rollback          |             1 | f
    6217 | emajC       | myschema1_myTbl3_log_seq  | Multi-1                      |            45 | t
    6218 | emaj        | myschema1_mytbl1_log_seq  | Multi-1                      |            33 | t
    6219 | emaj        | myschema1_mytbl4_log_seq  | Multi-1                      |            14 | t
    6220 | emaj        | myschema1_mytbl2_log_seq  | Multi-1                      |             3 | t
    6221 | emajb       | myschema1_mytbl2b_log_seq | Multi-1                      |             1 | f
    6297 | emajC       | myschema1_myTbl3_log_seq  | MC1                          |            45 | t
    6298 | emaj        | myschema1_mytbl1_log_seq  | MC1                          |            53 | t
    6299 | emaj        | myschema1_mytbl4_log_seq  | MC1                          |            14 | t
    6300 | emaj        | myschema1_mytbl2_log_seq  | MC1                          |             3 | t
    6301 | emajb       | myschema1_mytbl2b_log_seq | MC1                          |             1 | f
    6315 | emajC       | myschema1_myTbl3_log_seq  | RLBK_MC1_DONE                |            45 | t
    6316 | emaj        | myschema1_mytbl1_log_seq  | RLBK_MC1_DONE                |            79 | t
    6317 | emaj        | myschema1_mytbl4_log_seq  | RLBK_MC1_DONE                |            14 | t
    6318 | emaj        | myschema1_mytbl2_log_seq  | RLBK_MC1_DONE                |             6 | t
    6319 | emajb       | myschema1_mytbl2b_log_seq | RLBK_MC1_DONE                |             1 | f
    6321 | emajC       | myschema1_myTbl3_log_seq  | MC3                          |            45 | t
    6322 | emaj        | myschema1_mytbl1_log_seq  | MC3                          |            79 | t
    6323 | emaj        | myschema1_mytbl4_log_seq  | MC3                          |            14 | t
    6324 | emaj        | myschema1_mytbl2_log_seq  | MC3                          |             7 | t
    6325 | emajb       | myschema1_mytbl2b_log_seq | MC3                          |             1 | f
    6345 | emajC       | myschema1_myTbl3_log_seq  | RLBK_MC3_%_DONE              |            65 | t
    6346 | emaj        | myschema1_mytbl1_log_seq  | RLBK_MC3_%_DONE              |            79 | t
    6347 | emaj        | myschema1_mytbl4_log_seq  | RLBK_MC3_%_DONE              |            17 | t
    6348 | emaj        | myschema1_mytbl2_log_seq  | RLBK_MC3_%_DONE              |             7 | t
    6349 | emajb       | myschema1_mytbl2b_log_seq | RLBK_MC3_%_DONE              |             1 | f
    6351 | emajC       | myschema1_myTbl3_log_seq  | MC6                          |            65 | t
    6352 | emaj        | myschema1_mytbl1_log_seq  | MC6                          |            79 | t
    6353 | emaj        | myschema1_mytbl4_log_seq  | MC6                          |            17 | t
    6354 | emaj        | myschema1_mytbl2_log_seq  | MC6                          |             7 | t
    6355 | emajb       | myschema1_mytbl2b_log_seq | MC6                          |             1 | f
    6393 | emajC       | myschema1_myTbl3_log_seq  | RLBK_MC6_%_DONE              |            85 | t
    6394 | emaj        | myschema1_mytbl1_log_seq  | RLBK_MC6_%_DONE              |           105 | t
    6395 | emaj        | myschema1_mytbl4_log_seq  | RLBK_MC6_%_DONE              |            20 | t
    6396 | emaj        | myschema1_mytbl2_log_seq  | RLBK_MC6_%_DONE              |            12 | t
    6397 | emajb       | myschema1_mytbl2b_log_seq | RLBK_MC6_%_DONE              |             1 | f
    6399 | emajC       | myschema1_myTbl3_log_seq  | MC10                         |            85 | t
    6400 | emaj        | myschema1_mytbl1_log_seq  | MC10                         |           105 | t
    6401 | emaj        | myschema1_mytbl4_log_seq  | MC10                         |            20 | t
    6402 | emaj        | myschema1_mytbl2_log_seq  | MC10                         |            12 | t
    6403 | emajb       | myschema1_mytbl2b_log_seq | MC10                         |             1 | f
    6429 | emajC       | myschema1_myTbl3_log_seq  | RLBK_MC10_%_DONE             |            85 | t
    6430 | emaj        | myschema1_mytbl1_log_seq  | RLBK_MC10_%_DONE             |           127 | t
    6431 | emaj        | myschema1_mytbl4_log_seq  | RLBK_MC10_%_DONE             |            23 | t
    6432 | emaj        | myschema1_mytbl2_log_seq  | RLBK_MC10_%_DONE             |            12 | t
    6433 | emajb       | myschema1_mytbl2b_log_seq | RLBK_MC10_%_DONE             |             1 | f
    6435 | emajC       | myschema1_myTbl3_log_seq  | MC15                         |            85 | t
    6436 | emaj        | myschema1_mytbl1_log_seq  | MC15                         |           127 | t
    6437 | emaj        | myschema1_mytbl4_log_seq  | MC15                         |            23 | t
    6438 | emaj        | myschema1_mytbl2_log_seq  | MC15                         |            12 | t
    6439 | emajb       | myschema1_mytbl2b_log_seq | MC15                         |             1 | f
    6453 | emajC       | myschema1_myTbl3_log_seq  | RLBK_MC15_DONE               |            85 | t
    6454 | emaj        | myschema1_mytbl1_log_seq  | RLBK_MC15_DONE               |           153 | t
    6455 | emaj        | myschema1_mytbl4_log_seq  | RLBK_MC15_DONE               |            23 | t
    6456 | emaj        | myschema1_mytbl2_log_seq  | RLBK_MC15_DONE               |            15 | t
    6457 | emajb       | myschema1_mytbl2b_log_seq | RLBK_MC15_DONE               |             1 | f
    6459 | emajC       | myschema1_myTbl3_log_seq  | MC17                         |            85 | t
    6460 | emaj        | myschema1_mytbl1_log_seq  | MC17                         |           153 | t
    6461 | emaj        | myschema1_mytbl4_log_seq  | MC17                         |            23 | t
    6462 | emaj        | myschema1_mytbl2_log_seq  | MC17                         |            15 | t
    6463 | emajb       | myschema1_mytbl2b_log_seq | MC17                         |             1 | f
    6465 | emajC       | myschema1_myTbl3_log_seq  | RLBK_MC16_%_START            |            85 | t
    6466 | emaj        | myschema1_mytbl1_log_seq  | RLBK_MC16_%_START            |           153 | t
    6467 | emaj        | myschema1_mytbl4_log_seq  | RLBK_MC16_%_START            |            23 | t
    6468 | emaj        | myschema1_mytbl2_log_seq  | RLBK_MC16_%_START            |            16 | t
    6469 | emajb       | myschema1_mytbl2b_log_seq | RLBK_MC16_%_START            |             1 | f
    6471 | emajC       | myschema1_myTbl3_log_seq  | RLBK_MC16_%_DONE             |            85 | t
    6472 | emaj        | myschema1_mytbl1_log_seq  | RLBK_MC16_%_DONE             |           164 | t
    6473 | emaj        | myschema1_mytbl4_log_seq  | RLBK_MC16_%_DONE             |            23 | t
    6474 | emaj        | myschema1_mytbl2_log_seq  | RLBK_MC16_%_DONE             |            18 | t
    6475 | emajb       | myschema1_mytbl2b_log_seq | RLBK_MC16_%_DONE             |             1 | f
(116 rows)

select sqhl_schema, sqhl_table, sqhl_begin_mark_id, sqhl_end_mark_id, sqhl_hole_size from emaj.emaj_seq_hole where sqhl_schema = 'myschema1' order by sqhl_begin_mark_id;
 sqhl_schema | sqhl_table | sqhl_begin_mark_id | sqhl_end_mark_id | sqhl_hole_size 
-------------+------------+--------------------+------------------+----------------
 myschema1   | mytbl1     |                614 |              619 |              1
 myschema1   | mytbl4     |                614 |              619 |              2
 myschema1   | mytbl1     |                636 |              650 |             20
 myschema1   | mytbl2     |                660 |              663 |              3
 myschema1   | mytbl1     |                660 |              663 |             26
 myschema1   | mytbl4     |                664 |              668 |              3
 myschema1   | myTbl3     |                664 |              668 |             20
 myschema1   | mytbl2     |                669 |              676 |              5
 myschema1   | mytbl4     |                669 |              676 |              3
 myschema1   | mytbl1     |                669 |              676 |             26
 myschema1   | myTbl3     |                669 |              676 |             20
 myschema1   | mytbl4     |                677 |              682 |              3
 myschema1   | mytbl1     |                677 |              682 |             22
 myschema1   | mytbl2     |                683 |              686 |              3
 myschema1   | mytbl1     |                683 |              686 |             26
(15 rows)

select emaj.emaj_rollback_group('myGroup1','Multi-1');
 emaj_rollback_group 
---------------------
                   3
(1 row)

-----------------------------
-- test end: check, reset history and force sequences id
-----------------------------
-- first set all rollback events state
select emaj.emaj_cleanup_rollback_state();
 emaj_cleanup_rollback_state 
-----------------------------
                           2
(1 row)

-- check rollback related tables
select rlbk_id, rlbk_groups, rlbk_mark, rlbk_is_logged, rlbk_nb_session, rlbk_nb_table, rlbk_nb_sequence, 
       rlbk_eff_nb_table, rlbk_status, rlbk_begin_hist_id, rlbk_is_dblink_used,
       case when rlbk_end_datetime is null then 'null' else '[ts]' end as "end_datetime", rlbk_msg
  from emaj.emaj_rlbk order by rlbk_id;
 rlbk_id |      rlbk_groups      |      rlbk_mark       | rlbk_is_logged | rlbk_nb_session | rlbk_nb_table | rlbk_nb_sequence | rlbk_eff_nb_table | rlbk_status | rlbk_begin_hist_id | rlbk_is_dblink_used | end_datetime |                         rlbk_msg                          
---------+-----------------------+----------------------+----------------+-----------------+---------------+------------------+-------------------+-------------+--------------------+---------------------+--------------+-----------------------------------------------------------
     100 | {myGroup2}            | M2                   | t              |               1 |             6 |                2 |                 3 | COMMITTED   |               6066 | f                   | [ts]         | Completed: 3 tables and 2 sequences effectively processed
     101 | {myGroup2}            | M3                   | t              |               1 |             6 |                2 |                 3 | COMMITTED   |               6083 | f                   | [ts]         | Completed: 3 tables and 2 sequences effectively processed
     102 | {myGroup1}            | M2                   | f              |               1 |             5 |                1 |                 2 | COMMITTED   |               6100 | t                   | [ts]         | Completed: 2 tables and 1 sequences effectively processed
     103 | {myGroup2}            | M2                   | t              |               1 |             6 |                2 |                 3 | COMMITTED   |               6125 | t                   | [ts]         | Completed: 3 tables and 2 sequences effectively processed
     104 | {myGroup2}            | M3                   | f              |               1 |             6 |                2 |                 3 | COMMITTED   |               6143 | t                   | [ts]         | Completed: 3 tables and 2 sequences effectively processed
     105 | {myGroup1}            | M5                   | f              |               1 |             5 |                1 |                 2 | COMMITTED   |               6163 | t                   | [ts]         | Completed: 2 tables and 1 sequences effectively processed
     106 | {myGroup1}            | M4                   | t              |               1 |             5 |                1 |                 3 | COMMITTED   |               6175 | t                   | [ts]         | Completed: 3 tables and 1 sequences effectively processed
     107 | {myGroup1,myGroup2}   | Multi-1              | t              |               1 |            11 |                3 |                 0 | COMMITTED   |               6223 | t                   | [ts]         | Completed: 0 tables and 3 sequences effectively processed
     108 | {myGroup1,myGroup2}   | Multi-2              | f              |               1 |            11 |                3 |                 0 | COMMITTED   |               6236 | t                   | [ts]         | Completed: 0 tables and 3 sequences effectively processed
     109 | {myGroup1,myGroup2}   | Multi-1              | f              |               1 |            11 |                3 |                 0 | COMMITTED   |               6249 | t                   | [ts]         | Completed: 0 tables and 3 sequences effectively processed
     110 | {myGroup2}            | Multi-2              | f              |               1 |             6 |                2 |                 0 | COMMITTED   |               6282 | t                   | [ts]         | Completed: 0 tables and 2 sequences effectively processed
     111 | {"phil's group#3\","} | phil's mark #3       | t              |               1 |             2 |                2 |                 0 | COMMITTED   |               6354 | t                   | [ts]         | Completed: 0 tables and 2 sequences effectively processed
     112 | {"phil's group#3\","} | phil's mark #3       | f              |               1 |             2 |                2 |                 0 | COMMITTED   |               6366 | t                   | [ts]         | Completed: 0 tables and 2 sequences effectively processed
     113 | {myGroup1}            | Multi-1              | f              |               1 |             5 |                1 |                 1 | COMMITTED   |               6376 | t                   | [ts]         | Completed: 1 tables and 1 sequences effectively processed
     114 | {myGroup1}            | Multi-1              | f              |               1 |             5 |                1 |                 0 | ABORTED     |               6397 | t                   | [ts]         | Completed: 0 tables and 1 sequences effectively processed
     115 | {myGroup2}            | Multi-1              | f              |               1 |             6 |                2 |                 2 | ABORTED     |               6404 | t                   | [ts]         | Completed: 2 tables and 2 sequences effectively processed
     116 | {"phil's group#3\","} | M1_rollbackable      | f              |               1 |             2 |                2 |                 2 | ABORTED     |               6416 | t                   | [ts]         | Completed: 2 tables and 2 sequences effectively processed
     117 | {"phil's group#3\","} | M1_after_alter_group | f              |               1 |             2 |                2 |                 1 | COMMITTED   |               6460 | t                   | [ts]         | Completed: 1 tables and 2 sequences effectively processed
     118 | {myGroup1}            | MC1                  | t              |               1 |             5 |                1 |                 2 | COMMITTED   |               6499 | t                   | [ts]         | Completed: 2 tables and 1 sequences effectively processed
     119 | {myGroup1}            | MC3                  | t              |               1 |             5 |                1 |                 2 | COMMITTED   |               6529 | t                   | [ts]         | Completed: 2 tables and 1 sequences effectively processed
     120 | {myGroup1}            | MC8                  | t              |               1 |             5 |                1 |                 1 | COMMITTED   |               6561 | t                   | [ts]         | Completed: 1 tables and 1 sequences effectively processed
     121 | {myGroup1}            | MC6                  | t              |               1 |             5 |                1 |                 4 | COMMITTED   |               6581 | t                   | [ts]         | Completed: 4 tables and 1 sequences effectively processed
     122 | {myGroup1}            | MC10                 | t              |               1 |             5 |                1 |                 1 | COMMITTED   |               6607 | t                   | [ts]         | Completed: 1 tables and 1 sequences effectively processed
     123 | {myGroup1}            | MC10                 | t              |               1 |             5 |                1 |                 2 | COMMITTED   |               6625 | t                   | [ts]         | Completed: 2 tables and 1 sequences effectively processed
     124 | {myGroup1}            | MC15                 | t              |               1 |             5 |                1 |                 2 | COMMITTED   |               6651 | t                   | [ts]         | Completed: 2 tables and 1 sequences effectively processed
     125 | {myGroup1}            | MC16                 | t              |               1 |             5 |                1 |                 2 | COMMITTED   |               6673 | t                   | [ts]         | Completed: 2 tables and 1 sequences effectively processed
     126 | {myGroup1}            | Multi-1              | f              |               1 |             5 |                1 |                 2 | COMMITTED   |               6690 | t                   | [ts]         | Completed: 2 tables and 1 sequences effectively processed
(27 rows)

select rlbs_rlbk_id, rlbs_session, 
       case when rlbs_end_datetime is null then 'null' else '[ts]' end as "end_datetime"
  from emaj.emaj_rlbk_session order by rlbs_rlbk_id, rlbs_session;
 rlbs_rlbk_id | rlbs_session | end_datetime 
--------------+--------------+--------------
          100 |            1 | [ts]
          101 |            1 | [ts]
          102 |            1 | [ts]
          103 |            1 | [ts]
          104 |            1 | [ts]
          105 |            1 | [ts]
          106 |            1 | [ts]
          107 |            1 | [ts]
          108 |            1 | [ts]
          109 |            1 | [ts]
          110 |            1 | [ts]
          111 |            1 | [ts]
          112 |            1 | [ts]
          113 |            1 | [ts]
          114 |            1 | [ts]
          115 |            1 | [ts]
          116 |            1 | [ts]
          117 |            1 | [ts]
          118 |            1 | [ts]
          119 |            1 | [ts]
          120 |            1 | [ts]
          121 |            1 | [ts]
          122 |            1 | [ts]
          123 |            1 | [ts]
          124 |            1 | [ts]
          125 |            1 | [ts]
          126 |            1 | [ts]
(27 rows)

select rlbp_rlbk_id, rlbp_step, rlbp_schema, rlbp_table, rlbp_fkey, rlbp_batch_number, rlbp_session,
       rlbp_fkey_def, rlbp_estimated_quantity, rlbp_estimate_method, rlbp_quantity
  from emaj.emaj_rlbk_plan order by rlbp_rlbk_id, rlbp_step, rlbp_schema, rlbp_table, rlbp_fkey;
 rlbp_rlbk_id |  rlbp_step  |  rlbp_schema   |                           rlbp_table                            |     rlbp_fkey     | rlbp_batch_number | rlbp_session |                                                                                        rlbp_fkey_def                                                                                        | rlbp_estimated_quantity | rlbp_estimate_method | rlbp_quantity 
--------------+-------------+----------------+-----------------------------------------------------------------+-------------------+-------------------+--------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------+----------------------+---------------
          100 | DROP_FK     | myschema2      | mytbl4                                                          | mytbl4_col44_fkey |                 1 |            1 |                                                                                                                                                                                             |                         |                    3 |              
          100 | SET_FK_DEF  | myschema2      | mytbl6                                                          | mytbl6_col61_fkey |                 2 |            1 |                                                                                                                                                                                             |                         |                    3 |              
          100 | SET_FK_DEF  | myschema2      | mytbl8                                                          | mytbl8_col81_fkey |                 2 |            1 |                                                                                                                                                                                             |                         |                    3 |              
          100 | RLBK_TABLE  | myschema2      | mytbl4                                                          |                   |                 1 |            1 |                                                                                                                                                                                             |                       4 |                    3 |             2
          100 | RLBK_TABLE  | myschema2      | mytbl5                                                          |                   |                 3 |            1 |                                                                                                                                                                                             |                       1 |                    3 |             1
          100 | RLBK_TABLE  | myschema2      | mytbl6                                                          |                   |                 2 |            1 |                                                                                                                                                                                             |                       3 |                    3 |             3
          100 | SET_FK_IMM  | myschema2      | mytbl4                                                          | mytbl4_col43_fkey |                 1 |            1 |                                                                                                                                                                                             |                       4 |                    3 |              
          100 | SET_FK_IMM  | myschema2      | mytbl6                                                          | mytbl6_col61_fkey |                 2 |            1 |                                                                                                                                                                                             |                       3 |                    3 |              
          100 | SET_FK_IMM  | myschema2      | mytbl8                                                          | mytbl8_col81_fkey |                 2 |            1 |                                                                                                                                                                                             |                       3 |                    3 |              
          100 | ADD_FK      | myschema2      | mytbl4                                                          | mytbl4_col44_fkey |                 1 |            1 | FOREIGN KEY (col44, col45) REFERENCES mytbl1(col11, col12) ON UPDATE SET NULL ON DELETE CASCADE                                                                                             |                       2 |                    3 |              
          100 | CTRL-DBLINK |                |                                                                 |                   |                   |              |                                                                                                                                                                                             |                      10 |                    3 |              
          101 | DROP_FK     | myschema2      | mytbl4                                                          | mytbl4_col44_fkey |                 2 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          101 | SET_FK_DEF  | myschema2      | mytbl6                                                          | mytbl6_col61_fkey |                 1 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          101 | SET_FK_DEF  | myschema2      | mytbl8                                                          | mytbl8_col81_fkey |                 1 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          101 | RLBK_TABLE  | myschema2      | mytbl4                                                          |                   |                 2 |            1 |                                                                                                                                                                                             |                       2 |                    1 |             2
          101 | RLBK_TABLE  | myschema2      | mytbl5                                                          |                   |                 3 |            1 |                                                                                                                                                                                             |                       1 |                    1 |             1
          101 | RLBK_TABLE  | myschema2      | mytbl6                                                          |                   |                 1 |            1 |                                                                                                                                                                                             |                       3 |                    1 |             3
          101 | SET_FK_IMM  | myschema2      | mytbl4                                                          | mytbl4_col43_fkey |                 2 |            1 |                                                                                                                                                                                             |                       2 |                    2 |              
          101 | SET_FK_IMM  | myschema2      | mytbl6                                                          | mytbl6_col61_fkey |                 1 |            1 |                                                                                                                                                                                             |                       3 |                    2 |              
          101 | SET_FK_IMM  | myschema2      | mytbl8                                                          | mytbl8_col81_fkey |                 1 |            1 |                                                                                                                                                                                             |                       3 |                    2 |              
          101 | ADD_FK      | myschema2      | mytbl4                                                          | mytbl4_col44_fkey |                 2 |            1 | FOREIGN KEY (col44, col45) REFERENCES mytbl1(col11, col12) ON UPDATE SET NULL ON DELETE CASCADE                                                                                             |                       2 |                    1 |              
          101 | CTRL-DBLINK |                |                                                                 |                   |                   |              |                                                                                                                                                                                             |                      10 |                    2 |              
          102 | DIS_LOG_TRG | myschema1      | mytbl1                                                          |                   |                 1 |            1 |                                                                                                                                                                                             |                         |                    3 |              
          102 | DIS_LOG_TRG | myschema1      | mytbl4                                                          |                   |                 1 |            1 |                                                                                                                                                                                             |                         |                    3 |              
          102 | DROP_FK     | myschema1      | mytbl4                                                          | mytbl4_col44_fkey |                 1 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          102 | SET_FK_DEF  | myschema1      | mytbl4                                                          | mytbl4_col43_fkey |                 1 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          102 | RLBK_TABLE  | myschema1      | mytbl1                                                          |                   |                 1 |            1 |                                                                                                                                                                                             |                       3 |                    3 |             5
          102 | RLBK_TABLE  | myschema1      | mytbl4                                                          |                   |                 1 |            1 |                                                                                                                                                                                             |                       8 |                    3 |             3
          102 | DELETE_LOG  | myschema1      | mytbl1                                                          |                   |                 1 |            1 |                                                                                                                                                                                             |                       3 |                    3 |             5
          102 | DELETE_LOG  | myschema1      | mytbl4                                                          |                   |                 1 |            1 |                                                                                                                                                                                             |                       8 |                    3 |            12
          102 | SET_FK_IMM  | myschema1      | mytbl4                                                          | mytbl4_col43_fkey |                 1 |            1 |                                                                                                                                                                                             |                       8 |                    3 |              
          102 | ADD_FK      | myschema1      | mytbl4                                                          | mytbl4_col44_fkey |                 1 |            1 | FOREIGN KEY (col44, col45) REFERENCES myschema1.mytbl1(col11, col12) ON UPDATE SET NULL ON DELETE CASCADE DEFERRABLE INITIALLY DEFERRED                                                     |                       0 |                    3 |              
          102 | ENA_LOG_TRG | myschema1      | mytbl1                                                          |                   |                 1 |            1 |                                                                                                                                                                                             |                         |                    3 |              
          102 | ENA_LOG_TRG | myschema1      | mytbl4                                                          |                   |                 1 |            1 |                                                                                                                                                                                             |                         |                    3 |              
          102 | CTRL+DBLINK |                |                                                                 |                   |                   |              |                                                                                                                                                                                             |                      12 |                    3 |              
          103 | DROP_FK     | myschema2      | mytbl4                                                          | mytbl4_col44_fkey |                 2 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          103 | SET_FK_DEF  | myschema2      | mytbl6                                                          | mytbl6_col61_fkey |                 1 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          103 | SET_FK_DEF  | myschema2      | mytbl8                                                          | mytbl8_col81_fkey |                 1 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          103 | RLBK_TABLE  | myschema2      | mytbl4                                                          |                   |                 2 |            1 |                                                                                                                                                                                             |                       8 |                    1 |             2
          103 | RLBK_TABLE  | myschema2      | mytbl5                                                          |                   |                 3 |            1 |                                                                                                                                                                                             |                       3 |                    1 |             1
          103 | RLBK_TABLE  | myschema2      | mytbl6                                                          |                   |                 1 |            1 |                                                                                                                                                                                             |                       9 |                    1 |             3
          103 | SET_FK_IMM  | myschema2      | mytbl4                                                          | mytbl4_col43_fkey |                 2 |            1 |                                                                                                                                                                                             |                       8 |                    2 |              
          103 | SET_FK_IMM  | myschema2      | mytbl6                                                          | mytbl6_col61_fkey |                 1 |            1 |                                                                                                                                                                                             |                       9 |                    2 |              
          103 | SET_FK_IMM  | myschema2      | mytbl8                                                          | mytbl8_col81_fkey |                 1 |            1 |                                                                                                                                                                                             |                       9 |                    2 |              
          103 | ADD_FK      | myschema2      | mytbl4                                                          | mytbl4_col44_fkey |                 2 |            1 | FOREIGN KEY (col44, col45) REFERENCES myschema2.mytbl1(col11, col12) ON UPDATE SET NULL ON DELETE CASCADE                                                                                   |                       2 |                    1 |              
          103 | CTRL+DBLINK |                |                                                                 |                   |                   |              |                                                                                                                                                                                             |                      10 |                    2 |              
          104 | DIS_LOG_TRG | myschema2      | mytbl4                                                          |                   |                 2 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          104 | DIS_LOG_TRG | myschema2      | mytbl5                                                          |                   |                 3 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          104 | DIS_LOG_TRG | myschema2      | mytbl6                                                          |                   |                 1 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          104 | DROP_FK     | myschema2      | mytbl4                                                          | mytbl4_col44_fkey |                 2 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          104 | SET_FK_DEF  | myschema2      | mytbl6                                                          | mytbl6_col61_fkey |                 1 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          104 | SET_FK_DEF  | myschema2      | mytbl8                                                          | mytbl8_col81_fkey |                 1 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          104 | RLBK_TABLE  | myschema2      | mytbl4                                                          |                   |                 2 |            1 |                                                                                                                                                                                             |                       6 |                    1 |             2
          104 | RLBK_TABLE  | myschema2      | mytbl5                                                          |                   |                 3 |            1 |                                                                                                                                                                                             |                       3 |                    1 |             1
          104 | RLBK_TABLE  | myschema2      | mytbl6                                                          |                   |                 1 |            1 |                                                                                                                                                                                             |                       9 |                    1 |             3
          104 | DELETE_LOG  | myschema2      | mytbl4                                                          |                   |                 2 |            1 |                                                                                                                                                                                             |                       6 |                    3 |             6
          104 | DELETE_LOG  | myschema2      | mytbl5                                                          |                   |                 3 |            1 |                                                                                                                                                                                             |                       3 |                    3 |             3
          104 | DELETE_LOG  | myschema2      | mytbl6                                                          |                   |                 1 |            1 |                                                                                                                                                                                             |                       9 |                    3 |             9
          104 | SET_FK_IMM  | myschema2      | mytbl4                                                          | mytbl4_col43_fkey |                 2 |            1 |                                                                                                                                                                                             |                       6 |                    2 |              
          104 | SET_FK_IMM  | myschema2      | mytbl6                                                          | mytbl6_col61_fkey |                 1 |            1 |                                                                                                                                                                                             |                       9 |                    2 |              
          104 | SET_FK_IMM  | myschema2      | mytbl8                                                          | mytbl8_col81_fkey |                 1 |            1 |                                                                                                                                                                                             |                       9 |                    2 |              
          104 | ADD_FK      | myschema2      | mytbl4                                                          | mytbl4_col44_fkey |                 2 |            1 | FOREIGN KEY (col44, col45) REFERENCES myschema2.mytbl1(col11, col12) ON UPDATE SET NULL ON DELETE CASCADE                                                                                   |                       2 |                    1 |              
          104 | ENA_LOG_TRG | myschema2      | mytbl4                                                          |                   |                 2 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          104 | ENA_LOG_TRG | myschema2      | mytbl5                                                          |                   |                 3 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          104 | ENA_LOG_TRG | myschema2      | mytbl6                                                          |                   |                 1 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          104 | CTRL+DBLINK |                |                                                                 |                   |                   |              |                                                                                                                                                                                             |                      19 |                    2 |              
          105 | DIS_LOG_TRG | myschema1      | mytbl1                                                          |                   |                 1 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          105 | DIS_LOG_TRG | myschema1      | mytbl4                                                          |                   |                 1 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          105 | DROP_FK     | myschema1      | mytbl4                                                          | mytbl4_col44_fkey |                 1 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          105 | SET_FK_DEF  | myschema1      | mytbl4                                                          | mytbl4_col43_fkey |                 1 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          105 | RLBK_TABLE  | myschema1      | mytbl1                                                          |                   |                 1 |            1 |                                                                                                                                                                                             |                       1 |                    1 |             1
          105 | RLBK_TABLE  | myschema1      | mytbl4                                                          |                   |                 1 |            1 |                                                                                                                                                                                             |                       2 |                    1 |             2
          105 | DELETE_LOG  | myschema1      | mytbl1                                                          |                   |                 1 |            1 |                                                                                                                                                                                             |                       1 |                    1 |             1
          105 | DELETE_LOG  | myschema1      | mytbl4                                                          |                   |                 1 |            1 |                                                                                                                                                                                             |                       2 |                    1 |             2
          105 | SET_FK_IMM  | myschema1      | mytbl4                                                          | mytbl4_col43_fkey |                 1 |            1 |                                                                                                                                                                                             |                       2 |                    2 |              
          105 | ADD_FK      | myschema1      | mytbl4                                                          | mytbl4_col44_fkey |                 1 |            1 | FOREIGN KEY (col44, col45) REFERENCES myschema1.mytbl1(col11, col12) ON UPDATE SET NULL ON DELETE CASCADE DEFERRABLE INITIALLY DEFERRED                                                     |                       0 |                    3 |              
          105 | ENA_LOG_TRG | myschema1      | mytbl1                                                          |                   |                 1 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          105 | ENA_LOG_TRG | myschema1      | mytbl4                                                          |                   |                 1 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          105 | CTRL+DBLINK |                |                                                                 |                   |                   |              |                                                                                                                                                                                             |                      12 |                    2 |              
          106 | DROP_FK     | myschema1      | mytbl4                                                          | mytbl4_col44_fkey |                 2 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          106 | SET_FK_DEF  | myschema1      | mytbl4                                                          | mytbl4_col43_fkey |                 2 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          106 | RLBK_TABLE  | myschema1      | mytbl1                                                          |                   |                 2 |            1 |                                                                                                                                                                                             |                       1 |                    1 |             1
          106 | RLBK_TABLE  | myschema1      | myTbl3                                                          |                   |                 1 |            1 |                                                                                                                                                                                             |                      10 |                    3 |            10
          106 | RLBK_TABLE  | myschema1      | mytbl4                                                          |                   |                 2 |            1 |                                                                                                                                                                                             |                       2 |                    1 |             2
          106 | SET_FK_IMM  | myschema1      | mytbl4                                                          | mytbl4_col43_fkey |                 2 |            1 |                                                                                                                                                                                             |                       2 |                    2 |              
          106 | ADD_FK      | myschema1      | mytbl4                                                          | mytbl4_col44_fkey |                 2 |            1 | FOREIGN KEY (col44, col45) REFERENCES myschema1.mytbl1(col11, col12) ON UPDATE SET NULL ON DELETE CASCADE DEFERRABLE INITIALLY DEFERRED                                                     |                       0 |                    3 |              
          106 | CTRL+DBLINK |                |                                                                 |                   |                   |              |                                                                                                                                                                                             |                       7 |                    2 |              
          113 | DIS_LOG_TRG | myschema1      | mytbl1                                                          |                   |                 1 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          113 | DROP_FK     | myschema1      | mytbl4                                                          | mytbl4_col44_fkey |                 1 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          113 | RLBK_TABLE  | myschema1      | mytbl1                                                          |                   |                 1 |            1 |                                                                                                                                                                                             |                      20 |                    1 |             0
          113 | DELETE_LOG  | myschema1      | mytbl1                                                          |                   |                 1 |            1 |                                                                                                                                                                                             |                      20 |                    1 |             0
          113 | ADD_FK      | myschema1      | mytbl4                                                          | mytbl4_col44_fkey |                 1 |            1 | FOREIGN KEY (col44, col45) REFERENCES myschema1.mytbl1(col11, col12) ON UPDATE SET NULL ON DELETE CASCADE DEFERRABLE INITIALLY DEFERRED                                                     |                       0 |                    3 |              
          113 | ENA_LOG_TRG | myschema1      | mytbl1                                                          |                   |                 1 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          113 | CTRL+DBLINK |                |                                                                 |                   |                   |              |                                                                                                                                                                                             |                       6 |                    2 |              
          115 | DIS_LOG_TRG | myschema2      | mytbl5                                                          |                   |                 2 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          115 | DIS_LOG_TRG | myschema2      | mytbl6                                                          |                   |                 1 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          115 | SET_FK_DEF  | myschema2      | mytbl6                                                          | mytbl6_col61_fkey |                 1 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          115 | SET_FK_DEF  | myschema2      | mytbl8                                                          | mytbl8_col81_fkey |                 1 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          115 | RLBK_TABLE  | myschema2      | mytbl5                                                          |                   |                 2 |            1 |                                                                                                                                                                                             |                       3 |                    1 |             2
          115 | RLBK_TABLE  | myschema2      | mytbl6                                                          |                   |                 1 |            1 |                                                                                                                                                                                             |                      17 |                    1 |            14
          115 | DELETE_LOG  | myschema2      | mytbl5                                                          |                   |                 2 |            1 |                                                                                                                                                                                             |                       3 |                    1 |             4
          115 | DELETE_LOG  | myschema2      | mytbl6                                                          |                   |                 1 |            1 |                                                                                                                                                                                             |                      17 |                    1 |            26
          115 | SET_FK_IMM  | myschema2      | mytbl6                                                          | mytbl6_col61_fkey |                 1 |            1 |                                                                                                                                                                                             |                      17 |                    2 |              
          115 | SET_FK_IMM  | myschema2      | mytbl8                                                          | mytbl8_col81_fkey |                 1 |            1 |                                                                                                                                                                                             |                      17 |                    2 |              
          115 | ENA_LOG_TRG | myschema2      | mytbl5                                                          |                   |                 2 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          115 | ENA_LOG_TRG | myschema2      | mytbl6                                                          |                   |                 1 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          115 | CTRL+DBLINK |                |                                                                 |                   |                   |              |                                                                                                                                                                                             |                      12 |                    2 |              
          116 | DIS_LOG_TRG | phil's schema3 | myTbl2\                                                         |                   |                 2 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          116 | DIS_LOG_TRG | phil's schema3 | phil's tbl1                                                     |                   |                 1 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          116 | DROP_FK     | phil's schema3 | myTbl2\                                                         | mytbl2_col21_fkey |                 2 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          116 | DROP_FK     | phil's schema3 | mytbl4                                                          | mytbl4_col44_fkey |                 1 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          116 | RLBK_TABLE  | phil's schema3 | myTbl2\                                                         |                   |                 2 |            1 |                                                                                                                                                                                             |                       2 |                    3 |             2
          116 | RLBK_TABLE  | phil's schema3 | phil's tbl1                                                     |                   |                 1 |            1 |                                                                                                                                                                                             |                      53 |                    3 |            33
          116 | DELETE_LOG  | phil's schema3 | myTbl2\                                                         |                   |                 2 |            1 |                                                                                                                                                                                             |                       2 |                    3 |             2
          116 | DELETE_LOG  | phil's schema3 | phil's tbl1                                                     |                   |                 1 |            1 |                                                                                                                                                                                             |                      53 |                    3 |            63
          116 | ADD_FK      | phil's schema3 | myTbl2\                                                         | mytbl2_col21_fkey |                 2 |            1 | FOREIGN KEY (col21) REFERENCES "phil's schema3".mytbl4(col41)                                                                                                                               |                       0 |                    3 |              
          116 | ADD_FK      | phil's schema3 | mytbl4                                                          | mytbl4_col44_fkey |                 1 |            1 | FOREIGN KEY (col44, col45) REFERENCES "phil's schema3"."phil's tbl1"("phil's col11", "phil's col12") ON UPDATE SET NULL ON DELETE CASCADE                                                   |                       0 |                    3 |              
          116 | ENA_LOG_TRG | phil's schema3 | myTbl2\                                                         |                   |                 2 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          116 | ENA_LOG_TRG | phil's schema3 | phil's tbl1                                                     |                   |                 1 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          116 | CTRL+DBLINK |                |                                                                 |                   |                   |              |                                                                                                                                                                                             |                      12 |                    2 |              
          117 | DIS_LOG_TRG | phil's schema3 | table_with_very_looooooooooooooooooooooooooooooooooooooong_name |                   |                 1 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          117 | DROP_FK     | phil's schema3 | mytbl4                                                          | mytbl4_col44_fkey |                 1 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          117 | RLBK_TABLE  | phil's schema3 | table_with_very_looooooooooooooooooooooooooooooooooooooong_name |                   |                 1 |            1 |                                                                                                                                                                                             |                       6 |                    3 |            10
          117 | DELETE_LOG  | phil's schema3 | table_with_very_looooooooooooooooooooooooooooooooooooooong_name |                   |                 1 |            1 |                                                                                                                                                                                             |                       6 |                    3 |            10
          117 | ADD_FK      | phil's schema3 | mytbl4                                                          | mytbl4_col44_fkey |                 1 |            1 | FOREIGN KEY (col44, col45) REFERENCES "phil's schema3".table_with_very_looooooooooooooooooooooooooooooooooooooong_name("phil's col11", "phil's col12") ON UPDATE SET NULL ON DELETE CASCADE |                       0 |                    3 |              
          117 | ENA_LOG_TRG | phil's schema3 | table_with_very_looooooooooooooooooooooooooooooooooooooong_name |                   |                 1 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          117 | CTRL+DBLINK |                |                                                                 |                   |                   |              |                                                                                                                                                                                             |                       6 |                    2 |              
          118 | DROP_FK     | myschema1      | mytbl4                                                          | mytbl4_col44_fkey |                 1 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          118 | SET_FK_DEF  | myschema1      | mytbl4                                                          | mytbl4_col43_fkey |                 1 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          118 | RLBK_TABLE  | myschema1      | mytbl1                                                          |                   |                 1 |            1 |                                                                                                                                                                                             |                      15 |                    1 |            13
          118 | RLBK_TABLE  | myschema1      | mytbl2                                                          |                   |                 1 |            1 |                                                                                                                                                                                             |                       2 |                    3 |             1
          118 | SET_FK_IMM  | myschema1      | mytbl4                                                          | mytbl4_col43_fkey |                 1 |            1 |                                                                                                                                                                                             |                       2 |                    2 |              
          118 | ADD_FK      | myschema1      | mytbl4                                                          | mytbl4_col44_fkey |                 1 |            1 | FOREIGN KEY (col44, col45) REFERENCES myschema1.mytbl1(col11, col12) ON UPDATE SET NULL ON DELETE CASCADE DEFERRABLE INITIALLY DEFERRED                                                     |                       0 |                    3 |              
          118 | CTRL+DBLINK |                |                                                                 |                   |                   |              |                                                                                                                                                                                             |                       6 |                    2 |              
          119 | DROP_FK     | myschema1      | mytbl4                                                          | mytbl4_col44_fkey |                 2 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          119 | SET_FK_DEF  | myschema1      | mytbl4                                                          | mytbl4_col43_fkey |                 2 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          119 | RLBK_TABLE  | myschema1      | myTbl3                                                          |                   |                 1 |            1 |                                                                                                                                                                                             |                      10 |                    1 |            10
          119 | RLBK_TABLE  | myschema1      | mytbl4                                                          |                   |                 2 |            1 |                                                                                                                                                                                             |                       2 |                    1 |             1
          119 | SET_FK_IMM  | myschema1      | mytbl4                                                          | mytbl4_col43_fkey |                 2 |            1 |                                                                                                                                                                                             |                       2 |                    2 |              
          119 | ADD_FK      | myschema1      | mytbl4                                                          | mytbl4_col44_fkey |                 2 |            1 | FOREIGN KEY (col44, col45) REFERENCES myschema1.mytbl1(col11, col12) ON UPDATE SET NULL ON DELETE CASCADE DEFERRABLE INITIALLY DEFERRED                                                     |                       0 |                    3 |              
          119 | CTRL+DBLINK |                |                                                                 |                   |                   |              |                                                                                                                                                                                             |                       6 |                    2 |              
          120 | SET_FK_DEF  | myschema1      | mytbl4                                                          | mytbl4_col43_fkey |                 1 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          120 | RLBK_TABLE  | myschema1      | mytbl2                                                          |                   |                 1 |            1 |                                                                                                                                                                                             |                       1 |                    1 |             1
          120 | SET_FK_IMM  | myschema1      | mytbl4                                                          | mytbl4_col43_fkey |                 1 |            1 |                                                                                                                                                                                             |                       1 |                    2 |              
          120 | CTRL+DBLINK |                |                                                                 |                   |                   |              |                                                                                                                                                                                             |                       3 |                    2 |              
          121 | DROP_FK     | myschema1      | mytbl4                                                          | mytbl4_col44_fkey |                 1 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          121 | SET_FK_DEF  | myschema1      | mytbl4                                                          | mytbl4_col43_fkey |                 1 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          121 | RLBK_TABLE  | myschema1      | mytbl1                                                          |                   |                 1 |            1 |                                                                                                                                                                                             |                      15 |                    1 |            13
          121 | RLBK_TABLE  | myschema1      | mytbl2                                                          |                   |                 1 |            1 |                                                                                                                                                                                             |                       2 |                    1 |             1
          121 | RLBK_TABLE  | myschema1      | myTbl3                                                          |                   |                 2 |            1 |                                                                                                                                                                                             |                      10 |                    1 |            10
          121 | RLBK_TABLE  | myschema1      | mytbl4                                                          |                   |                 1 |            1 |                                                                                                                                                                                             |                       2 |                    1 |             1
          121 | SET_FK_IMM  | myschema1      | mytbl4                                                          | mytbl4_col43_fkey |                 1 |            1 |                                                                                                                                                                                             |                       4 |                    2 |              
          121 | ADD_FK      | myschema1      | mytbl4                                                          | mytbl4_col44_fkey |                 1 |            1 | FOREIGN KEY (col44, col45) REFERENCES myschema1.mytbl1(col11, col12) ON UPDATE SET NULL ON DELETE CASCADE DEFERRABLE INITIALLY DEFERRED                                                     |                       0 |                    3 |              
          121 | CTRL+DBLINK |                |                                                                 |                   |                   |              |                                                                                                                                                                                             |                       8 |                    2 |              
          122 | DROP_FK     | myschema1      | mytbl4                                                          | mytbl4_col44_fkey |                 1 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          122 | RLBK_TABLE  | myschema1      | mytbl1                                                          |                   |                 1 |            1 |                                                                                                                                                                                             |                      16 |                    1 |            11
          122 | ADD_FK      | myschema1      | mytbl4                                                          | mytbl4_col44_fkey |                 1 |            1 | FOREIGN KEY (col44, col45) REFERENCES myschema1.mytbl1(col11, col12) ON UPDATE SET NULL ON DELETE CASCADE DEFERRABLE INITIALLY DEFERRED                                                     |                       0 |                    3 |              
          122 | CTRL+DBLINK |                |                                                                 |                   |                   |              |                                                                                                                                                                                             |                       3 |                    2 |              
          123 | DROP_FK     | myschema1      | mytbl4                                                          | mytbl4_col44_fkey |                 1 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          123 | SET_FK_DEF  | myschema1      | mytbl4                                                          | mytbl4_col43_fkey |                 1 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          123 | RLBK_TABLE  | myschema1      | mytbl1                                                          |                   |                 1 |            1 |                                                                                                                                                                                             |                      22 |                    1 |            11
          123 | RLBK_TABLE  | myschema1      | mytbl4                                                          |                   |                 1 |            1 |                                                                                                                                                                                             |                       2 |                    1 |             1
          123 | SET_FK_IMM  | myschema1      | mytbl4                                                          | mytbl4_col43_fkey |                 1 |            1 |                                                                                                                                                                                             |                       2 |                    2 |              
          123 | ADD_FK      | myschema1      | mytbl4                                                          | mytbl4_col44_fkey |                 1 |            1 | FOREIGN KEY (col44, col45) REFERENCES myschema1.mytbl1(col11, col12) ON UPDATE SET NULL ON DELETE CASCADE DEFERRABLE INITIALLY DEFERRED                                                     |                       0 |                    3 |              
          123 | CTRL+DBLINK |                |                                                                 |                   |                   |              |                                                                                                                                                                                             |                       6 |                    2 |              
          124 | DROP_FK     | myschema1      | mytbl4                                                          | mytbl4_col44_fkey |                 1 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          124 | SET_FK_DEF  | myschema1      | mytbl4                                                          | mytbl4_col43_fkey |                 1 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          124 | RLBK_TABLE  | myschema1      | mytbl1                                                          |                   |                 1 |            1 |                                                                                                                                                                                             |                      15 |                    1 |            13
          124 | RLBK_TABLE  | myschema1      | mytbl2                                                          |                   |                 1 |            1 |                                                                                                                                                                                             |                       2 |                    1 |             1
          124 | SET_FK_IMM  | myschema1      | mytbl4                                                          | mytbl4_col43_fkey |                 1 |            1 |                                                                                                                                                                                             |                       2 |                    2 |              
          124 | ADD_FK      | myschema1      | mytbl4                                                          | mytbl4_col44_fkey |                 1 |            1 | FOREIGN KEY (col44, col45) REFERENCES myschema1.mytbl1(col11, col12) ON UPDATE SET NULL ON DELETE CASCADE DEFERRABLE INITIALLY DEFERRED                                                     |                       0 |                    3 |              
          124 | CTRL+DBLINK |                |                                                                 |                   |                   |              |                                                                                                                                                                                             |                       6 |                    2 |              
          125 | DROP_FK     | myschema1      | mytbl4                                                          | mytbl4_col44_fkey |                 1 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          125 | SET_FK_DEF  | myschema1      | mytbl4                                                          | mytbl4_col43_fkey |                 1 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          125 | RLBK_TABLE  | myschema1      | mytbl1                                                          |                   |                 1 |            1 |                                                                                                                                                                                             |                      11 |                    1 |            11
          125 | RLBK_TABLE  | myschema1      | mytbl2                                                          |                   |                 1 |            1 |                                                                                                                                                                                             |                       3 |                    1 |             2
          125 | SET_FK_IMM  | myschema1      | mytbl4                                                          | mytbl4_col43_fkey |                 1 |            1 |                                                                                                                                                                                             |                       3 |                    2 |              
          125 | ADD_FK      | myschema1      | mytbl4                                                          | mytbl4_col44_fkey |                 1 |            1 | FOREIGN KEY (col44, col45) REFERENCES myschema1.mytbl1(col11, col12) ON UPDATE SET NULL ON DELETE CASCADE DEFERRABLE INITIALLY DEFERRED                                                     |                       0 |                    3 |              
          125 | CTRL+DBLINK |                |                                                                 |                   |                   |              |                                                                                                                                                                                             |                       6 |                    2 |              
          126 | DIS_LOG_TRG | myschema1      | mytbl1                                                          |                   |                 1 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          126 | DIS_LOG_TRG | myschema1      | mytbl2                                                          |                   |                 1 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          126 | DROP_FK     | myschema1      | mytbl4                                                          | mytbl4_col44_fkey |                 1 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          126 | SET_FK_DEF  | myschema1      | mytbl4                                                          | mytbl4_col43_fkey |                 1 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          126 | RLBK_TABLE  | myschema1      | mytbl1                                                          |                   |                 1 |            1 |                                                                                                                                                                                             |                      11 |                    1 |            11
          126 | RLBK_TABLE  | myschema1      | mytbl2                                                          |                   |                 1 |            1 |                                                                                                                                                                                             |                       4 |                    1 |             3
          126 | DELETE_LOG  | myschema1      | mytbl1                                                          |                   |                 1 |            1 |                                                                                                                                                                                             |                      11 |                    1 |            11
          126 | DELETE_LOG  | myschema1      | mytbl2                                                          |                   |                 1 |            1 |                                                                                                                                                                                             |                       4 |                    3 |             4
          126 | SET_FK_IMM  | myschema1      | mytbl4                                                          | mytbl4_col43_fkey |                 1 |            1 |                                                                                                                                                                                             |                       4 |                    2 |              
          126 | ADD_FK      | myschema1      | mytbl4                                                          | mytbl4_col44_fkey |                 1 |            1 | FOREIGN KEY (col44, col45) REFERENCES myschema1.mytbl1(col11, col12) ON UPDATE SET NULL ON DELETE CASCADE DEFERRABLE INITIALLY DEFERRED                                                     |                       0 |                    3 |              
          126 | ENA_LOG_TRG | myschema1      | mytbl1                                                          |                   |                 1 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          126 | ENA_LOG_TRG | myschema1      | mytbl2                                                          |                   |                 1 |            1 |                                                                                                                                                                                             |                         |                    2 |              
          126 | CTRL+DBLINK |                |                                                                 |                   |                   |              |                                                                                                                                                                                             |                      12 |                    2 |              
(192 rows)

select rlbt_step, rlbt_schema, rlbt_table, rlbt_fkey, rlbt_rlbk_id, rlbt_quantity from emaj.emaj_rlbk_stat
  order by rlbt_rlbk_id, rlbt_step, rlbt_schema, rlbt_table, rlbt_fkey;
  rlbt_step  |  rlbt_schema   |                           rlbt_table                            |     rlbt_fkey     | rlbt_rlbk_id | rlbt_quantity 
-------------+----------------+-----------------------------------------------------------------+-------------------+--------------+---------------
 DROP_FK     |                |                                                                 |                   |          100 |             1
 SET_FK_DEF  |                |                                                                 |                   |          100 |             2
 RLBK_TABLE  | myschema2      | mytbl4                                                          |                   |          100 |             4
 RLBK_TABLE  | myschema2      | mytbl5                                                          |                   |          100 |             1
 RLBK_TABLE  | myschema2      | mytbl6                                                          |                   |          100 |             3
 SET_FK_IMM  | myschema2      | mytbl4                                                          | mytbl4_col43_fkey |          100 |             4
 SET_FK_IMM  | myschema2      | mytbl6                                                          | mytbl6_col61_fkey |          100 |             3
 SET_FK_IMM  | myschema2      | mytbl8                                                          | mytbl8_col81_fkey |          100 |             3
 ADD_FK      | myschema2      | mytbl4                                                          | mytbl4_col44_fkey |          100 |             2
 CTRL-DBLINK |                |                                                                 |                   |          100 |            10
 DROP_FK     |                |                                                                 |                   |          101 |             1
 SET_FK_DEF  |                |                                                                 |                   |          101 |             2
 RLBK_TABLE  | myschema2      | mytbl4                                                          |                   |          101 |             2
 RLBK_TABLE  | myschema2      | mytbl5                                                          |                   |          101 |             1
 RLBK_TABLE  | myschema2      | mytbl6                                                          |                   |          101 |             3
 SET_FK_IMM  | myschema2      | mytbl4                                                          | mytbl4_col43_fkey |          101 |             2
 SET_FK_IMM  | myschema2      | mytbl6                                                          | mytbl6_col61_fkey |          101 |             3
 SET_FK_IMM  | myschema2      | mytbl8                                                          | mytbl8_col81_fkey |          101 |             3
 ADD_FK      | myschema2      | mytbl4                                                          | mytbl4_col44_fkey |          101 |             2
 CTRL-DBLINK |                |                                                                 |                   |          101 |            10
 DIS_LOG_TRG |                |                                                                 |                   |          102 |             2
 DROP_FK     |                |                                                                 |                   |          102 |             1
 SET_FK_DEF  |                |                                                                 |                   |          102 |             1
 RLBK_TABLE  | myschema1      | mytbl1                                                          |                   |          102 |             3
 RLBK_TABLE  | myschema1      | mytbl4                                                          |                   |          102 |             8
 DELETE_LOG  | myschema1      | mytbl1                                                          |                   |          102 |             3
 DELETE_LOG  | myschema1      | mytbl4                                                          |                   |          102 |             8
 SET_FK_IMM  | myschema1      | mytbl4                                                          | mytbl4_col43_fkey |          102 |             8
 ADD_FK      | myschema1      | mytbl4                                                          | mytbl4_col44_fkey |          102 |             0
 ENA_LOG_TRG |                |                                                                 |                   |          102 |             2
 CTRL+DBLINK |                |                                                                 |                   |          102 |            12
 DROP_FK     |                |                                                                 |                   |          103 |             1
 SET_FK_DEF  |                |                                                                 |                   |          103 |             2
 RLBK_TABLE  | myschema2      | mytbl4                                                          |                   |          103 |             8
 RLBK_TABLE  | myschema2      | mytbl5                                                          |                   |          103 |             3
 RLBK_TABLE  | myschema2      | mytbl6                                                          |                   |          103 |             9
 SET_FK_IMM  | myschema2      | mytbl4                                                          | mytbl4_col43_fkey |          103 |             8
 SET_FK_IMM  | myschema2      | mytbl6                                                          | mytbl6_col61_fkey |          103 |             9
 SET_FK_IMM  | myschema2      | mytbl8                                                          | mytbl8_col81_fkey |          103 |             9
 ADD_FK      | myschema2      | mytbl4                                                          | mytbl4_col44_fkey |          103 |             2
 CTRL+DBLINK |                |                                                                 |                   |          103 |            10
 DIS_LOG_TRG |                |                                                                 |                   |          104 |             3
 DROP_FK     |                |                                                                 |                   |          104 |             1
 SET_FK_DEF  |                |                                                                 |                   |          104 |             2
 RLBK_TABLE  | myschema2      | mytbl4                                                          |                   |          104 |             6
 RLBK_TABLE  | myschema2      | mytbl5                                                          |                   |          104 |             3
 RLBK_TABLE  | myschema2      | mytbl6                                                          |                   |          104 |             9
 DELETE_LOG  | myschema2      | mytbl4                                                          |                   |          104 |             6
 DELETE_LOG  | myschema2      | mytbl5                                                          |                   |          104 |             3
 DELETE_LOG  | myschema2      | mytbl6                                                          |                   |          104 |             9
 SET_FK_IMM  | myschema2      | mytbl4                                                          | mytbl4_col43_fkey |          104 |             6
 SET_FK_IMM  | myschema2      | mytbl6                                                          | mytbl6_col61_fkey |          104 |             9
 SET_FK_IMM  | myschema2      | mytbl8                                                          | mytbl8_col81_fkey |          104 |             9
 ADD_FK      | myschema2      | mytbl4                                                          | mytbl4_col44_fkey |          104 |             2
 ENA_LOG_TRG |                |                                                                 |                   |          104 |             3
 CTRL+DBLINK |                |                                                                 |                   |          104 |            19
 DIS_LOG_TRG |                |                                                                 |                   |          105 |             2
 DROP_FK     |                |                                                                 |                   |          105 |             1
 SET_FK_DEF  |                |                                                                 |                   |          105 |             1
 RLBK_TABLE  | myschema1      | mytbl1                                                          |                   |          105 |             1
 RLBK_TABLE  | myschema1      | mytbl4                                                          |                   |          105 |             2
 DELETE_LOG  | myschema1      | mytbl1                                                          |                   |          105 |             1
 DELETE_LOG  | myschema1      | mytbl4                                                          |                   |          105 |             2
 SET_FK_IMM  | myschema1      | mytbl4                                                          | mytbl4_col43_fkey |          105 |             2
 ADD_FK      | myschema1      | mytbl4                                                          | mytbl4_col44_fkey |          105 |             0
 ENA_LOG_TRG |                |                                                                 |                   |          105 |             2
 CTRL+DBLINK |                |                                                                 |                   |          105 |            12
 DROP_FK     |                |                                                                 |                   |          106 |             1
 SET_FK_DEF  |                |                                                                 |                   |          106 |             1
 RLBK_TABLE  | myschema1      | mytbl1                                                          |                   |          106 |             1
 RLBK_TABLE  | myschema1      | myTbl3                                                          |                   |          106 |            10
 RLBK_TABLE  | myschema1      | mytbl4                                                          |                   |          106 |             2
 SET_FK_IMM  | myschema1      | mytbl4                                                          | mytbl4_col43_fkey |          106 |             2
 ADD_FK      | myschema1      | mytbl4                                                          | mytbl4_col44_fkey |          106 |             0
 CTRL+DBLINK |                |                                                                 |                   |          106 |             7
 DIS_LOG_TRG |                |                                                                 |                   |          113 |             1
 DROP_FK     |                |                                                                 |                   |          113 |             1
 RLBK_TABLE  | myschema1      | mytbl1                                                          |                   |          113 |            20
 DELETE_LOG  | myschema1      | mytbl1                                                          |                   |          113 |            20
 ADD_FK      | myschema1      | mytbl4                                                          | mytbl4_col44_fkey |          113 |             0
 ENA_LOG_TRG |                |                                                                 |                   |          113 |             1
 CTRL+DBLINK |                |                                                                 |                   |          113 |             6
 DIS_LOG_TRG |                |                                                                 |                   |          115 |             2
 SET_FK_DEF  |                |                                                                 |                   |          115 |             2
 RLBK_TABLE  | myschema2      | mytbl5                                                          |                   |          115 |             3
 RLBK_TABLE  | myschema2      | mytbl6                                                          |                   |          115 |            17
 DELETE_LOG  | myschema2      | mytbl5                                                          |                   |          115 |             3
 DELETE_LOG  | myschema2      | mytbl6                                                          |                   |          115 |            17
 SET_FK_IMM  | myschema2      | mytbl6                                                          | mytbl6_col61_fkey |          115 |            17
 SET_FK_IMM  | myschema2      | mytbl8                                                          | mytbl8_col81_fkey |          115 |            17
 ENA_LOG_TRG |                |                                                                 |                   |          115 |             2
 CTRL+DBLINK |                |                                                                 |                   |          115 |            12
 DIS_LOG_TRG |                |                                                                 |                   |          116 |             2
 DROP_FK     |                |                                                                 |                   |          116 |             2
 RLBK_TABLE  | phil's schema3 | myTbl2\                                                         |                   |          116 |             2
 RLBK_TABLE  | phil's schema3 | phil's tbl1                                                     |                   |          116 |            53
 DELETE_LOG  | phil's schema3 | myTbl2\                                                         |                   |          116 |             2
 DELETE_LOG  | phil's schema3 | phil's tbl1                                                     |                   |          116 |            53
 ADD_FK      | phil's schema3 | myTbl2\                                                         | mytbl2_col21_fkey |          116 |             0
 ADD_FK      | phil's schema3 | mytbl4                                                          | mytbl4_col44_fkey |          116 |             0
 ENA_LOG_TRG |                |                                                                 |                   |          116 |             2
 CTRL+DBLINK |                |                                                                 |                   |          116 |            12
 DIS_LOG_TRG |                |                                                                 |                   |          117 |             1
 DROP_FK     |                |                                                                 |                   |          117 |             1
 RLBK_TABLE  | phil's schema3 | table_with_very_looooooooooooooooooooooooooooooooooooooong_name |                   |          117 |             6
 DELETE_LOG  | phil's schema3 | table_with_very_looooooooooooooooooooooooooooooooooooooong_name |                   |          117 |             6
 ADD_FK      | phil's schema3 | mytbl4                                                          | mytbl4_col44_fkey |          117 |             0
 ENA_LOG_TRG |                |                                                                 |                   |          117 |             1
 CTRL+DBLINK |                |                                                                 |                   |          117 |             6
 DROP_FK     |                |                                                                 |                   |          118 |             1
 SET_FK_DEF  |                |                                                                 |                   |          118 |             1
 RLBK_TABLE  | myschema1      | mytbl1                                                          |                   |          118 |            15
 RLBK_TABLE  | myschema1      | mytbl2                                                          |                   |          118 |             2
 SET_FK_IMM  | myschema1      | mytbl4                                                          | mytbl4_col43_fkey |          118 |             2
 ADD_FK      | myschema1      | mytbl4                                                          | mytbl4_col44_fkey |          118 |             0
 CTRL+DBLINK |                |                                                                 |                   |          118 |             6
 DROP_FK     |                |                                                                 |                   |          119 |             1
 SET_FK_DEF  |                |                                                                 |                   |          119 |             1
 RLBK_TABLE  | myschema1      | myTbl3                                                          |                   |          119 |            10
 RLBK_TABLE  | myschema1      | mytbl4                                                          |                   |          119 |             2
 SET_FK_IMM  | myschema1      | mytbl4                                                          | mytbl4_col43_fkey |          119 |             2
 ADD_FK      | myschema1      | mytbl4                                                          | mytbl4_col44_fkey |          119 |             0
 CTRL+DBLINK |                |                                                                 |                   |          119 |             6
 SET_FK_DEF  |                |                                                                 |                   |          120 |             1
 RLBK_TABLE  | myschema1      | mytbl2                                                          |                   |          120 |             1
 SET_FK_IMM  | myschema1      | mytbl4                                                          | mytbl4_col43_fkey |          120 |             1
 CTRL+DBLINK |                |                                                                 |                   |          120 |             3
 DROP_FK     |                |                                                                 |                   |          121 |             1
 SET_FK_DEF  |                |                                                                 |                   |          121 |             1
 RLBK_TABLE  | myschema1      | mytbl1                                                          |                   |          121 |            15
 RLBK_TABLE  | myschema1      | mytbl2                                                          |                   |          121 |             2
 RLBK_TABLE  | myschema1      | myTbl3                                                          |                   |          121 |            10
 RLBK_TABLE  | myschema1      | mytbl4                                                          |                   |          121 |             2
 SET_FK_IMM  | myschema1      | mytbl4                                                          | mytbl4_col43_fkey |          121 |             4
 ADD_FK      | myschema1      | mytbl4                                                          | mytbl4_col44_fkey |          121 |             0
 CTRL+DBLINK |                |                                                                 |                   |          121 |             8
 DROP_FK     |                |                                                                 |                   |          122 |             1
 RLBK_TABLE  | myschema1      | mytbl1                                                          |                   |          122 |            16
 ADD_FK      | myschema1      | mytbl4                                                          | mytbl4_col44_fkey |          122 |             0
 CTRL+DBLINK |                |                                                                 |                   |          122 |             3
 DROP_FK     |                |                                                                 |                   |          123 |             1
 SET_FK_DEF  |                |                                                                 |                   |          123 |             1
 RLBK_TABLE  | myschema1      | mytbl1                                                          |                   |          123 |            22
 RLBK_TABLE  | myschema1      | mytbl4                                                          |                   |          123 |             2
 SET_FK_IMM  | myschema1      | mytbl4                                                          | mytbl4_col43_fkey |          123 |             2
 ADD_FK      | myschema1      | mytbl4                                                          | mytbl4_col44_fkey |          123 |             0
 CTRL+DBLINK |                |                                                                 |                   |          123 |             6
 DROP_FK     |                |                                                                 |                   |          124 |             1
 SET_FK_DEF  |                |                                                                 |                   |          124 |             1
 RLBK_TABLE  | myschema1      | mytbl1                                                          |                   |          124 |            15
 RLBK_TABLE  | myschema1      | mytbl2                                                          |                   |          124 |             2
 SET_FK_IMM  | myschema1      | mytbl4                                                          | mytbl4_col43_fkey |          124 |             2
 ADD_FK      | myschema1      | mytbl4                                                          | mytbl4_col44_fkey |          124 |             0
 CTRL+DBLINK |                |                                                                 |                   |          124 |             6
 DROP_FK     |                |                                                                 |                   |          125 |             1
 SET_FK_DEF  |                |                                                                 |                   |          125 |             1
 RLBK_TABLE  | myschema1      | mytbl1                                                          |                   |          125 |            11
 RLBK_TABLE  | myschema1      | mytbl2                                                          |                   |          125 |             3
 SET_FK_IMM  | myschema1      | mytbl4                                                          | mytbl4_col43_fkey |          125 |             3
 ADD_FK      | myschema1      | mytbl4                                                          | mytbl4_col44_fkey |          125 |             0
 CTRL+DBLINK |                |                                                                 |                   |          125 |             6
 DIS_LOG_TRG |                |                                                                 |                   |          126 |             2
 DROP_FK     |                |                                                                 |                   |          126 |             1
 SET_FK_DEF  |                |                                                                 |                   |          126 |             1
 RLBK_TABLE  | myschema1      | mytbl1                                                          |                   |          126 |            11
 RLBK_TABLE  | myschema1      | mytbl2                                                          |                   |          126 |             4
 DELETE_LOG  | myschema1      | mytbl1                                                          |                   |          126 |            11
 DELETE_LOG  | myschema1      | mytbl2                                                          |                   |          126 |             4
 SET_FK_IMM  | myschema1      | mytbl4                                                          | mytbl4_col43_fkey |          126 |             4
 ADD_FK      | myschema1      | mytbl4                                                          | mytbl4_col44_fkey |          126 |             0
 ENA_LOG_TRG |                |                                                                 |                   |          126 |             2
 CTRL+DBLINK |                |                                                                 |                   |          126 |            12
(172 rows)

select hist_id, hist_function, hist_event, hist_object, regexp_replace(regexp_replace(hist_wording,E'\\d\\d\.\\d\\d\\.\\d\\d\\.\\d\\d\\d','%','g'),E'\\[.+\\]','(timestamp)','g'), hist_user from emaj.emaj_hist order by hist_id;
 hist_id |      hist_function       |   hist_event   |                                   hist_object                                    |                                                     regexp_replace                                                     | hist_user 
---------+--------------------------+----------------+----------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------+-----------
    6036 | START_GROUP              | BEGIN          | myGroup1                                                                         | With log reset                                                                                                         | postgres
    6037 | PURGE_HISTORY            |                |                                                                                  | 36 emaj_hist rows deleted ; 20 rollback events deleted                                                                 | postgres
    6038 | LOCK_GROUP               | BEGIN          | myGroup1                                                                         |                                                                                                                        | postgres
    6039 | LOCK_GROUP               | END            | myGroup1                                                                         | 5 tables locked, 0 deadlock(s)                                                                                         | postgres
    6040 | SET_MARK_GROUP           | BEGIN          | myGroup1                                                                         | M1                                                                                                                     | postgres
    6041 | SET_MARK_GROUP           | END            | myGroup1                                                                         | M1                                                                                                                     | postgres
    6042 | START_GROUP              | END            | myGroup1                                                                         | 6 tables/sequences processed                                                                                           | postgres
    6043 | START_GROUP              | BEGIN          | myGroup2                                                                         | With log reset                                                                                                         | postgres
    6044 | LOCK_GROUP               | BEGIN          | myGroup2                                                                         |                                                                                                                        | postgres
    6045 | LOCK_GROUP               | END            | myGroup2                                                                         | 6 tables locked, 0 deadlock(s)                                                                                         | postgres
    6046 | SET_MARK_GROUP           | BEGIN          | myGroup2                                                                         | M1                                                                                                                     | postgres
    6047 | SET_MARK_GROUP           | END            | myGroup2                                                                         | M1                                                                                                                     | postgres
    6048 | START_GROUP              | END            | myGroup2                                                                         | 8 tables/sequences processed                                                                                           | postgres
    6049 | SET_MARK_GROUP           | BEGIN          | myGroup1                                                                         |                                                                                                                        | postgres
    6050 | LOCK_GROUP               | BEGIN          | myGroup1                                                                         |                                                                                                                        | postgres
    6051 | LOCK_GROUP               | END            | myGroup1                                                                         | 5 tables locked, 0 deadlock(s)                                                                                         | postgres
    6052 | SET_MARK_GROUP           | END            | myGroup1                                                                         | M2                                                                                                                     | postgres
    6053 | SET_MARK_GROUP           | BEGIN          | myGroup1                                                                         |                                                                                                                        | postgres
    6054 | LOCK_GROUP               | BEGIN          | myGroup1                                                                         |                                                                                                                        | postgres
    6055 | LOCK_GROUP               | END            | myGroup1                                                                         | 5 tables locked, 0 deadlock(s)                                                                                         | postgres
    6056 | SET_MARK_GROUP           | END            | myGroup1                                                                         | M3                                                                                                                     | postgres
    6057 | COMMENT_MARK_GROUP       |                | myGroup1                                                                         | Mark M3                                                                                                                | postgres
    6058 | SET_MARK_GROUP           | BEGIN          | myGroup2                                                                         |                                                                                                                        | postgres
    6059 | LOCK_GROUP               | BEGIN          | myGroup2                                                                         |                                                                                                                        | postgres
    6060 | LOCK_GROUP               | END            | myGroup2                                                                         | 6 tables locked, 0 deadlock(s)                                                                                         | postgres
    6061 | SET_MARK_GROUP           | END            | myGroup2                                                                         | M2                                                                                                                     | postgres
    6062 | SET_MARK_GROUP           | BEGIN          | myGroup2                                                                         |                                                                                                                        | postgres
    6063 | LOCK_GROUP               | BEGIN          | myGroup2                                                                         |                                                                                                                        | postgres
    6064 | LOCK_GROUP               | END            | myGroup2                                                                         | 6 tables locked, 0 deadlock(s)                                                                                         | postgres
    6065 | SET_MARK_GROUP           | END            | myGroup2                                                                         | M3                                                                                                                     | postgres
    6066 | ROLLBACK_GROUP           | BEGIN          | myGroup2                                                                         | Logged rollback to mark M2 (timestamp)                                                                                 | postgres
    6067 | DBLINK_OPEN_CNX          |                | rlbk#1                                                                           | Status = -3                                                                                                            | postgres
    6068 | LOCK_GROUP               | BEGIN          | myGroup2                                                                         | Rollback session #1                                                                                                    | postgres
    6069 | LOCK_GROUP               | END            | myGroup2                                                                         | Rollback session #1: 6 tables locked, 0 deadlock(s)                                                                    | postgres
    6070 | SET_MARK_GROUP           | BEGIN          | myGroup2                                                                         | RLBK_M2_%_START                                                                                                        | postgres
    6071 | SET_MARK_GROUP           | END            | myGroup2                                                                         | RLBK_M2_%_START                                                                                                        | postgres
    6072 | ROLLBACK_TABLE           | BEGIN          | myschema2.mytbl4                                                                 | All log rows with emaj_gid > 100078                                                                                    | postgres
    6073 | ROLLBACK_TABLE           | END            | myschema2.mytbl4                                                                 | 2 rolled back primary keys                                                                                             | postgres
    6074 | ROLLBACK_TABLE           | BEGIN          | myschema2.mytbl6                                                                 | All log rows with emaj_gid > 100078                                                                                    | postgres
    6075 | ROLLBACK_TABLE           | END            | myschema2.mytbl6                                                                 | 3 rolled back primary keys                                                                                             | postgres
    6076 | ROLLBACK_TABLE           | BEGIN          | myschema2.mytbl5                                                                 | All log rows with emaj_gid > 100078                                                                                    | postgres
    6077 | ROLLBACK_TABLE           | END            | myschema2.mytbl5                                                                 | 1 rolled back primary keys                                                                                             | postgres
    6078 | ROLLBACK_SEQUENCE        |                | myschema2.myseq1                                                                 | RESTART 1001 MAXVALUE 2000 CYCLE                                                                                       | postgres
    6079 | ROLLBACK_SEQUENCE        |                | myschema2."myTbl3_col31_seq"                                                     |                                                                                                                        | postgres
    6080 | SET_MARK_GROUP           | BEGIN          | myGroup2                                                                         | RLBK_M2_%_DONE                                                                                                         | postgres
    6081 | SET_MARK_GROUP           | END            | myGroup2                                                                         | RLBK_M2_%_DONE                                                                                                         | postgres
    6082 | ROLLBACK_GROUP           | END            | myGroup2                                                                         | Rollback_id 100, 3 tables and 2 sequences effectively processed                                                        | postgres
    6083 | ROLLBACK_GROUP           | BEGIN          | myGroup2                                                                         | Logged rollback to mark M3 (timestamp)                                                                                 | postgres
    6084 | DBLINK_OPEN_CNX          |                | rlbk#1                                                                           | Status = -3                                                                                                            | postgres
    6085 | LOCK_GROUP               | BEGIN          | myGroup2                                                                         | Rollback session #1                                                                                                    | postgres
    6086 | LOCK_GROUP               | END            | myGroup2                                                                         | Rollback session #1: 6 tables locked, 0 deadlock(s)                                                                    | postgres
    6087 | SET_MARK_GROUP           | BEGIN          | myGroup2                                                                         | RLBK_M3_%_START                                                                                                        | postgres
    6088 | SET_MARK_GROUP           | END            | myGroup2                                                                         | RLBK_M3_%_START                                                                                                        | postgres
    6089 | ROLLBACK_TABLE           | BEGIN          | myschema2.mytbl6                                                                 | All log rows with emaj_gid > 100086                                                                                    | postgres
    6090 | ROLLBACK_TABLE           | END            | myschema2.mytbl6                                                                 | 3 rolled back primary keys                                                                                             | postgres
    6091 | ROLLBACK_TABLE           | BEGIN          | myschema2.mytbl4                                                                 | All log rows with emaj_gid > 100086                                                                                    | postgres
    6092 | ROLLBACK_TABLE           | END            | myschema2.mytbl4                                                                 | 2 rolled back primary keys                                                                                             | postgres
    6093 | ROLLBACK_TABLE           | BEGIN          | myschema2.mytbl5                                                                 | All log rows with emaj_gid > 100086                                                                                    | postgres
    6094 | ROLLBACK_TABLE           | END            | myschema2.mytbl5                                                                 | 1 rolled back primary keys                                                                                             | postgres
    6095 | ROLLBACK_SEQUENCE        |                | myschema2.myseq1                                                                 | RESTART 1004 MAXVALUE 9223372036854775807 NO  CYCLE                                                                    | postgres
    6096 | ROLLBACK_SEQUENCE        |                | myschema2."myTbl3_col31_seq"                                                     |                                                                                                                        | postgres
    6097 | SET_MARK_GROUP           | BEGIN          | myGroup2                                                                         | RLBK_M3_%_DONE                                                                                                         | postgres
    6098 | SET_MARK_GROUP           | END            | myGroup2                                                                         | RLBK_M3_%_DONE                                                                                                         | postgres
    6099 | ROLLBACK_GROUP           | END            | myGroup2                                                                         | Rollback_id 101, 3 tables and 2 sequences effectively processed                                                        | postgres
    6100 | ROLLBACK_GROUP           | BEGIN          | myGroup1                                                                         | Unlogged rollback to mark M2 (timestamp)                                                                               | postgres
    6101 | DBLINK_OPEN_CNX          |                | rlbk#1                                                                           | Status = 1                                                                                                             | postgres
    6102 | LOCK_GROUP               | BEGIN          | myGroup1                                                                         | Rollback session #1                                                                                                    | postgres
    6103 | LOCK_GROUP               | END            | myGroup1                                                                         | Rollback session #1: 5 tables locked, 0 deadlock(s)                                                                    | postgres
    6104 | ROLLBACK_TABLE           | BEGIN          | myschema1.mytbl1                                                                 | All log rows with emaj_gid > 100026                                                                                    | postgres
    6105 | ROLLBACK_TABLE           | END            | myschema1.mytbl1                                                                 | 5 rolled back primary keys                                                                                             | postgres
    6106 | ROLLBACK_TABLE           | BEGIN          | myschema1.mytbl4                                                                 | All log rows with emaj_gid > 100026                                                                                    | postgres
    6107 | ROLLBACK_TABLE           | END            | myschema1.mytbl4                                                                 | 3 rolled back primary keys                                                                                             | postgres
    6108 | ROLLBACK_GROUP           | MARK DELETED   | myGroup1                                                                         | mark M3 is deleted                                                                                                     | postgres
    6109 | ROLLBACK_SEQUENCE        |                | myschema1."myTbl3_col31_seq"                                                     |                                                                                                                        | postgres
    6110 | ROLLBACK_GROUP           | END            | myGroup1                                                                         | Rollback_id 102, 2 tables and 1 sequences effectively processed                                                        | postgres
    6111 | DBLINK_CLOSE_CNX         |                | rlbk#1                                                                           |                                                                                                                        | postgres
    6112 | SET_MARK_GROUP           | BEGIN          | myGroup1                                                                         |                                                                                                                        | postgres
    6113 | LOCK_GROUP               | BEGIN          | myGroup1                                                                         |                                                                                                                        | postgres
    6114 | LOCK_GROUP               | END            | myGroup1                                                                         | 5 tables locked, 0 deadlock(s)                                                                                         | postgres
    6115 | CLEANUP_RLBK_STATE       |                | rollback id 102                                                                  | set to COMMITTED                                                                                                       | postgres
    6116 | SET_MARK_GROUP           | END            | myGroup1                                                                         | M4                                                                                                                     | postgres
    6117 | SET_MARK_GROUP           | BEGIN          | myGroup1                                                                         |                                                                                                                        | postgres
    6118 | LOCK_GROUP               | BEGIN          | myGroup1                                                                         |                                                                                                                        | postgres
    6119 | LOCK_GROUP               | END            | myGroup1                                                                         | 5 tables locked, 0 deadlock(s)                                                                                         | postgres
    6120 | SET_MARK_GROUP           | END            | myGroup1                                                                         | M5                                                                                                                     | postgres
    6121 | SET_MARK_GROUP           | BEGIN          | myGroup1                                                                         |                                                                                                                        | postgres
    6122 | LOCK_GROUP               | BEGIN          | myGroup1                                                                         |                                                                                                                        | postgres
    6123 | LOCK_GROUP               | END            | myGroup1                                                                         | 5 tables locked, 0 deadlock(s)                                                                                         | postgres
    6124 | SET_MARK_GROUP           | END            | myGroup1                                                                         | M6                                                                                                                     | postgres
    6125 | ROLLBACK_GROUP           | BEGIN          | myGroup2                                                                         | Logged rollback to mark M2 (timestamp)                                                                                 | postgres
    6126 | DBLINK_OPEN_CNX          |                | rlbk#1                                                                           | Status = 1                                                                                                             | postgres
    6127 | LOCK_GROUP               | BEGIN          | myGroup2                                                                         | Rollback session #1                                                                                                    | postgres
    6128 | LOCK_GROUP               | END            | myGroup2                                                                         | Rollback session #1: 6 tables locked, 0 deadlock(s)                                                                    | postgres
    6129 | SET_MARK_GROUP           | BEGIN          | myGroup2                                                                         | RLBK_M2_%_START                                                                                                        | postgres
    6130 | SET_MARK_GROUP           | END            | myGroup2                                                                         | RLBK_M2_%_START                                                                                                        | postgres
    6131 | ROLLBACK_TABLE           | BEGIN          | myschema2.mytbl6                                                                 | All log rows with emaj_gid > 100078                                                                                    | postgres
    6132 | ROLLBACK_TABLE           | END            | myschema2.mytbl6                                                                 | 3 rolled back primary keys                                                                                             | postgres
    6133 | ROLLBACK_TABLE           | BEGIN          | myschema2.mytbl4                                                                 | All log rows with emaj_gid > 100078                                                                                    | postgres
    6134 | ROLLBACK_TABLE           | END            | myschema2.mytbl4                                                                 | 2 rolled back primary keys                                                                                             | postgres
    6135 | ROLLBACK_TABLE           | BEGIN          | myschema2.mytbl5                                                                 | All log rows with emaj_gid > 100078                                                                                    | postgres
    6136 | ROLLBACK_TABLE           | END            | myschema2.mytbl5                                                                 | 1 rolled back primary keys                                                                                             | postgres
    6137 | ROLLBACK_SEQUENCE        |                | myschema2.myseq1                                                                 | RESTART 1001 MAXVALUE 2000 CYCLE                                                                                       | postgres
    6138 | ROLLBACK_SEQUENCE        |                | myschema2."myTbl3_col31_seq"                                                     |                                                                                                                        | postgres
    6139 | SET_MARK_GROUP           | BEGIN          | myGroup2                                                                         | RLBK_M2_%_DONE                                                                                                         | postgres
    6140 | SET_MARK_GROUP           | END            | myGroup2                                                                         | RLBK_M2_%_DONE                                                                                                         | postgres
    6141 | ROLLBACK_GROUP           | END            | myGroup2                                                                         | Rollback_id 103, 3 tables and 2 sequences effectively processed                                                        | postgres
    6142 | DBLINK_CLOSE_CNX         |                | rlbk#1                                                                           |                                                                                                                        | postgres
    6143 | ROLLBACK_GROUP           | BEGIN          | myGroup2                                                                         | Unlogged rollback to mark M3 (timestamp)                                                                               | postgres
    6144 | DBLINK_OPEN_CNX          |                | rlbk#1                                                                           | Status = 1                                                                                                             | postgres
    6145 | LOCK_GROUP               | BEGIN          | myGroup2                                                                         | Rollback session #1                                                                                                    | postgres
    6146 | LOCK_GROUP               | END            | myGroup2                                                                         | Rollback session #1: 6 tables locked, 0 deadlock(s)                                                                    | postgres
    6147 | ROLLBACK_TABLE           | BEGIN          | myschema2.mytbl6                                                                 | All log rows with emaj_gid > 100086                                                                                    | postgres
    6148 | ROLLBACK_TABLE           | END            | myschema2.mytbl6                                                                 | 3 rolled back primary keys                                                                                             | postgres
    6149 | ROLLBACK_TABLE           | BEGIN          | myschema2.mytbl4                                                                 | All log rows with emaj_gid > 100086                                                                                    | postgres
    6150 | ROLLBACK_TABLE           | END            | myschema2.mytbl4                                                                 | 2 rolled back primary keys                                                                                             | postgres
    6151 | ROLLBACK_TABLE           | BEGIN          | myschema2.mytbl5                                                                 | All log rows with emaj_gid > 100086                                                                                    | postgres
    6152 | ROLLBACK_TABLE           | END            | myschema2.mytbl5                                                                 | 1 rolled back primary keys                                                                                             | postgres
    6153 | ROLLBACK_GROUP           | MARK DELETED   | myGroup2                                                                         | mark RLBK_M2_%_START is deleted                                                                                        | postgres
    6154 | ROLLBACK_GROUP           | MARK DELETED   | myGroup2                                                                         | mark RLBK_M2_%_DONE is deleted                                                                                         | postgres
    6155 | ROLLBACK_GROUP           | MARK DELETED   | myGroup2                                                                         | mark RLBK_M3_%_START is deleted                                                                                        | postgres
    6156 | ROLLBACK_GROUP           | MARK DELETED   | myGroup2                                                                         | mark RLBK_M3_%_DONE is deleted                                                                                         | postgres
    6157 | ROLLBACK_GROUP           | MARK DELETED   | myGroup2                                                                         | mark RLBK_M2_%_START is deleted                                                                                        | postgres
    6158 | ROLLBACK_GROUP           | MARK DELETED   | myGroup2                                                                         | mark RLBK_M2_%_DONE is deleted                                                                                         | postgres
    6159 | ROLLBACK_SEQUENCE        |                | myschema2.myseq1                                                                 | RESTART 1004 MAXVALUE 9223372036854775807 NO  CYCLE                                                                    | postgres
    6160 | ROLLBACK_SEQUENCE        |                | myschema2."myTbl3_col31_seq"                                                     |                                                                                                                        | postgres
    6161 | ROLLBACK_GROUP           | END            | myGroup2                                                                         | Rollback_id 104, 3 tables and 2 sequences effectively processed                                                        | postgres
    6162 | DBLINK_CLOSE_CNX         |                | rlbk#1                                                                           |                                                                                                                        | postgres
    6163 | ROLLBACK_GROUP           | BEGIN          | myGroup1                                                                         | Unlogged rollback to mark M5 (timestamp)                                                                               | postgres
    6164 | DBLINK_OPEN_CNX          |                | rlbk#1                                                                           | Status = 1                                                                                                             | postgres
    6165 | LOCK_GROUP               | BEGIN          | myGroup1                                                                         | Rollback session #1                                                                                                    | postgres
    6166 | LOCK_GROUP               | END            | myGroup1                                                                         | Rollback session #1: 5 tables locked, 0 deadlock(s)                                                                    | postgres
    6167 | ROLLBACK_TABLE           | BEGIN          | myschema1.mytbl1                                                                 | All log rows with emaj_gid > 100121                                                                                    | postgres
    6168 | ROLLBACK_TABLE           | END            | myschema1.mytbl1                                                                 | 1 rolled back primary keys                                                                                             | postgres
    6169 | ROLLBACK_TABLE           | BEGIN          | myschema1.mytbl4                                                                 | All log rows with emaj_gid > 100121                                                                                    | postgres
    6170 | ROLLBACK_TABLE           | END            | myschema1.mytbl4                                                                 | 2 rolled back primary keys                                                                                             | postgres
    6171 | ROLLBACK_GROUP           | MARK DELETED   | myGroup1                                                                         | mark M6 is deleted                                                                                                     | postgres
    6172 | ROLLBACK_SEQUENCE        |                | myschema1."myTbl3_col31_seq"                                                     |                                                                                                                        | postgres
    6173 | ROLLBACK_GROUP           | END            | myGroup1                                                                         | Rollback_id 105, 2 tables and 1 sequences effectively processed                                                        | postgres
    6174 | DBLINK_CLOSE_CNX         |                | rlbk#1                                                                           |                                                                                                                        | postgres
    6175 | ROLLBACK_GROUP           | BEGIN          | myGroup1                                                                         | Logged rollback to mark M4 (timestamp)                                                                                 | postgres
    6176 | DBLINK_OPEN_CNX          |                | rlbk#1                                                                           | Status = 1                                                                                                             | postgres
    6177 | LOCK_GROUP               | BEGIN          | myGroup1                                                                         | Rollback session #1                                                                                                    | postgres
    6178 | LOCK_GROUP               | END            | myGroup1                                                                         | Rollback session #1: 5 tables locked, 0 deadlock(s)                                                                    | postgres
    6179 | SET_MARK_GROUP           | BEGIN          | myGroup1                                                                         | RLBK_M4_%_START                                                                                                        | postgres
    6180 | CLEANUP_RLBK_STATE       |                | rollback id 103                                                                  | set to COMMITTED                                                                                                       | postgres
    6181 | CLEANUP_RLBK_STATE       |                | rollback id 104                                                                  | set to COMMITTED                                                                                                       | postgres
    6182 | CLEANUP_RLBK_STATE       |                | rollback id 105                                                                  | set to COMMITTED                                                                                                       | postgres
    6183 | SET_MARK_GROUP           | END            | myGroup1                                                                         | RLBK_M4_%_START                                                                                                        | postgres
    6184 | ROLLBACK_TABLE           | BEGIN          | myschema1."myTbl3"                                                               | All log rows with emaj_gid > 100111                                                                                    | postgres
    6185 | ROLLBACK_TABLE           | END            | myschema1."myTbl3"                                                               | 10 rolled back primary keys                                                                                            | postgres
    6186 | ROLLBACK_TABLE           | BEGIN          | myschema1.mytbl1                                                                 | All log rows with emaj_gid > 100111                                                                                    | postgres
    6187 | ROLLBACK_TABLE           | END            | myschema1.mytbl1                                                                 | 1 rolled back primary keys                                                                                             | postgres
    6188 | ROLLBACK_TABLE           | BEGIN          | myschema1.mytbl4                                                                 | All log rows with emaj_gid > 100111                                                                                    | postgres
    6189 | ROLLBACK_TABLE           | END            | myschema1.mytbl4                                                                 | 2 rolled back primary keys                                                                                             | postgres
    6190 | ROLLBACK_SEQUENCE        |                | myschema1."myTbl3_col31_seq"                                                     |                                                                                                                        | postgres
    6191 | SET_MARK_GROUP           | BEGIN          | myGroup1                                                                         | RLBK_M4_%_DONE                                                                                                         | postgres
    6192 | SET_MARK_GROUP           | END            | myGroup1                                                                         | RLBK_M4_%_DONE                                                                                                         | postgres
    6193 | ROLLBACK_GROUP           | END            | myGroup1                                                                         | Rollback_id 106, 3 tables and 1 sequences effectively processed                                                        | postgres
    6194 | DBLINK_CLOSE_CNX         |                | rlbk#1                                                                           |                                                                                                                        | postgres
    6195 | RENAME_MARK_GROUP        | BEGIN          | myGroup1                                                                         | RLBK_M4_%_START                                                                                                        | postgres
    6196 | RENAME_MARK_GROUP        | END            | myGroup1                                                                         | RLBK_M4_%_START renamed Before logged rollback to M4                                                                   | postgres
    6197 | DELETE_MARK_GROUP        | BEGIN          | myGroup1                                                                         | RLBK_M4_%_DONE                                                                                                         | postgres
    6198 | DELETE_MARK_GROUP        | END            | myGroup1                                                                         | RLBK_M4_%_DONE                                                                                                         | postgres
    6199 | DELETE_MARK_GROUP        | BEGIN          | myGroup1                                                                         | M1                                                                                                                     | postgres
    6200 | DELETE_MARK_GROUP        | END            | myGroup1                                                                         | M1                                                                                                                     | postgres
    6201 | DELETE_BEFORE_MARK_GROUP | BEGIN          | myGroup1                                                                         | M4                                                                                                                     | postgres
    6202 | DELETE_BEFORE_MARK_GROUP | END            | myGroup1                                                                         | 1 marks deleted ; M4 is now the initial mark                                                                           | postgres
    6206 | CLEANUP_RLBK_STATE       |                | rollback id 106                                                                  | set to COMMITTED                                                                                                       | postgres
    6207 | STOP_GROUPS              | BEGIN          | myGroup1,myGroup2                                                                |                                                                                                                        | postgres
    6208 | LOCK_GROUPS              | BEGIN          | myGroup1,myGroup2                                                                |                                                                                                                        | postgres
    6209 | LOCK_GROUPS              | END            | myGroup1,myGroup2                                                                | 11 tables locked, 0 deadlock(s)                                                                                        | postgres
    6210 | SET_MARK_GROUPS          | BEGIN          | myGroup1,myGroup2                                                                | STOP_%                                                                                                                 | postgres
    6211 | SET_MARK_GROUPS          | END            | myGroup1,myGroup2                                                                | STOP_%                                                                                                                 | postgres
    6212 | STOP_GROUPS              | END            | myGroup1,myGroup2                                                                | 14 tables/sequences processed                                                                                          | postgres
    6213 | START_GROUPS             | BEGIN          | myGroup1,myGroup2                                                                | Without log reset                                                                                                      | postgres
    6214 | LOCK_GROUPS              | BEGIN          | myGroup1,myGroup2                                                                |                                                                                                                        | postgres
    6215 | LOCK_GROUPS              | END            | myGroup1,myGroup2                                                                | 11 tables locked, 0 deadlock(s)                                                                                        | postgres
    6216 | SET_MARK_GROUPS          | BEGIN          | myGroup1,myGroup2                                                                | Multi-1                                                                                                                | postgres
    6217 | SET_MARK_GROUPS          | END            | myGroup1,myGroup2                                                                | Multi-1                                                                                                                | postgres
    6218 | START_GROUPS             | END            | myGroup1,myGroup2                                                                | 14 tables/sequences processed                                                                                          | postgres
    6219 | SET_MARK_GROUPS          | BEGIN          | myGroup1,myGroup2                                                                | Multi-2                                                                                                                | postgres
    6220 | LOCK_GROUPS              | BEGIN          | myGroup1,myGroup2                                                                |                                                                                                                        | postgres
    6221 | LOCK_GROUPS              | END            | myGroup1,myGroup2                                                                | 11 tables locked, 0 deadlock(s)                                                                                        | postgres
    6222 | SET_MARK_GROUPS          | END            | myGroup1,myGroup2                                                                | Multi-2                                                                                                                | postgres
    6223 | ROLLBACK_GROUPS          | BEGIN          | myGroup1,myGroup2                                                                | Logged rollback to mark Multi-1 (timestamp)                                                                            | postgres
    6224 | DBLINK_OPEN_CNX          |                | rlbk#1                                                                           | Status = 1                                                                                                             | postgres
    6225 | LOCK_GROUP               | BEGIN          | myGroup1,myGroup2                                                                | Rollback session #1                                                                                                    | postgres
    6226 | LOCK_GROUP               | END            | myGroup1,myGroup2                                                                | Rollback session #1: 11 tables locked, 0 deadlock(s)                                                                   | postgres
    6227 | SET_MARK_GROUPS          | BEGIN          | myGroup1,myGroup2                                                                | RLBK_Multi-1_%_START                                                                                                   | postgres
    6228 | SET_MARK_GROUPS          | END            | myGroup1,myGroup2                                                                | RLBK_Multi-1_%_START                                                                                                   | postgres
    6229 | ROLLBACK_SEQUENCE        |                | myschema1."myTbl3_col31_seq"                                                     |                                                                                                                        | postgres
    6230 | ROLLBACK_SEQUENCE        |                | myschema2.myseq1                                                                 |                                                                                                                        | postgres
    6231 | ROLLBACK_SEQUENCE        |                | myschema2."myTbl3_col31_seq"                                                     |                                                                                                                        | postgres
    6232 | SET_MARK_GROUPS          | BEGIN          | myGroup1,myGroup2                                                                | RLBK_Multi-1_%_DONE                                                                                                    | postgres
    6233 | SET_MARK_GROUPS          | END            | myGroup1,myGroup2                                                                | RLBK_Multi-1_%_DONE                                                                                                    | postgres
    6234 | ROLLBACK_GROUPS          | END            | myGroup1,myGroup2                                                                | Rollback_id 107, 0 tables and 3 sequences effectively processed                                                        | postgres
    6235 | DBLINK_CLOSE_CNX         |                | rlbk#1                                                                           |                                                                                                                        | postgres
    6236 | ROLLBACK_GROUPS          | BEGIN          | myGroup1,myGroup2                                                                | Unlogged rollback to mark Multi-2 (timestamp)                                                                          | postgres
    6237 | DBLINK_OPEN_CNX          |                | rlbk#1                                                                           | Status = 1                                                                                                             | postgres
    6238 | LOCK_GROUP               | BEGIN          | myGroup1,myGroup2                                                                | Rollback session #1                                                                                                    | postgres
    6239 | LOCK_GROUP               | END            | myGroup1,myGroup2                                                                | Rollback session #1: 11 tables locked, 0 deadlock(s)                                                                   | postgres
    6240 | ROLLBACK_GROUPS          | MARK DELETED   | myGroup1                                                                         | mark RLBK_Multi-1_%_START is deleted                                                                                   | postgres
    6241 | ROLLBACK_GROUPS          | MARK DELETED   | myGroup2                                                                         | mark RLBK_Multi-1_%_START is deleted                                                                                   | postgres
    6242 | ROLLBACK_GROUPS          | MARK DELETED   | myGroup1                                                                         | mark RLBK_Multi-1_%_DONE is deleted                                                                                    | postgres
    6243 | ROLLBACK_GROUPS          | MARK DELETED   | myGroup2                                                                         | mark RLBK_Multi-1_%_DONE is deleted                                                                                    | postgres
    6244 | ROLLBACK_SEQUENCE        |                | myschema1."myTbl3_col31_seq"                                                     |                                                                                                                        | postgres
    6245 | ROLLBACK_SEQUENCE        |                | myschema2.myseq1                                                                 |                                                                                                                        | postgres
    6246 | ROLLBACK_SEQUENCE        |                | myschema2."myTbl3_col31_seq"                                                     |                                                                                                                        | postgres
    6247 | ROLLBACK_GROUPS          | END            | myGroup1,myGroup2                                                                | Rollback_id 108, 0 tables and 3 sequences effectively processed                                                        | postgres
    6248 | DBLINK_CLOSE_CNX         |                | rlbk#1                                                                           |                                                                                                                        | postgres
    6249 | ROLLBACK_GROUPS          | BEGIN          | myGroup1,myGroup2                                                                | Unlogged rollback to mark Multi-1 (timestamp)                                                                          | postgres
    6250 | DBLINK_OPEN_CNX          |                | rlbk#1                                                                           | Status = 1                                                                                                             | postgres
    6251 | LOCK_GROUP               | BEGIN          | myGroup1,myGroup2                                                                | Rollback session #1                                                                                                    | postgres
    6252 | LOCK_GROUP               | END            | myGroup1,myGroup2                                                                | Rollback session #1: 11 tables locked, 0 deadlock(s)                                                                   | postgres
    6253 | ROLLBACK_GROUPS          | MARK DELETED   | myGroup1                                                                         | mark Multi-2 is deleted                                                                                                | postgres
    6254 | ROLLBACK_GROUPS          | MARK DELETED   | myGroup2                                                                         | mark Multi-2 is deleted                                                                                                | postgres
    6255 | ROLLBACK_SEQUENCE        |                | myschema1."myTbl3_col31_seq"                                                     |                                                                                                                        | postgres
    6256 | ROLLBACK_SEQUENCE        |                | myschema2.myseq1                                                                 |                                                                                                                        | postgres
    6257 | ROLLBACK_SEQUENCE        |                | myschema2."myTbl3_col31_seq"                                                     |                                                                                                                        | postgres
    6258 | ROLLBACK_GROUPS          | END            | myGroup1,myGroup2                                                                | Rollback_id 109, 0 tables and 3 sequences effectively processed                                                        | postgres
    6259 | DBLINK_CLOSE_CNX         |                | rlbk#1                                                                           |                                                                                                                        | postgres
    6260 | STOP_GROUPS              | BEGIN          | myGroup1,myGroup2                                                                |                                                                                                                        | postgres
    6261 | LOCK_GROUPS              | BEGIN          | myGroup1,myGroup2                                                                |                                                                                                                        | postgres
    6262 | LOCK_GROUPS              | END            | myGroup1,myGroup2                                                                | 11 tables locked, 0 deadlock(s)                                                                                        | postgres
    6263 | SET_MARK_GROUPS          | BEGIN          | myGroup1,myGroup2                                                                | Stop after rollback                                                                                                    | postgres
    6264 | CLEANUP_RLBK_STATE       |                | rollback id 107                                                                  | set to COMMITTED                                                                                                       | postgres
    6265 | CLEANUP_RLBK_STATE       |                | rollback id 108                                                                  | set to COMMITTED                                                                                                       | postgres
    6266 | CLEANUP_RLBK_STATE       |                | rollback id 109                                                                  | set to COMMITTED                                                                                                       | postgres
    6267 | SET_MARK_GROUPS          | END            | myGroup1,myGroup2                                                                | Stop after rollback                                                                                                    | postgres
    6268 | STOP_GROUPS              | END            | myGroup1,myGroup2                                                                | 14 tables/sequences processed                                                                                          | postgres
    6270 | START_GROUPS             | BEGIN          | myGroup1,myGroup2                                                                | Without log reset                                                                                                      | postgres
    6271 | LOCK_GROUPS              | BEGIN          | myGroup1,myGroup2                                                                |                                                                                                                        | postgres
    6272 | LOCK_GROUPS              | END            | myGroup1,myGroup2                                                                | 11 tables locked, 0 deadlock(s)                                                                                        | postgres
    6273 | SET_MARK_GROUPS          | BEGIN          | myGroup1,myGroup2                                                                | Multi-1b                                                                                                               | postgres
    6274 | SET_MARK_GROUPS          | END            | myGroup1,myGroup2                                                                | Multi-1b                                                                                                               | postgres
    6275 | START_GROUPS             | END            | myGroup1,myGroup2                                                                | 14 tables/sequences processed                                                                                          | postgres
    6276 | SET_MARK_GROUPS          | BEGIN          | myGroup1,myGroup2                                                                | Multi-2                                                                                                                | postgres
    6277 | LOCK_GROUPS              | BEGIN          | myGroup1,myGroup2                                                                |                                                                                                                        | postgres
    6278 | LOCK_GROUPS              | END            | myGroup1,myGroup2                                                                | 11 tables locked, 0 deadlock(s)                                                                                        | postgres
    6279 | SET_MARK_GROUPS          | END            | myGroup1,myGroup2                                                                | Multi-2                                                                                                                | postgres
    6280 | DELETE_MARK_GROUP        | BEGIN          | myGroup1                                                                         | Multi-2                                                                                                                | postgres
    6281 | DELETE_MARK_GROUP        | END            | myGroup1                                                                         | Multi-2                                                                                                                | postgres
    6282 | ROLLBACK_GROUP           | BEGIN          | myGroup2                                                                         | Unlogged rollback to mark Multi-2 (timestamp)                                                                          | postgres
    6283 | DBLINK_OPEN_CNX          |                | rlbk#1                                                                           | Status = 1                                                                                                             | postgres
    6284 | LOCK_GROUP               | BEGIN          | myGroup2                                                                         | Rollback session #1                                                                                                    | postgres
    6285 | LOCK_GROUP               | END            | myGroup2                                                                         | Rollback session #1: 6 tables locked, 0 deadlock(s)                                                                    | postgres
    6286 | ROLLBACK_SEQUENCE        |                | myschema2.myseq1                                                                 |                                                                                                                        | postgres
    6287 | ROLLBACK_SEQUENCE        |                | myschema2."myTbl3_col31_seq"                                                     |                                                                                                                        | postgres
    6288 | ROLLBACK_GROUP           | END            | myGroup2                                                                         | Rollback_id 110, 0 tables and 2 sequences effectively processed                                                        | postgres
    6289 | DBLINK_CLOSE_CNX         |                | rlbk#1                                                                           |                                                                                                                        | postgres
    6290 | DELETE_MARK_GROUP        | BEGIN          | myGroup2                                                                         | Multi-2                                                                                                                | postgres
    6291 | DELETE_MARK_GROUP        | END            | myGroup2                                                                         | Multi-2                                                                                                                | postgres
    6292 | DELETE_MARK_GROUP        | BEGIN          | myGroup1                                                                         | Multi-1                                                                                                                | postgres
    6293 | DELETE_MARK_GROUP        | END            | myGroup1                                                                         | Multi-1                                                                                                                | postgres
    6294 | DELETE_MARK_GROUP        | BEGIN          | myGroup2                                                                         | Multi-1                                                                                                                | postgres
    6295 | DELETE_MARK_GROUP        | END            | myGroup2                                                                         | Multi-1                                                                                                                | postgres
    6296 | RENAME_MARK_GROUP        | BEGIN          | myGroup1                                                                         | Multi-1b                                                                                                               | postgres
    6297 | RENAME_MARK_GROUP        | END            | myGroup1                                                                         | Multi-1b renamed Multi-1                                                                                               | postgres
    6298 | RENAME_MARK_GROUP        | BEGIN          | myGroup2                                                                         | Multi-1b                                                                                                               | postgres
    6299 | RENAME_MARK_GROUP        | END            | myGroup2                                                                         | Multi-1b renamed Multi-1                                                                                               | postgres
    6300 | RENAME_MARK_GROUP        | BEGIN          | myGroup2                                                                         | M2                                                                                                                     | postgres
    6301 | RENAME_MARK_GROUP        | END            | myGroup2                                                                         | M2 renamed Deleted M2                                                                                                  | postgres
    6302 | DELETE_BEFORE_MARK_GROUP | BEGIN          | myGroup2                                                                         | M3                                                                                                                     | postgres
    6303 | DELETE_BEFORE_MARK_GROUP | END            | myGroup2                                                                         | 2 marks deleted ; M3 is now the initial mark                                                                           | postgres
    6304 | COMMENT_MARK_GROUP       |                | myGroup2                                                                         | Mark M3                                                                                                                | postgres
    6305 | CREATE_GROUP             | BEGIN          | phil's group#3",                                                                 | audit_only                                                                                                             | postgres
    6306 | CREATE_GROUP             | SCHEMA CREATED | "emaj #'3"                                                                       |                                                                                                                        | postgres
    6307 | CREATE_GROUP             | END            | phil's group#3",                                                                 | 4 tables/sequences processed                                                                                           | postgres
    6308 | ALTER_GROUP              | BEGIN          | phil's group#3",                                                                 |                                                                                                                        | postgres
    6309 | ALTER_GROUP              | END            | phil's group#3",                                                                 | 1 dropped relations and 1 (re)created relations                                                                        | postgres
    6310 | START_GROUP              | BEGIN          | phil's group#3",                                                                 | With log reset                                                                                                         | postgres
    6311 | LOCK_GROUP               | BEGIN          | phil's group#3",                                                                 |                                                                                                                        | postgres
    6312 | LOCK_GROUP               | END            | phil's group#3",                                                                 | 2 tables locked, 0 deadlock(s)                                                                                         | postgres
    6313 | SET_MARK_GROUP           | BEGIN          | phil's group#3",                                                                 | M1_after_alter_group                                                                                                   | postgres
    6314 | CLEANUP_RLBK_STATE       |                | rollback id 110                                                                  | set to COMMITTED                                                                                                       | postgres
    6315 | SET_MARK_GROUP           | END            | phil's group#3",                                                                 | M1_after_alter_group                                                                                                   | postgres
    6316 | START_GROUP              | END            | phil's group#3",                                                                 | 4 tables/sequences processed                                                                                           | postgres
    6317 | STOP_GROUP               | BEGIN          | phil's group#3",                                                                 |                                                                                                                        | postgres
    6318 | LOCK_GROUP               | BEGIN          | phil's group#3",                                                                 |                                                                                                                        | postgres
    6319 | LOCK_GROUP               | END            | phil's group#3",                                                                 | 2 tables locked, 0 deadlock(s)                                                                                         | postgres
    6320 | SET_MARK_GROUP           | BEGIN          | phil's group#3",                                                                 | STOP_%                                                                                                                 | postgres
    6321 | SET_MARK_GROUP           | END            | phil's group#3",                                                                 | STOP_%                                                                                                                 | postgres
    6322 | STOP_GROUP               | END            | phil's group#3",                                                                 | 4 tables/sequences processed                                                                                           | postgres
    6323 | ALTER_GROUP              | BEGIN          | phil's group#3",                                                                 |                                                                                                                        | postgres
    6324 | ALTER_GROUP              | END            | phil's group#3",                                                                 | 1 dropped relations and 1 (re)created relations                                                                        | postgres
    6325 | DROP_GROUP               | BEGIN          | phil's group#3",                                                                 |                                                                                                                        | postgres
    6326 | DROP_GROUP               | SCHEMA DROPPED | "emaj #'3"                                                                       |                                                                                                                        | postgres
    6327 | DROP_GROUP               | END            | phil's group#3",                                                                 | 4 tables/sequences processed                                                                                           | postgres
    6328 | CREATE_GROUP             | BEGIN          | phil's group#3",                                                                 | rollbackable                                                                                                           | postgres
    6329 | CREATE_GROUP             | SCHEMA CREATED | "emaj #'3"                                                                       |                                                                                                                        | postgres
    6330 | CREATE_GROUP             | END            | phil's group#3",                                                                 | 4 tables/sequences processed                                                                                           | postgres
    6331 | START_GROUP              | BEGIN          | phil's group#3",                                                                 | With log reset                                                                                                         | postgres
    6332 | LOCK_GROUP               | BEGIN          | phil's group#3",                                                                 |                                                                                                                        | postgres
    6333 | LOCK_GROUP               | END            | phil's group#3",                                                                 | 2 tables locked, 0 deadlock(s)                                                                                         | postgres
    6334 | SET_MARK_GROUP           | BEGIN          | phil's group#3",                                                                 | M1_rollbackable                                                                                                        | postgres
    6335 | SET_MARK_GROUP           | END            | phil's group#3",                                                                 | M1_rollbackable                                                                                                        | postgres
    6336 | START_GROUP              | END            | phil's group#3",                                                                 | 4 tables/sequences processed                                                                                           | postgres
    6337 | SET_MARK_GROUP           | BEGIN          | phil's group#3",                                                                 |                                                                                                                        | postgres
    6338 | LOCK_GROUP               | BEGIN          | phil's group#3",                                                                 |                                                                                                                        | postgres
    6339 | LOCK_GROUP               | END            | phil's group#3",                                                                 | 2 tables locked, 0 deadlock(s)                                                                                         | postgres
    6340 | SET_MARK_GROUP           | END            | phil's group#3",                                                                 | M2_rollbackable                                                                                                        | postgres
    6341 | SET_MARK_GROUP           | BEGIN          | phil's group#3",                                                                 |                                                                                                                        | postgres
    6342 | LOCK_GROUP               | BEGIN          | phil's group#3",                                                                 |                                                                                                                        | postgres
    6343 | LOCK_GROUP               | END            | phil's group#3",                                                                 | 2 tables locked, 0 deadlock(s)                                                                                         | postgres
    6344 | SET_MARK_GROUP           | END            | phil's group#3",                                                                 | M2_again!                                                                                                              | postgres
    6345 | SET_MARK_GROUPS          | BEGIN          | phil's group#3",                                                                 | phil's mark #1                                                                                                         | postgres
    6346 | LOCK_GROUPS              | BEGIN          | phil's group#3",                                                                 |                                                                                                                        | postgres
    6347 | LOCK_GROUPS              | END            | phil's group#3",                                                                 | 2 tables locked, 0 deadlock(s)                                                                                         | postgres
    6348 | SET_MARK_GROUPS          | END            | phil's group#3",                                                                 | phil's mark #1                                                                                                         | postgres
    6349 | COMMENT_MARK_GROUP       |                | phil's group#3",                                                                 | Mark phil's mark #1                                                                                                    | postgres
    6350 | RENAME_MARK_GROUP        | BEGIN          | phil's group#3",                                                                 | phil's mark #1                                                                                                         | postgres
    6351 | RENAME_MARK_GROUP        | END            | phil's group#3",                                                                 | phil's mark #1 renamed phil's mark #3                                                                                  | postgres
    6352 | DELETE_MARK_GROUP        | BEGIN          | phil's group#3",                                                                 | M2_again!                                                                                                              | postgres
    6353 | DELETE_MARK_GROUP        | END            | phil's group#3",                                                                 | M2_again!                                                                                                              | postgres
    6354 | ROLLBACK_GROUP           | BEGIN          | phil's group#3",                                                                 | Logged rollback to mark phil's mark #3 (timestamp)                                                                     | postgres
    6355 | DBLINK_OPEN_CNX          |                | rlbk#1                                                                           | Status = 1                                                                                                             | postgres
    6356 | LOCK_GROUP               | BEGIN          | phil's group#3",                                                                 | Rollback session #1                                                                                                    | postgres
    6357 | LOCK_GROUP               | END            | phil's group#3",                                                                 | Rollback session #1: 2 tables locked, 0 deadlock(s)                                                                    | postgres
    6358 | SET_MARK_GROUP           | BEGIN          | phil's group#3",                                                                 | RLBK_phil's mark #3_%_START                                                                                            | postgres
    6359 | SET_MARK_GROUP           | END            | phil's group#3",                                                                 | RLBK_phil's mark #3_%_START                                                                                            | postgres
    6360 | ROLLBACK_SEQUENCE        |                | "phil's schema3"."myTbl2\_col21_seq"                                             |                                                                                                                        | postgres
    6361 | ROLLBACK_SEQUENCE        |                | "phil's schema3"."phil's seq\1"                                                  |                                                                                                                        | postgres
    6362 | SET_MARK_GROUP           | BEGIN          | phil's group#3",                                                                 | RLBK_phil's mark #3_%_DONE                                                                                             | postgres
    6363 | SET_MARK_GROUP           | END            | phil's group#3",                                                                 | RLBK_phil's mark #3_%_DONE                                                                                             | postgres
    6364 | ROLLBACK_GROUP           | END            | phil's group#3",                                                                 | Rollback_id 111, 0 tables and 2 sequences effectively processed                                                        | postgres
    6365 | DBLINK_CLOSE_CNX         |                | rlbk#1                                                                           |                                                                                                                        | postgres
    6366 | ROLLBACK_GROUP           | BEGIN          | phil's group#3",                                                                 | Unlogged rollback to mark phil's mark #3 (timestamp)                                                                   | postgres
    6367 | DBLINK_OPEN_CNX          |                | rlbk#1                                                                           | Status = 1                                                                                                             | postgres
    6368 | LOCK_GROUP               | BEGIN          | phil's group#3",                                                                 | Rollback session #1                                                                                                    | postgres
    6369 | LOCK_GROUP               | END            | phil's group#3",                                                                 | Rollback session #1: 2 tables locked, 0 deadlock(s)                                                                    | postgres
    6370 | ROLLBACK_GROUP           | MARK DELETED   | phil's group#3",                                                                 | mark RLBK_phil's mark #3_%_START is deleted                                                                            | postgres
    6371 | ROLLBACK_GROUP           | MARK DELETED   | phil's group#3",                                                                 | mark RLBK_phil's mark #3_%_DONE is deleted                                                                             | postgres
    6372 | ROLLBACK_SEQUENCE        |                | "phil's schema3"."myTbl2\_col21_seq"                                             |                                                                                                                        | postgres
    6373 | ROLLBACK_SEQUENCE        |                | "phil's schema3"."phil's seq\1"                                                  |                                                                                                                        | postgres
    6374 | ROLLBACK_GROUP           | END            | phil's group#3",                                                                 | Rollback_id 112, 0 tables and 2 sequences effectively processed                                                        | postgres
    6375 | DBLINK_CLOSE_CNX         |                | rlbk#1                                                                           |                                                                                                                        | postgres
    6376 | ROLLBACK_GROUP           | BEGIN          | myGroup1                                                                         | Unlogged rollback to mark Multi-1 (timestamp)                                                                          | postgres
    6377 | DBLINK_OPEN_CNX          |                | rlbk#1                                                                           | Status = 1                                                                                                             | postgres
    6378 | LOCK_GROUP               | BEGIN          | myGroup1                                                                         | Rollback session #1                                                                                                    | postgres
    6379 | LOCK_GROUP               | END            | myGroup1                                                                         | Rollback session #1: 5 tables locked, 0 deadlock(s)                                                                    | postgres
    6380 | ROLLBACK_TABLE           | BEGIN          | myschema1.mytbl1                                                                 | All log rows with emaj_gid > 100161                                                                                    | postgres
    6381 | ROLLBACK_TABLE           | END            | myschema1.mytbl1                                                                 | 0 rolled back primary keys                                                                                             | postgres
    6382 | ROLLBACK_SEQUENCE        |                | myschema1."myTbl3_col31_seq"                                                     |                                                                                                                        | postgres
    6383 | ROLLBACK_GROUP           | END            | myGroup1                                                                         | Rollback_id 113, 1 tables and 1 sequences effectively processed                                                        | postgres
    6384 | DBLINK_CLOSE_CNX         |                | rlbk#1                                                                           |                                                                                                                        | postgres
    6385 | SNAP_GROUP               | BEGIN          | myGroup1                                                                         | /tmp/emaj_test/snaps                                                                                                   | postgres
    6386 | SNAP_GROUP               | END            | myGroup1                                                                         | 6 tables/sequences processed                                                                                           | postgres
    6387 | SNAP_GROUP               | BEGIN          | myGroup2                                                                         | /tmp/emaj_test/snaps                                                                                                   | postgres
    6388 | SNAP_GROUP               | END            | myGroup2                                                                         | 8 tables/sequences processed                                                                                           | postgres
    6389 | SNAP_GROUP               | BEGIN          | phil's group#3",                                                                 | /tmp/emaj_test/snaps                                                                                                   | postgres
    6390 | SNAP_GROUP               | END            | phil's group#3",                                                                 | 4 tables/sequences processed                                                                                           | postgres
    6391 | GEN_SQL_GROUP            | BEGIN          | myGroup1                                                                         | From mark Multi-1 to current situation towards /tmp/emaj_test/sql_scripts/myGroup1.sql                                 | postgres
    6392 | GEN_SQL_GROUP            | END            | myGroup1                                                                         | 1 generated statements                                                                                                 | postgres
    6393 | GEN_SQL_GROUP            | BEGIN          | myGroup2                                                                         | From mark Multi-1 to current situation towards /tmp/emaj_test/sql_scripts/myGroup2.sql with tables/sequences filtering | postgres
    6394 | GEN_SQL_GROUP            | END            | myGroup2                                                                         | 22 generated statements                                                                                                | postgres
    6395 | GEN_SQL_GROUP            | BEGIN          | phil's group#3",                                                                 | From mark M1_rollbackable to current situation towards /tmp/emaj_test/sql_scripts/Group3.sql                           | postgres
    6396 | GEN_SQL_GROUP            | END            | phil's group#3",                                                                 | 57 generated statements                                                                                                | postgres
    6436 | STOP_GROUP               | BEGIN          | phil's group#3",                                                                 |                                                                                                                        | postgres
    6437 | LOCK_GROUP               | BEGIN          | phil's group#3",                                                                 |                                                                                                                        | postgres
    6438 | LOCK_GROUP               | END            | phil's group#3",                                                                 | 2 tables locked, 0 deadlock(s)                                                                                         | postgres
    6439 | SET_MARK_GROUP           | BEGIN          | phil's group#3",                                                                 | STOP_%                                                                                                                 | postgres
    6440 | CLEANUP_RLBK_STATE       |                | rollback id 111                                                                  | set to COMMITTED                                                                                                       | postgres
    6441 | CLEANUP_RLBK_STATE       |                | rollback id 112                                                                  | set to COMMITTED                                                                                                       | postgres
    6442 | CLEANUP_RLBK_STATE       |                | rollback id 113                                                                  | set to COMMITTED                                                                                                       | postgres
    6443 | CLEANUP_RLBK_STATE       |                | rollback id 114                                                                  | set to ABORTED                                                                                                         | postgres
    6444 | CLEANUP_RLBK_STATE       |                | rollback id 115                                                                  | set to ABORTED                                                                                                         | postgres
    6445 | CLEANUP_RLBK_STATE       |                | rollback id 116                                                                  | set to ABORTED                                                                                                         | postgres
    6446 | SET_MARK_GROUP           | END            | phil's group#3",                                                                 | STOP_%                                                                                                                 | postgres
    6447 | STOP_GROUP               | END            | phil's group#3",                                                                 | 4 tables/sequences processed                                                                                           | postgres
    6448 | ALTER_GROUP              | BEGIN          | phil's group#3",                                                                 |                                                                                                                        | postgres
    6449 | ALTER_GROUP              | END            | phil's group#3",                                                                 | 1 dropped relations and 1 (re)created relations                                                                        | postgres
    6450 | START_GROUP              | BEGIN          | phil's group#3",                                                                 | With log reset                                                                                                         | postgres
    6451 | LOCK_GROUP               | BEGIN          | phil's group#3",                                                                 |                                                                                                                        | postgres
    6452 | LOCK_GROUP               | END            | phil's group#3",                                                                 | 2 tables locked, 0 deadlock(s)                                                                                         | postgres
    6453 | SET_MARK_GROUP           | BEGIN          | phil's group#3",                                                                 | M1_after_alter_group                                                                                                   | postgres
    6454 | SET_MARK_GROUP           | END            | phil's group#3",                                                                 | M1_after_alter_group                                                                                                   | postgres
    6455 | START_GROUP              | END            | phil's group#3",                                                                 | 4 tables/sequences processed                                                                                           | postgres
    6456 | SET_MARK_GROUP           | BEGIN          | phil's group#3",                                                                 |                                                                                                                        | postgres
    6457 | LOCK_GROUP               | BEGIN          | phil's group#3",                                                                 |                                                                                                                        | postgres
    6458 | LOCK_GROUP               | END            | phil's group#3",                                                                 | 2 tables locked, 0 deadlock(s)                                                                                         | postgres
    6459 | SET_MARK_GROUP           | END            | phil's group#3",                                                                 | M2                                                                                                                     | postgres
    6460 | ROLLBACK_GROUP           | BEGIN          | phil's group#3",                                                                 | Unlogged rollback to mark M1_after_alter_group (timestamp)                                                             | postgres
    6461 | DBLINK_OPEN_CNX          |                | rlbk#1                                                                           | Status = 1                                                                                                             | postgres
    6462 | LOCK_GROUP               | BEGIN          | phil's group#3",                                                                 | Rollback session #1                                                                                                    | postgres
    6463 | LOCK_GROUP               | END            | phil's group#3",                                                                 | Rollback session #1: 2 tables locked, 0 deadlock(s)                                                                    | postgres
    6464 | ROLLBACK_TABLE           | BEGIN          | "phil's schema3".table_with_very_looooooooooooooooooooooooooooooooooooooong_name | All log rows with emaj_gid > 100331                                                                                    | postgres
    6465 | ROLLBACK_TABLE           | END            | "phil's schema3".table_with_very_looooooooooooooooooooooooooooooooooooooong_name | 10 rolled back primary keys                                                                                            | postgres
    6466 | ROLLBACK_GROUP           | MARK DELETED   | phil's group#3",                                                                 | mark M2 is deleted                                                                                                     | postgres
    6467 | ROLLBACK_SEQUENCE        |                | "phil's schema3"."myTbl2\_col21_seq"                                             |                                                                                                                        | postgres
    6468 | ROLLBACK_SEQUENCE        |                | "phil's schema3"."phil's seq\1"                                                  |                                                                                                                        | postgres
    6469 | ROLLBACK_GROUP           | END            | phil's group#3",                                                                 | Rollback_id 117, 1 tables and 2 sequences effectively processed                                                        | postgres
    6470 | DBLINK_CLOSE_CNX         |                | rlbk#1                                                                           |                                                                                                                        | postgres
    6471 | STOP_GROUP               | BEGIN          | phil's group#3",                                                                 |                                                                                                                        | postgres
    6472 | LOCK_GROUP               | BEGIN          | phil's group#3",                                                                 |                                                                                                                        | postgres
    6473 | LOCK_GROUP               | END            | phil's group#3",                                                                 | 2 tables locked, 0 deadlock(s)                                                                                         | postgres
    6474 | SET_MARK_GROUP           | BEGIN          | phil's group#3",                                                                 | STOP_%                                                                                                                 | postgres
    6475 | CLEANUP_RLBK_STATE       |                | rollback id 117                                                                  | set to COMMITTED                                                                                                       | postgres
    6476 | SET_MARK_GROUP           | END            | phil's group#3",                                                                 | STOP_%                                                                                                                 | postgres
    6477 | STOP_GROUP               | END            | phil's group#3",                                                                 | 4 tables/sequences processed                                                                                           | postgres
    6478 | DROP_GROUP               | BEGIN          | phil's group#3",                                                                 |                                                                                                                        | postgres
    6479 | DROP_GROUP               | SCHEMA DROPPED | "emaj #'3"                                                                       |                                                                                                                        | postgres
    6480 | DROP_GROUP               | END            | phil's group#3",                                                                 | 4 tables/sequences processed                                                                                           | postgres
    6481 | PROTECT_GROUP            |                | myGroup2                                                                         | Status 1                                                                                                               | postgres
    6482 | UNPROTECT_GROUP          |                | myGroup2                                                                         | Status 1                                                                                                               | postgres
    6483 | SET_MARK_GROUP           | BEGIN          | myGroup1                                                                         |                                                                                                                        | postgres
    6484 | LOCK_GROUP               | BEGIN          | myGroup1                                                                         |                                                                                                                        | postgres
    6485 | LOCK_GROUP               | END            | myGroup1                                                                         | 5 tables locked, 0 deadlock(s)                                                                                         | postgres
    6486 | SET_MARK_GROUP           | END            | myGroup1                                                                         | Mark_to_protect                                                                                                        | postgres
    6487 | PROTECT_MARK_GROUP       |                | myGroup1                                                                         | Mark Mark_to_protect ; status 1                                                                                        | postgres
    6488 | UNPROTECT_MARK_GROUP     |                | myGroup1                                                                         | Mark Mark_to_protect ; status 1                                                                                        | postgres
    6489 | DELETE_MARK_GROUP        | BEGIN          | myGroup1                                                                         | Mark_to_protect                                                                                                        | postgres
    6490 | DELETE_MARK_GROUP        | END            | myGroup1                                                                         | Mark_to_protect                                                                                                        | postgres
    6491 | SET_MARK_GROUP           | BEGIN          | myGroup1                                                                         |                                                                                                                        | postgres
    6492 | LOCK_GROUP               | BEGIN          | myGroup1                                                                         |                                                                                                                        | postgres
    6493 | LOCK_GROUP               | END            | myGroup1                                                                         | 5 tables locked, 0 deadlock(s)                                                                                         | postgres
    6494 | SET_MARK_GROUP           | END            | myGroup1                                                                         | MC1                                                                                                                    | postgres
    6495 | SET_MARK_GROUP           | BEGIN          | myGroup1                                                                         |                                                                                                                        | postgres
    6496 | LOCK_GROUP               | BEGIN          | myGroup1                                                                         |                                                                                                                        | postgres
    6497 | LOCK_GROUP               | END            | myGroup1                                                                         | 5 tables locked, 0 deadlock(s)                                                                                         | postgres
    6498 | SET_MARK_GROUP           | END            | myGroup1                                                                         | MC2                                                                                                                    | postgres
    6499 | ROLLBACK_GROUP           | BEGIN          | myGroup1                                                                         | Logged rollback to mark MC1 (timestamp)                                                                                | postgres
    6500 | DBLINK_OPEN_CNX          |                | rlbk#1                                                                           | Status = 1                                                                                                             | postgres
    6501 | LOCK_GROUP               | BEGIN          | myGroup1                                                                         | Rollback session #1                                                                                                    | postgres
    6502 | LOCK_GROUP               | END            | myGroup1                                                                         | Rollback session #1: 5 tables locked, 0 deadlock(s)                                                                    | postgres
    6503 | SET_MARK_GROUP           | BEGIN          | myGroup1                                                                         | RLBK_MC1_%_START                                                                                                       | postgres
    6504 | SET_MARK_GROUP           | END            | myGroup1                                                                         | RLBK_MC1_%_START                                                                                                       | postgres
    6505 | ROLLBACK_TABLE           | BEGIN          | myschema1.mytbl1                                                                 | All log rows with emaj_gid > 100337                                                                                    | postgres
    6506 | ROLLBACK_TABLE           | END            | myschema1.mytbl1                                                                 | 13 rolled back primary keys                                                                                            | postgres
    6507 | ROLLBACK_TABLE           | BEGIN          | myschema1.mytbl2                                                                 | All log rows with emaj_gid > 100337                                                                                    | postgres
    6508 | ROLLBACK_TABLE           | END            | myschema1.mytbl2                                                                 | 1 rolled back primary keys                                                                                             | postgres
    6509 | ROLLBACK_SEQUENCE        |                | myschema1."myTbl3_col31_seq"                                                     |                                                                                                                        | postgres
    6510 | SET_MARK_GROUP           | BEGIN          | myGroup1                                                                         | RLBK_MC1_%_DONE                                                                                                        | postgres
    6511 | SET_MARK_GROUP           | END            | myGroup1                                                                         | RLBK_MC1_%_DONE                                                                                                        | postgres
    6512 | ROLLBACK_GROUP           | END            | myGroup1                                                                         | Rollback_id 118, 2 tables and 1 sequences effectively processed                                                        | postgres
    6513 | DBLINK_CLOSE_CNX         |                | rlbk#1                                                                           |                                                                                                                        | postgres
    6514 | RENAME_MARK_GROUP        | BEGIN          | myGroup1                                                                         | EMAJ_LAST_MARK                                                                                                         | postgres
    6515 | RENAME_MARK_GROUP        | END            | myGroup1                                                                         | RLBK_MC1_%_DONE renamed RLBK_MC1_DONE                                                                                  | postgres
    6516 | SET_MARK_GROUP           | BEGIN          | myGroup1                                                                         |                                                                                                                        | postgres
    6517 | LOCK_GROUP               | BEGIN          | myGroup1                                                                         |                                                                                                                        | postgres
    6518 | LOCK_GROUP               | END            | myGroup1                                                                         | 5 tables locked, 0 deadlock(s)                                                                                         | postgres
    6519 | CLEANUP_RLBK_STATE       |                | rollback id 118                                                                  | set to COMMITTED                                                                                                       | postgres
    6520 | SET_MARK_GROUP           | END            | myGroup1                                                                         | MC3                                                                                                                    | postgres
    6521 | SET_MARK_GROUP           | BEGIN          | myGroup1                                                                         |                                                                                                                        | postgres
    6522 | LOCK_GROUP               | BEGIN          | myGroup1                                                                         |                                                                                                                        | postgres
    6523 | LOCK_GROUP               | END            | myGroup1                                                                         | 5 tables locked, 0 deadlock(s)                                                                                         | postgres
    6524 | SET_MARK_GROUP           | END            | myGroup1                                                                         | MC4                                                                                                                    | postgres
    6525 | SET_MARK_GROUP           | BEGIN          | myGroup1                                                                         |                                                                                                                        | postgres
    6526 | LOCK_GROUP               | BEGIN          | myGroup1                                                                         |                                                                                                                        | postgres
    6527 | LOCK_GROUP               | END            | myGroup1                                                                         | 5 tables locked, 0 deadlock(s)                                                                                         | postgres
    6528 | SET_MARK_GROUP           | END            | myGroup1                                                                         | MC5                                                                                                                    | postgres
    6529 | ROLLBACK_GROUP           | BEGIN          | myGroup1                                                                         | Logged rollback to mark MC3 (timestamp)                                                                                | postgres
    6530 | DBLINK_OPEN_CNX          |                | rlbk#1                                                                           | Status = 1                                                                                                             | postgres
    6531 | LOCK_GROUP               | BEGIN          | myGroup1                                                                         | Rollback session #1                                                                                                    | postgres
    6532 | LOCK_GROUP               | END            | myGroup1                                                                         | Rollback session #1: 5 tables locked, 0 deadlock(s)                                                                    | postgres
    6533 | SET_MARK_GROUP           | BEGIN          | myGroup1                                                                         | RLBK_MC3_%_START                                                                                                       | postgres
    6534 | SET_MARK_GROUP           | END            | myGroup1                                                                         | RLBK_MC3_%_START                                                                                                       | postgres
    6535 | ROLLBACK_TABLE           | BEGIN          | myschema1."myTbl3"                                                               | All log rows with emaj_gid > 100367                                                                                    | postgres
    6536 | ROLLBACK_TABLE           | END            | myschema1."myTbl3"                                                               | 10 rolled back primary keys                                                                                            | postgres
    6537 | ROLLBACK_TABLE           | BEGIN          | myschema1.mytbl4                                                                 | All log rows with emaj_gid > 100367                                                                                    | postgres
    6538 | ROLLBACK_TABLE           | END            | myschema1.mytbl4                                                                 | 1 rolled back primary keys                                                                                             | postgres
    6539 | ROLLBACK_SEQUENCE        |                | myschema1."myTbl3_col31_seq"                                                     | RESTART 21                                                                                                             | postgres
    6540 | SET_MARK_GROUP           | BEGIN          | myGroup1                                                                         | RLBK_MC3_%_DONE                                                                                                        | postgres
    6541 | SET_MARK_GROUP           | END            | myGroup1                                                                         | RLBK_MC3_%_DONE                                                                                                        | postgres
    6542 | ROLLBACK_GROUP           | END            | myGroup1                                                                         | Rollback_id 119, 2 tables and 1 sequences effectively processed                                                        | postgres
    6543 | DBLINK_CLOSE_CNX         |                | rlbk#1                                                                           |                                                                                                                        | postgres
    6544 | CONSOLIDATE_RLBK_GROUP   | BEGIN          | myGroup1                                                                         | Erase all between marks MC1 and RLBK_MC1_DONE                                                                          | postgres
    6545 | CONSOLIDATE_RLBK_GROUP   | END            | myGroup1                                                                         | 2 tables and 1 sequences processed ; 2 marks deleted                                                                   | postgres
    6546 | CONSOLIDATE_RLBK_GROUP   | BEGIN          | myGroup1                                                                         | Erase all between marks MC3 and RLBK_MC3_%_DONE                                                                        | postgres
    6547 | CONSOLIDATE_RLBK_GROUP   | END            | myGroup1                                                                         | 2 tables and 1 sequences processed ; 3 marks deleted                                                                   | postgres
    6548 | SET_MARK_GROUP           | BEGIN          | myGroup1                                                                         |                                                                                                                        | postgres
    6549 | LOCK_GROUP               | BEGIN          | myGroup1                                                                         |                                                                                                                        | postgres
    6550 | LOCK_GROUP               | END            | myGroup1                                                                         | 5 tables locked, 0 deadlock(s)                                                                                         | postgres
    6551 | CLEANUP_RLBK_STATE       |                | rollback id 119                                                                  | set to COMMITTED                                                                                                       | postgres
    6552 | SET_MARK_GROUP           | END            | myGroup1                                                                         | MC6                                                                                                                    | postgres
    6553 | SET_MARK_GROUP           | BEGIN          | myGroup1                                                                         |                                                                                                                        | postgres
    6554 | LOCK_GROUP               | BEGIN          | myGroup1                                                                         |                                                                                                                        | postgres
    6555 | LOCK_GROUP               | END            | myGroup1                                                                         | 5 tables locked, 0 deadlock(s)                                                                                         | postgres
    6556 | SET_MARK_GROUP           | END            | myGroup1                                                                         | MC7                                                                                                                    | postgres
    6557 | SET_MARK_GROUP           | BEGIN          | myGroup1                                                                         |                                                                                                                        | postgres
    6558 | LOCK_GROUP               | BEGIN          | myGroup1                                                                         |                                                                                                                        | postgres
    6559 | LOCK_GROUP               | END            | myGroup1                                                                         | 5 tables locked, 0 deadlock(s)                                                                                         | postgres
    6560 | SET_MARK_GROUP           | END            | myGroup1                                                                         | MC8                                                                                                                    | postgres
    6561 | ROLLBACK_GROUP           | BEGIN          | myGroup1                                                                         | Logged rollback to mark MC8 (timestamp)                                                                                | postgres
    6562 | DBLINK_OPEN_CNX          |                | rlbk#1                                                                           | Status = 1                                                                                                             | postgres
    6563 | LOCK_GROUP               | BEGIN          | myGroup1                                                                         | Rollback session #1                                                                                                    | postgres
    6564 | LOCK_GROUP               | END            | myGroup1                                                                         | Rollback session #1: 5 tables locked, 0 deadlock(s)                                                                    | postgres
    6565 | SET_MARK_GROUP           | BEGIN          | myGroup1                                                                         | RLBK_MC8_%_START                                                                                                       | postgres
    6566 | SET_MARK_GROUP           | END            | myGroup1                                                                         | RLBK_MC8_%_START                                                                                                       | postgres
    6567 | ROLLBACK_TABLE           | BEGIN          | myschema1.mytbl2                                                                 | All log rows with emaj_gid > 100407                                                                                    | postgres
    6568 | ROLLBACK_TABLE           | END            | myschema1.mytbl2                                                                 | 1 rolled back primary keys                                                                                             | postgres
    6569 | ROLLBACK_SEQUENCE        |                | myschema1."myTbl3_col31_seq"                                                     |                                                                                                                        | postgres
    6570 | SET_MARK_GROUP           | BEGIN          | myGroup1                                                                         | RLBK_MC8_%_DONE                                                                                                        | postgres
    6571 | SET_MARK_GROUP           | END            | myGroup1                                                                         | RLBK_MC8_%_DONE                                                                                                        | postgres
    6572 | ROLLBACK_GROUP           | END            | myGroup1                                                                         | Rollback_id 120, 1 tables and 1 sequences effectively processed                                                        | postgres
    6573 | DBLINK_CLOSE_CNX         |                | rlbk#1                                                                           |                                                                                                                        | postgres
    6574 | CONSOLIDATE_RLBK_GROUP   | BEGIN          | myGroup1                                                                         | Erase all between marks MC8 and RLBK_MC8_%_DONE                                                                        | postgres
    6575 | CONSOLIDATE_RLBK_GROUP   | END            | myGroup1                                                                         | 1 tables and 1 sequences processed ; 1 marks deleted                                                                   | postgres
    6576 | SET_MARK_GROUP           | BEGIN          | myGroup1                                                                         |                                                                                                                        | postgres
    6577 | LOCK_GROUP               | BEGIN          | myGroup1                                                                         |                                                                                                                        | postgres
    6578 | LOCK_GROUP               | END            | myGroup1                                                                         | 5 tables locked, 0 deadlock(s)                                                                                         | postgres
    6579 | CLEANUP_RLBK_STATE       |                | rollback id 120                                                                  | set to COMMITTED                                                                                                       | postgres
    6580 | SET_MARK_GROUP           | END            | myGroup1                                                                         | MC9                                                                                                                    | postgres
    6581 | ROLLBACK_GROUP           | BEGIN          | myGroup1                                                                         | Logged rollback to mark MC6 (timestamp)                                                                                | postgres
    6582 | DBLINK_OPEN_CNX          |                | rlbk#1                                                                           | Status = 1                                                                                                             | postgres
    6583 | LOCK_GROUP               | BEGIN          | myGroup1                                                                         | Rollback session #1                                                                                                    | postgres
    6584 | LOCK_GROUP               | END            | myGroup1                                                                         | Rollback session #1: 5 tables locked, 0 deadlock(s)                                                                    | postgres
    6585 | SET_MARK_GROUP           | BEGIN          | myGroup1                                                                         | RLBK_MC6_%_START                                                                                                       | postgres
    6586 | SET_MARK_GROUP           | END            | myGroup1                                                                         | RLBK_MC6_%_START                                                                                                       | postgres
    6587 | ROLLBACK_TABLE           | BEGIN          | myschema1.mytbl1                                                                 | All log rows with emaj_gid > 100390                                                                                    | postgres
    6588 | ROLLBACK_TABLE           | END            | myschema1.mytbl1                                                                 | 13 rolled back primary keys                                                                                            | postgres
    6589 | ROLLBACK_TABLE           | BEGIN          | myschema1.mytbl2                                                                 | All log rows with emaj_gid > 100390                                                                                    | postgres
    6590 | ROLLBACK_TABLE           | END            | myschema1.mytbl2                                                                 | 1 rolled back primary keys                                                                                             | postgres
    6591 | ROLLBACK_TABLE           | BEGIN          | myschema1.mytbl4                                                                 | All log rows with emaj_gid > 100390                                                                                    | postgres
    6592 | ROLLBACK_TABLE           | END            | myschema1.mytbl4                                                                 | 1 rolled back primary keys                                                                                             | postgres
    6593 | ROLLBACK_TABLE           | BEGIN          | myschema1."myTbl3"                                                               | All log rows with emaj_gid > 100390                                                                                    | postgres
    6594 | ROLLBACK_TABLE           | END            | myschema1."myTbl3"                                                               | 10 rolled back primary keys                                                                                            | postgres
    6595 | ROLLBACK_SEQUENCE        |                | myschema1."myTbl3_col31_seq"                                                     | RESTART 21                                                                                                             | postgres
    6596 | SET_MARK_GROUP           | BEGIN          | myGroup1                                                                         | RLBK_MC6_%_DONE                                                                                                        | postgres
    6597 | SET_MARK_GROUP           | END            | myGroup1                                                                         | RLBK_MC6_%_DONE                                                                                                        | postgres
    6598 | ROLLBACK_GROUP           | END            | myGroup1                                                                         | Rollback_id 121, 4 tables and 1 sequences effectively processed                                                        | postgres
    6599 | DBLINK_CLOSE_CNX         |                | rlbk#1                                                                           |                                                                                                                        | postgres
    6600 | CONSOLIDATE_RLBK_GROUP   | BEGIN          | myGroup1                                                                         | Erase all between marks MC6 and RLBK_MC6_%_DONE                                                                        | postgres
    6601 | CONSOLIDATE_RLBK_GROUP   | END            | myGroup1                                                                         | 4 tables and 1 sequences processed ; 5 marks deleted                                                                   | postgres
    6602 | SET_MARK_GROUP           | BEGIN          | myGroup1                                                                         |                                                                                                                        | postgres
    6603 | LOCK_GROUP               | BEGIN          | myGroup1                                                                         |                                                                                                                        | postgres
    6604 | LOCK_GROUP               | END            | myGroup1                                                                         | 5 tables locked, 0 deadlock(s)                                                                                         | postgres
    6605 | CLEANUP_RLBK_STATE       |                | rollback id 121                                                                  | set to COMMITTED                                                                                                       | postgres
    6606 | SET_MARK_GROUP           | END            | myGroup1                                                                         | MC10                                                                                                                   | postgres
    6607 | ROLLBACK_GROUP           | BEGIN          | myGroup1                                                                         | Logged rollback to mark MC10 (timestamp)                                                                               | postgres
    6608 | DBLINK_OPEN_CNX          |                | rlbk#1                                                                           | Status = 1                                                                                                             | postgres
    6609 | LOCK_GROUP               | BEGIN          | myGroup1                                                                         | Rollback session #1                                                                                                    | postgres
    6610 | LOCK_GROUP               | END            | myGroup1                                                                         | Rollback session #1: 5 tables locked, 0 deadlock(s)                                                                    | postgres
    6611 | SET_MARK_GROUP           | BEGIN          | myGroup1                                                                         | RLBK_MC10_%_START                                                                                                      | postgres
    6612 | SET_MARK_GROUP           | END            | myGroup1                                                                         | RLBK_MC10_%_START                                                                                                      | postgres
    6613 | ROLLBACK_TABLE           | BEGIN          | myschema1.mytbl1                                                                 | All log rows with emaj_gid > 100444                                                                                    | postgres
    6614 | ROLLBACK_TABLE           | END            | myschema1.mytbl1                                                                 | 11 rolled back primary keys                                                                                            | postgres
    6615 | ROLLBACK_SEQUENCE        |                | myschema1."myTbl3_col31_seq"                                                     |                                                                                                                        | postgres
    6616 | SET_MARK_GROUP           | BEGIN          | myGroup1                                                                         | RLBK_MC10_%_DONE                                                                                                       | postgres
    6617 | SET_MARK_GROUP           | END            | myGroup1                                                                         | RLBK_MC10_%_DONE                                                                                                       | postgres
    6618 | ROLLBACK_GROUP           | END            | myGroup1                                                                         | Rollback_id 122, 1 tables and 1 sequences effectively processed                                                        | postgres
    6619 | DBLINK_CLOSE_CNX         |                | rlbk#1                                                                           |                                                                                                                        | postgres
    6620 | SET_MARK_GROUP           | BEGIN          | myGroup1                                                                         |                                                                                                                        | postgres
    6621 | LOCK_GROUP               | BEGIN          | myGroup1                                                                         |                                                                                                                        | postgres
    6622 | LOCK_GROUP               | END            | myGroup1                                                                         | 5 tables locked, 0 deadlock(s)                                                                                         | postgres
    6623 | CLEANUP_RLBK_STATE       |                | rollback id 122                                                                  | set to COMMITTED                                                                                                       | postgres
    6624 | SET_MARK_GROUP           | END            | myGroup1                                                                         | MC11                                                                                                                   | postgres
    6625 | ROLLBACK_GROUP           | BEGIN          | myGroup1                                                                         | Logged rollback to mark MC10 (timestamp)                                                                               | postgres
    6626 | DBLINK_OPEN_CNX          |                | rlbk#1                                                                           | Status = 1                                                                                                             | postgres
    6627 | LOCK_GROUP               | BEGIN          | myGroup1                                                                         | Rollback session #1                                                                                                    | postgres
    6628 | LOCK_GROUP               | END            | myGroup1                                                                         | Rollback session #1: 5 tables locked, 0 deadlock(s)                                                                    | postgres
    6629 | SET_MARK_GROUP           | BEGIN          | myGroup1                                                                         | RLBK_MC10_%_START                                                                                                      | postgres
    6630 | SET_MARK_GROUP           | END            | myGroup1                                                                         | RLBK_MC10_%_START                                                                                                      | postgres
    6631 | ROLLBACK_TABLE           | BEGIN          | myschema1.mytbl1                                                                 | All log rows with emaj_gid > 100444                                                                                    | postgres
    6632 | ROLLBACK_TABLE           | END            | myschema1.mytbl1                                                                 | 11 rolled back primary keys                                                                                            | postgres
    6633 | ROLLBACK_TABLE           | BEGIN          | myschema1.mytbl4                                                                 | All log rows with emaj_gid > 100444                                                                                    | postgres
    6634 | ROLLBACK_TABLE           | END            | myschema1.mytbl4                                                                 | 1 rolled back primary keys                                                                                             | postgres
    6635 | ROLLBACK_SEQUENCE        |                | myschema1."myTbl3_col31_seq"                                                     |                                                                                                                        | postgres
    6636 | SET_MARK_GROUP           | BEGIN          | myGroup1                                                                         | RLBK_MC10_%_DONE                                                                                                       | postgres
    6637 | SET_MARK_GROUP           | END            | myGroup1                                                                         | RLBK_MC10_%_DONE                                                                                                       | postgres
    6638 | ROLLBACK_GROUP           | END            | myGroup1                                                                         | Rollback_id 123, 2 tables and 1 sequences effectively processed                                                        | postgres
    6639 | DBLINK_CLOSE_CNX         |                | rlbk#1                                                                           |                                                                                                                        | postgres
    6640 | CONSOLIDATE_RLBK_GROUP   | BEGIN          | myGroup1                                                                         | Erase all between marks MC10 and RLBK_MC10_%_DONE                                                                      | postgres
    6641 | CONSOLIDATE_RLBK_GROUP   | END            | myGroup1                                                                         | 2 tables and 1 sequences processed ; 4 marks deleted                                                                   | postgres
    6642 | SET_MARK_GROUP           | BEGIN          | myGroup1                                                                         |                                                                                                                        | postgres
    6643 | LOCK_GROUP               | BEGIN          | myGroup1                                                                         |                                                                                                                        | postgres
    6644 | LOCK_GROUP               | END            | myGroup1                                                                         | 5 tables locked, 0 deadlock(s)                                                                                         | postgres
    6645 | CLEANUP_RLBK_STATE       |                | rollback id 123                                                                  | set to COMMITTED                                                                                                       | postgres
    6646 | SET_MARK_GROUP           | END            | myGroup1                                                                         | MC15                                                                                                                   | postgres
    6647 | SET_MARK_GROUP           | BEGIN          | myGroup1                                                                         |                                                                                                                        | postgres
    6648 | LOCK_GROUP               | BEGIN          | myGroup1                                                                         |                                                                                                                        | postgres
    6649 | LOCK_GROUP               | END            | myGroup1                                                                         | 5 tables locked, 0 deadlock(s)                                                                                         | postgres
    6650 | SET_MARK_GROUP           | END            | myGroup1                                                                         | MC16                                                                                                                   | postgres
    6651 | ROLLBACK_GROUP           | BEGIN          | myGroup1                                                                         | Logged rollback to mark MC15 (timestamp)                                                                               | postgres
    6652 | DBLINK_OPEN_CNX          |                | rlbk#1                                                                           | Status = 1                                                                                                             | postgres
    6653 | LOCK_GROUP               | BEGIN          | myGroup1                                                                         | Rollback session #1                                                                                                    | postgres
    6654 | LOCK_GROUP               | END            | myGroup1                                                                         | Rollback session #1: 5 tables locked, 0 deadlock(s)                                                                    | postgres
    6655 | SET_MARK_GROUP           | BEGIN          | myGroup1                                                                         | RLBK_MC15_%_START                                                                                                      | postgres
    6656 | SET_MARK_GROUP           | END            | myGroup1                                                                         | RLBK_MC15_%_START                                                                                                      | postgres
    6657 | ROLLBACK_TABLE           | BEGIN          | myschema1.mytbl1                                                                 | All log rows with emaj_gid > 100469                                                                                    | postgres
    6658 | ROLLBACK_TABLE           | END            | myschema1.mytbl1                                                                 | 13 rolled back primary keys                                                                                            | postgres
    6659 | ROLLBACK_TABLE           | BEGIN          | myschema1.mytbl2                                                                 | All log rows with emaj_gid > 100469                                                                                    | postgres
    6660 | ROLLBACK_TABLE           | END            | myschema1.mytbl2                                                                 | 1 rolled back primary keys                                                                                             | postgres
    6661 | ROLLBACK_SEQUENCE        |                | myschema1."myTbl3_col31_seq"                                                     |                                                                                                                        | postgres
    6662 | SET_MARK_GROUP           | BEGIN          | myGroup1                                                                         | RLBK_MC15_%_DONE                                                                                                       | postgres
    6663 | SET_MARK_GROUP           | END            | myGroup1                                                                         | RLBK_MC15_%_DONE                                                                                                       | postgres
    6664 | ROLLBACK_GROUP           | END            | myGroup1                                                                         | Rollback_id 124, 2 tables and 1 sequences effectively processed                                                        | postgres
    6665 | DBLINK_CLOSE_CNX         |                | rlbk#1                                                                           |                                                                                                                        | postgres
    6666 | RENAME_MARK_GROUP        | BEGIN          | myGroup1                                                                         | EMAJ_LAST_MARK                                                                                                         | postgres
    6667 | RENAME_MARK_GROUP        | END            | myGroup1                                                                         | RLBK_MC15_%_DONE renamed RLBK_MC15_DONE                                                                                | postgres
    6668 | SET_MARK_GROUP           | BEGIN          | myGroup1                                                                         |                                                                                                                        | postgres
    6669 | LOCK_GROUP               | BEGIN          | myGroup1                                                                         |                                                                                                                        | postgres
    6670 | LOCK_GROUP               | END            | myGroup1                                                                         | 5 tables locked, 0 deadlock(s)                                                                                         | postgres
    6671 | CLEANUP_RLBK_STATE       |                | rollback id 124                                                                  | set to COMMITTED                                                                                                       | postgres
    6672 | SET_MARK_GROUP           | END            | myGroup1                                                                         | MC17                                                                                                                   | postgres
    6673 | ROLLBACK_GROUP           | BEGIN          | myGroup1                                                                         | Logged rollback to mark MC16 (timestamp)                                                                               | postgres
    6674 | DBLINK_OPEN_CNX          |                | rlbk#1                                                                           | Status = 1                                                                                                             | postgres
    6675 | LOCK_GROUP               | BEGIN          | myGroup1                                                                         | Rollback session #1                                                                                                    | postgres
    6676 | LOCK_GROUP               | END            | myGroup1                                                                         | Rollback session #1: 5 tables locked, 0 deadlock(s)                                                                    | postgres
    6677 | SET_MARK_GROUP           | BEGIN          | myGroup1                                                                         | RLBK_MC16_%_START                                                                                                      | postgres
    6678 | SET_MARK_GROUP           | END            | myGroup1                                                                         | RLBK_MC16_%_START                                                                                                      | postgres
    6679 | ROLLBACK_TABLE           | BEGIN          | myschema1.mytbl1                                                                 | All log rows with emaj_gid > 100485                                                                                    | postgres
    6680 | ROLLBACK_TABLE           | END            | myschema1.mytbl1                                                                 | 11 rolled back primary keys                                                                                            | postgres
    6681 | ROLLBACK_TABLE           | BEGIN          | myschema1.mytbl2                                                                 | All log rows with emaj_gid > 100485                                                                                    | postgres
    6682 | ROLLBACK_TABLE           | END            | myschema1.mytbl2                                                                 | 2 rolled back primary keys                                                                                             | postgres
    6683 | ROLLBACK_SEQUENCE        |                | myschema1."myTbl3_col31_seq"                                                     |                                                                                                                        | postgres
    6684 | SET_MARK_GROUP           | BEGIN          | myGroup1                                                                         | RLBK_MC16_%_DONE                                                                                                       | postgres
    6685 | SET_MARK_GROUP           | END            | myGroup1                                                                         | RLBK_MC16_%_DONE                                                                                                       | postgres
    6686 | ROLLBACK_GROUP           | END            | myGroup1                                                                         | Rollback_id 125, 2 tables and 1 sequences effectively processed                                                        | postgres
    6687 | DBLINK_CLOSE_CNX         |                | rlbk#1                                                                           |                                                                                                                        | postgres
    6688 | CONSOLIDATE_RLBK_GROUP   | BEGIN          | myGroup1                                                                         | Erase all between marks MC15 and RLBK_MC15_DONE                                                                        | postgres
    6689 | CONSOLIDATE_RLBK_GROUP   | END            | myGroup1                                                                         | 2 tables and 1 sequences processed ; 2 marks deleted                                                                   | postgres
    6690 | ROLLBACK_GROUP           | BEGIN          | myGroup1                                                                         | Unlogged rollback to mark Multi-1 (timestamp)                                                                          | postgres
    6691 | DBLINK_OPEN_CNX          |                | rlbk#1                                                                           | Status = 1                                                                                                             | postgres
    6692 | LOCK_GROUP               | BEGIN          | myGroup1                                                                         | Rollback session #1                                                                                                    | postgres
    6693 | LOCK_GROUP               | END            | myGroup1                                                                         | Rollback session #1: 5 tables locked, 0 deadlock(s)                                                                    | postgres
    6694 | ROLLBACK_TABLE           | BEGIN          | myschema1.mytbl1                                                                 | All log rows with emaj_gid > 100161                                                                                    | postgres
    6695 | ROLLBACK_TABLE           | END            | myschema1.mytbl1                                                                 | 11 rolled back primary keys                                                                                            | postgres
    6696 | ROLLBACK_TABLE           | BEGIN          | myschema1.mytbl2                                                                 | All log rows with emaj_gid > 100161                                                                                    | postgres
    6697 | ROLLBACK_TABLE           | END            | myschema1.mytbl2                                                                 | 3 rolled back primary keys                                                                                             | postgres
    6698 | ROLLBACK_GROUP           | MARK DELETED   | myGroup1                                                                         | mark MC1 is deleted                                                                                                    | postgres
    6699 | ROLLBACK_GROUP           | MARK DELETED   | myGroup1                                                                         | mark RLBK_MC1_DONE is deleted                                                                                          | postgres
    6700 | ROLLBACK_GROUP           | MARK DELETED   | myGroup1                                                                         | mark MC3 is deleted                                                                                                    | postgres
    6701 | ROLLBACK_GROUP           | MARK DELETED   | myGroup1                                                                         | mark RLBK_MC3_%_DONE is deleted                                                                                        | postgres
    6702 | ROLLBACK_GROUP           | MARK DELETED   | myGroup1                                                                         | mark MC6 is deleted                                                                                                    | postgres
    6703 | ROLLBACK_GROUP           | MARK DELETED   | myGroup1                                                                         | mark RLBK_MC6_%_DONE is deleted                                                                                        | postgres
    6704 | ROLLBACK_GROUP           | MARK DELETED   | myGroup1                                                                         | mark MC10 is deleted                                                                                                   | postgres
    6705 | ROLLBACK_GROUP           | MARK DELETED   | myGroup1                                                                         | mark RLBK_MC10_%_DONE is deleted                                                                                       | postgres
    6706 | ROLLBACK_GROUP           | MARK DELETED   | myGroup1                                                                         | mark MC15 is deleted                                                                                                   | postgres
    6707 | ROLLBACK_GROUP           | MARK DELETED   | myGroup1                                                                         | mark RLBK_MC15_DONE is deleted                                                                                         | postgres
    6708 | ROLLBACK_GROUP           | MARK DELETED   | myGroup1                                                                         | mark MC17 is deleted                                                                                                   | postgres
    6709 | ROLLBACK_GROUP           | MARK DELETED   | myGroup1                                                                         | mark RLBK_MC16_%_START is deleted                                                                                      | postgres
    6710 | ROLLBACK_GROUP           | MARK DELETED   | myGroup1                                                                         | mark RLBK_MC16_%_DONE is deleted                                                                                       | postgres
    6711 | ROLLBACK_SEQUENCE        |                | myschema1."myTbl3_col31_seq"                                                     | RESTART 21                                                                                                             | postgres
    6712 | ROLLBACK_GROUP           | END            | myGroup1                                                                         | Rollback_id 126, 2 tables and 1 sequences effectively processed                                                        | postgres
    6713 | DBLINK_CLOSE_CNX         |                | rlbk#1                                                                           |                                                                                                                        | postgres
    6714 | CLEANUP_RLBK_STATE       |                | rollback id 125                                                                  | set to COMMITTED                                                                                                       | postgres
    6715 | CLEANUP_RLBK_STATE       |                | rollback id 126                                                                  | set to COMMITTED                                                                                                       | postgres
(637 rows)

--
reset role;
alter table "phil's schema3".table_with_very_looooooooooooooooooooooooooooooooooooooong_name rename to "phil's tbl1";
truncate emaj.emaj_hist;
alter sequence emaj.emaj_hist_hist_id_seq restart 10000;
alter sequence emaj.emaj_mark_mark_id_seq restart 1000;
alter sequence emaj.emaj_sequence_sequ_id_seq restart 1000;
alter sequence emaj.emaj_rlbk_rlbk_id_seq restart 200;
-- the groups are left in their current state for the parallel rollback test.
select count(*) from mySchema1.myTbl4;
 count 
-------
     0
(1 row)

select count(*) from mySchema1.myTbl1;
 count 
-------
    20
(1 row)

select count(*) from mySchema1.myTbl2; 
 count 
-------
     3
(1 row)

select count(*) from mySchema1."myTbl3";
 count 
-------
     5
(1 row)

select count(*) from mySchema1.myTbl2b;
 count 
-------
     0
(1 row)

select count(*) from mySchema2.myTbl4;
 count 
-------
     2
(1 row)

select count(*) from mySchema2.myTbl1;
 count 
-------
    10
(1 row)

select count(*) from mySchema2.myTbl2; 
 count 
-------
     2
(1 row)

select count(*) from mySchema2."myTbl3";
 count 
-------
    10
(1 row)

select count(*) from mySchema2.myTbl5;
 count 
-------
     3
(1 row)

select count(*) from mySchema2.myTbl6;
 count 
-------
    14
(1 row)


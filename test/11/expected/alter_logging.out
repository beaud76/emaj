-- alterLogging.sql : test emaj_alter_group() and emaj_alter_groups() functions with groups in LOGGING state
--
-- It follows alter.sql that tests the same functions but with groups in IDLE state.
-- It uses the same tables and groups, and the same sequences range
-- It includes the final checks for both alter.sql and alterLogging.sql scenarios
-- define and create the temp file directory to be used by the script
\setenv EMAJTESTTMPDIR '/tmp/emaj_'`echo $PGVER`'/alter_logging'
\set EMAJTESTTMPDIR `echo $EMAJTESTTMPDIR`
\! mkdir -p $EMAJTESTTMPDIR
select emaj.emaj_start_groups('{"myGroup1","myGroup2"}','Mk1');
WARNING:  _check_fk_groups: The foreign key "mytbl6_col61_fkey" on the table "myschema2.mytbl6" references the table "myschema2.mytbl7" that is outside the groups (myGroup1,myGroup2).
WARNING:  _check_fk_groups: The table "myschema2.mytbl6" is referenced by the foreign key "mytbl8_col81_fkey" on the table "myschema2.mytbl8" that is outside the groups (myGroup1,myGroup2).
 emaj_start_groups 
-------------------
                15
(1 row)

-----------------------------
-- change attributes in emaj_group_def
-----------------------------
-- change the priority
update emaj.emaj_group_def set grpdef_priority = 30 where grpdef_schema = 'myschema1' and grpdef_tblseq = 'mytbl1';
  -- also test the internal _adjust_group_properties() function, by simulating wrong values for group_has_waiting_changes
update emaj.emaj_group set group_has_waiting_changes = true where group_name = 'emptyGroup';
update emaj.emaj_group set group_has_waiting_changes = false where group_name = 'myGroup1';
select emaj._adjust_group_properties();
 _adjust_group_properties 
--------------------------
                        2
(1 row)

select group_name, group_has_waiting_changes from emaj.emaj_group where group_name = 'myGroup1' or group_name = 'emptyGroup' order by 1;
 group_name | group_has_waiting_changes 
------------+---------------------------
 emptyGroup | f
 myGroup1   | t
(2 rows)

select emaj.emaj_alter_group('myGroup1','Priority Changed');
 emaj_alter_group 
------------------
                7
(1 row)

-- change the log data tablespace and the log index tablespace for different tables
update emaj.emaj_group_def set grpdef_log_dat_tsp = NULL where grpdef_schema = 'myschema1' and grpdef_tblseq = 'mytbl2b';
update emaj.emaj_group_def set grpdef_log_idx_tsp = 'tsplog1' where grpdef_schema = 'myschema2' and grpdef_tblseq = 'mytbl6';
set default_tablespace = tspemaj_renamed;
update emaj.emaj_group set group_has_waiting_changes = false where group_name = 'myGroup1';
select emaj._adjust_group_properties();
 _adjust_group_properties 
--------------------------
                        1
(1 row)

select group_has_waiting_changes from emaj.emaj_group where group_name = 'myGroup1';
 group_has_waiting_changes 
---------------------------
 t
(1 row)

select emaj.emaj_alter_groups('{"myGroup1","myGroup2"}','Attributes_changed');
WARNING:  _check_fk_groups: The foreign key "mytbl6_col61_fkey" on the table "myschema2.mytbl6" references the table "myschema2.mytbl7" that is outside the groups (myGroup1,myGroup2).
WARNING:  _check_fk_groups: The table "myschema2.mytbl6" is referenced by the foreign key "mytbl8_col81_fkey" on the table "myschema2.mytbl8" that is outside the groups (myGroup1,myGroup2).
 emaj_alter_groups 
-------------------
                15
(1 row)

reset default_tablespace;
-- perform some operations: set an intermediate mark, update myTbl3 and rollback
select emaj.emaj_set_mark_groups('{"myGroup1","myGroup2"}','Mk2');
 emaj_set_mark_groups 
----------------------
                   15
(1 row)

insert into myschema1."myTbl3" values (11, now(), 11.0);
update myschema2."myTbl3" set col33 = 11.0 where col31 = 10;
select * from emaj.emaj_rollback_groups('{"myGroup1","myGroup2"}','Mk2');
 rlbk_severity |             rlbk_message             
---------------+--------------------------------------
 Notice        | 2 / 11 tables effectively processed.
 Notice        | 4 sequences processed.
(2 rows)

-- change the priority back
update emaj.emaj_group_def set grpdef_priority = 20 where grpdef_schema = 'myschema1' and grpdef_tblseq = 'mytbl1';
select emaj.emaj_alter_groups(array['myGroup1','myGroup2']);
WARNING:  _check_fk_groups: The foreign key "mytbl6_col61_fkey" on the table "myschema2.mytbl6" references the table "myschema2.mytbl7" that is outside the groups (myGroup1,myGroup2).
WARNING:  _check_fk_groups: The table "myschema2.mytbl6" is referenced by the foreign key "mytbl8_col81_fkey" on the table "myschema2.mytbl8" that is outside the groups (myGroup1,myGroup2).
 emaj_alter_groups 
-------------------
                15
(1 row)

-- change the other attributes back
update emaj.emaj_group_def set grpdef_log_dat_tsp = 'tsp log''2' where grpdef_schema = 'myschema1' and grpdef_tblseq = 'mytbl2b';
update emaj.emaj_group_def set grpdef_log_idx_tsp = NULL where grpdef_schema = 'myschema2' and grpdef_tblseq = 'mytbl6';
select emaj.emaj_alter_groups('{"myGroup1","myGroup2"}');
WARNING:  _check_fk_groups: The foreign key "mytbl6_col61_fkey" on the table "myschema2.mytbl6" references the table "myschema2.mytbl7" that is outside the groups (myGroup1,myGroup2).
WARNING:  _check_fk_groups: The table "myschema2.mytbl6" is referenced by the foreign key "mytbl8_col81_fkey" on the table "myschema2.mytbl8" that is outside the groups (myGroup1,myGroup2).
 emaj_alter_groups 
-------------------
                15
(1 row)

-----------------------------
-- add sequences
-----------------------------
-- add myschema2.mySeq2 to the myGroup2 group
-- first perform changes and set marks
select emaj.emaj_set_mark_group('myGroup2','ADD_SEQ test');
 emaj_set_mark_group 
---------------------
                   8
(1 row)

select nextval('myschema2.myseq2');
 nextval 
---------
       1
(1 row)

select emaj.emaj_set_mark_group('myGroup2','Before ADD_SEQ');
 emaj_set_mark_group 
---------------------
                   8
(1 row)

select nextval('myschema2.myseq2');
 nextval 
---------
       2
(1 row)

-- then add the sequence to the group
insert into emaj.emaj_group_def values ('myGroup2','myschema2','myseq2');
update emaj.emaj_group set group_has_waiting_changes = false where group_name = 'myGroup2';
select emaj._adjust_group_properties();
 _adjust_group_properties 
--------------------------
                        1
(1 row)

select group_name, group_last_alter_time_id, group_has_waiting_changes, group_nb_table, group_nb_sequence
  from emaj.emaj_group where group_name = 'myGroup2';
 group_name | group_last_alter_time_id | group_has_waiting_changes | group_nb_table | group_nb_sequence 
------------+--------------------------+---------------------------+----------------+-------------------
 myGroup2   |                     6071 | t                         |              6 |                 2
(1 row)

--select emaj.emaj_alter_group('myGroup2', 'Alter to add myseq2');
select emaj.emaj_assign_sequence('myschema2', 'myseq2', 'myGroup2', 'Alter to add myseq2');
 emaj_assign_sequence 
----------------------
                    1
(1 row)

select group_name, group_last_alter_time_id, group_has_waiting_changes, group_nb_table, group_nb_sequence
  from emaj.emaj_group where group_name = 'myGroup2';
 group_name | group_last_alter_time_id | group_has_waiting_changes | group_nb_table | group_nb_sequence 
------------+--------------------------+---------------------------+----------------+-------------------
 myGroup2   |                     6074 | t                         |              6 |                 3
(1 row)

select rel_schema, rel_tblseq, rel_time_range, rel_group, rel_kind
  from emaj.emaj_relation where rel_schema = 'myschema2' and rel_tblseq = 'myseq2' order by rel_time_range;
 rel_schema | rel_tblseq | rel_time_range | rel_group | rel_kind 
------------+------------+----------------+-----------+----------
 myschema2  | myseq2     | [6074,)        | myGroup2  | S
(1 row)

select * from emaj.emaj_sequence where sequ_name = 'myseq2';
 sequ_schema | sequ_name | sequ_time_id | sequ_last_val | sequ_start_val | sequ_increment |    sequ_max_val     | sequ_min_val | sequ_cache_val | sequ_is_cycled | sequ_is_called 
-------------+-----------+--------------+---------------+----------------+----------------+---------------------+--------------+----------------+----------------+----------------
 myschema2   | myseq2    |         6074 |             2 |              1 |              1 | 9223372036854775807 |            1 |              1 | f              | t
(1 row)

-- perform some other updates
select nextval('myschema2.myseq2');
 nextval 
---------
       3
(1 row)

select emaj.emaj_set_mark_group('myGroup2','After ADD_SEQ');
 emaj_set_mark_group 
---------------------
                   9
(1 row)

select nextval('myschema2.myseq2');
 nextval 
---------
       4
(1 row)

select nextval('myschema2.myseq2');
 nextval 
---------
       5
(1 row)

--testing snap and sql generation
select emaj.emaj_snap_group('myGroup2',:'EMAJTESTTMPDIR','');
 emaj_snap_group 
-----------------
               9
(1 row)

\! cat $EMAJTESTTMPDIR/myschema2_myseq2.snap
myseq2	5	1	1	9223372036854775807	1	1	f	t
\! rm $EMAJTESTTMPDIR/*
select emaj.emaj_snap_log_group('myGroup2',NULL,'After ADD_SEQ',:'EMAJTESTTMPDIR',NULL);
 emaj_snap_log_group 
---------------------
                   9
(1 row)

\! grep myseq2 $EMAJTESTTMPDIR/myGroup2_sequences_at_Mk1
\! grep myseq2 $EMAJTESTTMPDIR/myGroup2_sequences_at_After_ADD_SEQ
myschema2	myseq2	6075	3	1	1	9223372036854775807	1	1	f	t
\! rm $EMAJTESTTMPDIR/*
select emaj.emaj_gen_sql_group('myGroup2', 'Before ADD_SEQ', NULL, :'EMAJTESTTMPDIR' || '/myFile');
NOTICE:  table "emaj_temp_script" does not exist, skipping
 emaj_gen_sql_group 
--------------------
                  0
(1 row)

\! grep myseq2 $EMAJTESTTMPDIR/myFile
select emaj.emaj_gen_sql_group('myGroup2', 'Before ADD_SEQ', NULL, :'EMAJTESTTMPDIR' || '/myFile',array['myschema2.myseq2']);
ERROR:  _gen_sql_groups: 1 tables/sequences (myschema2.myseq2) did not belong to any of the selected tables groups at Before ADD_SEQ mark time.
CONTEXT:  PL/pgSQL function emaj._gen_sql_groups(text[],boolean,text,text,text,text[]) line 65 at RAISE
PL/pgSQL function emaj.emaj_gen_sql_group(text,text,text,text,text[]) line 14 at RETURN
\! rm $EMAJTESTTMPDIR/*
-- testing mark deletions
begin;
  -- testing delete a single mark set after the sequence addition
  select emaj.emaj_delete_mark_group('myGroup2','After ADD_SEQ');
 emaj_delete_mark_group 
------------------------
                      1
(1 row)

  select 'Should not exist' from emaj.emaj_mark where mark_group = 'myGroup2' and mark_name = 'After ADD_SEQ';
 ?column? 
----------
(0 rows)

  -- testing delete all marks up to a mark set after the alter_group
  select emaj.emaj_delete_before_mark_group('myGroup2','EMAJ_LAST_MARK');
 emaj_delete_before_mark_group 
-------------------------------
                             7
(1 row)

  select * from emaj.emaj_mark where mark_group = 'myGroup2';
 mark_group |      mark_name      | mark_time_id | mark_is_deleted | mark_is_rlbk_protected | mark_comment | mark_log_rows_before_next | mark_logged_rlbk_target_mark 
------------+---------------------+--------------+-----------------+------------------------+--------------+---------------------------+------------------------------
 myGroup2   | Alter to add myseq2 |         6074 | f               | f                      |              |                           | 
(1 row)

  select * from emaj.emaj_sequence where sequ_name = 'myseq2' order by sequ_time_id;
 sequ_schema | sequ_name | sequ_time_id | sequ_last_val | sequ_start_val | sequ_increment |    sequ_max_val     | sequ_min_val | sequ_cache_val | sequ_is_cycled | sequ_is_called 
-------------+-----------+--------------+---------------+----------------+----------------+---------------------+--------------+----------------+----------------+----------------
 myschema2   | myseq2    |         6074 |             2 |              1 |              1 | 9223372036854775807 |            1 |              1 | f              | t
(1 row)

rollback;
begin;
  -- testing the alter_group mark deletion
  select mark_time_id from emaj.emaj_mark where mark_group = 'myGroup2' and mark_name = 'Alter to add myseq2';
 mark_time_id 
--------------
         6074
(1 row)

  select emaj.emaj_delete_mark_group('myGroup2','Alter to add myseq2');
 emaj_delete_mark_group 
------------------------
                      1
(1 row)

  select * from emaj.emaj_sequence where sequ_name = 'myseq2' order by sequ_time_id limit 1;
 sequ_schema | sequ_name | sequ_time_id | sequ_last_val | sequ_start_val | sequ_increment |    sequ_max_val     | sequ_min_val | sequ_cache_val | sequ_is_cycled | sequ_is_called 
-------------+-----------+--------------+---------------+----------------+----------------+---------------------+--------------+----------------+----------------+----------------
 myschema2   | myseq2    |         6074 |             2 |              1 |              1 | 9223372036854775807 |            1 |              1 | f              | t
(1 row)

rollback;
-- test sequences at bounds following a rollback targeting a mark set before an ADD_SEQ
begin;
  delete from emaj.emaj_param where param_key = 'dblink_user_password';
  select mark_time_id from emaj.emaj_mark where mark_group = 'myGroup2' and mark_name = 'Alter to add myseq2';
 mark_time_id 
--------------
         6074
(1 row)

-- beware, the sequence changes generated by the E-Maj rollback will not be rollback by the transaction rollback
  select rlbk_severity, regexp_replace(rlbk_message,E'\\d\\d\\d\\d/\\d\\d\\/\\d\\d\\ \\d\\d\\:\\d\\d:\\d\\d .*?\\)','<timestamp>)','g')
    from emaj.emaj_rollback_group('myGroup2','Before ADD_SEQ',true);
 rlbk_severity |                                               regexp_replace                                               
---------------+------------------------------------------------------------------------------------------------------------
 Notice        | 0 / 6 tables effectively processed.
 Notice        | 3 sequences processed.
 Warning       | The sequence myschema2.myseq2 has only been rolled back to its latest group attachment state (<timestamp>)
(3 rows)

  select * from emaj.emaj_sequence where sequ_schema = 'myschema2' and sequ_name = 'myseq2';
 sequ_schema | sequ_name | sequ_time_id | sequ_last_val | sequ_start_val | sequ_increment |    sequ_max_val     | sequ_min_val | sequ_cache_val | sequ_is_cycled | sequ_is_called 
-------------+-----------+--------------+---------------+----------------+----------------+---------------------+--------------+----------------+----------------+----------------
 myschema2   | myseq2    |         6074 |             2 |              1 |              1 | 9223372036854775807 |            1 |              1 | f              | t
(1 row)

rollback;
-- estimate and then perform a logged rollback to reach a mark prior the ADD_SEQ operation and check
select * from emaj.emaj_estimate_rollback_group('myGroup2','Before ADD_SEQ',true);
 emaj_estimate_rollback_group 
------------------------------
 @ 0.009 secs
(1 row)

select rlbk_severity, regexp_replace(rlbk_message,E'\\d\\d\\d\\d/\\d\\d\\/\\d\\d\\ \\d\\d\\:\\d\\d:\\d\\d .*?\\)','<timestamp>)','g')
  from emaj.emaj_logged_rollback_group('myGroup2','Before ADD_SEQ',true);
 rlbk_severity |                                               regexp_replace                                               
---------------+------------------------------------------------------------------------------------------------------------
 Notice        | 0 / 6 tables effectively processed.
 Notice        | 3 sequences processed.
 Warning       | The sequence myschema2.myseq2 has only been rolled back to its latest group attachment state (<timestamp>)
(3 rows)

select * from myschema2.myseq2;
 last_value | log_cnt | is_called 
------------+---------+-----------
          3 |       0 | f
(1 row)

select * from emaj.emaj_sequence where sequ_name = 'myseq2' order by sequ_time_id;
 sequ_schema | sequ_name | sequ_time_id | sequ_last_val | sequ_start_val | sequ_increment |    sequ_max_val     | sequ_min_val | sequ_cache_val | sequ_is_cycled | sequ_is_called 
-------------+-----------+--------------+---------------+----------------+----------------+---------------------+--------------+----------------+----------------+----------------
 myschema2   | myseq2    |         6074 |             2 |              1 |              1 | 9223372036854775807 |            1 |              1 | f              | t
 myschema2   | myseq2    |         6075 |             3 |              1 |              1 | 9223372036854775807 |            1 |              1 | f              | t
 myschema2   | myseq2    |         6077 |             5 |              1 |              1 | 9223372036854775807 |            1 |              1 | f              | t
 myschema2   | myseq2    |         6078 |             3 |              1 |              1 | 9223372036854775807 |            1 |              1 | f              | f
(4 rows)

-- consolidate this logged rollback
select emaj.emaj_rename_mark_group('myGroup2','EMAJ_LAST_MARK','Logged_Rlbk_End');
 emaj_rename_mark_group 
------------------------
 
(1 row)

select mark_time_id from emaj.emaj_mark where mark_group = 'myGroup2' and mark_name = 'Alter to add myseq2';
 mark_time_id 
--------------
         6074
(1 row)

select * from emaj.emaj_get_consolidable_rollbacks() where cons_group = 'myGroup2'; -- should report 1 row to consolidate
 cons_group | cons_target_rlbk_mark_name | cons_target_rlbk_mark_time_id | cons_end_rlbk_mark_name | cons_end_rlbk_mark_time_id | cons_rows | cons_marks 
------------+----------------------------+-------------------------------+-------------------------+----------------------------+-----------+------------
 myGroup2   | Before ADD_SEQ             |                          6073 | Logged_Rlbk_End         |                       6078 |         0 |          3
(1 row)

select * from emaj.emaj_consolidate_rollback_group('myGroup2', 'Logged_Rlbk_End');
 emaj_consolidate_rollback_group 
---------------------------------
                               3
(1 row)

select * from emaj.emaj_sequence where sequ_schema = 'myschema2' and sequ_name = 'myseq2' order by sequ_schema, sequ_name, sequ_time_id;
 sequ_schema | sequ_name | sequ_time_id | sequ_last_val | sequ_start_val | sequ_increment |    sequ_max_val     | sequ_min_val | sequ_cache_val | sequ_is_cycled | sequ_is_called 
-------------+-----------+--------------+---------------+----------------+----------------+---------------------+--------------+----------------+----------------+----------------
 myschema2   | myseq2    |         6074 |             2 |              1 |              1 | 9223372036854775807 |            1 |              1 | f              | t
 myschema2   | myseq2    |         6078 |             3 |              1 |              1 | 9223372036854775807 |            1 |              1 | f              | f
(2 rows)

-- remove mySeq2 from the group, then re-add it
delete from emaj.emaj_group_def where grpdef_schema = 'myschema2' and grpdef_tblseq = 'myseq2';
select emaj.emaj_alter_group('myGroup2', 'Alter to remove myseq2');
WARNING:  _check_fk_groups: The foreign key "mytbl6_col61_fkey" on the table "myschema2.mytbl6" references the table "myschema2.mytbl7" that is outside the groups (myGroup2).
WARNING:  _check_fk_groups: The table "myschema2.mytbl6" is referenced by the foreign key "mytbl8_col81_fkey" on the table "myschema2.mytbl8" that is outside the groups (myGroup2).
 emaj_alter_group 
------------------
                8
(1 row)

insert into emaj.emaj_group_def values ('myGroup2','myschema2','myseq2');
select emaj.emaj_alter_group('myGroup2', 'Alter to re-add myseq2');
WARNING:  _check_fk_groups: The foreign key "mytbl6_col61_fkey" on the table "myschema2.mytbl6" references the table "myschema2.mytbl7" that is outside the groups (myGroup2).
WARNING:  _check_fk_groups: The table "myschema2.mytbl6" is referenced by the foreign key "mytbl8_col81_fkey" on the table "myschema2.mytbl8" that is outside the groups (myGroup2).
 emaj_alter_group 
------------------
                9
(1 row)

select rel_schema, rel_tblseq, rel_time_range, rel_group, rel_kind
  from emaj.emaj_relation where rel_schema = 'myschema2' and rel_tblseq = 'myseq2' order by rel_time_range;
 rel_schema | rel_tblseq | rel_time_range | rel_group | rel_kind 
------------+------------+----------------+-----------+----------
 myschema2  | myseq2     | [6074,6079)    | myGroup2  | S
 myschema2  | myseq2     | [6080,)        | myGroup2  | S
(2 rows)

-- finaly remove mySeq2 from the group
delete from emaj.emaj_group_def where grpdef_schema = 'myschema2' and grpdef_tblseq = 'myseq2';
select emaj.emaj_alter_group('myGroup2', 'Alter to really remove myseq2');
WARNING:  _check_fk_groups: The foreign key "mytbl6_col61_fkey" on the table "myschema2.mytbl6" references the table "myschema2.mytbl7" that is outside the groups (myGroup2).
WARNING:  _check_fk_groups: The table "myschema2.mytbl6" is referenced by the foreign key "mytbl8_col81_fkey" on the table "myschema2.mytbl8" that is outside the groups (myGroup2).
 emaj_alter_group 
------------------
                8
(1 row)

-- and perform a full rollback (that do not process mySeq2)
select rlbk_severity, regexp_replace(rlbk_message,E'\\d\\d\\d\\d/\\d\\d\\/\\d\\d\\ \\d\\d\\:\\d\\d:\\d\\d .*?\\)','<timestamp>)','g')
  from emaj.emaj_rollback_group('myGroup2', 'ADD_SEQ test',true);
 rlbk_severity |                                         regexp_replace                                         
---------------+------------------------------------------------------------------------------------------------
 Notice        | 0 / 6 tables effectively processed.
 Notice        | 2 sequences processed.
 Warning       | The sequence myschema2.myseq2 has been left unchanged (not in group anymore since <timestamp>)
(3 rows)

select * from myschema2.myseq2;
 last_value | log_cnt | is_called 
------------+---------+-----------
          3 |       0 | f
(1 row)

-- verify that all time range bounds of emaj_relation has its corresponding row into emaj_sequence
select * from emaj.emaj_sequence where sequ_schema = 'myschema2' and sequ_name = 'myseq2' and sequ_time_id in
  (select lower(rel_time_range) from emaj.emaj_relation where rel_schema = 'myschema2' and rel_tblseq = 'myseq2' union 
   select upper(rel_time_range) from emaj.emaj_relation where rel_schema = 'myschema2' and rel_tblseq = 'myseq2')
  order by sequ_time_id;
 sequ_schema | sequ_name | sequ_time_id | sequ_last_val | sequ_start_val | sequ_increment |    sequ_max_val     | sequ_min_val | sequ_cache_val | sequ_is_cycled | sequ_is_called 
-------------+-----------+--------------+---------------+----------------+----------------+---------------------+--------------+----------------+----------------+----------------
 myschema2   | myseq2    |         6074 |             2 |              1 |              1 | 9223372036854775807 |            1 |              1 | f              | t
 myschema2   | myseq2    |         6079 |             3 |              1 |              1 | 9223372036854775807 |            1 |              1 | f              | f
 myschema2   | myseq2    |         6080 |             3 |              1 |              1 | 9223372036854775807 |            1 |              1 | f              | f
 myschema2   | myseq2    |         6081 |             3 |              1 |              1 | 9223372036854775807 |            1 |              1 | f              | f
(4 rows)

-----------------------------
-- remove sequences
-----------------------------
select emaj.emaj_set_mark_group('myGroup1','Mk2b');
 emaj_set_mark_group 
---------------------
                   7
(1 row)

select emaj.emaj_set_mark_group('myGroup1','Before_remove');
 emaj_set_mark_group 
---------------------
                   7
(1 row)

update emaj.emaj_group_def set grpdef_group = 'temporarily_removed' where grpdef_schema = 'myschema1' and grpdef_tblseq = 'myTbl3_col31_seq';
select group_name, group_last_alter_time_id, group_has_waiting_changes, group_nb_table, group_nb_sequence
  from emaj.emaj_group where group_name = 'myGroup1';
 group_name | group_last_alter_time_id | group_has_waiting_changes | group_nb_table | group_nb_sequence 
------------+--------------------------+---------------------------+----------------+-------------------
 myGroup1   |                     6071 | t                         |              5 |                 2
(1 row)

select emaj.emaj_remove_sequence('myschema1', 'myTbl3_col31_seq', 'Sequence_removed');
 emaj_remove_sequence 
----------------------
                    1
(1 row)

select group_name, group_last_alter_time_id, group_has_waiting_changes, group_nb_table, group_nb_sequence
  from emaj.emaj_group where group_name = 'myGroup1';
 group_name | group_last_alter_time_id | group_has_waiting_changes | group_nb_table | group_nb_sequence 
------------+--------------------------+---------------------------+----------------+-------------------
 myGroup1   |                     6085 | t                         |              5 |                 1
(1 row)

select rel_schema, rel_tblseq, rel_time_range, rel_group, rel_kind
  from emaj.emaj_relation where rel_schema = 'myschema1' and rel_tblseq = 'myTbl3_col31_seq' order by rel_time_range;
 rel_schema |    rel_tblseq    | rel_time_range | rel_group | rel_kind 
------------+------------------+----------------+-----------+----------
 myschema1  | myTbl3_col31_seq | [6042,6085)    | myGroup1  | S
(1 row)

select * from emaj.emaj_verify_all();
                                                                                      emaj_verify_all                                                                                       
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Warning: In the group "myGroup2", the foreign key "mytbl6_col61_fkey" on the table "myschema2"."mytbl6" references the table "myschema2"."mytbl7" that does not belong to any group.
 Warning: In the group "myGroup2", the table "myschema2"."mytbl6" is referenced by the foreign key "mytbl8_col81_fkey" of the table "myschema2"."mytbl8" that does not belong to any group.
 No error detected
(3 rows)

--testing snap and sql generation
select emaj.emaj_snap_group('myGroup1',:'EMAJTESTTMPDIR','');
 emaj_snap_group 
-----------------
               6
(1 row)

\! ls $EMAJTESTTMPDIR
_INFO
myschema1_myTbl3.snap
myschema1_mytbl1.snap
myschema1_mytbl2.snap
myschema1_mytbl2b.snap
myschema1_mytbl2b_col20_seq.snap
myschema1_mytbl4.snap
\! rm -R $EMAJTESTTMPDIR/*
select emaj.emaj_snap_log_group('myGroup1','Mk1',NULL,:'EMAJTESTTMPDIR',NULL);
 emaj_snap_log_group 
---------------------
                   8
(1 row)

-- sequences at begin bound
\! cat $EMAJTESTTMPDIR/myGroup1_sequences_at_Mk1
myschema1	myTbl3_col31_seq	6065	11	1	1	2147483647	1	1	f	f
myschema1	mytbl2b_col20_seq	6065	3	1	1	2147483647	1	1	f	f
-- sequences at end bound
\! find $EMAJTESTTMPDIR -regex '.*/myGroup1_sequences_at_[0123456789].*' | xargs cat
myschema1	mytbl2b_col20_seq	6086	3	1	1	2147483647	1	1	f	f
select emaj.emaj_set_mark_group('myGroup1','After_remove');
 emaj_set_mark_group 
---------------------
                   6
(1 row)

-- testing sql script generation
select emaj.emaj_gen_sql_group('myGroup1', NULL, 'EMAJ_LAST_MARK', :'EMAJTESTTMPDIR' || '/script.sql',array['myschema1.myTbl3_col31_seq']);
NOTICE:  table "emaj_temp_script" does not exist, skipping
 emaj_gen_sql_group 
--------------------
                  0
(1 row)

\! grep -v 'generated by E-Maj at' $EMAJTESTTMPDIR/script.sql
--    for tables group(s): myGroup1
--    processing logs between mark Mk1 and mark After_remove
--    only for the following tables/sequences: myschema1.myTbl3_col31_seq
SET standard_conforming_strings = OFF;
SET escape_string_warning = OFF;
SET datestyle = 'ISO, YMD';
BEGIN TRANSACTION;
COMMIT;
RESET standard_conforming_strings;
RESET escape_string_warning;
RESET datestyle;
\! rm $EMAJTESTTMPDIR/*
begin;
  -- testing the alter_group mark deletion
  select emaj.emaj_delete_mark_group('myGroup1','Sequence_removed');
 emaj_delete_mark_group 
------------------------
                      1
(1 row)

  select rel_schema, rel_tblseq, rel_time_range, rel_group, rel_kind
    from emaj.emaj_relation where rel_schema = 'myschema1' and rel_tblseq = 'myTbl3_col31_seq' order by rel_time_range;
 rel_schema |    rel_tblseq    | rel_time_range | rel_group | rel_kind 
------------+------------------+----------------+-----------+----------
 myschema1  | myTbl3_col31_seq | [6042,6085)    | myGroup1  | S
(1 row)

  select mark_group, regexp_replace(mark_name,E'\\d\\d\.\\d\\d\\.\\d\\d\\.\\d\\d\\d\\d','%','g'), mark_time_id,
    mark_is_deleted, mark_is_rlbk_protected, mark_comment, mark_log_rows_before_next, mark_logged_rlbk_target_mark
    from emaj.emaj_mark where mark_group = 'myGroup1' order by mark_time_id desc limit 2;
 mark_group | regexp_replace | mark_time_id | mark_is_deleted | mark_is_rlbk_protected | mark_comment | mark_log_rows_before_next | mark_logged_rlbk_target_mark 
------------+----------------+--------------+-----------------+------------------------+--------------+---------------------------+------------------------------
 myGroup1   | After_remove   |         6087 | f               | f                      |              |                           | 
 myGroup1   | Before_remove  |         6084 | f               | f                      |              |                         0 | 
(2 rows)

rollback;
begin;
  -- testing delete a single mark set before the sequence removal
  select emaj.emaj_delete_mark_group('myGroup1','Before_remove');
 emaj_delete_mark_group 
------------------------
                      1
(1 row)

  select * from emaj.emaj_sequence where sequ_schema = 'myschema1'
    and sequ_time_id not in (select distinct mark_time_id from emaj.emaj_mark where mark_group = 'myGroup1');
 sequ_schema | sequ_name | sequ_time_id | sequ_last_val | sequ_start_val | sequ_increment | sequ_max_val | sequ_min_val | sequ_cache_val | sequ_is_cycled | sequ_is_called 
-------------+-----------+--------------+---------------+----------------+----------------+--------------+--------------+----------------+----------------+----------------
(0 rows)

  -- testing rollback
  select rlbk_severity, regexp_replace(rlbk_message,E'\\d\\d\\d\\d/\\d\\d\\/\\d\\d\\ \\d\\d\\:\\d\\d:\\d\\d .*?\\)','<timestamp>)','g')
    from emaj.emaj_logged_rollback_group('myGroup1','Mk2b',true) order by 1,2;
 rlbk_severity |                                               regexp_replace                                               
---------------+------------------------------------------------------------------------------------------------------------
 Notice        | 0 / 5 tables effectively processed.
 Notice        | 1 sequences processed.
 Warning       | The sequence myschema1."myTbl3_col31_seq" has been left unchanged (not in group anymore since <timestamp>)
(3 rows)

  select * from emaj.emaj_rollback_group('myGroup1','Mk2b',true) order by 1,2;
 rlbk_severity |            rlbk_message             
---------------+-------------------------------------
 Notice        | 0 / 5 tables effectively processed.
 Notice        | 1 sequences processed.
(2 rows)

  savepoint svp1;
  -- testing group's reset
    select emaj.emaj_stop_group('myGroup1');
 emaj_stop_group 
-----------------
               6
(1 row)

    select rel_schema, rel_tblseq, rel_time_range, rel_group, rel_kind
      from emaj.emaj_relation where rel_group = 'myGroup1' and not upper_inf(rel_time_range) order by 1,2,3;
 rel_schema |    rel_tblseq    | rel_time_range | rel_group | rel_kind 
------------+------------------+----------------+-----------+----------
 myschema1  | myTbl3_col31_seq | [6042,6085)    | myGroup1  | S
(1 row)

    select emaj.emaj_reset_group('myGroup1');
 emaj_reset_group 
------------------
                6
(1 row)

    select count(*) from emaj.emaj_relation where rel_group = 'myGroup1' and not upper_inf(rel_time_range) order by 1,2,3;
ERROR:  ORDER BY position 2 is not in select list
LINE 1: ...'myGroup1' and not upper_inf(rel_time_range) order by 1,2,3;
                                                                   ^
  rollback to svp1;
  -- testing marks deletion
  select emaj.emaj_set_mark_group('myGroup1','Mk2d');
 emaj_set_mark_group 
---------------------
                   6
(1 row)

  select emaj.emaj_delete_before_mark_group('myGroup1','Mk2b');
 emaj_delete_before_mark_group 
-------------------------------
                             6
(1 row)

  select rel_schema, rel_tblseq, rel_time_range, rel_group, rel_kind
    from emaj.emaj_relation where rel_group = 'myGroup1' and not upper_inf(rel_time_range) order by 1,2,3;
 rel_schema |    rel_tblseq    | rel_time_range | rel_group | rel_kind 
------------+------------------+----------------+-----------+----------
 myschema1  | myTbl3_col31_seq | [6042,6085)    | myGroup1  | S
(1 row)

  select emaj.emaj_delete_before_mark_group('myGroup1','Mk2d');
 emaj_delete_before_mark_group 
-------------------------------
                             1
(1 row)

  select count(*) from emaj.emaj_relation where rel_group = 'myGroup1' and not upper_inf(rel_time_range) order by 1,2,3;
ERROR:  ORDER BY position 2 is not in select list
LINE 1: ...'myGroup1' and not upper_inf(rel_time_range) order by 1,2,3;
                                                                   ^
  -- testing the sequence drop
  drop sequence mySchema1."myTbl3_col31_seq" cascade;
ERROR:  current transaction is aborted, commands ignored until end of transaction block
rollback;
-- re-add the removed sequence
update emaj.emaj_group_def set grpdef_group = 'myGroup1' where grpdef_group = 'temporarily_removed';
select emaj.emaj_alter_group('myGroup1', 'sequence re-added to myGroup1');
 emaj_alter_group 
------------------
                7
(1 row)

select emaj.emaj_cleanup_rollback_state();
 emaj_cleanup_rollback_state 
-----------------------------
                           0
(1 row)

-----------------------------
-- add tables
-----------------------------
-- add myschema2.mytbl7 to the myGroup2 group
-- first perform updates and set marks
select emaj.emaj_set_mark_group('myGroup2','ADD_TBL test');
 emaj_set_mark_group 
---------------------
                   8
(1 row)

insert into myschema2.mytbl7 values (1),(2),(3);
select emaj.emaj_set_mark_group('myGroup2','Before ADD_TBL');
 emaj_set_mark_group 
---------------------
                   8
(1 row)

delete from myschema2.mytbl7 where col71 = 3;
-- then add the table to the group
insert into emaj.emaj_group_def values ('myGroup2','myschema2','mytbl7');
--select emaj.emaj_alter_group('myGroup2', 'Alter to add mytbl7');
select emaj.emaj_assign_table('myschema2', 'mytbl7', 'myGroup2', null, 'Alter to add mytbl7');
NOTICE:  table "mytbl7_log" does not exist, skipping
NOTICE:  trigger "emaj_log_trg" for relation "myschema2.mytbl7" does not exist, skipping
NOTICE:  trigger "emaj_trunc_trg" for relation "myschema2.mytbl7" does not exist, skipping
WARNING:  _check_fk_groups: The table "myschema2.mytbl6" is referenced by the foreign key "mytbl8_col81_fkey" on the table "myschema2.mytbl8" that is outside the groups (myGroup2).
 emaj_assign_table 
-------------------
                 1
(1 row)

select group_name, group_last_alter_time_id, group_has_waiting_changes, group_nb_table, group_nb_sequence
  from emaj.emaj_group where group_name = 'myGroup2';
 group_name | group_last_alter_time_id | group_has_waiting_changes | group_nb_table | group_nb_sequence 
------------+--------------------------+---------------------------+----------------+-------------------
 myGroup2   |                     6096 | t                         |              7 |                 2
(1 row)

select rel_schema, rel_tblseq, rel_time_range, rel_group, rel_kind, rel_log_schema, rel_log_table
  from emaj.emaj_relation where rel_schema = 'myschema2' and rel_tblseq = 'mytbl7' order by rel_time_range;
 rel_schema | rel_tblseq | rel_time_range | rel_group | rel_kind | rel_log_schema | rel_log_table 
------------+------------+----------------+-----------+----------+----------------+---------------
 myschema2  | mytbl7     | [6096,)        | myGroup2  | r        | emaj_myschema2 | mytbl7_log
(1 row)

-- perform some other updates
insert into myschema2.mytbl7 values (4),(5);
-- remove the alter group mark just after the alter operation and then get statistics and set a mark
begin;
  select emaj.emaj_delete_mark_group('myGroup2','Alter to add mytbl7');
 emaj_delete_mark_group 
------------------------
                      1
(1 row)

  select stat_group, stat_schema, stat_table, stat_first_mark, stat_last_mark, stat_rows 
    from emaj.emaj_log_stat_group('myGroup2','Before ADD_TBL',NULL);
 stat_group | stat_schema | stat_table | stat_first_mark | stat_last_mark | stat_rows 
------------+-------------+------------+-----------------+----------------+-----------
 myGroup2   | myschema2   | myTbl3     | Before ADD_TBL  |                |         0
 myGroup2   | myschema2   | mytbl1     | Before ADD_TBL  |                |         0
 myGroup2   | myschema2   | mytbl2     | Before ADD_TBL  |                |         0
 myGroup2   | myschema2   | mytbl4     | Before ADD_TBL  |                |         0
 myGroup2   | myschema2   | mytbl5     | Before ADD_TBL  |                |         0
 myGroup2   | myschema2   | mytbl6     | Before ADD_TBL  |                |         0
 myGroup2   | myschema2   | mytbl7     | [deleted mark]  |                |         2
(7 rows)

  select emaj.emaj_set_mark_group('myGroup2','Just after ADD_TBL');
 emaj_set_mark_group 
---------------------
                   9
(1 row)

  select mark_log_rows_before_next from emaj.emaj_mark where mark_name = 'Before ADD_TBL';
 mark_log_rows_before_next 
---------------------------
                         2
(1 row)

rollback;
-- set marks and look at statistics
select emaj.emaj_set_mark_group('myGroup2','Just after ADD_TBL');
 emaj_set_mark_group 
---------------------
                   9
(1 row)

update myschema2.mytbl7 set col71 = 6 where col71 = 2;
select col71, emaj_verb, emaj_tuple from emaj_myschema2.mytbl7_log order by emaj_gid;
 col71 | emaj_verb | emaj_tuple 
-------+-----------+------------
     4 | INS       | NEW
     5 | INS       | NEW
     2 | UPD       | OLD
     6 | UPD       | NEW
(4 rows)

select stat_group, stat_schema, stat_table, stat_first_mark, stat_last_mark, stat_rows
  from emaj.emaj_log_stat_group('myGroup2','ADD_TBL test',NULL);
 stat_group | stat_schema | stat_table |   stat_first_mark   | stat_last_mark | stat_rows 
------------+-------------+------------+---------------------+----------------+-----------
 myGroup2   | myschema2   | myTbl3     | ADD_TBL test        |                |         0
 myGroup2   | myschema2   | mytbl1     | ADD_TBL test        |                |         0
 myGroup2   | myschema2   | mytbl2     | ADD_TBL test        |                |         0
 myGroup2   | myschema2   | mytbl4     | ADD_TBL test        |                |         0
 myGroup2   | myschema2   | mytbl5     | ADD_TBL test        |                |         0
 myGroup2   | myschema2   | mytbl6     | ADD_TBL test        |                |         0
 myGroup2   | myschema2   | mytbl7     | Alter to add mytbl7 |                |         3
(7 rows)

select emaj.emaj_set_mark_group('myGroup2','After ADD_TBL');
 emaj_set_mark_group 
---------------------
                   9
(1 row)

select stat_group, stat_schema, stat_table, stat_first_mark, stat_last_mark, stat_role, stat_verb, stat_rows
  from emaj.emaj_detailed_log_stat_group('myGroup2','ADD_TBL test','After ADD_TBL');
 stat_group | stat_schema | stat_table |   stat_first_mark   | stat_last_mark | stat_role | stat_verb | stat_rows 
------------+-------------+------------+---------------------+----------------+-----------+-----------+-----------
 myGroup2   | myschema2   | mytbl7     | Alter to add mytbl7 | After ADD_TBL  | postgres  | INSERT    |         2
 myGroup2   | myschema2   | mytbl7     | Alter to add mytbl7 | After ADD_TBL  | postgres  | UPDATE    |         1
(2 rows)

--testing snap and sql generation
select emaj.emaj_snap_group('myGroup2',:'EMAJTESTTMPDIR','');
 emaj_snap_group 
-----------------
               9
(1 row)

\! ls $EMAJTESTTMPDIR
_INFO
myschema2_myTbl3.snap
myschema2_myTbl3_col31_seq.snap
myschema2_myseq1.snap
myschema2_mytbl1.snap
myschema2_mytbl2.snap
myschema2_mytbl4.snap
myschema2_mytbl5.snap
myschema2_mytbl6.snap
myschema2_mytbl7.snap
\! rm $EMAJTESTTMPDIR/*
select emaj.emaj_snap_log_group('myGroup2',NULL,'After ADD_TBL',:'EMAJTESTTMPDIR',NULL);
 emaj_snap_log_group 
---------------------
                  10
(1 row)

\! ls $EMAJTESTTMPDIR/myschema2*
/tmp/emaj_11/alter_logging/myschema2_myTbl3_log.snap
/tmp/emaj_11/alter_logging/myschema2_mytbl1_log.snap
/tmp/emaj_11/alter_logging/myschema2_mytbl2_log.snap
/tmp/emaj_11/alter_logging/myschema2_mytbl4_log.snap
/tmp/emaj_11/alter_logging/myschema2_mytbl5_log.snap
/tmp/emaj_11/alter_logging/myschema2_mytbl6_log.snap
/tmp/emaj_11/alter_logging/myschema2_mytbl7_log.snap
select emaj.emaj_gen_sql_group('myGroup2', 'Before ADD_TBL', NULL, :'EMAJTESTTMPDIR' || '/script.sql',array['myschema2.mytbl7']);
ERROR:  _gen_sql_groups: 1 tables/sequences (myschema2.mytbl7) did not belong to any of the selected tables groups at Before ADD_TBL mark time.
CONTEXT:  PL/pgSQL function emaj._gen_sql_groups(text[],boolean,text,text,text,text[]) line 65 at RAISE
PL/pgSQL function emaj.emaj_gen_sql_group(text,text,text,text,text[]) line 14 at RETURN
\! rm $EMAJTESTTMPDIR/*
-- testing mark deletions
begin;
  -- testing delete a single mark set after the table addition
  select emaj.emaj_delete_mark_group('myGroup2','After ADD_TBL');
 emaj_delete_mark_group 
------------------------
                      1
(1 row)

  select 'Should not exist' from emaj.emaj_mark where mark_group = 'myGroup2' and mark_name = 'After ADD_TBL';
 ?column? 
----------
(0 rows)

  -- testing delete all marks up to a mark set after the alter_group
  select emaj.emaj_delete_before_mark_group('myGroup2','EMAJ_LAST_MARK');
 emaj_delete_before_mark_group 
-------------------------------
                             9
(1 row)

  select * from emaj.emaj_mark where mark_group = 'myGroup2';
 mark_group |     mark_name      | mark_time_id | mark_is_deleted | mark_is_rlbk_protected | mark_comment | mark_log_rows_before_next | mark_logged_rlbk_target_mark 
------------+--------------------+--------------+-----------------+------------------------+--------------+---------------------------+------------------------------
 myGroup2   | Just after ADD_TBL |         6098 | f               | f                      |              |                           | 
(1 row)

  select tbl_schema, tbl_name, tbl_time_id, tbl_log_seq_last_val from emaj.emaj_table
    where tbl_name = 'mytbl7' order by tbl_time_id;
 tbl_schema | tbl_name | tbl_time_id | tbl_log_seq_last_val 
------------+----------+-------------+----------------------
 myschema2  | mytbl7   |        6096 |                    0
 myschema2  | mytbl7   |        6098 |                    2
(2 rows)

rollback;
begin;
  -- testing the alter_group mark deletion
  select mark_time_id from emaj.emaj_mark where mark_group = 'myGroup2' and mark_name = 'Alter to add mytbl7';
 mark_time_id 
--------------
         6096
(1 row)

  select emaj.emaj_delete_mark_group('myGroup2','Alter to add mytbl7');
 emaj_delete_mark_group 
------------------------
                      1
(1 row)

  select tbl_schema, tbl_name, tbl_time_id, tbl_log_seq_last_val from emaj.emaj_table
    where tbl_name = 'mytbl7' order by tbl_time_id limit 1;
 tbl_schema | tbl_name | tbl_time_id | tbl_log_seq_last_val 
------------+----------+-------------+----------------------
 myschema2  | mytbl7   |        6096 |                    0
(1 row)

rollback;
-- test sequences and holes at bounds following a rollback targeting a mark set before an ADD_TBL
begin;
  delete from emaj.emaj_param where param_key = 'dblink_user_password';
  select mark_time_id from emaj.emaj_mark where mark_group = 'myGroup2' and mark_name = 'Alter to add mytbl7';
 mark_time_id 
--------------
         6096
(1 row)

  select rlbk_severity, regexp_replace(rlbk_message,E'\\d\\d\\d\\d/\\d\\d\\/\\d\\d\\ \\d\\d\\:\\d\\d:\\d\\d .*?\\)','<timestamp>)','g')
    from emaj.emaj_rollback_group('myGroup2','Before ADD_TBL',true);
 rlbk_severity |                                          regexp_replace                                           
---------------+---------------------------------------------------------------------------------------------------
 Notice        | 1 / 7 tables effectively processed.
 Notice        | 2 sequences processed.
 Warning       | The table myschema2.mytbl7 has only been rolled back to its latest group attachment (<timestamp>)
(3 rows)

  select tbl_schema, tbl_name, tbl_time_id, tbl_log_seq_last_val from emaj.emaj_table
    where tbl_schema = 'myschema2' and tbl_name = 'mytbl7' order by tbl_time_id;
 tbl_schema | tbl_name | tbl_time_id | tbl_log_seq_last_val 
------------+----------+-------------+----------------------
 myschema2  | mytbl7   |        6096 |                    0
(1 row)

  select * from emaj.emaj_seq_hole where sqhl_schema = 'myschema2' and sqhl_table = 'mytbl7';
 sqhl_schema | sqhl_table | sqhl_begin_time_id | sqhl_end_time_id | sqhl_hole_size 
-------------+------------+--------------------+------------------+----------------
 myschema2   | mytbl7     |               6096 |             6100 |              3
(1 row)

  select stat_group, stat_schema, stat_table, stat_first_mark, stat_first_mark_gid, stat_last_mark, stat_last_mark_gid, stat_rows 
    from emaj._log_stat_groups('{"myGroup2"}',false,'ADD_TBL test',NULL);
 stat_group | stat_schema | stat_table | stat_first_mark | stat_first_mark_gid | stat_last_mark | stat_last_mark_gid | stat_rows 
------------+-------------+------------+-----------------+---------------------+----------------+--------------------+-----------
 myGroup2   | myschema2   | myTbl3     | ADD_TBL test    |               60001 |                |                    |         0
 myGroup2   | myschema2   | mytbl1     | ADD_TBL test    |               60001 |                |                    |         0
 myGroup2   | myschema2   | mytbl2     | ADD_TBL test    |               60001 |                |                    |         0
 myGroup2   | myschema2   | mytbl4     | ADD_TBL test    |               60001 |                |                    |         0
 myGroup2   | myschema2   | mytbl5     | ADD_TBL test    |               60001 |                |                    |         0
 myGroup2   | myschema2   | mytbl6     | ADD_TBL test    |               60001 |                |                    |         0
 myGroup2   | myschema2   | mytbl7     | [deleted mark]  |               60001 |                |                    |         0
(7 rows)

rollback;
-- estimate and then perform a logged rollback to reach a mark prior the ADD_TBL operation and check
select * from emaj.emaj_estimate_rollback_group('myGroup2','Before ADD_TBL',true);
 emaj_estimate_rollback_group 
------------------------------
 @ 0.028815 secs
(1 row)

select rlbk_severity, regexp_replace(rlbk_message,E'\\d\\d\\d\\d/\\d\\d\\/\\d\\d\\ \\d\\d\\:\\d\\d:\\d\\d .*?\\)','<timestamp>)','g')
  from emaj.emaj_logged_rollback_group('myGroup2','Before ADD_TBL',true);
 rlbk_severity |                                          regexp_replace                                           
---------------+---------------------------------------------------------------------------------------------------
 Notice        | 1 / 7 tables effectively processed.
 Notice        | 2 sequences processed.
 Warning       | The table myschema2.mytbl7 has only been rolled back to its latest group attachment (<timestamp>)
(3 rows)

select col71, emaj_verb, emaj_tuple from emaj_myschema2.mytbl7_log order by emaj_gid;
 col71 | emaj_verb | emaj_tuple 
-------+-----------+------------
     4 | INS       | NEW
     5 | INS       | NEW
     2 | UPD       | OLD
     6 | UPD       | NEW
     4 | DEL       | OLD
     5 | DEL       | OLD
     6 | DEL       | OLD
     2 | INS       | NEW
(8 rows)

select * from myschema2.mytbl7 order by col71;
 col71 
-------
     1
     2
(2 rows)

-- consolidate this logged rollback
select emaj.emaj_rename_mark_group('myGroup2','EMAJ_LAST_MARK','Logged_Rlbk_End');
 emaj_rename_mark_group 
------------------------
 
(1 row)

select mark_time_id from emaj.emaj_mark where mark_group = 'myGroup2' and mark_name = 'Alter to add mytbl7';
 mark_time_id 
--------------
         6096
(1 row)

select * from emaj.emaj_get_consolidable_rollbacks() where cons_group = 'myGroup2'; -- should report 1 row to consolidate
 cons_group | cons_target_rlbk_mark_name | cons_target_rlbk_mark_time_id | cons_end_rlbk_mark_name | cons_end_rlbk_mark_time_id | cons_rows | cons_marks 
------------+----------------------------+-------------------------------+-------------------------+----------------------------+-----------+------------
 myGroup2   | Before ADD_TBL             |                          6095 | Logged_Rlbk_End         |                       6102 |         7 |          4
(1 row)

select * from emaj.emaj_consolidate_rollback_group('myGroup2', 'Logged_Rlbk_End');
 emaj_consolidate_rollback_group 
---------------------------------
                               3
(1 row)

select tbl_schema, tbl_name, tbl_time_id, tbl_log_seq_last_val from emaj.emaj_table
  where tbl_schema = 'myschema2' and tbl_name = 'mytbl7' order by tbl_time_id;
 tbl_schema | tbl_name | tbl_time_id | tbl_log_seq_last_val 
------------+----------+-------------+----------------------
 myschema2  | mytbl7   |        6096 |                    0
 myschema2  | mytbl7   |        6102 |                    7
(2 rows)

-- perform some other updates
insert into myschema2.myTbl7 values (7),(8),(9);
-- verify the group and detect the lack of the new log table
begin;
  select emaj.emaj_disable_protection_by_event_triggers();
 emaj_disable_protection_by_event_triggers 
-------------------------------------------
                                         3
(1 row)

  drop table emaj_myschema2.mytbl7_log;
  select * from emaj.emaj_verify_all();
                                                                                      emaj_verify_all                                                                                       
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Error: In the group "myGroup2", the log table "emaj_myschema2"."mytbl7_log" is not found.
 Warning: In the group "myGroup2", the table "myschema2"."mytbl6" is referenced by the foreign key "mytbl8_col81_fkey" of the table "myschema2"."mytbl8" that does not belong to any group.
 Warning: Some E-Maj event triggers exist but are disabled. You may enable them using the emaj_enable_protection_by_event_triggers() function.
(3 rows)

  select emaj.emaj_enable_protection_by_event_triggers();
 emaj_enable_protection_by_event_triggers 
------------------------------------------
                                        3
(1 row)

rollback;
-- remove myTbl7 from the group, then re-add it
delete from emaj.emaj_group_def where grpdef_schema = 'myschema2' and grpdef_tblseq = 'mytbl7';
select emaj.emaj_alter_group('myGroup2', 'Alter to remove mytbl7');
WARNING:  _check_fk_groups: The foreign key "mytbl6_col61_fkey" on the table "myschema2.mytbl6" references the table "myschema2.mytbl7" that is outside the groups (myGroup2).
WARNING:  _check_fk_groups: The table "myschema2.mytbl6" is referenced by the foreign key "mytbl8_col81_fkey" on the table "myschema2.mytbl8" that is outside the groups (myGroup2).
 emaj_alter_group 
------------------
                8
(1 row)

insert into emaj.emaj_group_def values ('myGroup2','myschema2','mytbl7');
select emaj.emaj_alter_group('myGroup2', 'Alter to re-add mytbl7');
NOTICE:  table "mytbl7_log" does not exist, skipping
NOTICE:  trigger "emaj_log_trg" for relation "myschema2.mytbl7" does not exist, skipping
NOTICE:  trigger "emaj_trunc_trg" for relation "myschema2.mytbl7" does not exist, skipping
WARNING:  _check_fk_groups: The table "myschema2.mytbl6" is referenced by the foreign key "mytbl8_col81_fkey" on the table "myschema2.mytbl8" that is outside the groups (myGroup2).
 emaj_alter_group 
------------------
                9
(1 row)

select rel_schema, rel_tblseq, rel_time_range, rel_group, rel_kind, rel_log_schema, rel_log_table, rel_log_seq_last_value
  from emaj.emaj_relation where rel_schema = 'myschema2' and rel_tblseq = 'mytbl7' order by rel_time_range;
 rel_schema | rel_tblseq | rel_time_range | rel_group | rel_kind | rel_log_schema | rel_log_table | rel_log_seq_last_value 
------------+------------+----------------+-----------+----------+----------------+---------------+------------------------
 myschema2  | mytbl7     | [6096,6103)    | myGroup2  | r        | emaj_myschema2 | mytbl7_log_1  |                     10
 myschema2  | mytbl7     | [6104,)        | myGroup2  | r        | emaj_myschema2 | mytbl7_log    |                       
(2 rows)

delete from myschema2.myTbl7 where col71 = 9;
-- get statistics, using directly internal functions as done by web clients
select stat_group, stat_schema, stat_table, stat_log_schema, stat_log_table,
       stat_first_mark, stat_first_mark_gid, stat_last_mark, stat_last_mark_gid, stat_rows 
  from emaj._log_stat_groups('{"myGroup2"}',false,'ADD_TBL test',NULL);
 stat_group | stat_schema | stat_table | stat_log_schema | stat_log_table |    stat_first_mark     | stat_first_mark_gid |     stat_last_mark     | stat_last_mark_gid | stat_rows 
------------+-------------+------------+-----------------+----------------+------------------------+---------------------+------------------------+--------------------+-----------
 myGroup2   | myschema2   | myTbl3     | emaj_myschema2  | myTbl3_log     | ADD_TBL test           |               60001 |                        |                    |         0
 myGroup2   | myschema2   | mytbl1     | emaj_myschema2  | mytbl1_log     | ADD_TBL test           |               60001 |                        |                    |         0
 myGroup2   | myschema2   | mytbl2     | emaj_myschema2  | mytbl2_log     | ADD_TBL test           |               60001 |                        |                    |         0
 myGroup2   | myschema2   | mytbl4     | emaj_myschema2  | mytbl4_log     | ADD_TBL test           |               60001 |                        |                    |         0
 myGroup2   | myschema2   | mytbl5     | emaj_myschema2  | mytbl5_log     | ADD_TBL test           |               60001 |                        |                    |         0
 myGroup2   | myschema2   | mytbl6     | emaj_myschema2  | mytbl6_log     | ADD_TBL test           |               60001 |                        |                    |         0
 myGroup2   | myschema2   | mytbl7     | emaj_myschema2  | mytbl7_log_1   | [deleted mark]         |               60001 | Alter to remove mytbl7 |              60011 |         3
 myGroup2   | myschema2   | mytbl7     | emaj_myschema2  | mytbl7_log     | Alter to re-add mytbl7 |               60011 |                        |                    |         1
(8 rows)

select stat_group, stat_schema, stat_table, stat_log_schema, stat_log_table,
       stat_first_mark, stat_first_mark_gid, stat_last_mark, stat_last_mark_gid, stat_role, stat_verb, stat_rows 
  from emaj._detailed_log_stat_groups('{"myGroup2"}',false,'ADD_TBL test',NULL);
 stat_group | stat_schema | stat_table | stat_log_schema | stat_log_table |    stat_first_mark     | stat_first_mark_gid |     stat_last_mark     | stat_last_mark_gid | stat_role | stat_verb | stat_rows 
------------+-------------+------------+-----------------+----------------+------------------------+---------------------+------------------------+--------------------+-----------+-----------+-----------
 myGroup2   | myschema2   | mytbl7     | emaj_myschema2  | mytbl7_log_1   | [deleted mark]         |               60001 | Alter to remove mytbl7 |              60011 | postgres  | INSERT    |         3
 myGroup2   | myschema2   | mytbl7     | emaj_myschema2  | mytbl7_log     | Alter to re-add mytbl7 |               60011 |                        |                    | postgres  | DELETE    |         1
(2 rows)

-- snap the logs
select emaj.emaj_snap_log_group('myGroup2',NULL,NULL,:'EMAJTESTTMPDIR',NULL);
 emaj_snap_log_group 
---------------------
                  11
(1 row)

\! ls $EMAJTESTTMPDIR/myschema2_mytbl7_log*
/tmp/emaj_11/alter_logging/myschema2_mytbl7_log.snap
/tmp/emaj_11/alter_logging/myschema2_mytbl7_log_1.snap
\! rm $EMAJTESTTMPDIR/*
-- and finaly remove myTbl7 from the group
delete from emaj.emaj_group_def where grpdef_schema = 'myschema2' and grpdef_tblseq = 'mytbl7';
select emaj.emaj_alter_group('myGroup2', 'Alter to really remove mytbl7');
WARNING:  _check_fk_groups: The foreign key "mytbl6_col61_fkey" on the table "myschema2.mytbl6" references the table "myschema2.mytbl7" that is outside the groups (myGroup2).
WARNING:  _check_fk_groups: The table "myschema2.mytbl6" is referenced by the foreign key "mytbl8_col81_fkey" on the table "myschema2.mytbl8" that is outside the groups (myGroup2).
 emaj_alter_group 
------------------
                8
(1 row)

-- and perform a full rollback (that do not process myTbl7)
select rlbk_severity, regexp_replace(rlbk_message,E'\\d\\d\\d\\d/\\d\\d\\/\\d\\d\\ \\d\\d\\:\\d\\d:\\d\\d .*?\\)','<timestamp>)','g')
  from emaj.emaj_rollback_group('myGroup2', 'ADD_TBL test',true);
 rlbk_severity |                                       regexp_replace                                        
---------------+---------------------------------------------------------------------------------------------
 Notice        | 0 / 6 tables effectively processed.
 Notice        | 2 sequences processed.
 Warning       | The table myschema2.mytbl7 has been left unchanged (not in group anymore since <timestamp>)
(3 rows)

select * from myschema2.mytbl7 order by col71;
 col71 
-------
     1
     2
     7
     8
(4 rows)

-----------------------------
-- remove tables
-----------------------------
insert into myschema1."myTbl3" (col33) values (1.);
select emaj.emaj_set_mark_group('myGroup1','Mk2c');
 emaj_set_mark_group 
---------------------
                   7
(1 row)

insert into myschema1."myTbl3" (col33) values (1.);
update emaj.emaj_group_def set grpdef_group = 'temporarily_removed'
  where grpdef_group = 'myGroup1' and grpdef_schema = 'myschema1' and (grpdef_tblseq = 'myTbl3' or grpdef_tblseq = 'mytbl2b');
update emaj.emaj_group set group_has_waiting_changes = false where group_name = 'myGroup1';
select emaj._adjust_group_properties();
 _adjust_group_properties 
--------------------------
                        1
(1 row)

select group_has_waiting_changes from emaj.emaj_group where group_name = 'myGroup1';
 group_has_waiting_changes 
---------------------------
 t
(1 row)

select emaj.emaj_remove_tables('myschema1', '^(myTbl3|mytbl2b)$', null, '2 tables removed from myGroup1');
 emaj_remove_tables 
--------------------
                  2
(1 row)

-- sync emaj_group_def and try to alter the group: there should not be any change
select emaj.emaj_sync_def_group('myGroup1');
 emaj_sync_def_group 
---------------------
                   5
(1 row)

select emaj.emaj_alter_group('myGroup1', 'useless ALTER');
 emaj_alter_group 
------------------
                5
(1 row)

select group_name, group_last_alter_time_id, group_has_waiting_changes, group_nb_table, group_nb_sequence
  from emaj.emaj_group where group_name = 'myGroup1';
 group_name | group_last_alter_time_id | group_has_waiting_changes | group_nb_table | group_nb_sequence 
------------+--------------------------+---------------------------+----------------+-------------------
 myGroup1   |                     6110 | f                         |              3 |                 2
(1 row)

select rel_schema, rel_tblseq, rel_time_range, rel_group, rel_kind, rel_log_schema, rel_log_table, rel_log_seq_last_value
  from emaj.emaj_relation where rel_schema = 'myschema1' and (rel_tblseq = 'myTbl3' or rel_tblseq = 'mytbl2b') order by 1,2,3;
 rel_schema | rel_tblseq | rel_time_range | rel_group | rel_kind | rel_log_schema | rel_log_table | rel_log_seq_last_value 
------------+------------+----------------+-----------+----------+----------------+---------------+------------------------
 myschema1  | myTbl3     | [6042,6109)    | myGroup1  | r        | emaj_myschema1 | myTbl3_log_1  |                      3
 myschema1  | mytbl2b    | [6052,6109)    | myGroup1  | r        | emaj_myschema1 | mytbl2b_log_1 |                      0
(2 rows)

delete from myschema1."myTbl3" where col33 = 1.;
select count(*) from emaj_myschema1."myTbl3_log_1";
 count 
-------
     2
(1 row)

select * from emaj.emaj_verify_all();
                                                                                      emaj_verify_all                                                                                       
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Warning: In the group "myGroup2", the foreign key "mytbl6_col61_fkey" on the table "myschema2"."mytbl6" references the table "myschema2"."mytbl7" that does not belong to any group.
 Warning: In the group "myGroup2", the table "myschema2"."mytbl6" is referenced by the foreign key "mytbl8_col81_fkey" of the table "myschema2"."mytbl8" that does not belong to any group.
 No error detected
(3 rows)

-- test statistics following a rollback targeting a mark set before a REMOVE_TBL
begin;
  delete from emaj.emaj_param where param_key = 'dblink_user_password';
  select rlbk_severity, regexp_replace(rlbk_message,E'\\d\\d\\d\\d/\\d\\d\\/\\d\\d\\ \\d\\d\\:\\d\\d:\\d\\d .*?\\)','<timestamp>)','g')
    from emaj.emaj_rollback_group('myGroup1','Mk2c',true);
 rlbk_severity |                                        regexp_replace                                         
---------------+-----------------------------------------------------------------------------------------------
 Notice        | 0 / 3 tables effectively processed.
 Notice        | 2 sequences processed.
 Warning       | The table myschema1."myTbl3" has been left unchanged (not in group anymore since <timestamp>)
 Warning       | The table myschema1.mytbl2b has been left unchanged (not in group anymore since <timestamp>)
(4 rows)

  select stat_group, stat_schema, stat_table, stat_first_mark, stat_last_mark, stat_rows
    from emaj.emaj_log_stat_group('myGroup1','Mk2b',NULL) order by 1,2,3,4;
 stat_group | stat_schema | stat_table | stat_first_mark | stat_last_mark | stat_rows 
------------+-------------+------------+-----------------+----------------+-----------
 myGroup1   | myschema1   | myTbl3     | Mk2b            | [deleted mark] |         2
 myGroup1   | myschema1   | mytbl1     | Mk2b            |                |         0
 myGroup1   | myschema1   | mytbl2     | Mk2b            |                |         0
 myGroup1   | myschema1   | mytbl2b    | Mk2b            | [deleted mark] |         0
 myGroup1   | myschema1   | mytbl4     | Mk2b            |                |         0
(5 rows)

rollback;
-- get statistics, using directly internal functions as done by web clients
select stat_group, stat_schema, stat_table, stat_first_mark, stat_first_mark_gid, stat_last_mark, stat_last_mark_gid, stat_rows 
  from emaj._log_stat_groups('{"myGroup1"}',false,NULL,NULL);
 stat_group | stat_schema | stat_table | stat_first_mark | stat_first_mark_gid |         stat_last_mark         | stat_last_mark_gid | stat_rows 
------------+-------------+------------+-----------------+---------------------+--------------------------------+--------------------+-----------
 myGroup1   | myschema1   | myTbl3     | Mk1             |               59999 | 2 tables removed from myGroup1 |              60014 |         2
 myGroup1   | myschema1   | mytbl1     | Mk1             |               59999 |                                |                    |         0
 myGroup1   | myschema1   | mytbl2     | Mk1             |               59999 |                                |                    |         0
 myGroup1   | myschema1   | mytbl2b    | Mk1             |               59999 | 2 tables removed from myGroup1 |              60014 |         0
 myGroup1   | myschema1   | mytbl4     | Mk1             |               59999 |                                |                    |         0
(5 rows)

select stat_group, stat_schema, stat_table, stat_first_mark, stat_first_mark_gid, stat_last_mark, stat_last_mark_gid, stat_role, stat_verb, stat_rows 
  from emaj._detailed_log_stat_groups('{"myGroup1"}',false,NULL,NULL);
 stat_group | stat_schema | stat_table | stat_first_mark | stat_first_mark_gid |         stat_last_mark         | stat_last_mark_gid | stat_role | stat_verb | stat_rows 
------------+-------------+------------+-----------------+---------------------+--------------------------------+--------------------+-----------+-----------+-----------
 myGroup1   | myschema1   | myTbl3     | Mk1             |               59999 | 2 tables removed from myGroup1 |              60014 | postgres  | INSERT    |         2
(1 row)

--testing snap and sql generation
select emaj.emaj_snap_group('myGroup1',:'EMAJTESTTMPDIR','');
 emaj_snap_group 
-----------------
               5
(1 row)

\! ls $EMAJTESTTMPDIR
_INFO
myschema1_myTbl3_col31_seq.snap
myschema1_mytbl1.snap
myschema1_mytbl2.snap
myschema1_mytbl2b_col20_seq.snap
myschema1_mytbl4.snap
\! rm $EMAJTESTTMPDIR/*
select emaj.emaj_snap_log_group('myGroup1',NULL,NULL,:'EMAJTESTTMPDIR',NULL);
 emaj_snap_log_group 
---------------------
                   8
(1 row)

\! ls $EMAJTESTTMPDIR/myschema1*
/tmp/emaj_11/alter_logging/myschema1_myTbl3_log_1.snap
/tmp/emaj_11/alter_logging/myschema1_mytbl1_log.snap
/tmp/emaj_11/alter_logging/myschema1_mytbl2_log.snap
/tmp/emaj_11/alter_logging/myschema1_mytbl2b_log_1.snap
/tmp/emaj_11/alter_logging/myschema1_mytbl4_log.snap
select emaj.emaj_gen_sql_group('myGroup1', NULL, NULL, :'EMAJTESTTMPDIR' || '/script.sql',array['myschema1.myTbl3']);
NOTICE:  table "emaj_temp_script" does not exist, skipping
 emaj_gen_sql_group 
--------------------
                  2
(1 row)

\! rm $EMAJTESTTMPDIR/*
-- test marks deletions
begin;
-- testing delete a single mark set before the table removal
  select emaj.emaj_delete_mark_group('myGroup1','Mk2c');
 emaj_delete_mark_group 
------------------------
                      1
(1 row)

  select * from emaj.emaj_mark where mark_group = 'myGroup1' and mark_name = 'Mk2b';
 mark_group | mark_name | mark_time_id | mark_is_deleted | mark_is_rlbk_protected | mark_comment | mark_log_rows_before_next | mark_logged_rlbk_target_mark 
------------+-----------+--------------+-----------------+------------------------+--------------+---------------------------+------------------------------
 myGroup1   | Mk2b      |         6083 | f               | f                      |              |                         0 | 
(1 row)

-- testing marks deletion (delete all marks before the alter_group)
  select emaj.emaj_delete_before_mark_group('myGroup1','EMAJ_LAST_MARK');
 emaj_delete_before_mark_group 
-------------------------------
                            12
(1 row)

  select 'should not exist' from pg_class, pg_namespace 
    where relnamespace = pg_namespace.oid and nspname = 'emaj_myschema1' and relname in ('myTbl3_log','mytbl2b_log');
 ?column? 
----------
(0 rows)

  select count(*) from emaj.emaj_relation where rel_schema = 'myschema1' and rel_tblseq in ('myTbl3','mytbl2b') order by rel_time_range;
ERROR:  column "emaj_relation.rel_time_range" must appear in the GROUP BY clause or be used in an aggregate function
LINE 1: ...' and rel_tblseq in ('myTbl3','mytbl2b') order by rel_time_r...
                                                             ^
  select * from emaj.emaj_rel_hist where relh_schema = 'myschema1' and relh_tblseq in ('myTbl3','mytbl2b') order by 1,2,3;
ERROR:  current transaction is aborted, commands ignored until end of transaction block
rollback;
begin;
-- testing the alter_group mark deletion
  select mark_group, mark_name, mark_time_id, mark_is_deleted, mark_is_rlbk_protected, mark_comment, mark_log_rows_before_next,
         mark_logged_rlbk_target_mark
    from emaj.emaj_mark where mark_group = 'myGroup1' order by mark_time_id desc limit 2;
 mark_group |           mark_name            | mark_time_id | mark_is_deleted | mark_is_rlbk_protected | mark_comment | mark_log_rows_before_next | mark_logged_rlbk_target_mark 
------------+--------------------------------+--------------+-----------------+------------------------+--------------+---------------------------+------------------------------
 myGroup1   | useless ALTER                  |         6110 | f               | f                      |              |                           | 
 myGroup1   | 2 tables removed from myGroup1 |         6109 | f               | f                      |              |                         0 | 
(2 rows)

    
  select emaj.emaj_delete_mark_group('myGroup1','2 tables removed from myGroup1');
 emaj_delete_mark_group 
------------------------
                      1
(1 row)

  select rel_schema, rel_tblseq, rel_time_range, rel_group, rel_kind, rel_log_schema, rel_log_table, rel_log_seq_last_value
    from emaj.emaj_relation where rel_schema = 'myschema1' and (rel_tblseq = 'myTbl3' or rel_tblseq = 'mytbl2b') order by rel_tblseq;
 rel_schema | rel_tblseq | rel_time_range | rel_group | rel_kind | rel_log_schema | rel_log_table | rel_log_seq_last_value 
------------+------------+----------------+-----------+----------+----------------+---------------+------------------------
 myschema1  | myTbl3     | [6042,6109)    | myGroup1  | r        | emaj_myschema1 | myTbl3_log_1  |                      3
 myschema1  | mytbl2b    | [6052,6109)    | myGroup1  | r        | emaj_myschema1 | mytbl2b_log_1 |                      0
(2 rows)

  select tbl_schema, tbl_name, tbl_time_id, tbl_log_seq_last_val from emaj.emaj_table
    where tbl_name in ('mytbl2b', 'myTbl3') order by tbl_time_id desc, tbl_name limit 2;
 tbl_schema | tbl_name | tbl_time_id | tbl_log_seq_last_val 
------------+----------+-------------+----------------------
 myschema1  | myTbl3   |        6109 |                    3
 myschema1  | mytbl2b  |        6109 |                    0
(2 rows)

  select * from emaj.emaj_mark where mark_group = 'myGroup1' and mark_name = '2 tables removed from myGroup1';
 mark_group | mark_name | mark_time_id | mark_is_deleted | mark_is_rlbk_protected | mark_comment | mark_log_rows_before_next | mark_logged_rlbk_target_mark 
------------+-----------+--------------+-----------------+------------------------+--------------+---------------------------+------------------------------
(0 rows)

rollback;
begin;
-- testing marks deletion (other cases)
  select emaj.emaj_set_mark_group('myGroup1','Mk2d');
 emaj_set_mark_group 
---------------------
                   5
(1 row)

  select emaj.emaj_delete_before_mark_group('myGroup1','Mk2b');
 emaj_delete_before_mark_group 
-------------------------------
                             6
(1 row)

  select rel_schema, rel_tblseq, rel_time_range, rel_group, rel_kind, rel_log_schema, rel_log_table, rel_log_seq_last_value
    from emaj.emaj_relation where rel_group = 'myGroup1' and not upper_inf(rel_time_range) order by 1,2,3;
 rel_schema |    rel_tblseq    | rel_time_range | rel_group | rel_kind | rel_log_schema | rel_log_table | rel_log_seq_last_value 
------------+------------------+----------------+-----------+----------+----------------+---------------+------------------------
 myschema1  | myTbl3           | [6042,6109)    | myGroup1  | r        | emaj_myschema1 | myTbl3_log_1  |                      3
 myschema1  | myTbl3_col31_seq | [6042,6085)    | myGroup1  | S        |                |               |                       
 myschema1  | mytbl2b          | [6052,6109)    | myGroup1  | r        | emaj_myschema1 | mytbl2b_log_1 |                      0
(3 rows)

  select * from emaj.emaj_rel_hist where relh_schema = 'myschema1' and relh_tblseq = 'mytbl2b' order by 1,2,3;
 relh_schema | relh_tblseq | relh_time_range | relh_group | relh_kind 
-------------+-------------+-----------------+------------+-----------
 myschema1   | mytbl2b     | [1000,6001)     | myGroup1   | r
 myschema1   | mytbl2b     | [6007,6015)     | myGroup1   | r
 myschema1   | mytbl2b     | [6017,6041)     | myGroup1   | r
 myschema1   | mytbl2b     | [6042,6051)     | myGroup1   | r
 myschema1   | mytbl2b     | [6051,6052)     | myGroup2   | r
(5 rows)

  select 'found' from pg_class, pg_namespace where relnamespace = pg_namespace.oid and relname = 'mytbl2b_log_1' and nspname = 'emaj_myschema1';
 ?column? 
----------
 found
(1 row)

  select emaj.emaj_delete_before_mark_group('myGroup1','Mk2d');
 emaj_delete_before_mark_group 
-------------------------------
                             8
(1 row)

  select 'should not exist' from pg_class, pg_namespace where relnamespace = pg_namespace.oid and relname = 'mytbl2b_log' and nspname = 'emaj_myschema1';
 ?column? 
----------
(0 rows)

  select count(*) from emaj.emaj_relation where rel_group = 'myGroup1' and not upper_inf(rel_time_range) order by 1,2,3;
ERROR:  ORDER BY position 2 is not in select list
LINE 1: ...'myGroup1' and not upper_inf(rel_time_range) order by 1,2,3;
                                                                   ^
  select * from emaj.emaj_rel_hist where relh_schema = 'myschema1' and relh_tblseq = 'mytbl2b' order by 1,2,3;
ERROR:  current transaction is aborted, commands ignored until end of transaction block
rollback;
-- testing rollback and consolidation
insert into myschema1.mytbl1 values (100, 'Alter_logg', E'\\000'::bytea);
select rlbk_severity, regexp_replace(rlbk_message,E'\\d\\d\\d\\d/\\d\\d\\/\\d\\d\\ \\d\\d\\:\\d\\d:\\d\\d .*?\\)','<timestamp>)','g')
  from emaj.emaj_logged_rollback_group('myGroup1','Mk2b',true) order by 1,2;
 rlbk_severity |                                                     regexp_replace                                                     
---------------+------------------------------------------------------------------------------------------------------------------------
 Notice        | 1 / 3 tables effectively processed.
 Notice        | 2 sequences processed.
 Warning       | The sequence myschema1."myTbl3_col31_seq" has only been rolled back to its latest group attachment state (<timestamp>)
 Warning       | The table myschema1."myTbl3" has been left unchanged (not in group anymore since <timestamp>)
 Warning       | The table myschema1.mytbl2b has been left unchanged (not in group anymore since <timestamp>)
(5 rows)

select emaj.emaj_rename_mark_group('myGroup1','EMAJ_LAST_MARK','Logged_Rlbk_End');
 emaj_rename_mark_group 
------------------------
 
(1 row)

update emaj.emaj_group_def set grpdef_group = 'temporarily_removed'
  where grpdef_group = 'myGroup1' and grpdef_schema = 'myschema1' and grpdef_tblseq = 'mytbl1';
select emaj.emaj_alter_group('myGroup1','2nd remove_tbl');
WARNING:  _check_fk_groups: The foreign key "mytbl4_col44_fkey" on the table "myschema1.mytbl4" references the table "myschema1.mytbl1" that is outside the groups (myGroup1).
 emaj_alter_group 
------------------
                4
(1 row)

select * from emaj.emaj_get_consolidable_rollbacks() where cons_group = 'myGroup1';
 cons_group | cons_target_rlbk_mark_name | cons_target_rlbk_mark_time_id | cons_end_rlbk_mark_name | cons_end_rlbk_mark_time_id | cons_rows | cons_marks 
------------+----------------------------+-------------------------------+-------------------------+----------------------------+-----------+------------
 myGroup1   | Mk2b                       |                          6083 | Logged_Rlbk_End         |                       6115 |         2 |          8
(1 row)

select * from emaj.emaj_consolidate_rollback_group('myGroup1', 'Logged_Rlbk_End');
 emaj_consolidate_rollback_group 
---------------------------------
                               3
(1 row)

select count(*) from emaj_myschema1.mytbl1_log_1;   -- the log table should be empty
 count 
-------
     0
(1 row)

select rlbk_severity, regexp_replace(rlbk_message,E'\\d\\d\\d\\d/\\d\\d\\/\\d\\d\\ \\d\\d\\:\\d\\d:\\d\\d .*?\\)','<timestamp>)','g')
  from emaj.emaj_rollback_group('myGroup1','Mk2b',true) order by 1,2;
 rlbk_severity |                                       regexp_replace                                        
---------------+---------------------------------------------------------------------------------------------
 Notice        | 0 / 2 tables effectively processed.
 Notice        | 2 sequences processed.
 Warning       | The table myschema1.mytbl1 has been left unchanged (not in group anymore since <timestamp>)
(3 rows)

-- testing group's reset
begin;
  select emaj.emaj_stop_group('myGroup1');
 emaj_stop_group 
-----------------
               4
(1 row)

  select emaj.emaj_reset_group('myGroup1');
 emaj_reset_group 
------------------
                4
(1 row)

  select * from emaj.emaj_rel_hist where relh_schema = 'myschema1' and upper(relh_time_range) > 6050 order by 1,2,3;
 relh_schema |   relh_tblseq    | relh_time_range | relh_group | relh_kind 
-------------+------------------+-----------------+------------+-----------
 myschema1   | myTbl3           | [6042,6109)     | myGroup1   | r
 myschema1   | myTbl3_col31_seq | [6042,6085)     | myGroup1   | S
 myschema1   | mytbl1           | [6050,6052)     | myGroup2   | r
 myschema1   | mytbl1           | [6052,6116)     | myGroup1   | r
 myschema1   | mytbl2           | [6007,6051)     | myGroup1   | r
 myschema1   | mytbl2           | [6051,6053)     | myGroup2   | r
 myschema1   | mytbl2b          | [6042,6051)     | myGroup1   | r
 myschema1   | mytbl2b          | [6051,6052)     | myGroup2   | r
 myschema1   | mytbl2b          | [6052,6109)     | myGroup1   | r
(9 rows)

rollback;
-- testing group's stop and start
begin;
  select emaj.emaj_stop_group('myGroup1');
 emaj_stop_group 
-----------------
               4
(1 row)

  select emaj.emaj_start_group('myGroup1');
WARNING:  _check_fk_groups: The foreign key "mytbl4_col44_fkey" on the table "myschema1.mytbl4" references the table "myschema1.mytbl1" that is outside the groups (myGroup1).
 emaj_start_group 
------------------
                4
(1 row)

  select rel_schema, rel_tblseq, rel_time_range, rel_group, rel_kind, rel_log_schema, rel_log_table, rel_log_seq_last_value
    from emaj.emaj_relation where rel_group = 'myGroup1' and not upper_inf(rel_time_range) order by 1,2,3;
 rel_schema | rel_tblseq | rel_time_range | rel_group | rel_kind | rel_log_schema | rel_log_table | rel_log_seq_last_value 
------------+------------+----------------+-----------+----------+----------------+---------------+------------------------
(0 rows)

  select 'should not exist' from pg_class, pg_namespace where relnamespace = pg_namespace.oid and relname = 'mytbl2b_log' and nspname = 'emaj_myschema1';
 ?column? 
----------
(0 rows)

rollback;
-- testing the table drop (remove first the sequence linked to the table, otherwise an event triger fires)
begin;
  delete from emaj.emaj_group_def where grpdef_schema = 'myschema1' and grpdef_tblseq = 'myTbl3_col31_seq';
  select emaj.emaj_alter_group('myGroup1','alter_before_drop_mytbl3');
WARNING:  _check_fk_groups: The foreign key "mytbl4_col44_fkey" on the table "myschema1.mytbl4" references the table "myschema1.mytbl1" that is outside the groups (myGroup1).
 emaj_alter_group 
------------------
                3
(1 row)

  drop table mySchema1."myTbl3";
rollback;
-- testing an ALTER TABLE leading to a table rewrite
begin;
  alter table mySchema1."myTbl3" alter column col33 type decimal (10,1);
rollback;
-- re-add all removed tables
update emaj.emaj_group_def set grpdef_group = 'myGroup1' where grpdef_group = 'temporarily_removed';
select emaj.emaj_alter_group('myGroup1', 'tables re-added to myGroup1');
NOTICE:  table "myTbl3_log" does not exist, skipping
NOTICE:  trigger "emaj_log_trg" for relation "myschema1.myTbl3" does not exist, skipping
NOTICE:  trigger "emaj_trunc_trg" for relation "myschema1.myTbl3" does not exist, skipping
NOTICE:  table "mytbl1_log" does not exist, skipping
NOTICE:  trigger "emaj_log_trg" for relation "myschema1.mytbl1" does not exist, skipping
NOTICE:  trigger "emaj_trunc_trg" for relation "myschema1.mytbl1" does not exist, skipping
NOTICE:  table "mytbl2b_log" does not exist, skipping
NOTICE:  trigger "emaj_log_trg" for relation "myschema1.mytbl2b" does not exist, skipping
NOTICE:  trigger "emaj_trunc_trg" for relation "myschema1.mytbl2b" does not exist, skipping
 emaj_alter_group 
------------------
                7
(1 row)

select emaj.emaj_cleanup_rollback_state();
 emaj_cleanup_rollback_state 
-----------------------------
                           0
(1 row)

-- set an intermediate mark
select emaj.emaj_set_mark_groups('{"myGroup1","myGroup2"}','Mk3');
 emaj_set_mark_groups 
----------------------
                   15
(1 row)

select mark_group, regexp_replace(mark_name,E'\\d\\d\.\\d\\d\\.\\d\\d\\.\\d\\d\\d\\d','%','g'), mark_time_id, mark_is_deleted,
       mark_is_rlbk_protected, mark_comment, mark_log_rows_before_next, mark_logged_rlbk_target_mark
  from emaj.emaj_mark order by mark_time_id, mark_group;
 mark_group |       regexp_replace        | mark_time_id | mark_is_deleted | mark_is_rlbk_protected | mark_comment | mark_log_rows_before_next | mark_logged_rlbk_target_mark 
------------+-----------------------------+--------------+-----------------+------------------------+--------------+---------------------------+------------------------------
 myGroup1   | Mk1                         |         6065 | f               | f                      |              |                         0 | 
 myGroup2   | Mk1                         |         6065 | f               | f                      |              |                         0 | 
 myGroup1   | Priority Changed            |         6066 | f               | f                      |              |                         0 | 
 myGroup1   | Attributes_changed          |         6067 | f               | f                      |              |                         0 | 
 myGroup2   | Attributes_changed          |         6067 | f               | f                      |              |                         0 | 
 myGroup1   | Mk2                         |         6068 | f               | f                      |              |                         0 | 
 myGroup2   | Mk2                         |         6068 | f               | f                      |              |                         0 | 
 myGroup1   | ALTER_%                     |         6070 | f               | f                      |              |                         0 | 
 myGroup2   | ALTER_%                     |         6070 | f               | f                      |              |                         0 | 
 myGroup1   | ALTER_%                     |         6071 | f               | f                      |              |                         0 | 
 myGroup2   | ALTER_%                     |         6071 | f               | f                      |              |                         0 | 
 myGroup2   | ADD_SEQ test                |         6072 | f               | f                      |              |                         0 | 
 myGroup1   | Mk2b                        |         6083 | f               | f                      |              |                         0 | 
 myGroup2   | ADD_TBL test                |         6094 | f               | f                      |              |                         0 | 
 myGroup1   | tables re-added to myGroup1 |         6122 | f               | f                      |              |                         0 | 
 myGroup1   | Mk3                         |         6123 | f               | f                      |              |                           | 
 myGroup2   | Mk3                         |         6123 | f               | f                      |              |                           | 
(17 rows)

-- estimate a rollback crossing alter group operations
delete from emaj.emaj_rlbk_stat;    -- to avoid unstable results in estimates
select emaj.emaj_estimate_rollback_groups('{"myGroup1","myGroup2"}','Mk1',false);
 emaj_estimate_rollback_groups 
-------------------------------
 @ 0.015 secs
(1 row)

-- execute a rollback not crossing any alter group operation
select * from emaj.emaj_rollback_groups('{"myGroup1","myGroup2"}','Mk3',false) order by 1,2;
 rlbk_severity |             rlbk_message             
---------------+--------------------------------------
 Notice        | 0 / 11 tables effectively processed.
 Notice        | 4 sequences processed.
(2 rows)

-- execute rollbacks crossing alter group operations
select * from emaj.emaj_logged_rollback_groups('{"myGroup1","myGroup2"}','Mk2');
ERROR:  _rlbk_check: This rollback operation would cross some previously executed alter group operations, which is not allowed by the current function parameters.
CONTEXT:  PL/pgSQL function emaj._rlbk_check(text[],text,boolean,boolean) line 47 at RAISE
SQL statement "SELECT emaj._rlbk_check(v_groupNames, v_mark, v_isAlterGroupAllowed, FALSE)"
PL/pgSQL function emaj._rlbk_init(text[],text,boolean,integer,boolean,boolean) line 23 at SQL statement
SQL statement "SELECT emaj._rlbk_init(v_groupNames, v_mark, v_isLoggedRlbk, 1, v_multiGroup, v_isAlterGroupAllowed)"
PL/pgSQL function emaj._rlbk_groups(text[],text,boolean,boolean,boolean) line 26 at SQL statement
PL/pgSQL function emaj.emaj_logged_rollback_groups(text[],text,boolean) line 12 at RETURN QUERY
select * from emaj.emaj_logged_rollback_groups('{"myGroup1","myGroup2"}','Mk2',false) order by 1,2;
ERROR:  _rlbk_check: This rollback operation would cross some previously executed alter group operations, which is not allowed by the current function parameters.
CONTEXT:  PL/pgSQL function emaj._rlbk_check(text[],text,boolean,boolean) line 47 at RAISE
SQL statement "SELECT emaj._rlbk_check(v_groupNames, v_mark, v_isAlterGroupAllowed, FALSE)"
PL/pgSQL function emaj._rlbk_init(text[],text,boolean,integer,boolean,boolean) line 23 at SQL statement
SQL statement "SELECT emaj._rlbk_init(v_groupNames, v_mark, v_isLoggedRlbk, 1, v_multiGroup, v_isAlterGroupAllowed)"
PL/pgSQL function emaj._rlbk_groups(text[],text,boolean,boolean,boolean) line 26 at SQL statement
PL/pgSQL function emaj.emaj_logged_rollback_groups(text[],text,boolean) line 12 at RETURN QUERY
select rlbk_severity, regexp_replace(rlbk_message,E'\\d\\d\\d\\d/\\d\\d\\/\\d\\d\\ \\d\\d\\:\\d\\d:\\d\\d .*?\\)','<timestamp>)','g')
  from emaj.emaj_logged_rollback_groups('{"myGroup1","myGroup2"}','Mk2',true) order by 1,2;
 rlbk_severity |                                           regexp_replace                                            
---------------+-----------------------------------------------------------------------------------------------------
 Notice        | 0 / 11 tables effectively processed.
 Notice        | 4 sequences processed.
 Warning       | Tables group change not rolled back: E-Maj priority for myschema1.mytbl1
 Warning       | Tables group change not rolled back: log data tablespace for myschema1.mytbl2b
 Warning       | Tables group change not rolled back: log index tablespace for myschema2.mytbl6
 Warning       | The table myschema1."myTbl3" has only been rolled back to its latest group attachment (<timestamp>)
 Warning       | The table myschema1.mytbl1 has only been rolled back to its latest group attachment (<timestamp>)
 Warning       | The table myschema1.mytbl2b has only been rolled back to its latest group attachment (<timestamp>)
(8 rows)

select * from emaj.emaj_rollback_groups('{"myGroup1","myGroup2"}','Mk2',false) order by 1,2;
 rlbk_severity |             rlbk_message             
---------------+--------------------------------------
 Notice        | 0 / 11 tables effectively processed.
 Notice        | 4 sequences processed.
(2 rows)

select * from emaj.emaj_rollback_groups('{"myGroup1","myGroup2"}','Mk1',true) order by 1,2;
 rlbk_severity |                                  rlbk_message                                  
---------------+--------------------------------------------------------------------------------
 Notice        | 0 / 11 tables effectively processed.
 Notice        | 4 sequences processed.
 Warning       | Tables group change not rolled back: E-Maj priority for myschema1.mytbl1
 Warning       | Tables group change not rolled back: log data tablespace for myschema1.mytbl2b
 Warning       | Tables group change not rolled back: log index tablespace for myschema2.mytbl6
(5 rows)

-- execute additional rollback not crossing alter operations anymore
select * from emaj.emaj_logged_rollback_groups('{"myGroup1","myGroup2"}','Mk1',false) order by 1,2;
 rlbk_severity |             rlbk_message             
---------------+--------------------------------------
 Notice        | 0 / 11 tables effectively processed.
 Notice        | 4 sequences processed.
(2 rows)

select * from emaj.emaj_rollback_groups('{"myGroup1","myGroup2"}','Mk1',false) order by 1,2;
 rlbk_severity |             rlbk_message             
---------------+--------------------------------------
 Notice        | 0 / 11 tables effectively processed.
 Notice        | 4 sequences processed.
(2 rows)

-- empty logging groups
begin;
  delete from emaj.emaj_group_def where grpdef_group IN ('myGroup1','myGroup2');
  select emaj.emaj_alter_groups('{"myGroup1","myGroup2"}','empty groups');
 emaj_alter_groups 
-------------------
                 0
(1 row)

  select rel_schema, rel_tblseq, rel_time_range, rel_group, rel_kind, rel_log_schema, rel_log_table, rel_log_seq_last_value
    from emaj.emaj_relation where rel_group IN ('myGroup1','myGroup2') order by rel_schema, rel_tblseq, rel_time_range;
 rel_schema |    rel_tblseq     | rel_time_range | rel_group | rel_kind | rel_log_schema | rel_log_table | rel_log_seq_last_value 
------------+-------------------+----------------+-----------+----------+----------------+---------------+------------------------
 myschema1  | myTbl3            | [6042,6109)    | myGroup1  | r        | emaj_myschema1 | myTbl3_log_1  |                      3
 myschema1  | myTbl3            | [6122,6132)    | myGroup1  | r        | emaj_myschema1 | myTbl3_log_2  |                      3
 myschema1  | myTbl3_col31_seq  | [6042,6085)    | myGroup1  | S        |                |               |                       
 myschema1  | myTbl3_col31_seq  | [6093,6132)    | myGroup1  | S        |                |               |                       
 myschema1  | mytbl1            | [6052,6116)    | myGroup1  | r        | emaj_myschema1 | mytbl1_log_1  |                      2
 myschema1  | mytbl1            | [6122,6132)    | myGroup1  | r        | emaj_myschema1 | mytbl1_log_2  |                      2
 myschema1  | mytbl2            | [6053,6132)    | myGroup1  | r        | emaj_myschema1 | mytbl2_log_1  |                      0
 myschema1  | mytbl2b           | [6052,6109)    | myGroup1  | r        | emaj_myschema1 | mytbl2b_log_1 |                      0
 myschema1  | mytbl2b           | [6122,6132)    | myGroup1  | r        | emaj_myschema1 | mytbl2b_log_2 |                      0
 myschema1  | mytbl2b_col20_seq | [6007,6132)    | myGroup1  | S        |                |               |                       
 myschema1  | mytbl4            | [6017,6132)    | myGroup1  | r        | emaj_myschema1 | mytbl4_log_1  |                      0
 myschema2  | myTbl3            | [6046,6132)    | myGroup2  | r        | emaj_myschema2 | myTbl3_log_1  |                      1
 myschema2  | myTbl3_col31_seq  | [6046,6132)    | myGroup2  | S        |                |               |                       
 myschema2  | myseq1            | [6057,6132)    | myGroup2  | S        |                |               |                       
 myschema2  | myseq2            | [6074,6079)    | myGroup2  | S        |                |               |                       
 myschema2  | myseq2            | [6080,6081)    | myGroup2  | S        |                |               |                       
 myschema2  | mytbl1            | [6008,6132)    | myGroup2  | r        | emaj_myschema2 | mytbl1_log_1  |                      0
 myschema2  | mytbl2            | [6008,6132)    | myGroup2  | r        | emaj_myschema2 | mytbl2_log_1  |                      0
 myschema2  | mytbl4            | [6042,6132)    | myGroup2  | r        | emaj_myschema2 | mytbl4_log_1  |                      0
 myschema2  | mytbl5            | [6008,6132)    | myGroup2  | r        | emaj_myschema2 | mytbl5_log_1  |                      0
 myschema2  | mytbl6            | [6008,6132)    | myGroup2  | r        | emaj_myschema2 | mytbl6_log_1  |                      0
 myschema2  | mytbl7            | [6096,6103)    | myGroup2  | r        | emaj_myschema2 | mytbl7_log_1  |                     10
 myschema2  | mytbl7            | [6104,6106)    | myGroup2  | r        | emaj_myschema2 | mytbl7_log_2  |                     11
(23 rows)

-- add one table and sequence to the empty groups
  insert into emaj.emaj_group_def values ('myGroup1','myschema1','mytbl1',20);
-- TODO: uncomment the next line once it will be possible to add a sequence to a logging group
--  insert into emaj.emaj_group_def values ('myGroup2','myschema2','myseq1');
  select emaj.emaj_alter_groups('{"myGroup1","myGroup2"}','add a single table');
NOTICE:  table "mytbl1_log" does not exist, skipping
NOTICE:  trigger "emaj_log_trg" for relation "myschema1.mytbl1" does not exist, skipping
NOTICE:  trigger "emaj_trunc_trg" for relation "myschema1.mytbl1" does not exist, skipping
WARNING:  _check_fk_groups: The table "myschema1.mytbl1" is referenced by the foreign key "mytbl4_col44_fkey" on the table "myschema1.mytbl4" that is outside the groups (myGroup1,myGroup2).
 emaj_alter_groups 
-------------------
                 1
(1 row)

  select rel_schema, rel_tblseq, rel_time_range, rel_group, rel_kind, rel_log_schema, rel_log_table, rel_log_seq_last_value
    from emaj.emaj_relation
    where (rel_schema = 'myschema1' and rel_tblseq = 'mytbl1') or (rel_schema = 'myschema2' and rel_tblseq = 'myseq1')
    order by rel_schema, rel_tblseq, rel_time_range;
 rel_schema | rel_tblseq | rel_time_range | rel_group | rel_kind | rel_log_schema | rel_log_table | rel_log_seq_last_value 
------------+------------+----------------+-----------+----------+----------------+---------------+------------------------
 myschema1  | mytbl1     | [6052,6116)    | myGroup1  | r        | emaj_myschema1 | mytbl1_log_1  |                      2
 myschema1  | mytbl1     | [6122,6132)    | myGroup1  | r        | emaj_myschema1 | mytbl1_log_2  |                      2
 myschema1  | mytbl1     | [6133,)        | myGroup1  | r        | emaj_myschema1 | mytbl1_log    |                       
 myschema2  | myseq1     | [6056,6057)    | myGroup4  | S        |                |               |                       
 myschema2  | myseq1     | [6057,6132)    | myGroup2  | S        |                |               |                       
(5 rows)

rollback;
-----------------------------
-- change the group ownership of a table and a sequence (and some other attributes)
-----------------------------
update emaj.emaj_group_def set grpdef_group = 'myGroup1'
  where grpdef_group = 'myGroup2' and grpdef_schema = 'myschema2' and grpdef_tblseq = 'myTbl3_col31_seq';
update emaj.emaj_group_def set grpdef_group = 'myGroup1', grpdef_log_dat_tsp = 'tsplog1', grpdef_log_idx_tsp = 'tsplog1'
  where grpdef_group = 'myGroup2' and grpdef_schema = 'myschema2' and grpdef_tblseq = 'myTbl3';
-- case when the source group is idle and the destination group is logging
begin;
  select emaj.emaj_stop_group('myGroup2');
 emaj_stop_group 
-----------------
               8
(1 row)

  select emaj.emaj_alter_groups('{"myGroup1","myGroup2"}', 'move to myGroup1 while logging');
 emaj_alter_groups 
-------------------
                15
(1 row)

  select * from emaj.emaj_alter_plan where altr_time_id = (select max(altr_time_id) from emaj.emaj_alter_plan) order by 1,2,3,4,5;
 altr_time_id |        altr_step         | altr_schema |   altr_tblseq    | altr_group | altr_priority | altr_group_is_logging | altr_new_group | altr_new_group_is_logging | altr_rlbk_id 
--------------+--------------------------+-------------+------------------+------------+---------------+-----------------------+----------------+---------------------------+--------------
         6135 | RESET_GROUP              |             |                  | myGroup2   |               | f                     |                |                           |             
         6135 | CHANGE_TBL_LOG_DATA_TSP  | myschema2   | myTbl3           | myGroup2   |               | f                     | myGroup1       | t                         |             
         6135 | CHANGE_TBL_LOG_INDEX_TSP | myschema2   | myTbl3           | myGroup2   |               | f                     | myGroup1       | t                         |             
         6135 | MOVE_TBL                 | myschema2   | myTbl3           | myGroup2   |               | f                     | myGroup1       | t                         |             
         6135 | MOVE_SEQ                 | myschema2   | myTbl3_col31_seq | myGroup2   |               | f                     | myGroup1       | t                         |             
(5 rows)

  select hist_function, hist_event, hist_object, hist_wording from emaj.emaj_hist 
    where hist_function = 'ALTER_GROUPS' order by hist_id desc limit 8;
 hist_function |          hist_event          |         hist_object          |                        hist_wording                        
---------------+------------------------------+------------------------------+------------------------------------------------------------
 ALTER_GROUPS  | END                          | myGroup1,myGroup2            | Timestamp Id : 6135
 ALTER_GROUPS  | SEQUENCE MOVED               | myschema2."myTbl3_col31_seq" | From the idle group myGroup2 to the logging group myGroup1
 ALTER_GROUPS  | TABLE MOVED                  | myschema2."myTbl3"           | From the idle group myGroup2 to the logging group myGroup1
 ALTER_GROUPS  | LOG INDEX TABLESPACE CHANGED | myschema2."myTbl3"           | Default tablespace => tsplog1
 ALTER_GROUPS  | LOG DATA TABLESPACE CHANGED  | myschema2."myTbl3"           | Default tablespace => tsplog1
 ALTER_GROUPS  | BEGIN                        | myGroup1,myGroup2            | 
 ALTER_GROUPS  | END                          | myGroup1,myGroup2            | Timestamp Id : 6071
 ALTER_GROUPS  | LOG INDEX TABLESPACE CHANGED | myschema2.mytbl6             | tsplog1 => Default tablespace
(8 rows)

rollback;
-- case when both groups are logging
-- should not work, because myGroup2 is missing in the groups list and both groups are in LOGGING state
select emaj.emaj_alter_group('myGroup1', 'move to myGroup1');
WARNING:  _alter_groups: in the group "myGroup1", the table or sequence myschema2."myTbl3" already belongs to the group "myGroup2".
WARNING:  _alter_groups: in the group "myGroup1", the table or sequence myschema2."myTbl3_col31_seq" already belongs to the group "myGroup2".
ERROR:  _alter_groups: One or several errors have been detected in the emaj_group_def table content.
CONTEXT:  PL/pgSQL function emaj._alter_groups(text[],boolean,text,text,bigint) line 31 at RAISE
SQL statement "SELECT *                              FROM emaj._alter_groups(ARRAY[v_groupName], FALSE, v_mark, 'ALTER_GROUP'::TEXT, NULL)"
PL/pgSQL function emaj.emaj_alter_group(text,text) line 14 at SQL statement
-- should be OK
-- generates updates before the group change
select emaj.emaj_set_mark_groups('{"myGroup1","myGroup2"}','before move');
 emaj_set_mark_groups 
----------------------
                   15
(1 row)

update myschema2."myTbl3" set col32 = col32 + '1 day' where col31 >= 8;
select emaj.emaj_alter_groups('{"myGroup1","myGroup2"}', 'move to myGroup1');
WARNING:  _check_fk_groups: The foreign key "mytbl6_col61_fkey" on the table "myschema2.mytbl6" references the table "myschema2.mytbl7" that is outside the groups (myGroup1,myGroup2).
WARNING:  _check_fk_groups: The table "myschema2.mytbl6" is referenced by the foreign key "mytbl8_col81_fkey" on the table "myschema2.mytbl8" that is outside the groups (myGroup1,myGroup2).
 emaj_alter_groups 
-------------------
                15
(1 row)

select * from emaj.emaj_relation where rel_schema = 'myschema2' and (rel_tblseq = 'myTbl3' or rel_tblseq = 'myTbl3_col31_seq') order by 1,2,3,4;
 rel_schema |    rel_tblseq    | rel_time_range | rel_group | rel_kind | rel_priority | rel_log_schema | rel_log_table | rel_log_dat_tsp |  rel_log_index   | rel_log_idx_tsp | rel_log_sequence | rel_log_function | rel_emaj_verb_attnum | rel_has_always_ident_col |     rel_sql_rlbk_columns      | rel_sql_rlbk_pk_columns | rel_sql_rlbk_pk_conditions | rel_sql_gen_ins_col |                                                  rel_sql_gen_ins_val                                                  |                                                               rel_sql_gen_upd_set                                                               | rel_sql_gen_pk_conditions | rel_log_seq_last_value 
------------+------------------+----------------+-----------+----------+--------------+----------------+---------------+-----------------+------------------+-----------------+------------------+------------------+----------------------+--------------------------+-------------------------------+-------------------------+----------------------------+---------------------+-----------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------+------------------------
 myschema2  | myTbl3           | [6046,6137)    | myGroup2  | r        |              | emaj_myschema2 | myTbl3_log_1  | tsplog1         | myTbl3_log_idx_1 | tsplog1         | myTbl3_log_seq   | myTbl3_log_fnct  |                    4 | f                        | tbl.col31,tbl.col32,tbl.col33 | col31                   | tbl.col31 = keys.col31     |                     | ' || coalesce(o.col31::TEXT,'NULL') || ', ' || quote_nullable(o.col32) || ', ' || coalesce(o.col33::TEXT,'NULL') || ' | col31 = ' || coalesce(n.col31 ::TEXT,'NULL') || ', col32 = ' || quote_nullable(n.col32) || ', col33 = ' || coalesce(n.col33 ::TEXT,'NULL') || ' | col31 = ' || o.col31 || ' |                       
 myschema2  | myTbl3           | [6137,)        | myGroup1  | r        |              | emaj_myschema2 | myTbl3_log    | tsplog1         | myTbl3_log_idx   | tsplog1         | myTbl3_log_seq   | myTbl3_log_fnct  |                    4 | f                        | tbl.col31,tbl.col32,tbl.col33 | col31                   | tbl.col31 = keys.col31     |                     | ' || coalesce(o.col31::TEXT,'NULL') || ', ' || quote_nullable(o.col32) || ', ' || coalesce(o.col33::TEXT,'NULL') || ' | col31 = ' || coalesce(n.col31 ::TEXT,'NULL') || ', col32 = ' || quote_nullable(n.col32) || ', col33 = ' || coalesce(n.col33 ::TEXT,'NULL') || ' | col31 = ' || o.col31 || ' |                       
 myschema2  | myTbl3_col31_seq | [6046,6137)    | myGroup2  | S        |              |                |               |                 |                  |                 |                  |                  |                      |                          |                               |                         |                            |                     |                                                                                                                       |                                                                                                                                                 |                           |                       
 myschema2  | myTbl3_col31_seq | [6137,)        | myGroup1  | S        |              |                |               |                 |                  |                 |                  |                  |                      |                          |                               |                         |                            |                     |                                                                                                                       |                                                                                                                                                 |                           |                       
(4 rows)

-- perform various tasks on the groups
select emaj.emaj_set_mark_groups('{"myGroup1","myGroup2"}','after move');
 emaj_set_mark_groups 
----------------------
                   15
(1 row)

update myschema2."myTbl3" set col33 = 12.0 where col31 >= 9;
select  stat_group, stat_schema, stat_table, stat_first_mark, stat_last_mark, stat_rows
  from emaj.emaj_log_stat_groups('{"myGroup1","myGroup2"}', 'before move', NULL)
  where stat_schema = 'myschema2' and stat_table = 'myTbl3';
 stat_group | stat_schema | stat_table | stat_first_mark  |  stat_last_mark  | stat_rows 
------------+-------------+------------+------------------+------------------+-----------
 myGroup2   | myschema2   | myTbl3     | before move      | move to myGroup1 |         3
 myGroup1   | myschema2   | myTbl3     | move to myGroup1 |                  |         2
(2 rows)

select  stat_group, stat_schema, stat_table, stat_first_mark, stat_last_mark, stat_verb, stat_role, stat_rows
  from emaj.emaj_detailed_log_stat_groups('{"myGroup1","myGroup2"}', 'before move', NULL) where stat_schema = 'myschema2' and stat_table = 'myTbl3';
 stat_group | stat_schema | stat_table | stat_first_mark  |  stat_last_mark  | stat_verb | stat_role | stat_rows 
------------+-------------+------------+------------------+------------------+-----------+-----------+-----------
 myGroup2   | myschema2   | myTbl3     | before move      | move to myGroup1 | UPDATE    | postgres  |         3
 myGroup1   | myschema2   | myTbl3     | move to myGroup1 |                  | UPDATE    | postgres  |         2
(2 rows)

-- generate a sql script crossing the move (before rollback)
select emaj.emaj_gen_sql_groups('{"myGroup1","myGroup2"}', 'before move', NULL, :'EMAJTESTTMPDIR' || '/script1.sql',
  array['myschema2.myTbl3','myschema2.myTbl3_col31_seq']);
NOTICE:  table "emaj_temp_script" does not exist, skipping
 emaj_gen_sql_groups 
---------------------
                   3
(1 row)

-- rollback to a mark set after the group change
select * from emaj.emaj_logged_rollback_groups('{"myGroup1","myGroup2"}','after move');
 rlbk_severity |             rlbk_message             
---------------+--------------------------------------
 Notice        | 1 / 11 tables effectively processed.
 Notice        | 4 sequences processed.
(2 rows)

-- rollback to a mark set before the group change
select rlbk_severity, regexp_replace(rlbk_message,E'\\d\\d\\d\\d/\\d\\d\\/\\d\\d\\ \\d\\d\\:\\d\\d:\\d\\d .*?\\)','<timestamp>)','g')
  from emaj.emaj_rollback_groups('{"myGroup1","myGroup2"}','before move',true);
 rlbk_severity |                                                     regexp_replace                                                     
---------------+------------------------------------------------------------------------------------------------------------------------
 Notice        | 1 / 11 tables effectively processed.
 Notice        | 4 sequences processed.
 Warning       | Tables group change not rolled back: log data tablespace for myschema2."myTbl3"
 Warning       | Tables group change not rolled back: log index tablespace for myschema2."myTbl3"
 Warning       | The table myschema2."myTbl3" has only been rolled back to its latest group attachment (<timestamp>)
 Warning       | The sequence myschema2."myTbl3_col31_seq" has only been rolled back to its latest group attachment state (<timestamp>)
(6 rows)

-- generate a sql script crossing the move (after rollback)
select emaj.emaj_gen_sql_group('myGroup1', 'before move', NULL, :'EMAJTESTTMPDIR' || '/script2.sql',
  array['myschema2.myTbl3','myschema2.myTbl3_col31_seq']);
ERROR:  _gen_sql_groups: 2 tables/sequences (myschema2.myTbl3, myschema2.myTbl3_col31_seq) did not belong to any of the selected tables groups at before move mark time.
CONTEXT:  PL/pgSQL function emaj._gen_sql_groups(text[],boolean,text,text,text,text[]) line 65 at RAISE
PL/pgSQL function emaj.emaj_gen_sql_group(text,text,text,text,text[]) line 14 at RETURN
select emaj.emaj_gen_sql_groups('{"myGroup1","myGroup2"}', 'before move', NULL, :'EMAJTESTTMPDIR' || '/script3.sql',
  array['myschema2.myTbl3','myschema2.myTbl3_col31_seq']);
NOTICE:  table "emaj_temp_script" does not exist, skipping
 emaj_gen_sql_groups 
---------------------
                   3
(1 row)

\! rm $EMAJTESTTMPDIR/*
-- revert the emaj_group_def change and apply with a destination group in idle state
update emaj.emaj_group_def set grpdef_group = 'myGroup2'
  where grpdef_group = 'myGroup1' and grpdef_schema = 'myschema2' and grpdef_tblseq = 'myTbl3_col31_seq';
update emaj.emaj_group_def set grpdef_group = 'myGroup2', grpdef_log_dat_tsp = NULL, grpdef_log_idx_tsp = NULL
  where grpdef_group = 'myGroup1' and grpdef_schema = 'myschema2' and grpdef_tblseq = 'myTbl3';
select emaj.emaj_stop_group('myGroup2');
 emaj_stop_group 
-----------------
               6
(1 row)

select emaj.emaj_alter_groups('{"myGroup1","myGroup2"}', 'back to idle myGroup2');
 emaj_alter_groups 
-------------------
                15
(1 row)

-----------------------------
-- remove and add tables and sequences without updating emaj_group_def
-----------------------------
select emaj.emaj_start_group('myGroup2','Start');
WARNING:  _check_fk_groups: The foreign key "mytbl6_col61_fkey" on the table "myschema2.mytbl6" references the table "myschema2.mytbl7" that is outside the groups (myGroup2).
WARNING:  _check_fk_groups: The table "myschema2.mytbl6" is referenced by the foreign key "mytbl8_col81_fkey" on the table "myschema2.mytbl8" that is outside the groups (myGroup2).
 emaj_start_group 
------------------
                8
(1 row)

insert into myschema2.mytbl1 values (100, 'Started', E'\\000'::bytea);
select nextval('myschema2.myseq1');
 nextval 
---------
    1000
(1 row)

-- remove and assign somes tables and sequences in a single transaction
begin;
  select emaj.emaj_remove_tables('myschema2','{"mytbl1","mytbl2","myTbl3"}'::text[],'REMOVE_3_TABLES');
 emaj_remove_tables 
--------------------
                  3
(1 row)

  select emaj.emaj_remove_sequence('myschema2','myseq1','REMOVE_1_SEQUENCES');
 emaj_remove_sequence 
----------------------
                    1
(1 row)

  select emaj.emaj_assign_tables('myschema2','{"mytbl1","mytbl2","myTbl3"}'::text[],'myGroup2',null,'ASSIGN_3_TABLES');
NOTICE:  table "myTbl3_log" does not exist, skipping
NOTICE:  trigger "emaj_log_trg" for relation "myschema2.myTbl3" does not exist, skipping
NOTICE:  trigger "emaj_trunc_trg" for relation "myschema2.myTbl3" does not exist, skipping
NOTICE:  table "mytbl1_log" does not exist, skipping
NOTICE:  trigger "emaj_log_trg" for relation "myschema2.mytbl1" does not exist, skipping
NOTICE:  trigger "emaj_trunc_trg" for relation "myschema2.mytbl1" does not exist, skipping
NOTICE:  table "mytbl2_log" does not exist, skipping
NOTICE:  trigger "emaj_log_trg" for relation "myschema2.mytbl2" does not exist, skipping
NOTICE:  trigger "emaj_trunc_trg" for relation "myschema2.mytbl2" does not exist, skipping
WARNING:  _check_fk_groups: The foreign key "mytbl6_col61_fkey" on the table "myschema2.mytbl6" references the table "myschema2.mytbl7" that is outside the groups (myGroup2).
WARNING:  _check_fk_groups: The table "myschema2.mytbl6" is referenced by the foreign key "mytbl8_col81_fkey" on the table "myschema2.mytbl8" that is outside the groups (myGroup2).
 emaj_assign_tables 
--------------------
                  3
(1 row)

  select emaj.emaj_assign_sequences('myschema2','{"myseq1","myseq2"}'::text[],'myGroup2','ASSIGN_2_SEQUENCES');
 emaj_assign_sequences 
-----------------------
                     2
(1 row)

  insert into myschema2.mytbl1 values (110, 'Assigned', E'\\000'::bytea);
  select nextval('myschema2.myseq1');
 nextval 
---------
    1001
(1 row)

  -- what if some (all but the emaj sequence) emaj components are missing at remove_table time ?
  select emaj.emaj_disable_protection_by_event_triggers();
 emaj_disable_protection_by_event_triggers 
-------------------------------------------
                                         3
(1 row)

  drop table emaj_myschema2.mytbl1_log;
  drop function emaj_myschema2.mytbl1_log_fnct() cascade;
NOTICE:  drop cascades to trigger emaj_log_trg on table myschema2.mytbl1
  select emaj.emaj_enable_protection_by_event_triggers();
 emaj_enable_protection_by_event_triggers 
------------------------------------------
                                        3
(1 row)

  select emaj.emaj_remove_tables('myschema2','{"mytbl1","mytbl2","myTbl3"}');
NOTICE:  relation "mytbl1_log" does not exist, skipping
NOTICE:  relation "mytbl1_log_idx" does not exist, skipping
NOTICE:  trigger "emaj_log_trg" for relation "myschema2.mytbl1" does not exist, skipping
NOTICE:  function emaj_myschema2.mytbl1_log_fnct() does not exist, skipping
 emaj_remove_tables 
--------------------
                  3
(1 row)

  select emaj.emaj_remove_sequences('myschema2','{"myseq1","myseq2"}');
 emaj_remove_sequences 
-----------------------
                     2
(1 row)

  select emaj.emaj_assign_tables('myschema2','{"mytbl1","mytbl2","myTbl3"}','myGroup2',
                                 '{"priority":1, "log_data_tablespace":"tsplog1", "log_index_tablespace":"tsplog1"}'::jsonb);
NOTICE:  table "myTbl3_log" does not exist, skipping
NOTICE:  trigger "emaj_log_trg" for relation "myschema2.myTbl3" does not exist, skipping
NOTICE:  trigger "emaj_trunc_trg" for relation "myschema2.myTbl3" does not exist, skipping
NOTICE:  table "mytbl1_log" does not exist, skipping
NOTICE:  trigger "emaj_log_trg" for relation "myschema2.mytbl1" does not exist, skipping
NOTICE:  trigger "emaj_trunc_trg" for relation "myschema2.mytbl1" does not exist, skipping
NOTICE:  table "mytbl2_log" does not exist, skipping
NOTICE:  trigger "emaj_log_trg" for relation "myschema2.mytbl2" does not exist, skipping
NOTICE:  trigger "emaj_trunc_trg" for relation "myschema2.mytbl2" does not exist, skipping
WARNING:  _check_fk_groups: The foreign key "mytbl6_col61_fkey" on the table "myschema2.mytbl6" references the table "myschema2.mytbl7" that is outside the groups (myGroup2).
WARNING:  _check_fk_groups: The table "myschema2.mytbl6" is referenced by the foreign key "mytbl8_col81_fkey" on the table "myschema2.mytbl8" that is outside the groups (myGroup2).
 emaj_assign_tables 
--------------------
                  3
(1 row)

  select emaj.emaj_assign_sequences('myschema2','{"myseq1","myseq2"}'::text[],'myGroup2','Mark_assign_sequences');
 emaj_assign_sequences 
-----------------------
                     2
(1 row)

commit;
-- remove tables and sequences with bad marks
select emaj.emaj_remove_table('myschema2','mytbl1','Mark_assign_sequences');
ERROR:  _check_new_mark: The group "myGroup2" already contains a mark named "Mark_assign_sequences".
CONTEXT:  PL/pgSQL function emaj._check_new_mark(text[],text) line 27 at RAISE
SQL statement "SELECT emaj._check_new_mark(v_loggingGroups, v_mark)"
PL/pgSQL function emaj._remove_tables(text,text[],text,boolean,boolean) line 59 at SQL statement
PL/pgSQL function emaj.emaj_remove_table(text,text,text) line 6 at RETURN
select emaj.emaj_remove_sequence('myschema2','myseq1','Mark_assign_sequences');
ERROR:  _check_new_mark: The group "myGroup2" already contains a mark named "Mark_assign_sequences".
CONTEXT:  PL/pgSQL function emaj._check_new_mark(text[],text) line 27 at RAISE
SQL statement "SELECT emaj._check_new_mark(v_loggingGroups, v_mark)"
PL/pgSQL function emaj._remove_sequences(text,text[],text,boolean,boolean) line 56 at SQL statement
PL/pgSQL function emaj.emaj_remove_sequence(text,text,text) line 6 at RETURN
-- alter a table in a logging group
select emaj.emaj_remove_table('myschema1','mytbl4');
 emaj_remove_table 
-------------------
                 1
(1 row)

alter table myschema1.mytbl4 alter column col45 type varchar(15);
select emaj.emaj_assign_table('myschema1','mytbl4','myGroup1');
NOTICE:  table "mytbl4_log" does not exist, skipping
NOTICE:  trigger "emaj_log_trg" for relation "myschema1.mytbl4" does not exist, skipping
NOTICE:  trigger "emaj_trunc_trg" for relation "myschema1.mytbl4" does not exist, skipping
 emaj_assign_table 
-------------------
                 1
(1 row)

begin;
  select emaj.emaj_remove_table('myschema1','mytbl4');
 emaj_remove_table 
-------------------
                 1
(1 row)

  alter table myschema1.mytbl4 alter column col45 type varchar(10);
  select emaj.emaj_assign_table('myschema1','mytbl4','myGroup1');
NOTICE:  table "mytbl4_log" does not exist, skipping
NOTICE:  trigger "emaj_log_trg" for relation "myschema1.mytbl4" does not exist, skipping
NOTICE:  trigger "emaj_trunc_trg" for relation "myschema1.mytbl4" does not exist, skipping
 emaj_assign_table 
-------------------
                 1
(1 row)

commit;
-- checks
select count(*) from emaj.emaj_mark where mark_group = 'myGroup2' and (mark_name like 'REMOVE%' or mark_name like 'ASSIGN%');
 count 
-------
     7
(1 row)

select rel_schema, rel_tblseq, rel_time_range, rel_group, rel_kind, rel_log_schema, rel_log_table, rel_log_seq_last_value
  from emaj.emaj_relation where rel_schema = 'myschema2' and rel_tblseq in ('mytbl1','mytbl2','myTbl3','myseq1','myseq2')
  order by rel_schema, rel_tblseq, rel_time_range;
 rel_schema | rel_tblseq | rel_time_range | rel_group | rel_kind | rel_log_schema | rel_log_table | rel_log_seq_last_value 
------------+------------+----------------+-----------+----------+----------------+---------------+------------------------
 myschema2  | myTbl3     | [6137,6143)    | myGroup1  | r        | emaj_myschema2 | myTbl3_log_1  |                       
 myschema2  | myTbl3     | [6143,6145)    | myGroup2  | r        | emaj_myschema2 | myTbl3_log_2  |                     10
 myschema2  | myTbl3     | [6147,6149)    | myGroup2  | r        | emaj_myschema2 | myTbl3_log_3  |                     10
 myschema2  | myTbl3     | [6151,)        | myGroup2  | r        | emaj_myschema2 | myTbl3_log    |                       
 myschema2  | myseq1     | [6056,6057)    | myGroup4  | S        |                |               |                       
 myschema2  | myseq1     | [6057,6146)    | myGroup2  | S        |                |               |                       
 myschema2  | myseq1     | [6148,6150)    | myGroup2  | S        |                |               |                       
 myschema2  | myseq1     | [6152,)        | myGroup2  | S        |                |               |                       
 myschema2  | myseq2     | [6148,6150)    | myGroup2  | S        |                |               |                       
 myschema2  | myseq2     | [6152,)        | myGroup2  | S        |                |               |                       
 myschema2  | mytbl1     | [6008,6145)    | myGroup2  | r        | emaj_myschema2 | mytbl1_log_1  |                      1
 myschema2  | mytbl1     | [6147,6149)    | myGroup2  | r        | emaj_myschema2 | mytbl1_log_2  |                      2
 myschema2  | mytbl1     | [6151,)        | myGroup2  | r        | emaj_myschema2 | mytbl1_log    |                       
 myschema2  | mytbl2     | [6008,6145)    | myGroup2  | r        | emaj_myschema2 | mytbl2_log_1  |                      0
 myschema2  | mytbl2     | [6147,6149)    | myGroup2  | r        | emaj_myschema2 | mytbl2_log_2  |                      0
 myschema2  | mytbl2     | [6151,)        | myGroup2  | r        | emaj_myschema2 | mytbl2_log    |                       
(16 rows)

select sequ_schema, sequ_name, sequ_time_id, sequ_last_val, sequ_is_called from emaj.emaj_sequence
  where sequ_schema = 'myschema2' and sequ_name like 'myseq%' order by sequ_name, sequ_time_id;
 sequ_schema | sequ_name | sequ_time_id | sequ_last_val | sequ_is_called 
-------------+-----------+--------------+---------------+----------------
 myschema2   | myseq1    |         6144 |          1000 | f
 myschema2   | myseq1    |         6145 |          1000 | t
 myschema2   | myseq1    |         6146 |          1000 | t
 myschema2   | myseq1    |         6148 |          1000 | t
 myschema2   | myseq1    |         6149 |          1001 | t
 myschema2   | myseq1    |         6150 |          1001 | t
 myschema2   | myseq1    |         6152 |          1001 | t
 myschema2   | myseq2    |         6148 |             3 | f
 myschema2   | myseq2    |         6149 |             3 | f
 myschema2   | myseq2    |         6150 |             3 | f
 myschema2   | myseq2    |         6152 |             3 | f
(11 rows)

select tbl_schema, tbl_name, tbl_time_id, tbl_log_seq_last_val from emaj.emaj_table
  where tbl_schema = 'myschema2' and tbl_name = 'mytbl1' order by tbl_time_id;
 tbl_schema | tbl_name | tbl_time_id | tbl_log_seq_last_val 
------------+----------+-------------+----------------------
 myschema2  | mytbl1   |        6144 |                    0
 myschema2  | mytbl1   |        6145 |                    1
 myschema2  | mytbl1   |        6147 |                    1
 myschema2  | mytbl1   |        6148 |                    1
 myschema2  | mytbl1   |        6149 |                    2
 myschema2  | mytbl1   |        6151 |                    2
 myschema2  | mytbl1   |        6152 |                    2
(7 rows)

-----------------------------
-- change group ownership for some tables and sequences without updating emaj_group_def
-----------------------------
-- from an idle to a logging group
select emaj.emaj_move_tables('myschema4','.*','','myGroup1','MOVE_TBL_idle_to_logging');
 emaj_move_tables 
------------------
                5
(1 row)

select emaj.emaj_move_sequences('myschema2','.*','','myGroup1','MOVE_SEQ_idle_to_logging');
 emaj_move_sequences 
---------------------
                   3
(1 row)

-- bad mark
select emaj.emaj_move_tables('myschema4','.*','','myGroup2',emaj.emaj_get_previous_mark_group('myGroup1',now()));
ERROR:  _check_new_mark: The groups "myGroup1, myGroup2" already contain a mark named "MOVE_SEQ_idle_to_logging".
CONTEXT:  PL/pgSQL function emaj._check_new_mark(text[],text) line 29 at RAISE
SQL statement "SELECT emaj._check_new_mark(v_loggingGroups, v_mark)"
PL/pgSQL function emaj._move_tables(text,text[],text,text,boolean,boolean) line 76 at SQL statement
PL/pgSQL function emaj.emaj_move_tables(text,text,text,text,text) line 23 at RETURN
select emaj.emaj_move_sequences('myschema2','.*','','myGroup2',emaj.emaj_get_previous_mark_group('myGroup1',now()));
ERROR:  _check_new_mark: The groups "myGroup1, myGroup2" already contain a mark named "MOVE_SEQ_idle_to_logging".
CONTEXT:  PL/pgSQL function emaj._check_new_mark(text[],text) line 29 at RAISE
SQL statement "SELECT emaj._check_new_mark(v_loggingGroups, v_mark)"
PL/pgSQL function emaj._move_sequences(text,text[],text,text,boolean,boolean) line 75 at SQL statement
PL/pgSQL function emaj.emaj_move_sequences(text,text,text,text,text) line 23 at RETURN
-- from a logging group to another logging group
select emaj.emaj_move_tables('myschema4','.*','','myGroup2','MOVE_TBL_logging_to_logging');
 emaj_move_tables 
------------------
                5
(1 row)

select emaj.emaj_move_sequences('myschema2','.*','','myGroup2','MOVE_SEQ_logging_to_logging');
 emaj_move_sequences 
---------------------
                   3
(1 row)

-- reset an idle group to check the emaj_sequence cleaning
begin;
  select emaj.emaj_reset_group('myGroup4');
 emaj_reset_group 
------------------
                0
(1 row)

  select rel_group, count(*) from emaj.emaj_sequence, emaj.emaj_relation
    where sequ_schema = rel_schema and sequ_name = rel_tblseq and sequ_time_id <@ rel_time_range
      and sequ_schema = 'myschema2' and sequ_name = 'myseq1'
    group by 1;
 rel_group | count 
-----------+-------
 myGroup1  |     2
 myGroup2  |     6
(2 rows)

rollback;
-- and back to the idle group
select emaj.emaj_move_tables('myschema4','.*','','myGroup4','MOVE_TBL_logging_to_idle');
 emaj_move_tables 
------------------
                5
(1 row)

select emaj.emaj_move_sequences('myschema2','.*','','myGroup4','MOVE_SEQ_logging_to_idle');
 emaj_move_sequences 
---------------------
                   3
(1 row)

-- move a table with fkey and verify all
select emaj.emaj_move_table('myschema2','mytbl2','myGroup1','Move a table with fkey');
 emaj_move_table 
-----------------
               1
(1 row)

select * from emaj.emaj_verify_all();
                                                                                       emaj_verify_all                                                                                        
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Error: In the group "myGroup2", the log table "emaj_myschema2"."mytbl1_log_2" is not found.
 Warning: In the group "myGroup4", the sequence "myschema2"."myTbl3_col31_seq" is linked to the table "myschema2"."myTbl3" but this table belongs to another tables group (myGroup2).
 Warning: In the group "myGroup2", the foreign key "mytbl4_col43_fkey" on the table "myschema2"."mytbl4" references the table "myschema2"."mytbl2" that belongs to another group ("myGroup1")
 Warning: In the group "myGroup2", the foreign key "mytbl6_col61_fkey" on the table "myschema2"."mytbl6" references the table "myschema2"."mytbl7" that does not belong to any group.
 Warning: In the group "myGroup2", the table "myschema2"."mytbl6" is referenced by the foreign key "mytbl8_col81_fkey" of the table "myschema2"."mytbl8" that does not belong to any group.
(5 rows)

select emaj.emaj_move_table('myschema2','mytbl2','myGroup2','Move a table with fkey back');
 emaj_move_table 
-----------------
               1
(1 row)

-----------------------------
-- change priority and tablespaces attributes without updating emaj_group_def
-----------------------------
-- bad mark
select emaj.emaj_modify_table('myschema1','mytbl1','{"priority":31}'::jsonb,emaj.emaj_get_previous_mark_group('myGroup1',now()));
ERROR:  _check_new_mark: The group "myGroup1" already contains a mark named "Move a table with fkey back".
CONTEXT:  PL/pgSQL function emaj._check_new_mark(text[],text) line 27 at RAISE
SQL statement "SELECT emaj._check_new_mark(v_loggingGroups, v_mark)"
PL/pgSQL function emaj._modify_tables(text,text[],jsonb,text,boolean,boolean) line 98 at SQL statement
PL/pgSQL function emaj.emaj_modify_table(text,text,jsonb,text) line 7 at RETURN
-- change the priority
select emaj.emaj_modify_table('myschema1','mytbl1','{"priority":31}'::jsonb,'Priority dynamically changed');
 emaj_modify_table 
-------------------
                 1
(1 row)

-- change the log data tablespace and the log index tablespace for different tables
set default_tablespace = tspemaj_renamed;
select emaj.emaj_modify_tables('myschema1','{"mytbl2b"}','{"log_data_tablespace":null}'::jsonb,'Log data tablespace dynamically changed');
 emaj_modify_tables 
--------------------
                  1
(1 row)

select emaj.emaj_modify_tables('myschema2','.*6','','{"log_index_tablespace":"tsplog1"}'::jsonb,'Log index tablespace dynamically changed');
 emaj_modify_tables 
--------------------
                  1
(1 row)

reset default_tablespace;
-- change the priority back
select emaj.emaj_modify_table('myschema1','mytbl1','{"priority":20}'::jsonb);
 emaj_modify_table 
-------------------
                 1
(1 row)

-- change the tablespaces back
select emaj.emaj_modify_tables('myschema1','{"mytbl2b"}','{"log_data_tablespace":"tsp log''2"}'::jsonb);
 emaj_modify_tables 
--------------------
                  1
(1 row)

select emaj.emaj_modify_tables('myschema2','.*6','','{"log_index_tablespace":null}'::jsonb);
 emaj_modify_tables 
--------------------
                  1
(1 row)

-----------------------------
-- test end: check
-----------------------------
select emaj.emaj_stop_group('myGroup1');
 emaj_stop_group 
-----------------
               7
(1 row)

select emaj.emaj_drop_group('myGroup1');
 emaj_drop_group 
-----------------
               7
(1 row)

select emaj.emaj_stop_group('myGroup2');
 emaj_stop_group 
-----------------
               6
(1 row)

select emaj.emaj_drop_group('myGroup2');
NOTICE:  table "mytbl1_log_2" does not exist, skipping
 emaj_drop_group 
-----------------
               6
(1 row)

select emaj.emaj_drop_group('myGroup4');
 emaj_drop_group 
-----------------
               8
(1 row)

select nspname from pg_namespace where nspname like 'emaj%' order by nspname;
 nspname 
---------
 emaj
(1 row)

select sch_name from emaj.emaj_schema order by 1;
 sch_name 
----------
 emaj
(1 row)

select hist_function, hist_event, hist_object,
       regexp_replace(regexp_replace(regexp_replace(hist_wording,
            E'\\d\\d\.\\d\\d\\.\\d\\d\\.\\d\\d\\d\\d','%','g'),
            E'\\d\\d\\d\\d/\\d\\d\\/\\d\\d\\ \\d\\d\\:\\d\\d:\\d\\d .*?\\)','<timestamp>)','g'),
            E'\\[.+\\]','(timestamp)','g'), 
       hist_user 
  from emaj.emaj_hist where hist_id > 6000 order by hist_id;
      hist_function      |          hist_event          |         hist_object          |                                                     regexp_replace                                                     | hist_user 
-------------------------+------------------------------+------------------------------+------------------------------------------------------------------------------------------------------------------------+-----------
 LOCK_GROUP              | BEGIN                        | myGroup1                     |                                                                                                                        | postgres
 LOCK_GROUP              | END                          | myGroup1                     | 5 tables locked, 0 deadlock(s)                                                                                         | postgres
 SET_MARK_GROUP          | BEGIN                        | myGroup1                     | STOP_%                                                                                                                 | postgres
 SET_MARK_GROUP          | END                          | myGroup1                     | STOP_%                                                                                                                 | postgres
 STOP_GROUP              | END                          | myGroup1                     | 7 tables/sequences processed                                                                                           | postgres
 RESET_GROUP             | BEGIN                        | myGroup1                     |                                                                                                                        | postgres
 RESET_GROUP             | END                          | myGroup1                     | 7 tables/sequences processed                                                                                           | postgres
 DROP_GROUP              | BEGIN                        | myGroup1                     |                                                                                                                        | postgres
 DROP_GROUP              | LOG_SCHEMA DROPPED           | emaj_myschema1               |                                                                                                                        | postgres
 DROP_GROUP              | END                          | myGroup1                     | 7 tables/sequences processed                                                                                           | postgres
 FORCE_DROP_GROUP        | BEGIN                        | myGroup2                     |                                                                                                                        | postgres
 FORCE_DROP_GROUP        | LOG_SCHEMA DROPPED           | emaj_myschema2               |                                                                                                                        | postgres
 FORCE_DROP_GROUP        | END                          | myGroup2                     | 8 tables/sequences processed                                                                                           | postgres
 STOP_GROUP              | BEGIN                        | phil's group#3",             |                                                                                                                        | postgres
 LOCK_GROUP              | BEGIN                        | phil's group#3",             |                                                                                                                        | postgres
 LOCK_GROUP              | END                          | phil's group#3",             | 2 tables locked, 0 deadlock(s)                                                                                         | postgres
 SET_MARK_GROUP          | BEGIN                        | phil's group#3",             | Simple stop mark                                                                                                       | postgres
 SET_MARK_GROUP          | END                          | phil's group#3",             | Simple stop mark                                                                                                       | postgres
 STOP_GROUP              | END                          | phil's group#3",             | 4 tables/sequences processed                                                                                           | postgres
 DROP_GROUP              | BEGIN                        | phil's group#3",             |                                                                                                                        | postgres
 DROP_GROUP              | LOG_SCHEMA DROPPED           | "emaj_phil's schema3"        |                                                                                                                        | postgres
 DROP_GROUP              | END                          | phil's group#3",             | 4 tables/sequences processed                                                                                           | postgres
 FORCE_STOP_GROUP        | BEGIN                        | myGroup4                     |                                                                                                                        | postgres
 LOCK_GROUP              | BEGIN                        | myGroup4                     |                                                                                                                        | postgres
 LOCK_GROUP              | END                          | myGroup4                     | 5 tables locked, 0 deadlock(s)                                                                                         | postgres
 FORCE_STOP_GROUP        | END                          | myGroup4                     | 5 tables/sequences processed                                                                                           | postgres
 DROP_GROUP              | BEGIN                        | myGroup4                     |                                                                                                                        | postgres
 DROP_GROUP              | LOG_SCHEMA DROPPED           | emaj_myschema4               |                                                                                                                        | postgres
 DROP_GROUP              | END                          | myGroup4                     | 5 tables/sequences processed                                                                                           | postgres
 FORCE_STOP_GROUP        | BEGIN                        | emptyGroup                   |                                                                                                                        | postgres
 LOCK_GROUP              | BEGIN                        | emptyGroup                   |                                                                                                                        | postgres
 LOCK_GROUP              | END                          | emptyGroup                   | 0 tables locked, 0 deadlock(s)                                                                                         | postgres
 FORCE_STOP_GROUP        | END                          | emptyGroup                   | 0 tables/sequences processed                                                                                           | postgres
 DROP_GROUP              | BEGIN                        | emptyGroup                   |                                                                                                                        | postgres
 DROP_GROUP              | END                          | emptyGroup                   | 0 tables/sequences processed                                                                                           | postgres
 CREATE_GROUP            | BEGIN                        | myGroup1                     | rollbackable                                                                                                           | postgres
 CREATE_GROUP            | LOG_SCHEMA CREATED           | emaj_myschema1               |                                                                                                                        | postgres
 CREATE_GROUP            | END                          | myGroup1                     | 7 tables/sequences processed                                                                                           | postgres
 CREATE_GROUP            | BEGIN                        | myGroup2                     | rollbackable                                                                                                           | postgres
 CREATE_GROUP            | LOG_SCHEMA CREATED           | emaj_myschema2               |                                                                                                                        | postgres
 CREATE_GROUP            | END                          | myGroup2                     | 8 tables/sequences processed                                                                                           | postgres
 CREATE_GROUP            | BEGIN                        | emptyGroup                   | rollbackable                                                                                                           | postgres
 CREATE_GROUP            | END                          | emptyGroup                   | 0 tables/sequences processed                                                                                           | postgres
 CREATE_GROUP            | BEGIN                        | myGroup4                     | rollbackable                                                                                                           | postgres
 CREATE_GROUP            | LOG_SCHEMA CREATED           | emaj_myschema4               |                                                                                                                        | postgres
 CREATE_GROUP            | END                          | myGroup4                     | 5 tables/sequences processed                                                                                           | postgres
 ALTER_GROUP             | BEGIN                        | emptyGroup                   |                                                                                                                        | postgres
 ALTER_GROUP             | END                          | emptyGroup                   | Timestamp Id : 6013                                                                                                    | postgres
 ALTER_GROUP             | BEGIN                        | myGroup1                     |                                                                                                                        | postgres
 ALTER_GROUP             | END                          | myGroup1                     | Timestamp Id : 6014                                                                                                    | postgres
 ALTER_GROUP             | BEGIN                        | myGroup1                     |                                                                                                                        | postgres
 ALTER_GROUP             | TABLE REMOVED                | myschema1."myTbl3"           | From the idle group myGroup1                                                                                           | postgres
 ALTER_GROUP             | TABLE REMOVED                | myschema1.mytbl4             | From the idle group myGroup1                                                                                           | postgres
 ALTER_GROUP             | TABLE REMOVED                | myschema1.mytbl2b            | From the idle group myGroup1                                                                                           | postgres
 ALTER_GROUP             | END                          | myGroup1                     | Timestamp Id : 6015                                                                                                    | postgres
 ALTER_GROUP             | BEGIN                        | myGroup1                     |                                                                                                                        | postgres
 ALTER_GROUP             | SEQUENCE REMOVED             | myschema1."myTbl3_col31_seq" | From the idle group myGroup1                                                                                           | postgres
 ALTER_GROUP             | END                          | myGroup1                     | Timestamp Id : 6016                                                                                                    | postgres
 ALTER_GROUP             | BEGIN                        | myGroup1                     |                                                                                                                        | postgres
 ALTER_GROUP             | TABLE ADDED                  | myschema1."myTbl3"           | To the idle group myGroup1                                                                                             | postgres
 ALTER_GROUP             | TABLE ADDED                  | myschema1.mytbl4             | To the idle group myGroup1                                                                                             | postgres
 ALTER_GROUP             | TABLE ADDED                  | myschema1.mytbl2b            | To the idle group myGroup1                                                                                             | postgres
 ALTER_GROUP             | END                          | myGroup1                     | Timestamp Id : 6017                                                                                                    | postgres
 ALTER_GROUP             | BEGIN                        | myGroup1                     |                                                                                                                        | postgres
 ALTER_GROUP             | SEQUENCE ADDED               | myschema1."myTbl3_col31_seq" | To the idle group myGroup1                                                                                             | postgres
 ALTER_GROUP             | END                          | myGroup1                     | Timestamp Id : 6018                                                                                                    | postgres
 ALTER_GROUP             | BEGIN                        | myGroup1                     |                                                                                                                        | postgres
 ALTER_GROUP             | LOG DATA TABLESPACE CHANGED  | myschema1.mytbl2b            | tsp log'2 => Default tablespace                                                                                        | postgres
 ALTER_GROUP             | END                          | myGroup1                     | Timestamp Id : 6019                                                                                                    | postgres
 ALTER_GROUP             | BEGIN                        | myGroup1                     |                                                                                                                        | postgres
 ALTER_GROUP             | LOG DATA TABLESPACE CHANGED  | myschema1.mytbl2b            | Default tablespace => tsp log'2                                                                                        | postgres
 ALTER_GROUP             | END                          | myGroup1                     | Timestamp Id : 6020                                                                                                    | postgres
 ALTER_GROUP             | BEGIN                        | myGroup1                     |                                                                                                                        | postgres
 ALTER_GROUP             | LOG DATA TABLESPACE CHANGED  | myschema1."myTbl3"           | tsplog1 => tsp log'2                                                                                                   | postgres
 ALTER_GROUP             | LOG DATA TABLESPACE CHANGED  | myschema1.mytbl1             | Default tablespace => tsplog1                                                                                          | postgres
 ALTER_GROUP             | LOG DATA TABLESPACE CHANGED  | myschema1.mytbl4             | tsplog1 => tsp log'2                                                                                                   | postgres
 ALTER_GROUP             | LOG DATA TABLESPACE CHANGED  | myschema1.mytbl2             | tsplog1 => tsp log'2                                                                                                   | postgres
 ALTER_GROUP             | LOG DATA TABLESPACE CHANGED  | myschema1.mytbl2b            | tsp log'2 => Default tablespace                                                                                        | postgres
 ALTER_GROUP             | END                          | myGroup1                     | Timestamp Id : 6021                                                                                                    | postgres
 ALTER_GROUP             | BEGIN                        | myGroup1                     |                                                                                                                        | postgres
 ALTER_GROUP             | LOG DATA TABLESPACE CHANGED  | myschema1."myTbl3"           | tsp log'2 => tsplog1                                                                                                   | postgres
 ALTER_GROUP             | LOG DATA TABLESPACE CHANGED  | myschema1.mytbl1             | tsplog1 => Default tablespace                                                                                          | postgres
 ALTER_GROUP             | LOG DATA TABLESPACE CHANGED  | myschema1.mytbl4             | tsp log'2 => tsplog1                                                                                                   | postgres
 ALTER_GROUP             | LOG DATA TABLESPACE CHANGED  | myschema1.mytbl2             | tsp log'2 => tsplog1                                                                                                   | postgres
 ALTER_GROUP             | LOG DATA TABLESPACE CHANGED  | myschema1.mytbl2b            | Default tablespace => tsp log'2                                                                                        | postgres
 ALTER_GROUP             | END                          | myGroup1                     | Timestamp Id : 6022                                                                                                    | postgres
 ALTER_GROUP             | BEGIN                        | myGroup1                     |                                                                                                                        | postgres
 ALTER_GROUP             | LOG INDEX TABLESPACE CHANGED | myschema1.mytbl2b            | tsp log'2 => Default tablespace                                                                                        | postgres
 ALTER_GROUP             | END                          | myGroup1                     | Timestamp Id : 6023                                                                                                    | postgres
 ALTER_GROUP             | BEGIN                        | myGroup1                     |                                                                                                                        | postgres
 ALTER_GROUP             | LOG INDEX TABLESPACE CHANGED | myschema1.mytbl2b            | Default tablespace => tsp log'2                                                                                        | postgres
 ALTER_GROUP             | END                          | myGroup1                     | Timestamp Id : 6024                                                                                                    | postgres
 ALTER_GROUP             | BEGIN                        | myGroup1                     |                                                                                                                        | postgres
 ALTER_GROUP             | PRIORITY CHANGED             | myschema1.mytbl1             | 2 => 3                                                                                                                 | postgres
 ALTER_GROUP             | END                          | myGroup1                     | Timestamp Id : 6025                                                                                                    | postgres
 ALTER_GROUP             | BEGIN                        | myGroup1                     |                                                                                                                        | postgres
 ALTER_GROUP             | PRIORITY CHANGED             | myschema1.mytbl1             | 3 => NULL                                                                                                              | postgres
 ALTER_GROUP             | END                          | myGroup1                     | Timestamp Id : 6026                                                                                                    | postgres
 ALTER_GROUP             | BEGIN                        | myGroup1                     |                                                                                                                        | postgres
 ALTER_GROUP             | PRIORITY CHANGED             | myschema1.mytbl1             | NULL => 2                                                                                                              | postgres
 ALTER_GROUP             | END                          | myGroup1                     | Timestamp Id : 6027                                                                                                    | postgres
 ALTER_GROUP             | BEGIN                        | myGroup1                     |                                                                                                                        | postgres
 ALTER_GROUP             | END                          | myGroup1                     | Timestamp Id : 6028                                                                                                    | postgres
 ALTER_GROUP             | BEGIN                        | myGroup1                     |                                                                                                                        | postgres
 ALTER_GROUP             | END                          | myGroup1                     | Timestamp Id : 6029                                                                                                    | postgres
 ALTER_GROUP             | BEGIN                        | myGroup1                     |                                                                                                                        | postgres
 ALTER_GROUP             | END                          | myGroup1                     | Timestamp Id : 6030                                                                                                    | postgres
 ALTER_GROUP             | BEGIN                        | myGroup1                     |                                                                                                                        | postgres
 ALTER_GROUP             | END                          | myGroup1                     | Timestamp Id : 6031                                                                                                    | postgres
 ALTER_GROUP             | BEGIN                        | myGroup1                     |                                                                                                                        | postgres
 ALTER_GROUP             | END                          | myGroup1                     | Timestamp Id : 6032                                                                                                    | postgres
 ALTER_GROUP             | BEGIN                        | myGroup1                     |                                                                                                                        | postgres
 ALTER_GROUP             | TABLE REMOVED                | myschema1.mytbl1             | From the idle group myGroup1                                                                                           | postgres
 ALTER_GROUP             | TABLE ADDED                  | myschema1.mytbl1_new_name    | To the idle group myGroup1                                                                                             | postgres
 ALTER_GROUP             | END                          | myGroup1                     | Timestamp Id : 6033                                                                                                    | postgres
 ALTER_GROUP             | BEGIN                        | myGroup1                     |                                                                                                                        | postgres
 ALTER_GROUP             | LOG_SCHEMA CREATED           | emaj_public                  |                                                                                                                        | postgres
 ALTER_GROUP             | TABLE REMOVED                | myschema1.mytbl1_new_name    | From the idle group myGroup1                                                                                           | postgres
 ALTER_GROUP             | TABLE ADDED                  | public.mytbl1_new_name       | To the idle group myGroup1                                                                                             | postgres
 ALTER_GROUP             | END                          | myGroup1                     | Timestamp Id : 6034                                                                                                    | postgres
 ALTER_GROUP             | BEGIN                        | myGroup1                     |                                                                                                                        | postgres
 ALTER_GROUP             | TABLE REMOVED                | public.mytbl1_new_name       | From the idle group myGroup1                                                                                           | postgres
 ALTER_GROUP             | TABLE ADDED                  | myschema1.mytbl1             | To the idle group myGroup1                                                                                             | postgres
 ALTER_GROUP             | LOG_SCHEMA DROPPED           | emaj_public                  |                                                                                                                        | postgres
 ALTER_GROUP             | END                          | myGroup1                     | Timestamp Id : 6035                                                                                                    | postgres
 DISABLE_PROTECTION      | EVENT TRIGGERS DISABLED      |                              | emaj_protection_trg, emaj_sql_drop_trg, emaj_table_rewrite_trg                                                         | postgres
 ALTER_GROUP             | BEGIN                        | myGroup1                     |                                                                                                                        | postgres
 ALTER_GROUP             | END                          | myGroup1                     | Timestamp Id : 6036                                                                                                    | postgres
 ALTER_GROUP             | BEGIN                        | myGroup1                     |                                                                                                                        | postgres
 ALTER_GROUP             | END                          | myGroup1                     | Timestamp Id : 6037                                                                                                    | postgres
 ALTER_GROUP             | BEGIN                        | myGroup1                     |                                                                                                                        | postgres
 ALTER_GROUP             | END                          | myGroup1                     | Timestamp Id : 6038                                                                                                    | postgres
 ENABLE_PROTECTION       | EVENT TRIGGERS ENABLED       |                              | emaj_protection_trg, emaj_sql_drop_trg, emaj_table_rewrite_trg                                                         | postgres
 ALTER_GROUPS            | BEGIN                        |                              |                                                                                                                        | postgres
 ALTER_GROUPS            | END                          |                              |                                                                                                                        | postgres
 ALTER_GROUPS            | BEGIN                        | myGroup1,myGroup2            |                                                                                                                        | postgres
 ALTER_GROUPS            | TABLE REMOVED                | myschema1."myTbl3"           | From the idle group myGroup1                                                                                           | postgres
 ALTER_GROUPS            | TABLE REMOVED                | myschema1.mytbl2b            | From the idle group myGroup1                                                                                           | postgres
 ALTER_GROUPS            | TABLE REMOVED                | myschema2.mytbl4             | From the idle group myGroup2                                                                                           | postgres
 ALTER_GROUPS            | SEQUENCE REMOVED             | myschema1."myTbl3_col31_seq" | From the idle group myGroup1                                                                                           | postgres
 ALTER_GROUPS            | END                          | myGroup1,myGroup2            | Timestamp Id : 6041                                                                                                    | postgres
 ALTER_GROUPS            | BEGIN                        | myGroup1,myGroup2            |                                                                                                                        | postgres
 ALTER_GROUPS            | TABLE ADDED                  | myschema1."myTbl3"           | To the idle group myGroup1                                                                                             | postgres
 ALTER_GROUPS            | TABLE ADDED                  | myschema1.mytbl2b            | To the idle group myGroup1                                                                                             | postgres
 ALTER_GROUPS            | TABLE ADDED                  | myschema2.mytbl4             | To the idle group myGroup2                                                                                             | postgres
 ALTER_GROUPS            | SEQUENCE ADDED               | myschema1."myTbl3_col31_seq" | To the idle group myGroup1                                                                                             | postgres
 ALTER_GROUPS            | END                          | myGroup1,myGroup2            | Timestamp Id : 6042                                                                                                    | postgres
 ALTER_GROUPS            | BEGIN                        | myGroup1,myGroup2            |                                                                                                                        | postgres
 ALTER_GROUPS            | LOG DATA TABLESPACE CHANGED  | myschema1.mytbl2b            | tsp log'2 => Default tablespace                                                                                        | postgres
 ALTER_GROUPS            | LOG INDEX TABLESPACE CHANGED | myschema2.mytbl6             | Default tablespace => tsplog1                                                                                          | postgres
 ALTER_GROUPS            | PRIORITY CHANGED             | myschema1.mytbl1             | 2 => 3                                                                                                                 | postgres
 ALTER_GROUPS            | END                          | myGroup1,myGroup2            | Timestamp Id : 6043                                                                                                    | postgres
 ALTER_GROUPS            | BEGIN                        | myGroup1,myGroup2            |                                                                                                                        | postgres
 ALTER_GROUPS            | LOG DATA TABLESPACE CHANGED  | myschema1.mytbl2b            | Default tablespace => tsp log'2                                                                                        | postgres
 ALTER_GROUPS            | LOG INDEX TABLESPACE CHANGED | myschema2.mytbl6             | tsplog1 => Default tablespace                                                                                          | postgres
 ALTER_GROUPS            | PRIORITY CHANGED             | myschema1.mytbl1             | 3 => 2                                                                                                                 | postgres
 ALTER_GROUPS            | END                          | myGroup1,myGroup2            | Timestamp Id : 6044                                                                                                    | postgres
 ALTER_GROUPS            | BEGIN                        | myGroup1,myGroup2            |                                                                                                                        | postgres
 ALTER_GROUPS            | TABLE MOVED                  | myschema2."myTbl3"           | From the idle group myGroup2 to the idle group myGroup1                                                                | postgres
 ALTER_GROUPS            | SEQUENCE MOVED               | myschema2."myTbl3_col31_seq" | From the idle group myGroup2 to the idle group myGroup1                                                                | postgres
 ALTER_GROUPS            | END                          | myGroup1,myGroup2            | Timestamp Id : 6045                                                                                                    | postgres
 ALTER_GROUPS            | BEGIN                        | myGroup1,myGroup2            |                                                                                                                        | postgres
 ALTER_GROUPS            | TABLE MOVED                  | myschema2."myTbl3"           | From the idle group myGroup1 to the idle group myGroup2                                                                | postgres
 ALTER_GROUPS            | SEQUENCE MOVED               | myschema2."myTbl3_col31_seq" | From the idle group myGroup1 to the idle group myGroup2                                                                | postgres
 ALTER_GROUPS            | END                          | myGroup1,myGroup2            | Timestamp Id : 6046                                                                                                    | postgres
 MOVE_TABLE              | BEGIN                        |                              |                                                                                                                        | postgres
 MOVE_TABLE              | END                          |                              | 0 tables moved to the new tables group myGroup1                                                                        | postgres
 MOVE_TABLE              | BEGIN                        |                              |                                                                                                                        | postgres
 MOVE_TABLE              | TABLE MOVED                  | myschema1.mytbl1             | From the idle group myGroup1 to the idle group myGroup2                                                                | postgres
 MOVE_TABLE              | END                          |                              | 1 tables moved to the new tables group myGroup2                                                                        | postgres
 MOVE_TABLES             | BEGIN                        |                              |                                                                                                                        | postgres
 MOVE_TABLES             | END                          |                              | 0 tables moved to the new tables group myGroup1                                                                        | postgres
 MOVE_TABLES             | BEGIN                        |                              |                                                                                                                        | postgres
 MOVE_TABLES             | END                          |                              | 0 tables moved to the new tables group myGroup1                                                                        | postgres
 MOVE_TABLES             | BEGIN                        |                              |                                                                                                                        | postgres
 MOVE_TABLES             | END                          |                              | 0 tables moved to the new tables group myGroup1                                                                        | postgres
 MOVE_TABLES             | BEGIN                        |                              |                                                                                                                        | postgres
 MOVE_TABLES             | TABLE MOVED                  | myschema1.mytbl2             | From the idle group myGroup1 to the idle group myGroup2                                                                | postgres
 MOVE_TABLES             | TABLE MOVED                  | myschema1.mytbl2b            | From the idle group myGroup1 to the idle group myGroup2                                                                | postgres
 MOVE_TABLES             | END                          |                              | 2 tables moved to the new tables group myGroup2                                                                        | postgres
 MOVE_TABLES             | BEGIN                        |                              |                                                                                                                        | postgres
 MOVE_TABLES             | END                          |                              | 0 tables moved to the new tables group myGroup1                                                                        | postgres
 MOVE_TABLES             | BEGIN                        |                              |                                                                                                                        | postgres
 MOVE_TABLES             | END                          |                              | 0 tables moved to the new tables group myGroup1                                                                        | postgres
 MOVE_TABLES             | BEGIN                        |                              |                                                                                                                        | postgres
 MOVE_TABLES             | END                          |                              | 0 tables moved to the new tables group myGroup1                                                                        | postgres
 MOVE_TABLES             | BEGIN                        |                              |                                                                                                                        | postgres
 MOVE_TABLES             | TABLE MOVED                  | myschema1.mytbl1             | From the idle group myGroup2 to the idle group myGroup1                                                                | postgres
 MOVE_TABLES             | TABLE MOVED                  | myschema1.mytbl2b            | From the idle group myGroup2 to the idle group myGroup1                                                                | postgres
 MOVE_TABLES             | END                          |                              | 2 tables moved to the new tables group myGroup1                                                                        | postgres
 MOVE_TABLES             | BEGIN                        |                              |                                                                                                                        | postgres
 MOVE_TABLES             | TABLE MOVED                  | myschema1.mytbl2             | From the idle group myGroup2 to the idle group myGroup1                                                                | postgres
 MOVE_TABLES             | END                          |                              | 1 tables moved to the new tables group myGroup1                                                                        | postgres
 MOVE_SEQUENCE           | BEGIN                        |                              |                                                                                                                        | postgres
 MOVE_SEQUENCE           | END                          |                              | 0 sequences moved to the new tables group myGroup2                                                                     | postgres
 MOVE_SEQUENCE           | BEGIN                        |                              |                                                                                                                        | postgres
 MOVE_SEQUENCE           | SEQUENCE MOVED               | myschema2.myseq1             | From the idle group myGroup2 to the idle group myGroup1                                                                | postgres
 MOVE_SEQUENCE           | END                          |                              | 1 sequences moved to the new tables group myGroup1                                                                     | postgres
 MOVE_SEQUENCES          | BEGIN                        |                              |                                                                                                                        | postgres
 MOVE_SEQUENCES          | END                          |                              | 0 sequences moved to the new tables group myGroup1                                                                     | postgres
 MOVE_SEQUENCES          | BEGIN                        |                              |                                                                                                                        | postgres
 MOVE_SEQUENCES          | END                          |                              | 0 sequences moved to the new tables group myGroup1                                                                     | postgres
 MOVE_SEQUENCES          | BEGIN                        |                              |                                                                                                                        | postgres
 MOVE_SEQUENCES          | END                          |                              | 0 sequences moved to the new tables group myGroup1                                                                     | postgres
 MOVE_SEQUENCES          | BEGIN                        |                              |                                                                                                                        | postgres
 MOVE_SEQUENCES          | SEQUENCE MOVED               | myschema2.myseq1             | From the idle group myGroup1 to the idle group myGroup4                                                                | postgres
 MOVE_SEQUENCES          | END                          |                              | 1 sequences moved to the new tables group myGroup4                                                                     | postgres
 MOVE_SEQUENCES          | BEGIN                        |                              |                                                                                                                        | postgres
 MOVE_SEQUENCES          | END                          |                              | 0 sequences moved to the new tables group myGroup2                                                                     | postgres
 MOVE_SEQUENCES          | BEGIN                        |                              |                                                                                                                        | postgres
 MOVE_SEQUENCES          | END                          |                              | 0 sequences moved to the new tables group myGroup2                                                                     | postgres
 MOVE_SEQUENCES          | BEGIN                        |                              |                                                                                                                        | postgres
 MOVE_SEQUENCES          | END                          |                              | 0 sequences moved to the new tables group myGroup2                                                                     | postgres
 MOVE_SEQUENCES          | BEGIN                        |                              |                                                                                                                        | postgres
 MOVE_SEQUENCES          | SEQUENCE MOVED               | myschema2.myseq1             | From the idle group myGroup4 to the idle group myGroup2                                                                | postgres
 MOVE_SEQUENCES          | END                          |                              | 1 sequences moved to the new tables group myGroup2                                                                     | postgres
 MODIFY_TABLE            | BEGIN                        |                              |                                                                                                                        | postgres
 MODIFY_TABLE            | PRIORITY CHANGED             | myschema1.mytbl2             | NULL => 1                                                                                                              | postgres
 MODIFY_TABLE            | END                          |                              | 1 tables effectively modified                                                                                          | postgres
 MODIFY_TABLE            | BEGIN                        |                              |                                                                                                                        | postgres
 MODIFY_TABLE            | LOG DATA TABLESPACE CHANGED  | myschema1.mytbl1             | Default tablespace => tsp log'2                                                                                        | postgres
 MODIFY_TABLE            | END                          |                              | 1 tables effectively modified                                                                                          | postgres
 MODIFY_TABLE            | BEGIN                        |                              |                                                                                                                        | postgres
 MODIFY_TABLE            | LOG INDEX TABLESPACE CHANGED | myschema1.mytbl1             | Default tablespace => tsp log'2                                                                                        | postgres
 MODIFY_TABLE            | END                          |                              | 1 tables effectively modified                                                                                          | postgres
 MODIFY_TABLE            | BEGIN                        |                              |                                                                                                                        | postgres
 MODIFY_TABLE            | PRIORITY CHANGED             | myschema1.mytbl2             | 1 => NULL                                                                                                              | postgres
 MODIFY_TABLE            | END                          |                              | 1 tables effectively modified                                                                                          | postgres
 MODIFY_TABLE            | BEGIN                        |                              |                                                                                                                        | postgres
 MODIFY_TABLE            | LOG DATA TABLESPACE CHANGED  | myschema1.mytbl1             | tsp log'2 => Default tablespace                                                                                        | postgres
 MODIFY_TABLE            | LOG INDEX TABLESPACE CHANGED | myschema1.mytbl1             | tsp log'2 => Default tablespace                                                                                        | postgres
 MODIFY_TABLE            | END                          |                              | 1 tables effectively modified                                                                                          | postgres
 MODIFY_TABLES           | BEGIN                        |                              |                                                                                                                        | postgres
 MODIFY_TABLES           | END                          |                              | 0 tables effectively modified                                                                                          | postgres
 MODIFY_TABLES           | BEGIN                        |                              |                                                                                                                        | postgres
 MODIFY_TABLES           | END                          |                              | 0 tables effectively modified                                                                                          | postgres
 MODIFY_TABLES           | BEGIN                        |                              |                                                                                                                        | postgres
 MODIFY_TABLES           | END                          |                              | 0 tables effectively modified                                                                                          | postgres
 MODIFY_TABLES           | BEGIN                        |                              |                                                                                                                        | postgres
 MODIFY_TABLES           | PRIORITY CHANGED             | myschema2.mytbl1             | NULL => 1                                                                                                              | postgres
 MODIFY_TABLES           | LOG DATA TABLESPACE CHANGED  | myschema2.mytbl1             | Default tablespace => tsplog1                                                                                          | postgres
 MODIFY_TABLES           | PRIORITY CHANGED             | myschema2.mytbl2             | NULL => 1                                                                                                              | postgres
 MODIFY_TABLES           | LOG DATA TABLESPACE CHANGED  | myschema2.mytbl2             | Default tablespace => tsplog1                                                                                          | postgres
 MODIFY_TABLES           | END                          |                              | 2 tables effectively modified                                                                                          | postgres
 MODIFY_TABLES           | BEGIN                        |                              |                                                                                                                        | postgres
 MODIFY_TABLES           | END                          |                              | 0 tables effectively modified                                                                                          | postgres
 MODIFY_TABLES           | BEGIN                        |                              |                                                                                                                        | postgres
 MODIFY_TABLES           | END                          |                              | 0 tables effectively modified                                                                                          | postgres
 MODIFY_TABLES           | BEGIN                        |                              |                                                                                                                        | postgres
 MODIFY_TABLES           | END                          |                              | 0 tables effectively modified                                                                                          | postgres
 MODIFY_TABLES           | BEGIN                        |                              |                                                                                                                        | postgres
 MODIFY_TABLES           | PRIORITY CHANGED             | myschema2.mytbl1             | 1 => NULL                                                                                                              | postgres
 MODIFY_TABLES           | LOG DATA TABLESPACE CHANGED  | myschema2.mytbl1             | tsplog1 => Default tablespace                                                                                          | postgres
 MODIFY_TABLES           | PRIORITY CHANGED             | myschema2.mytbl2             | 1 => NULL                                                                                                              | postgres
 MODIFY_TABLES           | LOG DATA TABLESPACE CHANGED  | myschema2.mytbl2             | tsplog1 => Default tablespace                                                                                          | postgres
 MODIFY_TABLES           | END                          |                              | 2 tables effectively modified                                                                                          | postgres
 START_GROUPS            | BEGIN                        | myGroup1,myGroup2            | With log reset                                                                                                         | postgres
 LOCK_GROUPS             | BEGIN                        | myGroup1,myGroup2            |                                                                                                                        | postgres
 LOCK_GROUPS             | END                          | myGroup1,myGroup2            | 11 tables locked, 0 deadlock(s)                                                                                        | postgres
 SET_MARK_GROUPS         | BEGIN                        | myGroup1,myGroup2            | Mk1                                                                                                                    | postgres
 SET_MARK_GROUPS         | END                          | myGroup1,myGroup2            | Mk1                                                                                                                    | postgres
 START_GROUPS            | END                          | myGroup1,myGroup2            | 15 tables/sequences processed                                                                                          | postgres
 ADJUST_GROUP_PROPERTIES |                              | emptyGroup                   | Set the group_has_waiting_changes column to false                                                                      | postgres
 ADJUST_GROUP_PROPERTIES |                              | myGroup1                     | Set the group_has_waiting_changes column to true                                                                       | postgres
 ALTER_GROUP             | BEGIN                        | myGroup1                     |                                                                                                                        | postgres
 LOCK_GROUP              | BEGIN                        | myGroup1                     |                                                                                                                        | postgres
 LOCK_GROUP              | END                          | myGroup1                     | 5 tables locked, 0 deadlock(s)                                                                                         | postgres
 SET_MARK_GROUP          | BEGIN                        | myGroup1                     | Priority Changed                                                                                                       | postgres
 SET_MARK_GROUP          | END                          | myGroup1                     | Priority Changed                                                                                                       | postgres
 ALTER_GROUP             | PRIORITY CHANGED             | myschema1.mytbl1             | 2 => 3                                                                                                                 | postgres
 ALTER_GROUP             | END                          | myGroup1                     | Timestamp Id : 6066                                                                                                    | postgres
 ADJUST_GROUP_PROPERTIES |                              | myGroup1                     | Set the group_has_waiting_changes column to true                                                                       | postgres
 ALTER_GROUPS            | BEGIN                        | myGroup1,myGroup2            |                                                                                                                        | postgres
 LOCK_GROUPS             | BEGIN                        | myGroup1,myGroup2            |                                                                                                                        | postgres
 LOCK_GROUPS             | END                          | myGroup1,myGroup2            | 11 tables locked, 0 deadlock(s)                                                                                        | postgres
 SET_MARK_GROUPS         | BEGIN                        | myGroup1,myGroup2            | Attributes_changed                                                                                                     | postgres
 SET_MARK_GROUPS         | END                          | myGroup1,myGroup2            | Attributes_changed                                                                                                     | postgres
 ALTER_GROUPS            | LOG DATA TABLESPACE CHANGED  | myschema1.mytbl2b            | tsp log'2 => Default tablespace                                                                                        | postgres
 ALTER_GROUPS            | LOG INDEX TABLESPACE CHANGED | myschema2.mytbl6             | Default tablespace => tsplog1                                                                                          | postgres
 ALTER_GROUPS            | END                          | myGroup1,myGroup2            | Timestamp Id : 6067                                                                                                    | postgres
 SET_MARK_GROUPS         | BEGIN                        | myGroup1,myGroup2            | Mk2                                                                                                                    | postgres
 LOCK_GROUPS             | BEGIN                        | myGroup1,myGroup2            |                                                                                                                        | postgres
 LOCK_GROUPS             | END                          | myGroup1,myGroup2            | 11 tables locked, 0 deadlock(s)                                                                                        | postgres
 SET_MARK_GROUPS         | END                          | myGroup1,myGroup2            | Mk2                                                                                                                    | postgres
 ROLLBACK_GROUPS         | BEGIN                        | myGroup1,myGroup2            | Unlogged rollback to mark Mk2 (timestamp)                                                                              | postgres
 DBLINK_OPEN_CNX         |                              | rlbk#1                       | Status = 1                                                                                                             | postgres
 LOCK_GROUP              | BEGIN                        | myGroup1,myGroup2            | Rollback session #1                                                                                                    | postgres
 LOCK_GROUP              | END                          | myGroup1,myGroup2            | Rollback session #1: 11 tables locked, 0 deadlock(s)                                                                   | postgres
 ROLLBACK_TABLE          | BEGIN                        | myschema1."myTbl3"           | All log rows with emaj_gid > 59999 and <= 60001                                                                        | postgres
 ROLLBACK_TABLE          | END                          | myschema1."myTbl3"           | 1 rolled back primary keys                                                                                             | postgres
 ROLLBACK_TABLE          | BEGIN                        | myschema2."myTbl3"           | All log rows with emaj_gid > 59999 and <= 60001                                                                        | postgres
 ROLLBACK_TABLE          | END                          | myschema2."myTbl3"           | 1 rolled back primary keys                                                                                             | postgres
 ROLLBACK_SEQUENCE       |                              | myschema1."myTbl3_col31_seq" |                                                                                                                        | postgres
 ROLLBACK_SEQUENCE       |                              | myschema1.mytbl2b_col20_seq  |                                                                                                                        | postgres
 ROLLBACK_SEQUENCE       |                              | myschema2."myTbl3_col31_seq" |                                                                                                                        | postgres
 ROLLBACK_SEQUENCE       |                              | myschema2.myseq1             |                                                                                                                        | postgres
 ROLLBACK_GROUPS         | NOTICE                       | Rollback id 6000             | 2 / 11 tables effectively processed.                                                                                   | postgres
 ROLLBACK_GROUPS         | NOTICE                       | Rollback id 6000             | 4 sequences processed.                                                                                                 | postgres
 DBLINK_CLOSE_CNX        |                              | rlbk#1                       |                                                                                                                        | postgres
 ROLLBACK_GROUPS         | END                          | myGroup1,myGroup2            | Rollback_id 6000, 2 tables and 4 sequences effectively processed                                                       | postgres
 ALTER_GROUPS            | BEGIN                        | myGroup1,myGroup2            |                                                                                                                        | postgres
 LOCK_GROUPS             | BEGIN                        | myGroup1,myGroup2            |                                                                                                                        | postgres
 LOCK_GROUPS             | END                          | myGroup1,myGroup2            | 11 tables locked, 0 deadlock(s)                                                                                        | postgres
 SET_MARK_GROUPS         | BEGIN                        | myGroup1,myGroup2            | ALTER_%                                                                                                                | postgres
 CLEANUP_RLBK_STATE      |                              | Rollback id 6000             | set to COMMITTED                                                                                                       | postgres
 SET_MARK_GROUPS         | END                          | myGroup1,myGroup2            | ALTER_%                                                                                                                | postgres
 ALTER_GROUPS            | PRIORITY CHANGED             | myschema1.mytbl1             | 3 => 2                                                                                                                 | postgres
 ALTER_GROUPS            | END                          | myGroup1,myGroup2            | Timestamp Id : 6070                                                                                                    | postgres
 ALTER_GROUPS            | BEGIN                        | myGroup1,myGroup2            |                                                                                                                        | postgres
 LOCK_GROUPS             | BEGIN                        | myGroup1,myGroup2            |                                                                                                                        | postgres
 LOCK_GROUPS             | END                          | myGroup1,myGroup2            | 11 tables locked, 0 deadlock(s)                                                                                        | postgres
 SET_MARK_GROUPS         | BEGIN                        | myGroup1,myGroup2            | ALTER_%                                                                                                                | postgres
 SET_MARK_GROUPS         | END                          | myGroup1,myGroup2            | ALTER_%                                                                                                                | postgres
 ALTER_GROUPS            | LOG DATA TABLESPACE CHANGED  | myschema1.mytbl2b            | Default tablespace => tsp log'2                                                                                        | postgres
 ALTER_GROUPS            | LOG INDEX TABLESPACE CHANGED | myschema2.mytbl6             | tsplog1 => Default tablespace                                                                                          | postgres
 ALTER_GROUPS            | END                          | myGroup1,myGroup2            | Timestamp Id : 6071                                                                                                    | postgres
 SET_MARK_GROUP          | BEGIN                        | myGroup2                     |                                                                                                                        | postgres
 LOCK_GROUP              | BEGIN                        | myGroup2                     |                                                                                                                        | postgres
 LOCK_GROUP              | END                          | myGroup2                     | 6 tables locked, 0 deadlock(s)                                                                                         | postgres
 SET_MARK_GROUP          | END                          | myGroup2                     | ADD_SEQ test                                                                                                           | postgres
 SET_MARK_GROUP          | BEGIN                        | myGroup2                     |                                                                                                                        | postgres
 LOCK_GROUP              | BEGIN                        | myGroup2                     |                                                                                                                        | postgres
 LOCK_GROUP              | END                          | myGroup2                     | 6 tables locked, 0 deadlock(s)                                                                                         | postgres
 SET_MARK_GROUP          | END                          | myGroup2                     | Before ADD_SEQ                                                                                                         | postgres
 ADJUST_GROUP_PROPERTIES |                              | myGroup2                     | Set the group_has_waiting_changes column to true                                                                       | postgres
 ASSIGN_SEQUENCE         | BEGIN                        |                              |                                                                                                                        | postgres
 LOCK_GROUP              | BEGIN                        | myGroup2                     |                                                                                                                        | postgres
 LOCK_GROUP              | END                          | myGroup2                     | 6 tables locked, 0 deadlock(s)                                                                                         | postgres
 SET_MARK_GROUP          | BEGIN                        | myGroup2                     | Alter to add myseq2                                                                                                    | postgres
 SET_MARK_GROUP          | END                          | myGroup2                     | Alter to add myseq2                                                                                                    | postgres
 ASSIGN_SEQUENCE         | SEQUENCE ADDED               | myschema2.myseq2             | To the logging group myGroup2                                                                                          | postgres
 ASSIGN_SEQUENCE         | END                          |                              | 1 sequences assigned to the group myGroup2                                                                             | postgres
 SET_MARK_GROUP          | BEGIN                        | myGroup2                     |                                                                                                                        | postgres
 LOCK_GROUP              | BEGIN                        | myGroup2                     |                                                                                                                        | postgres
 LOCK_GROUP              | END                          | myGroup2                     | 6 tables locked, 0 deadlock(s)                                                                                         | postgres
 SET_MARK_GROUP          | END                          | myGroup2                     | After ADD_SEQ                                                                                                          | postgres
 SNAP_GROUP              | BEGIN                        | myGroup2                     | /tmp/emaj_11/alter_logging                                                                                             | postgres
 SNAP_GROUP              | END                          | myGroup2                     | 9 tables/sequences processed                                                                                           | postgres
 SNAP_LOG_GROUP          | BEGIN                        | myGroup2                     | From initial mark to mark After ADD_SEQ towards /tmp/emaj_11/alter_logging                                             | postgres
 SNAP_LOG_GROUP          | END                          | myGroup2                     | 9 generated files                                                                                                      | postgres
 GEN_SQL_GROUP           | BEGIN                        | myGroup2                     | From mark Before ADD_SEQ to current situation                                                                          | postgres
 GEN_SQL_GROUP           | END                          | myGroup2                     | 0 generated statements - script exported into /tmp/emaj_11/alter_logging/myFile                                        | postgres
 ROLLBACK_GROUP          | BEGIN                        | myGroup2                     | Logged rollback to mark Before ADD_SEQ (timestamp)                                                                     | postgres
 DBLINK_OPEN_CNX         |                              | rlbk#1                       | Status = 1                                                                                                             | postgres
 LOCK_GROUP              | BEGIN                        | myGroup2                     | Rollback session #1                                                                                                    | postgres
 LOCK_GROUP              | END                          | myGroup2                     | Rollback session #1: 6 tables locked, 0 deadlock(s)                                                                    | postgres
 SET_MARK_GROUP          | BEGIN                        | myGroup2                     | RLBK_Before ADD_SEQ_%_START                                                                                            | postgres
 SET_MARK_GROUP          | END                          | myGroup2                     | RLBK_Before ADD_SEQ_%_START                                                                                            | postgres
 ROLLBACK_SEQUENCE       |                              | myschema2."myTbl3_col31_seq" |                                                                                                                        | postgres
 ROLLBACK_SEQUENCE       |                              | myschema2.myseq1             |                                                                                                                        | postgres
 ROLLBACK_SEQUENCE       |                              | myschema2.myseq2             | RESTART 3                                                                                                              | postgres
 SET_MARK_GROUP          | BEGIN                        | myGroup2                     | RLBK_Before ADD_SEQ_%_DONE                                                                                             | postgres
 SET_MARK_GROUP          | END                          | myGroup2                     | RLBK_Before ADD_SEQ_%_DONE                                                                                             | postgres
 ROLLBACK_GROUP          | NOTICE                       | Rollback id 6002             | 0 / 6 tables effectively processed.                                                                                    | postgres
 ROLLBACK_GROUP          | NOTICE                       | Rollback id 6002             | 3 sequences processed.                                                                                                 | postgres
 ROLLBACK_GROUP          | WARNING                      | Rollback id 6002             | The sequence myschema2.myseq2 has only been rolled back to its latest group attachment state (<timestamp>)             | postgres
 DBLINK_CLOSE_CNX        |                              | rlbk#1                       |                                                                                                                        | postgres
 ROLLBACK_GROUP          | END                          | myGroup2                     | Rollback_id 6002, 0 tables and 3 sequences effectively processed                                                       | postgres
 RENAME_MARK_GROUP       | BEGIN                        | myGroup2                     | EMAJ_LAST_MARK                                                                                                         | postgres
 RENAME_MARK_GROUP       | END                          | myGroup2                     | RLBK_Before ADD_SEQ_%_DONE renamed Logged_Rlbk_End                                                                     | postgres
 CONSOLIDATE_RLBK_GROUP  | BEGIN                        | myGroup2                     | Erase all between marks Before ADD_SEQ and Logged_Rlbk_End                                                             | postgres
 CONSOLIDATE_RLBK_GROUP  | END                          | myGroup2                     | 0 tables and 3 sequences processed ; 3 marks deleted                                                                   | postgres
 ALTER_GROUP             | BEGIN                        | myGroup2                     |                                                                                                                        | postgres
 LOCK_GROUP              | BEGIN                        | myGroup2                     |                                                                                                                        | postgres
 LOCK_GROUP              | END                          | myGroup2                     | 6 tables locked, 0 deadlock(s)                                                                                         | postgres
 SET_MARK_GROUP          | BEGIN                        | myGroup2                     | Alter to remove myseq2                                                                                                 | postgres
 CLEANUP_RLBK_STATE      |                              | Rollback id 6002             | set to COMMITTED                                                                                                       | postgres
 SET_MARK_GROUP          | END                          | myGroup2                     | Alter to remove myseq2                                                                                                 | postgres
 ALTER_GROUP             | SEQUENCE REMOVED             | myschema2.myseq2             | From the logging group myGroup2                                                                                        | postgres
 ALTER_GROUP             | END                          | myGroup2                     | Timestamp Id : 6079                                                                                                    | postgres
 ALTER_GROUP             | BEGIN                        | myGroup2                     |                                                                                                                        | postgres
 LOCK_GROUP              | BEGIN                        | myGroup2                     |                                                                                                                        | postgres
 LOCK_GROUP              | END                          | myGroup2                     | 6 tables locked, 0 deadlock(s)                                                                                         | postgres
 SET_MARK_GROUP          | BEGIN                        | myGroup2                     | Alter to re-add myseq2                                                                                                 | postgres
 SET_MARK_GROUP          | END                          | myGroup2                     | Alter to re-add myseq2                                                                                                 | postgres
 ALTER_GROUP             | SEQUENCE ADDED               | myschema2.myseq2             | To the logging group myGroup2                                                                                          | postgres
 ALTER_GROUP             | END                          | myGroup2                     | Timestamp Id : 6080                                                                                                    | postgres
 ALTER_GROUP             | BEGIN                        | myGroup2                     |                                                                                                                        | postgres
 LOCK_GROUP              | BEGIN                        | myGroup2                     |                                                                                                                        | postgres
 LOCK_GROUP              | END                          | myGroup2                     | 6 tables locked, 0 deadlock(s)                                                                                         | postgres
 SET_MARK_GROUP          | BEGIN                        | myGroup2                     | Alter to really remove myseq2                                                                                          | postgres
 SET_MARK_GROUP          | END                          | myGroup2                     | Alter to really remove myseq2                                                                                          | postgres
 ALTER_GROUP             | SEQUENCE REMOVED             | myschema2.myseq2             | From the logging group myGroup2                                                                                        | postgres
 ALTER_GROUP             | END                          | myGroup2                     | Timestamp Id : 6081                                                                                                    | postgres
 ROLLBACK_GROUP          | BEGIN                        | myGroup2                     | Unlogged rollback to mark ADD_SEQ test (timestamp)                                                                     | postgres
 DBLINK_OPEN_CNX         |                              | rlbk#1                       | Status = 1                                                                                                             | postgres
 LOCK_GROUP              | BEGIN                        | myGroup2                     | Rollback session #1                                                                                                    | postgres
 LOCK_GROUP              | END                          | myGroup2                     | Rollback session #1: 6 tables locked, 0 deadlock(s)                                                                    | postgres
 ROLLBACK_GROUP          | MARK DELETED                 | myGroup2                     | mark Before ADD_SEQ is deleted                                                                                         | postgres
 ROLLBACK_GROUP          | MARK DELETED                 | myGroup2                     | mark Logged_Rlbk_End is deleted                                                                                        | postgres
 ROLLBACK_GROUP          | MARK DELETED                 | myGroup2                     | mark Alter to remove myseq2 is deleted                                                                                 | postgres
 ROLLBACK_GROUP          | MARK DELETED                 | myGroup2                     | mark Alter to re-add myseq2 is deleted                                                                                 | postgres
 ROLLBACK_GROUP          | MARK DELETED                 | myGroup2                     | mark Alter to really remove myseq2 is deleted                                                                          | postgres
 ROLLBACK_SEQUENCE       |                              | myschema2."myTbl3_col31_seq" |                                                                                                                        | postgres
 ROLLBACK_SEQUENCE       |                              | myschema2.myseq1             |                                                                                                                        | postgres
 ROLLBACK_GROUP          | NOTICE                       | Rollback id 6003             | 0 / 6 tables effectively processed.                                                                                    | postgres
 ROLLBACK_GROUP          | NOTICE                       | Rollback id 6003             | 2 sequences processed.                                                                                                 | postgres
 ROLLBACK_GROUP          | WARNING                      | Rollback id 6003             | The sequence myschema2.myseq2 has been left unchanged (not in group anymore since <timestamp>)                         | postgres
 DBLINK_CLOSE_CNX        |                              | rlbk#1                       |                                                                                                                        | postgres
 ROLLBACK_GROUP          | END                          | myGroup2                     | Rollback_id 6003, 0 tables and 2 sequences effectively processed                                                       | postgres
 SET_MARK_GROUP          | BEGIN                        | myGroup1                     |                                                                                                                        | postgres
 LOCK_GROUP              | BEGIN                        | myGroup1                     |                                                                                                                        | postgres
 LOCK_GROUP              | END                          | myGroup1                     | 5 tables locked, 0 deadlock(s)                                                                                         | postgres
 CLEANUP_RLBK_STATE      |                              | Rollback id 6003             | set to COMMITTED                                                                                                       | postgres
 SET_MARK_GROUP          | END                          | myGroup1                     | Mk2b                                                                                                                   | postgres
 SET_MARK_GROUP          | BEGIN                        | myGroup1                     |                                                                                                                        | postgres
 LOCK_GROUP              | BEGIN                        | myGroup1                     |                                                                                                                        | postgres
 LOCK_GROUP              | END                          | myGroup1                     | 5 tables locked, 0 deadlock(s)                                                                                         | postgres
 SET_MARK_GROUP          | END                          | myGroup1                     | Before_remove                                                                                                          | postgres
 REMOVE_SEQUENCE         | BEGIN                        |                              |                                                                                                                        | postgres
 LOCK_GROUP              | BEGIN                        | myGroup1                     |                                                                                                                        | postgres
 LOCK_GROUP              | END                          | myGroup1                     | 5 tables locked, 0 deadlock(s)                                                                                         | postgres
 SET_MARK_GROUP          | BEGIN                        | myGroup1                     | Sequence_removed                                                                                                       | postgres
 SET_MARK_GROUP          | END                          | myGroup1                     | Sequence_removed                                                                                                       | postgres
 REMOVE_SEQUENCE         | SEQUENCE REMOVED             | myschema1."myTbl3_col31_seq" | From the logging group myGroup1                                                                                        | postgres
 REMOVE_SEQUENCE         | END                          |                              | 1 sequences removed from their groups                                                                                  | postgres
 ADJUST_GROUP_PROPERTIES |                              | myGroup1                     | Set the group_has_waiting_changes column to false                                                                      | postgres
 SNAP_GROUP              | BEGIN                        | myGroup1                     | /tmp/emaj_11/alter_logging                                                                                             | postgres
 SNAP_GROUP              | END                          | myGroup1                     | 6 tables/sequences processed                                                                                           | postgres
 SNAP_LOG_GROUP          | BEGIN                        | myGroup1                     | From mark Mk1 to current situation towards /tmp/emaj_11/alter_logging                                                  | postgres
 SNAP_LOG_GROUP          | END                          | myGroup1                     | 8 generated files                                                                                                      | postgres
 SET_MARK_GROUP          | BEGIN                        | myGroup1                     |                                                                                                                        | postgres
 LOCK_GROUP              | BEGIN                        | myGroup1                     |                                                                                                                        | postgres
 LOCK_GROUP              | END                          | myGroup1                     | 5 tables locked, 0 deadlock(s)                                                                                         | postgres
 SET_MARK_GROUP          | END                          | myGroup1                     | After_remove                                                                                                           | postgres
 GEN_SQL_GROUP           | BEGIN                        | myGroup1                     | From initial mark to mark EMAJ_LAST_MARK with tables/sequences filtering                                               | postgres
 GEN_SQL_GROUP           | END                          | myGroup1                     | 0 generated statements - script exported into /tmp/emaj_11/alter_logging/script.sql                                    | postgres
 ALTER_GROUP             | BEGIN                        | myGroup1                     |                                                                                                                        | postgres
 LOCK_GROUP              | BEGIN                        | myGroup1                     |                                                                                                                        | postgres
 LOCK_GROUP              | END                          | myGroup1                     | 5 tables locked, 0 deadlock(s)                                                                                         | postgres
 SET_MARK_GROUP          | BEGIN                        | myGroup1                     | sequence re-added to myGroup1                                                                                          | postgres
 CLEANUP_RLBK_STATE      |                              | Rollback id 6004             | set to ABORTED                                                                                                         | postgres
 CLEANUP_RLBK_STATE      |                              | Rollback id 6005             | set to ABORTED                                                                                                         | postgres
 SET_MARK_GROUP          | END                          | myGroup1                     | sequence re-added to myGroup1                                                                                          | postgres
 ALTER_GROUP             | SEQUENCE ADDED               | myschema1."myTbl3_col31_seq" | To the logging group myGroup1                                                                                          | postgres
 ALTER_GROUP             | END                          | myGroup1                     | Timestamp Id : 6093                                                                                                    | postgres
 SET_MARK_GROUP          | BEGIN                        | myGroup2                     |                                                                                                                        | postgres
 LOCK_GROUP              | BEGIN                        | myGroup2                     |                                                                                                                        | postgres
 LOCK_GROUP              | END                          | myGroup2                     | 6 tables locked, 0 deadlock(s)                                                                                         | postgres
 SET_MARK_GROUP          | END                          | myGroup2                     | ADD_TBL test                                                                                                           | postgres
 SET_MARK_GROUP          | BEGIN                        | myGroup2                     |                                                                                                                        | postgres
 LOCK_GROUP              | BEGIN                        | myGroup2                     |                                                                                                                        | postgres
 LOCK_GROUP              | END                          | myGroup2                     | 6 tables locked, 0 deadlock(s)                                                                                         | postgres
 SET_MARK_GROUP          | END                          | myGroup2                     | Before ADD_TBL                                                                                                         | postgres
 ASSIGN_TABLE            | BEGIN                        |                              |                                                                                                                        | postgres
 LOCK_GROUP              | BEGIN                        | myGroup2                     |                                                                                                                        | postgres
 LOCK_GROUP              | END                          | myGroup2                     | 6 tables locked, 0 deadlock(s)                                                                                         | postgres
 SET_MARK_GROUP          | BEGIN                        | myGroup2                     | Alter to add mytbl7                                                                                                    | postgres
 SET_MARK_GROUP          | END                          | myGroup2                     | Alter to add mytbl7                                                                                                    | postgres
 ASSIGN_TABLE            | TABLE ADDED                  | myschema2.mytbl7             | To the logging group myGroup2                                                                                          | postgres
 ASSIGN_TABLE            | END                          |                              | 1 tables assigned to the group myGroup2                                                                                | postgres
 SET_MARK_GROUP          | BEGIN                        | myGroup2                     |                                                                                                                        | postgres
 LOCK_GROUP              | BEGIN                        | myGroup2                     |                                                                                                                        | postgres
 LOCK_GROUP              | END                          | myGroup2                     | 7 tables locked, 0 deadlock(s)                                                                                         | postgres
 SET_MARK_GROUP          | END                          | myGroup2                     | Just after ADD_TBL                                                                                                     | postgres
 SET_MARK_GROUP          | BEGIN                        | myGroup2                     |                                                                                                                        | postgres
 LOCK_GROUP              | BEGIN                        | myGroup2                     |                                                                                                                        | postgres
 LOCK_GROUP              | END                          | myGroup2                     | 7 tables locked, 0 deadlock(s)                                                                                         | postgres
 SET_MARK_GROUP          | END                          | myGroup2                     | After ADD_TBL                                                                                                          | postgres
 SNAP_GROUP              | BEGIN                        | myGroup2                     | /tmp/emaj_11/alter_logging                                                                                             | postgres
 SNAP_GROUP              | END                          | myGroup2                     | 9 tables/sequences processed                                                                                           | postgres
 SNAP_LOG_GROUP          | BEGIN                        | myGroup2                     | From initial mark to mark After ADD_TBL towards /tmp/emaj_11/alter_logging                                             | postgres
 SNAP_LOG_GROUP          | END                          | myGroup2                     | 10 generated files                                                                                                     | postgres
 ROLLBACK_GROUP          | BEGIN                        | myGroup2                     | Logged rollback to mark Before ADD_TBL (timestamp)                                                                     | postgres
 DBLINK_OPEN_CNX         |                              | rlbk#1                       | Status = 1                                                                                                             | postgres
 LOCK_GROUP              | BEGIN                        | myGroup2                     | Rollback session #1                                                                                                    | postgres
 LOCK_GROUP              | END                          | myGroup2                     | Rollback session #1: 7 tables locked, 0 deadlock(s)                                                                    | postgres
 SET_MARK_GROUP          | BEGIN                        | myGroup2                     | RLBK_Before ADD_TBL_%_START                                                                                            | postgres
 SET_MARK_GROUP          | END                          | myGroup2                     | RLBK_Before ADD_TBL_%_START                                                                                            | postgres
 ROLLBACK_TABLE          | BEGIN                        | myschema2.mytbl7             | All log rows with emaj_gid > 60001 and <= 60004                                                                        | postgres
 ROLLBACK_TABLE          | END                          | myschema2.mytbl7             | 4 rolled back primary keys                                                                                             | postgres
 ROLLBACK_SEQUENCE       |                              | myschema2."myTbl3_col31_seq" |                                                                                                                        | postgres
 ROLLBACK_SEQUENCE       |                              | myschema2.myseq1             |                                                                                                                        | postgres
 SET_MARK_GROUP          | BEGIN                        | myGroup2                     | RLBK_Before ADD_TBL_%_DONE                                                                                             | postgres
 SET_MARK_GROUP          | END                          | myGroup2                     | RLBK_Before ADD_TBL_%_DONE                                                                                             | postgres
 ROLLBACK_GROUP          | NOTICE                       | Rollback id 6007             | 1 / 7 tables effectively processed.                                                                                    | postgres
 ROLLBACK_GROUP          | NOTICE                       | Rollback id 6007             | 2 sequences processed.                                                                                                 | postgres
 ROLLBACK_GROUP          | WARNING                      | Rollback id 6007             | The table myschema2.mytbl7 has only been rolled back to its latest group attachment (<timestamp>)                      | postgres
 DBLINK_CLOSE_CNX        |                              | rlbk#1                       |                                                                                                                        | postgres
 ROLLBACK_GROUP          | END                          | myGroup2                     | Rollback_id 6007, 1 tables and 2 sequences effectively processed                                                       | postgres
 RENAME_MARK_GROUP       | BEGIN                        | myGroup2                     | EMAJ_LAST_MARK                                                                                                         | postgres
 RENAME_MARK_GROUP       | END                          | myGroup2                     | RLBK_Before ADD_TBL_%_DONE renamed Logged_Rlbk_End                                                                     | postgres
 CONSOLIDATE_RLBK_GROUP  | BEGIN                        | myGroup2                     | Erase all between marks Before ADD_TBL and Logged_Rlbk_End                                                             | postgres
 CONSOLIDATE_RLBK_GROUP  | END                          | myGroup2                     | 1 tables and 2 sequences processed ; 4 marks deleted                                                                   | postgres
 ALTER_GROUP             | BEGIN                        | myGroup2                     |                                                                                                                        | postgres
 LOCK_GROUP              | BEGIN                        | myGroup2                     |                                                                                                                        | postgres
 LOCK_GROUP              | END                          | myGroup2                     | 7 tables locked, 0 deadlock(s)                                                                                         | postgres
 SET_MARK_GROUP          | BEGIN                        | myGroup2                     | Alter to remove mytbl7                                                                                                 | postgres
 CLEANUP_RLBK_STATE      |                              | Rollback id 6007             | set to COMMITTED                                                                                                       | postgres
 SET_MARK_GROUP          | END                          | myGroup2                     | Alter to remove mytbl7                                                                                                 | postgres
 ALTER_GROUP             | TABLE REMOVED                | myschema2.mytbl7             | From the logging group myGroup2                                                                                        | postgres
 ALTER_GROUP             | END                          | myGroup2                     | Timestamp Id : 6103                                                                                                    | postgres
 ALTER_GROUP             | BEGIN                        | myGroup2                     |                                                                                                                        | postgres
 LOCK_GROUP              | BEGIN                        | myGroup2                     |                                                                                                                        | postgres
 LOCK_GROUP              | END                          | myGroup2                     | 6 tables locked, 0 deadlock(s)                                                                                         | postgres
 SET_MARK_GROUP          | BEGIN                        | myGroup2                     | Alter to re-add mytbl7                                                                                                 | postgres
 SET_MARK_GROUP          | END                          | myGroup2                     | Alter to re-add mytbl7                                                                                                 | postgres
 ALTER_GROUP             | TABLE ADDED                  | myschema2.mytbl7             | To the logging group myGroup2                                                                                          | postgres
 ALTER_GROUP             | END                          | myGroup2                     | Timestamp Id : 6104                                                                                                    | postgres
 SNAP_LOG_GROUP          | BEGIN                        | myGroup2                     | From initial mark to current situation towards /tmp/emaj_11/alter_logging                                              | postgres
 SNAP_LOG_GROUP          | END                          | myGroup2                     | 11 generated files                                                                                                     | postgres
 ALTER_GROUP             | BEGIN                        | myGroup2                     |                                                                                                                        | postgres
 LOCK_GROUP              | BEGIN                        | myGroup2                     |                                                                                                                        | postgres
 LOCK_GROUP              | END                          | myGroup2                     | 7 tables locked, 0 deadlock(s)                                                                                         | postgres
 SET_MARK_GROUP          | BEGIN                        | myGroup2                     | Alter to really remove mytbl7                                                                                          | postgres
 SET_MARK_GROUP          | END                          | myGroup2                     | Alter to really remove mytbl7                                                                                          | postgres
 ALTER_GROUP             | TABLE REMOVED                | myschema2.mytbl7             | From the logging group myGroup2                                                                                        | postgres
 ALTER_GROUP             | END                          | myGroup2                     | Timestamp Id : 6106                                                                                                    | postgres
 ROLLBACK_GROUP          | BEGIN                        | myGroup2                     | Unlogged rollback to mark ADD_TBL test (timestamp)                                                                     | postgres
 DBLINK_OPEN_CNX         |                              | rlbk#1                       | Status = 1                                                                                                             | postgres
 LOCK_GROUP              | BEGIN                        | myGroup2                     | Rollback session #1                                                                                                    | postgres
 LOCK_GROUP              | END                          | myGroup2                     | Rollback session #1: 6 tables locked, 0 deadlock(s)                                                                    | postgres
 ROLLBACK_GROUP          | MARK DELETED                 | myGroup2                     | mark Before ADD_TBL is deleted                                                                                         | postgres
 ROLLBACK_GROUP          | MARK DELETED                 | myGroup2                     | mark Logged_Rlbk_End is deleted                                                                                        | postgres
 ROLLBACK_GROUP          | MARK DELETED                 | myGroup2                     | mark Alter to remove mytbl7 is deleted                                                                                 | postgres
 ROLLBACK_GROUP          | MARK DELETED                 | myGroup2                     | mark Alter to re-add mytbl7 is deleted                                                                                 | postgres
 ROLLBACK_GROUP          | MARK DELETED                 | myGroup2                     | mark Alter to really remove mytbl7 is deleted                                                                          | postgres
 ROLLBACK_SEQUENCE       |                              | myschema2."myTbl3_col31_seq" |                                                                                                                        | postgres
 ROLLBACK_SEQUENCE       |                              | myschema2.myseq1             |                                                                                                                        | postgres
 ROLLBACK_GROUP          | NOTICE                       | Rollback id 6008             | 0 / 6 tables effectively processed.                                                                                    | postgres
 ROLLBACK_GROUP          | NOTICE                       | Rollback id 6008             | 2 sequences processed.                                                                                                 | postgres
 ROLLBACK_GROUP          | WARNING                      | Rollback id 6008             | The table myschema2.mytbl7 has been left unchanged (not in group anymore since <timestamp>)                            | postgres
 DBLINK_CLOSE_CNX        |                              | rlbk#1                       |                                                                                                                        | postgres
 ROLLBACK_GROUP          | END                          | myGroup2                     | Rollback_id 6008, 0 tables and 2 sequences effectively processed                                                       | postgres
 SET_MARK_GROUP          | BEGIN                        | myGroup1                     |                                                                                                                        | postgres
 LOCK_GROUP              | BEGIN                        | myGroup1                     |                                                                                                                        | postgres
 LOCK_GROUP              | END                          | myGroup1                     | 5 tables locked, 0 deadlock(s)                                                                                         | postgres
 CLEANUP_RLBK_STATE      |                              | Rollback id 6008             | set to COMMITTED                                                                                                       | postgres
 SET_MARK_GROUP          | END                          | myGroup1                     | Mk2c                                                                                                                   | postgres
 ADJUST_GROUP_PROPERTIES |                              | myGroup1                     | Set the group_has_waiting_changes column to true                                                                       | postgres
 REMOVE_TABLES           | BEGIN                        |                              |                                                                                                                        | postgres
 LOCK_GROUP              | BEGIN                        | myGroup1,myGroup1            |                                                                                                                        | postgres
 LOCK_GROUP              | END                          | myGroup1,myGroup1            | 5 tables locked, 0 deadlock(s)                                                                                         | postgres
 SET_MARK_GROUP          | BEGIN                        | myGroup1,myGroup1            | 2 tables removed from myGroup1                                                                                         | postgres
 SET_MARK_GROUP          | END                          | myGroup1,myGroup1            | 2 tables removed from myGroup1                                                                                         | postgres
 REMOVE_TABLES           | TABLE REMOVED                | myschema1."myTbl3"           | From the logging group myGroup1                                                                                        | postgres
 REMOVE_TABLES           | TABLE REMOVED                | myschema1.mytbl2b            | From the logging group myGroup1                                                                                        | postgres
 REMOVE_TABLES           | END                          |                              | 2 tables removed from their groups                                                                                     | postgres
 SYNC_DEF_GROUP          | EMAJ_GROUP_DEF SYNCHRONIZED  | myGroup1                     |                                                                                                                        | postgres
 ALTER_GROUP             | BEGIN                        | myGroup1                     |                                                                                                                        | postgres
 LOCK_GROUP              | BEGIN                        | myGroup1                     |                                                                                                                        | postgres
 LOCK_GROUP              | END                          | myGroup1                     | 3 tables locked, 0 deadlock(s)                                                                                         | postgres
 SET_MARK_GROUP          | BEGIN                        | myGroup1                     | useless ALTER                                                                                                          | postgres
 SET_MARK_GROUP          | END                          | myGroup1                     | useless ALTER                                                                                                          | postgres
 ALTER_GROUP             | END                          | myGroup1                     | Timestamp Id : 6110                                                                                                    | postgres
 SNAP_GROUP              | BEGIN                        | myGroup1                     | /tmp/emaj_11/alter_logging                                                                                             | postgres
 SNAP_GROUP              | END                          | myGroup1                     | 5 tables/sequences processed                                                                                           | postgres
 SNAP_LOG_GROUP          | BEGIN                        | myGroup1                     | From initial mark to current situation towards /tmp/emaj_11/alter_logging                                              | postgres
 SNAP_LOG_GROUP          | END                          | myGroup1                     | 8 generated files                                                                                                      | postgres
 GEN_SQL_GROUP           | BEGIN                        | myGroup1                     | From initial mark to current situation with tables/sequences filtering                                                 | postgres
 GEN_SQL_GROUP           | END                          | myGroup1                     | 2 generated statements - script exported into /tmp/emaj_11/alter_logging/script.sql                                    | postgres
 ROLLBACK_GROUP          | BEGIN                        | myGroup1                     | Logged rollback to mark Mk2b (timestamp)                                                                               | postgres
 DBLINK_OPEN_CNX         |                              | rlbk#1                       | Status = 1                                                                                                             | postgres
 LOCK_GROUP              | BEGIN                        | myGroup1                     | Rollback session #1                                                                                                    | postgres
 LOCK_GROUP              | END                          | myGroup1                     | Rollback session #1: 3 tables locked, 0 deadlock(s)                                                                    | postgres
 SET_MARK_GROUP          | BEGIN                        | myGroup1                     | RLBK_Mk2b_%_START                                                                                                      | postgres
 SET_MARK_GROUP          | END                          | myGroup1                     | RLBK_Mk2b_%_START                                                                                                      | postgres
 ROLLBACK_TABLE          | BEGIN                        | myschema1.mytbl1             | All log rows with emaj_gid > 60001 and <= 60015                                                                        | postgres
 ROLLBACK_TABLE          | END                          | myschema1.mytbl1             | 1 rolled back primary keys                                                                                             | postgres
 ROLLBACK_SEQUENCE       |                              | myschema1."myTbl3_col31_seq" | RESTART 11                                                                                                             | postgres
 ROLLBACK_SEQUENCE       |                              | myschema1.mytbl2b_col20_seq  |                                                                                                                        | postgres
 SET_MARK_GROUP          | BEGIN                        | myGroup1                     | RLBK_Mk2b_%_DONE                                                                                                       | postgres
 SET_MARK_GROUP          | END                          | myGroup1                     | RLBK_Mk2b_%_DONE                                                                                                       | postgres
 ROLLBACK_GROUP          | NOTICE                       | Rollback id 6010             | 1 / 3 tables effectively processed.                                                                                    | postgres
 ROLLBACK_GROUP          | NOTICE                       | Rollback id 6010             | 2 sequences processed.                                                                                                 | postgres
 ROLLBACK_GROUP          | WARNING                      | Rollback id 6010             | The sequence myschema1."myTbl3_col31_seq" has only been rolled back to its latest group attachment state (<timestamp>) | postgres
 ROLLBACK_GROUP          | WARNING                      | Rollback id 6010             | The table myschema1."myTbl3" has been left unchanged (not in group anymore since <timestamp>)                          | postgres
 ROLLBACK_GROUP          | WARNING                      | Rollback id 6010             | The table myschema1.mytbl2b has been left unchanged (not in group anymore since <timestamp>)                           | postgres
 DBLINK_CLOSE_CNX        |                              | rlbk#1                       |                                                                                                                        | postgres
 ROLLBACK_GROUP          | END                          | myGroup1                     | Rollback_id 6010, 1 tables and 2 sequences effectively processed                                                       | postgres
 RENAME_MARK_GROUP       | BEGIN                        | myGroup1                     | EMAJ_LAST_MARK                                                                                                         | postgres
 RENAME_MARK_GROUP       | END                          | myGroup1                     | RLBK_Mk2b_%_DONE renamed Logged_Rlbk_End                                                                               | postgres
 ALTER_GROUP             | BEGIN                        | myGroup1                     |                                                                                                                        | postgres
 LOCK_GROUP              | BEGIN                        | myGroup1                     |                                                                                                                        | postgres
 LOCK_GROUP              | END                          | myGroup1                     | 3 tables locked, 0 deadlock(s)                                                                                         | postgres
 SET_MARK_GROUP          | BEGIN                        | myGroup1                     | 2nd remove_tbl                                                                                                         | postgres
 CLEANUP_RLBK_STATE      |                              | Rollback id 6010             | set to COMMITTED                                                                                                       | postgres
 SET_MARK_GROUP          | END                          | myGroup1                     | 2nd remove_tbl                                                                                                         | postgres
 ALTER_GROUP             | TABLE REMOVED                | myschema1.mytbl1             | From the logging group myGroup1                                                                                        | postgres
 ALTER_GROUP             | END                          | myGroup1                     | Timestamp Id : 6116                                                                                                    | postgres
 CONSOLIDATE_RLBK_GROUP  | BEGIN                        | myGroup1                     | Erase all between marks Mk2b and Logged_Rlbk_End                                                                       | postgres
 CONSOLIDATE_RLBK_GROUP  | END                          | myGroup1                     | 1 tables and 2 sequences processed ; 8 marks deleted                                                                   | postgres
 ROLLBACK_GROUP          | BEGIN                        | myGroup1                     | Unlogged rollback to mark Mk2b (timestamp)                                                                             | postgres
 DBLINK_OPEN_CNX         |                              | rlbk#1                       | Status = 1                                                                                                             | postgres
 LOCK_GROUP              | BEGIN                        | myGroup1                     | Rollback session #1                                                                                                    | postgres
 LOCK_GROUP              | END                          | myGroup1                     | Rollback session #1: 2 tables locked, 0 deadlock(s)                                                                    | postgres
 ROLLBACK_GROUP          | MARK DELETED                 | myGroup1                     | mark Logged_Rlbk_End is deleted                                                                                        | postgres
 ROLLBACK_GROUP          | MARK DELETED                 | myGroup1                     | mark 2nd remove_tbl is deleted                                                                                         | postgres
 ROLLBACK_SEQUENCE       |                              | myschema1."myTbl3_col31_seq" |                                                                                                                        | postgres
 ROLLBACK_SEQUENCE       |                              | myschema1.mytbl2b_col20_seq  |                                                                                                                        | postgres
 ROLLBACK_GROUP          | NOTICE                       | Rollback id 6011             | 0 / 2 tables effectively processed.                                                                                    | postgres
 ROLLBACK_GROUP          | NOTICE                       | Rollback id 6011             | 2 sequences processed.                                                                                                 | postgres
 ROLLBACK_GROUP          | WARNING                      | Rollback id 6011             | The table myschema1.mytbl1 has been left unchanged (not in group anymore since <timestamp>)                            | postgres
 DBLINK_CLOSE_CNX        |                              | rlbk#1                       |                                                                                                                        | postgres
 ROLLBACK_GROUP          | END                          | myGroup1                     | Rollback_id 6011, 0 tables and 2 sequences effectively processed                                                       | postgres
 ALTER_GROUP             | BEGIN                        | myGroup1                     |                                                                                                                        | postgres
 LOCK_GROUP              | BEGIN                        | myGroup1                     |                                                                                                                        | postgres
 LOCK_GROUP              | END                          | myGroup1                     | 2 tables locked, 0 deadlock(s)                                                                                         | postgres
 SET_MARK_GROUP          | BEGIN                        | myGroup1                     | tables re-added to myGroup1                                                                                            | postgres
 CLEANUP_RLBK_STATE      |                              | Rollback id 6011             | set to COMMITTED                                                                                                       | postgres
 SET_MARK_GROUP          | END                          | myGroup1                     | tables re-added to myGroup1                                                                                            | postgres
 ALTER_GROUP             | TABLE ADDED                  | myschema1."myTbl3"           | To the logging group myGroup1                                                                                          | postgres
 ALTER_GROUP             | TABLE ADDED                  | myschema1.mytbl1             | To the logging group myGroup1                                                                                          | postgres
 ALTER_GROUP             | TABLE ADDED                  | myschema1.mytbl2b            | To the logging group myGroup1                                                                                          | postgres
 ALTER_GROUP             | END                          | myGroup1                     | Timestamp Id : 6122                                                                                                    | postgres
 SET_MARK_GROUPS         | BEGIN                        | myGroup1,myGroup2            | Mk3                                                                                                                    | postgres
 LOCK_GROUPS             | BEGIN                        | myGroup1,myGroup2            |                                                                                                                        | postgres
 LOCK_GROUPS             | END                          | myGroup1,myGroup2            | 11 tables locked, 0 deadlock(s)                                                                                        | postgres
 SET_MARK_GROUPS         | END                          | myGroup1,myGroup2            | Mk3                                                                                                                    | postgres
 ROLLBACK_GROUPS         | BEGIN                        | myGroup1,myGroup2            | Unlogged rollback to mark Mk3 (timestamp)                                                                              | postgres
 DBLINK_OPEN_CNX         |                              | rlbk#1                       | Status = 1                                                                                                             | postgres
 LOCK_GROUP              | BEGIN                        | myGroup1,myGroup2            | Rollback session #1                                                                                                    | postgres
 LOCK_GROUP              | END                          | myGroup1,myGroup2            | Rollback session #1: 11 tables locked, 0 deadlock(s)                                                                   | postgres
 ROLLBACK_SEQUENCE       |                              | myschema1."myTbl3_col31_seq" |                                                                                                                        | postgres
 ROLLBACK_SEQUENCE       |                              | myschema1.mytbl2b_col20_seq  |                                                                                                                        | postgres
 ROLLBACK_SEQUENCE       |                              | myschema2."myTbl3_col31_seq" |                                                                                                                        | postgres
 ROLLBACK_SEQUENCE       |                              | myschema2.myseq1             |                                                                                                                        | postgres
 ROLLBACK_GROUPS         | NOTICE                       | Rollback id 6012             | 0 / 11 tables effectively processed.                                                                                   | postgres
 ROLLBACK_GROUPS         | NOTICE                       | Rollback id 6012             | 4 sequences processed.                                                                                                 | postgres
 DBLINK_CLOSE_CNX        |                              | rlbk#1                       |                                                                                                                        | postgres
 ROLLBACK_GROUPS         | END                          | myGroup1,myGroup2            | Rollback_id 6012, 0 tables and 4 sequences effectively processed                                                       | postgres
 ROLLBACK_GROUPS         | BEGIN                        | myGroup1,myGroup2            | Logged rollback to mark Mk2 (timestamp)                                                                                | postgres
 DBLINK_OPEN_CNX         |                              | rlbk#1                       | Status = 1                                                                                                             | postgres
 LOCK_GROUP              | BEGIN                        | myGroup1,myGroup2            | Rollback session #1                                                                                                    | postgres
 LOCK_GROUP              | END                          | myGroup1,myGroup2            | Rollback session #1: 11 tables locked, 0 deadlock(s)                                                                   | postgres
 SET_MARK_GROUPS         | BEGIN                        | myGroup1,myGroup2            | RLBK_Mk2_%_START                                                                                                       | postgres
 CLEANUP_RLBK_STATE      |                              | Rollback id 6012             | set to COMMITTED                                                                                                       | postgres
 SET_MARK_GROUPS         | END                          | myGroup1,myGroup2            | RLBK_Mk2_%_START                                                                                                       | postgres
 ROLLBACK_SEQUENCE       |                              | myschema1."myTbl3_col31_seq" |                                                                                                                        | postgres
 ROLLBACK_SEQUENCE       |                              | myschema1.mytbl2b_col20_seq  |                                                                                                                        | postgres
 ROLLBACK_SEQUENCE       |                              | myschema2."myTbl3_col31_seq" |                                                                                                                        | postgres
 ROLLBACK_SEQUENCE       |                              | myschema2.myseq1             |                                                                                                                        | postgres
 SET_MARK_GROUPS         | BEGIN                        | myGroup1,myGroup2            | RLBK_Mk2_%_DONE                                                                                                        | postgres
 SET_MARK_GROUPS         | END                          | myGroup1,myGroup2            | RLBK_Mk2_%_DONE                                                                                                        | postgres
 ROLLBACK_GROUPS         | NOTICE                       | Rollback id 6013             | 0 / 11 tables effectively processed.                                                                                   | postgres
 ROLLBACK_GROUPS         | NOTICE                       | Rollback id 6013             | 4 sequences processed.                                                                                                 | postgres
 ROLLBACK_GROUPS         | WARNING                      | Rollback id 6013             | Tables group change not rolled back: E-Maj priority for myschema1.mytbl1                                               | postgres
 ROLLBACK_GROUPS         | WARNING                      | Rollback id 6013             | Tables group change not rolled back: log data tablespace for myschema1.mytbl2b                                         | postgres
 ROLLBACK_GROUPS         | WARNING                      | Rollback id 6013             | Tables group change not rolled back: log index tablespace for myschema2.mytbl6                                         | postgres
 ROLLBACK_GROUPS         | WARNING                      | Rollback id 6013             | The table myschema1."myTbl3" has only been rolled back to its latest group attachment (<timestamp>)                    | postgres
 ROLLBACK_GROUPS         | WARNING                      | Rollback id 6013             | The table myschema1.mytbl1 has only been rolled back to its latest group attachment (<timestamp>)                      | postgres
 ROLLBACK_GROUPS         | WARNING                      | Rollback id 6013             | The table myschema1.mytbl2b has only been rolled back to its latest group attachment (<timestamp>)                     | postgres
 DBLINK_CLOSE_CNX        |                              | rlbk#1                       |                                                                                                                        | postgres
 ROLLBACK_GROUPS         | END                          | myGroup1,myGroup2            | Rollback_id 6013, 0 tables and 4 sequences effectively processed                                                       | postgres
 ROLLBACK_GROUPS         | BEGIN                        | myGroup1,myGroup2            | Unlogged rollback to mark Mk2 (timestamp)                                                                              | postgres
 DBLINK_OPEN_CNX         |                              | rlbk#1                       | Status = 1                                                                                                             | postgres
 LOCK_GROUP              | BEGIN                        | myGroup1,myGroup2            | Rollback session #1                                                                                                    | postgres
 LOCK_GROUP              | END                          | myGroup1,myGroup2            | Rollback session #1: 11 tables locked, 0 deadlock(s)                                                                   | postgres
 ROLLBACK_GROUPS         | MARK DELETED                 | myGroup1                     | mark ALTER_% is deleted                                                                                                | postgres
 ROLLBACK_GROUPS         | MARK DELETED                 | myGroup2                     | mark ALTER_% is deleted                                                                                                | postgres
 ROLLBACK_GROUPS         | MARK DELETED                 | myGroup1                     | mark ALTER_% is deleted                                                                                                | postgres
 ROLLBACK_GROUPS         | MARK DELETED                 | myGroup2                     | mark ALTER_% is deleted                                                                                                | postgres
 ROLLBACK_GROUPS         | MARK DELETED                 | myGroup2                     | mark ADD_SEQ test is deleted                                                                                           | postgres
 ROLLBACK_GROUPS         | MARK DELETED                 | myGroup1                     | mark Mk2b is deleted                                                                                                   | postgres
 ROLLBACK_GROUPS         | MARK DELETED                 | myGroup2                     | mark ADD_TBL test is deleted                                                                                           | postgres
 ROLLBACK_GROUPS         | MARK DELETED                 | myGroup1                     | mark tables re-added to myGroup1 is deleted                                                                            | postgres
 ROLLBACK_GROUPS         | MARK DELETED                 | myGroup1                     | mark Mk3 is deleted                                                                                                    | postgres
 ROLLBACK_GROUPS         | MARK DELETED                 | myGroup2                     | mark Mk3 is deleted                                                                                                    | postgres
 ROLLBACK_GROUPS         | MARK DELETED                 | myGroup1                     | mark RLBK_Mk2_%_START is deleted                                                                                       | postgres
 ROLLBACK_GROUPS         | MARK DELETED                 | myGroup2                     | mark RLBK_Mk2_%_START is deleted                                                                                       | postgres
 ROLLBACK_GROUPS         | MARK DELETED                 | myGroup1                     | mark RLBK_Mk2_%_DONE is deleted                                                                                        | postgres
 ROLLBACK_GROUPS         | MARK DELETED                 | myGroup2                     | mark RLBK_Mk2_%_DONE is deleted                                                                                        | postgres
 ROLLBACK_SEQUENCE       |                              | myschema1."myTbl3_col31_seq" |                                                                                                                        | postgres
 ROLLBACK_SEQUENCE       |                              | myschema1.mytbl2b_col20_seq  |                                                                                                                        | postgres
 ROLLBACK_SEQUENCE       |                              | myschema2."myTbl3_col31_seq" |                                                                                                                        | postgres
 ROLLBACK_SEQUENCE       |                              | myschema2.myseq1             |                                                                                                                        | postgres
 ROLLBACK_GROUPS         | NOTICE                       | Rollback id 6014             | 0 / 11 tables effectively processed.                                                                                   | postgres
 ROLLBACK_GROUPS         | NOTICE                       | Rollback id 6014             | 4 sequences processed.                                                                                                 | postgres
 DBLINK_CLOSE_CNX        |                              | rlbk#1                       |                                                                                                                        | postgres
 ROLLBACK_GROUPS         | END                          | myGroup1,myGroup2            | Rollback_id 6014, 0 tables and 4 sequences effectively processed                                                       | postgres
 ROLLBACK_GROUPS         | BEGIN                        | myGroup1,myGroup2            | Unlogged rollback to mark Mk1 (timestamp)                                                                              | postgres
 DBLINK_OPEN_CNX         |                              | rlbk#1                       | Status = 1                                                                                                             | postgres
 LOCK_GROUP              | BEGIN                        | myGroup1,myGroup2            | Rollback session #1                                                                                                    | postgres
 LOCK_GROUP              | END                          | myGroup1,myGroup2            | Rollback session #1: 11 tables locked, 0 deadlock(s)                                                                   | postgres
 ROLLBACK_GROUPS         | MARK DELETED                 | myGroup1                     | mark Priority Changed is deleted                                                                                       | postgres
 ROLLBACK_GROUPS         | MARK DELETED                 | myGroup1                     | mark Attributes_changed is deleted                                                                                     | postgres
 ROLLBACK_GROUPS         | MARK DELETED                 | myGroup2                     | mark Attributes_changed is deleted                                                                                     | postgres
 ROLLBACK_GROUPS         | MARK DELETED                 | myGroup1                     | mark Mk2 is deleted                                                                                                    | postgres
 ROLLBACK_GROUPS         | MARK DELETED                 | myGroup2                     | mark Mk2 is deleted                                                                                                    | postgres
 ROLLBACK_SEQUENCE       |                              | myschema1."myTbl3_col31_seq" |                                                                                                                        | postgres
 ROLLBACK_SEQUENCE       |                              | myschema1.mytbl2b_col20_seq  |                                                                                                                        | postgres
 ROLLBACK_SEQUENCE       |                              | myschema2."myTbl3_col31_seq" |                                                                                                                        | postgres
 ROLLBACK_SEQUENCE       |                              | myschema2.myseq1             |                                                                                                                        | postgres
 ROLLBACK_GROUPS         | NOTICE                       | Rollback id 6015             | 0 / 11 tables effectively processed.                                                                                   | postgres
 ROLLBACK_GROUPS         | NOTICE                       | Rollback id 6015             | 4 sequences processed.                                                                                                 | postgres
 ROLLBACK_GROUPS         | WARNING                      | Rollback id 6015             | Tables group change not rolled back: E-Maj priority for myschema1.mytbl1                                               | postgres
 ROLLBACK_GROUPS         | WARNING                      | Rollback id 6015             | Tables group change not rolled back: log data tablespace for myschema1.mytbl2b                                         | postgres
 ROLLBACK_GROUPS         | WARNING                      | Rollback id 6015             | Tables group change not rolled back: log index tablespace for myschema2.mytbl6                                         | postgres
 DBLINK_CLOSE_CNX        |                              | rlbk#1                       |                                                                                                                        | postgres
 ROLLBACK_GROUPS         | END                          | myGroup1,myGroup2            | Rollback_id 6015, 0 tables and 4 sequences effectively processed                                                       | postgres
 ROLLBACK_GROUPS         | BEGIN                        | myGroup1,myGroup2            | Logged rollback to mark Mk1 (timestamp)                                                                                | postgres
 DBLINK_OPEN_CNX         |                              | rlbk#1                       | Status = 1                                                                                                             | postgres
 LOCK_GROUP              | BEGIN                        | myGroup1,myGroup2            | Rollback session #1                                                                                                    | postgres
 LOCK_GROUP              | END                          | myGroup1,myGroup2            | Rollback session #1: 11 tables locked, 0 deadlock(s)                                                                   | postgres
 SET_MARK_GROUPS         | BEGIN                        | myGroup1,myGroup2            | RLBK_Mk1_%_START                                                                                                       | postgres
 CLEANUP_RLBK_STATE      |                              | Rollback id 6013             | set to COMMITTED                                                                                                       | postgres
 CLEANUP_RLBK_STATE      |                              | Rollback id 6014             | set to COMMITTED                                                                                                       | postgres
 CLEANUP_RLBK_STATE      |                              | Rollback id 6015             | set to COMMITTED                                                                                                       | postgres
 SET_MARK_GROUPS         | END                          | myGroup1,myGroup2            | RLBK_Mk1_%_START                                                                                                       | postgres
 ROLLBACK_SEQUENCE       |                              | myschema1."myTbl3_col31_seq" |                                                                                                                        | postgres
 ROLLBACK_SEQUENCE       |                              | myschema1.mytbl2b_col20_seq  |                                                                                                                        | postgres
 ROLLBACK_SEQUENCE       |                              | myschema2."myTbl3_col31_seq" |                                                                                                                        | postgres
 ROLLBACK_SEQUENCE       |                              | myschema2.myseq1             |                                                                                                                        | postgres
 SET_MARK_GROUPS         | BEGIN                        | myGroup1,myGroup2            | RLBK_Mk1_%_DONE                                                                                                        | postgres
 SET_MARK_GROUPS         | END                          | myGroup1,myGroup2            | RLBK_Mk1_%_DONE                                                                                                        | postgres
 ROLLBACK_GROUPS         | NOTICE                       | Rollback id 6016             | 0 / 11 tables effectively processed.                                                                                   | postgres
 ROLLBACK_GROUPS         | NOTICE                       | Rollback id 6016             | 4 sequences processed.                                                                                                 | postgres
 DBLINK_CLOSE_CNX        |                              | rlbk#1                       |                                                                                                                        | postgres
 ROLLBACK_GROUPS         | END                          | myGroup1,myGroup2            | Rollback_id 6016, 0 tables and 4 sequences effectively processed                                                       | postgres
 ROLLBACK_GROUPS         | BEGIN                        | myGroup1,myGroup2            | Unlogged rollback to mark Mk1 (timestamp)                                                                              | postgres
 DBLINK_OPEN_CNX         |                              | rlbk#1                       | Status = 1                                                                                                             | postgres
 LOCK_GROUP              | BEGIN                        | myGroup1,myGroup2            | Rollback session #1                                                                                                    | postgres
 LOCK_GROUP              | END                          | myGroup1,myGroup2            | Rollback session #1: 11 tables locked, 0 deadlock(s)                                                                   | postgres
 ROLLBACK_GROUPS         | MARK DELETED                 | myGroup1                     | mark RLBK_Mk1_%_START is deleted                                                                                       | postgres
 ROLLBACK_GROUPS         | MARK DELETED                 | myGroup2                     | mark RLBK_Mk1_%_START is deleted                                                                                       | postgres
 ROLLBACK_GROUPS         | MARK DELETED                 | myGroup1                     | mark RLBK_Mk1_%_DONE is deleted                                                                                        | postgres
 ROLLBACK_GROUPS         | MARK DELETED                 | myGroup2                     | mark RLBK_Mk1_%_DONE is deleted                                                                                        | postgres
 ROLLBACK_SEQUENCE       |                              | myschema1."myTbl3_col31_seq" |                                                                                                                        | postgres
 ROLLBACK_SEQUENCE       |                              | myschema1.mytbl2b_col20_seq  |                                                                                                                        | postgres
 ROLLBACK_SEQUENCE       |                              | myschema2."myTbl3_col31_seq" |                                                                                                                        | postgres
 ROLLBACK_SEQUENCE       |                              | myschema2.myseq1             |                                                                                                                        | postgres
 ROLLBACK_GROUPS         | NOTICE                       | Rollback id 6017             | 0 / 11 tables effectively processed.                                                                                   | postgres
 ROLLBACK_GROUPS         | NOTICE                       | Rollback id 6017             | 4 sequences processed.                                                                                                 | postgres
 DBLINK_CLOSE_CNX        |                              | rlbk#1                       |                                                                                                                        | postgres
 ROLLBACK_GROUPS         | END                          | myGroup1,myGroup2            | Rollback_id 6017, 0 tables and 4 sequences effectively processed                                                       | postgres
 SET_MARK_GROUPS         | BEGIN                        | myGroup1,myGroup2            | before move                                                                                                            | postgres
 LOCK_GROUPS             | BEGIN                        | myGroup1,myGroup2            |                                                                                                                        | postgres
 LOCK_GROUPS             | END                          | myGroup1,myGroup2            | 11 tables locked, 0 deadlock(s)                                                                                        | postgres
 CLEANUP_RLBK_STATE      |                              | Rollback id 6016             | set to COMMITTED                                                                                                       | postgres
 CLEANUP_RLBK_STATE      |                              | Rollback id 6017             | set to COMMITTED                                                                                                       | postgres
 SET_MARK_GROUPS         | END                          | myGroup1,myGroup2            | before move                                                                                                            | postgres
 ALTER_GROUPS            | BEGIN                        | myGroup1,myGroup2            |                                                                                                                        | postgres
 LOCK_GROUPS             | BEGIN                        | myGroup1,myGroup2            |                                                                                                                        | postgres
 LOCK_GROUPS             | END                          | myGroup1,myGroup2            | 11 tables locked, 0 deadlock(s)                                                                                        | postgres
 SET_MARK_GROUPS         | BEGIN                        | myGroup1,myGroup2            | move to myGroup1                                                                                                       | postgres
 SET_MARK_GROUPS         | END                          | myGroup1,myGroup2            | move to myGroup1                                                                                                       | postgres
 ALTER_GROUPS            | LOG DATA TABLESPACE CHANGED  | myschema2."myTbl3"           | Default tablespace => tsplog1                                                                                          | postgres
 ALTER_GROUPS            | LOG INDEX TABLESPACE CHANGED | myschema2."myTbl3"           | Default tablespace => tsplog1                                                                                          | postgres
 ALTER_GROUPS            | TABLE MOVED                  | myschema2."myTbl3"           | From the logging group myGroup2 to the logging group myGroup1                                                          | postgres
 ALTER_GROUPS            | SEQUENCE MOVED               | myschema2."myTbl3_col31_seq" | From the logging group myGroup2 to the logging group myGroup1                                                          | postgres
 ALTER_GROUPS            | END                          | myGroup1,myGroup2            | Timestamp Id : 6137                                                                                                    | postgres
 SET_MARK_GROUPS         | BEGIN                        | myGroup1,myGroup2            | after move                                                                                                             | postgres
 LOCK_GROUPS             | BEGIN                        | myGroup1,myGroup2            |                                                                                                                        | postgres
 LOCK_GROUPS             | END                          | myGroup1,myGroup2            | 11 tables locked, 0 deadlock(s)                                                                                        | postgres
 SET_MARK_GROUPS         | END                          | myGroup1,myGroup2            | after move                                                                                                             | postgres
 GEN_SQL_GROUPS          | BEGIN                        | myGroup1,myGroup2            | From mark before move to current situation with tables/sequences filtering                                             | postgres
 GEN_SQL_GROUPS          | END                          | myGroup1,myGroup2            | 3 generated statements - script exported into /tmp/emaj_11/alter_logging/script1.sql                                   | postgres
 ROLLBACK_GROUPS         | BEGIN                        | myGroup1,myGroup2            | Logged rollback to mark after move (timestamp)                                                                         | postgres
 DBLINK_OPEN_CNX         |                              | rlbk#1                       | Status = 1                                                                                                             | postgres
 LOCK_GROUP              | BEGIN                        | myGroup1,myGroup2            | Rollback session #1                                                                                                    | postgres
 LOCK_GROUP              | END                          | myGroup1,myGroup2            | Rollback session #1: 11 tables locked, 0 deadlock(s)                                                                   | postgres
 SET_MARK_GROUPS         | BEGIN                        | myGroup1,myGroup2            | RLBK_after move_%_START                                                                                                | postgres
 SET_MARK_GROUPS         | END                          | myGroup1,myGroup2            | RLBK_after move_%_START                                                                                                | postgres
 ROLLBACK_TABLE          | BEGIN                        | myschema2."myTbl3"           | All log rows with emaj_gid > 60019 and <= 60021                                                                        | postgres
 ROLLBACK_TABLE          | END                          | myschema2."myTbl3"           | 2 rolled back primary keys                                                                                             | postgres
 ROLLBACK_SEQUENCE       |                              | myschema1."myTbl3_col31_seq" |                                                                                                                        | postgres
 ROLLBACK_SEQUENCE       |                              | myschema1.mytbl2b_col20_seq  |                                                                                                                        | postgres
 ROLLBACK_SEQUENCE       |                              | myschema2."myTbl3_col31_seq" |                                                                                                                        | postgres
 ROLLBACK_SEQUENCE       |                              | myschema2.myseq1             |                                                                                                                        | postgres
 SET_MARK_GROUPS         | BEGIN                        | myGroup1,myGroup2            | RLBK_after move_%_DONE                                                                                                 | postgres
 SET_MARK_GROUPS         | END                          | myGroup1,myGroup2            | RLBK_after move_%_DONE                                                                                                 | postgres
 ROLLBACK_GROUPS         | NOTICE                       | Rollback id 6018             | 1 / 11 tables effectively processed.                                                                                   | postgres
 ROLLBACK_GROUPS         | NOTICE                       | Rollback id 6018             | 4 sequences processed.                                                                                                 | postgres
 DBLINK_CLOSE_CNX        |                              | rlbk#1                       |                                                                                                                        | postgres
 ROLLBACK_GROUPS         | END                          | myGroup1,myGroup2            | Rollback_id 6018, 1 tables and 4 sequences effectively processed                                                       | postgres
 ROLLBACK_GROUPS         | BEGIN                        | myGroup1,myGroup2            | Unlogged rollback to mark before move (timestamp)                                                                      | postgres
 DBLINK_OPEN_CNX         |                              | rlbk#1                       | Status = 1                                                                                                             | postgres
 LOCK_GROUP              | BEGIN                        | myGroup1,myGroup2            | Rollback session #1                                                                                                    | postgres
 LOCK_GROUP              | END                          | myGroup1,myGroup2            | Rollback session #1: 11 tables locked, 0 deadlock(s)                                                                   | postgres
 ROLLBACK_TABLE          | BEGIN                        | myschema2."myTbl3"           | All log rows with emaj_gid > 60019 and <= 60025                                                                        | postgres
 ROLLBACK_TABLE          | END                          | myschema2."myTbl3"           | 2 rolled back primary keys                                                                                             | postgres
 ROLLBACK_GROUPS         | MARK DELETED                 | myGroup1                     | mark move to myGroup1 is deleted                                                                                       | postgres
 ROLLBACK_GROUPS         | MARK DELETED                 | myGroup2                     | mark move to myGroup1 is deleted                                                                                       | postgres
 ROLLBACK_GROUPS         | MARK DELETED                 | myGroup1                     | mark after move is deleted                                                                                             | postgres
 ROLLBACK_GROUPS         | MARK DELETED                 | myGroup2                     | mark after move is deleted                                                                                             | postgres
 ROLLBACK_GROUPS         | MARK DELETED                 | myGroup1                     | mark RLBK_after move_%_START is deleted                                                                                | postgres
 ROLLBACK_GROUPS         | MARK DELETED                 | myGroup2                     | mark RLBK_after move_%_START is deleted                                                                                | postgres
 ROLLBACK_GROUPS         | MARK DELETED                 | myGroup1                     | mark RLBK_after move_%_DONE is deleted                                                                                 | postgres
 ROLLBACK_GROUPS         | MARK DELETED                 | myGroup2                     | mark RLBK_after move_%_DONE is deleted                                                                                 | postgres
 ROLLBACK_SEQUENCE       |                              | myschema1."myTbl3_col31_seq" |                                                                                                                        | postgres
 ROLLBACK_SEQUENCE       |                              | myschema1.mytbl2b_col20_seq  |                                                                                                                        | postgres
 ROLLBACK_SEQUENCE       |                              | myschema2."myTbl3_col31_seq" |                                                                                                                        | postgres
 ROLLBACK_SEQUENCE       |                              | myschema2.myseq1             |                                                                                                                        | postgres
 ROLLBACK_GROUPS         | NOTICE                       | Rollback id 6019             | 1 / 11 tables effectively processed.                                                                                   | postgres
 ROLLBACK_GROUPS         | NOTICE                       | Rollback id 6019             | 4 sequences processed.                                                                                                 | postgres
 ROLLBACK_GROUPS         | WARNING                      | Rollback id 6019             | Tables group change not rolled back: log data tablespace for myschema2."myTbl3"                                        | postgres
 ROLLBACK_GROUPS         | WARNING                      | Rollback id 6019             | Tables group change not rolled back: log index tablespace for myschema2."myTbl3"                                       | postgres
 ROLLBACK_GROUPS         | WARNING                      | Rollback id 6019             | The table myschema2."myTbl3" has only been rolled back to its latest group attachment (<timestamp>)                    | postgres
 ROLLBACK_GROUPS         | WARNING                      | Rollback id 6019             | The sequence myschema2."myTbl3_col31_seq" has only been rolled back to its latest group attachment state (<timestamp>) | postgres
 DBLINK_CLOSE_CNX        |                              | rlbk#1                       |                                                                                                                        | postgres
 ROLLBACK_GROUPS         | END                          | myGroup1,myGroup2            | Rollback_id 6019, 1 tables and 4 sequences effectively processed                                                       | postgres
 GEN_SQL_GROUPS          | BEGIN                        | myGroup1,myGroup2            | From mark before move to current situation with tables/sequences filtering                                             | postgres
 GEN_SQL_GROUPS          | END                          | myGroup1,myGroup2            | 3 generated statements - script exported into /tmp/emaj_11/alter_logging/script3.sql                                   | postgres
 STOP_GROUP              | BEGIN                        | myGroup2                     |                                                                                                                        | postgres
 LOCK_GROUP              | BEGIN                        | myGroup2                     |                                                                                                                        | postgres
 LOCK_GROUP              | END                          | myGroup2                     | 5 tables locked, 0 deadlock(s)                                                                                         | postgres
 SET_MARK_GROUP          | BEGIN                        | myGroup2                     | STOP_%                                                                                                                 | postgres
 CLEANUP_RLBK_STATE      |                              | Rollback id 6018             | set to COMMITTED                                                                                                       | postgres
 CLEANUP_RLBK_STATE      |                              | Rollback id 6019             | set to COMMITTED                                                                                                       | postgres
 SET_MARK_GROUP          | END                          | myGroup2                     | STOP_%                                                                                                                 | postgres
 STOP_GROUP              | END                          | myGroup2                     | 6 tables/sequences processed                                                                                           | postgres
 ALTER_GROUPS            | BEGIN                        | myGroup1,myGroup2            |                                                                                                                        | postgres
 LOCK_GROUPS             | BEGIN                        | myGroup1                     |                                                                                                                        | postgres
 LOCK_GROUPS             | END                          | myGroup1                     | 6 tables locked, 0 deadlock(s)                                                                                         | postgres
 SET_MARK_GROUPS         | BEGIN                        | myGroup1                     | back to idle myGroup2                                                                                                  | postgres
 SET_MARK_GROUPS         | END                          | myGroup1                     | back to idle myGroup2                                                                                                  | postgres
 ALTER_GROUPS            | LOG DATA TABLESPACE CHANGED  | myschema2."myTbl3"           | tsplog1 => Default tablespace                                                                                          | postgres
 ALTER_GROUPS            | LOG INDEX TABLESPACE CHANGED | myschema2."myTbl3"           | tsplog1 => Default tablespace                                                                                          | postgres
 ALTER_GROUPS            | TABLE MOVED                  | myschema2."myTbl3"           | From the logging group myGroup1 to the idle group myGroup2                                                             | postgres
 ALTER_GROUPS            | SEQUENCE MOVED               | myschema2."myTbl3_col31_seq" | From the logging group myGroup1 to the idle group myGroup2                                                             | postgres
 ALTER_GROUPS            | END                          | myGroup1,myGroup2            | Timestamp Id : 6143                                                                                                    | postgres
 START_GROUP             | BEGIN                        | myGroup2                     | With log reset                                                                                                         | postgres
 LOCK_GROUP              | BEGIN                        | myGroup2                     |                                                                                                                        | postgres
 LOCK_GROUP              | END                          | myGroup2                     | 6 tables locked, 0 deadlock(s)                                                                                         | postgres
 SET_MARK_GROUP          | BEGIN                        | myGroup2                     | Start                                                                                                                  | postgres
 SET_MARK_GROUP          | END                          | myGroup2                     | Start                                                                                                                  | postgres
 START_GROUP             | END                          | myGroup2                     | 8 tables/sequences processed                                                                                           | postgres
 REMOVE_TABLES           | BEGIN                        |                              |                                                                                                                        | postgres
 LOCK_GROUP              | BEGIN                        | myGroup2,myGroup2,myGroup2   |                                                                                                                        | postgres
 LOCK_GROUP              | END                          | myGroup2,myGroup2,myGroup2   | 6 tables locked, 0 deadlock(s)                                                                                         | postgres
 SET_MARK_GROUP          | BEGIN                        | myGroup2,myGroup2,myGroup2   | REMOVE_3_TABLES                                                                                                        | postgres
 SET_MARK_GROUP          | END                          | myGroup2,myGroup2,myGroup2   | REMOVE_3_TABLES                                                                                                        | postgres
 REMOVE_TABLES           | TABLE REMOVED                | myschema2."myTbl3"           | From the logging group myGroup2                                                                                        | postgres
 REMOVE_TABLES           | TABLE REMOVED                | myschema2.mytbl1             | From the logging group myGroup2                                                                                        | postgres
 REMOVE_TABLES           | TABLE REMOVED                | myschema2.mytbl2             | From the logging group myGroup2                                                                                        | postgres
 REMOVE_TABLES           | END                          |                              | 3 tables removed from their groups                                                                                     | postgres
 REMOVE_SEQUENCE         | BEGIN                        |                              |                                                                                                                        | postgres
 LOCK_GROUP              | BEGIN                        | myGroup2                     |                                                                                                                        | postgres
 LOCK_GROUP              | END                          | myGroup2                     | 3 tables locked, 0 deadlock(s)                                                                                         | postgres
 SET_MARK_GROUP          | BEGIN                        | myGroup2                     | REMOVE_1_SEQUENCES                                                                                                     | postgres
 SET_MARK_GROUP          | END                          | myGroup2                     | REMOVE_1_SEQUENCES                                                                                                     | postgres
 REMOVE_SEQUENCE         | SEQUENCE REMOVED             | myschema2.myseq1             | From the logging group myGroup2                                                                                        | postgres
 REMOVE_SEQUENCE         | END                          |                              | 1 sequences removed from their groups                                                                                  | postgres
 ASSIGN_TABLES           | BEGIN                        |                              |                                                                                                                        | postgres
 LOCK_GROUP              | BEGIN                        | myGroup2                     |                                                                                                                        | postgres
 LOCK_GROUP              | END                          | myGroup2                     | 3 tables locked, 0 deadlock(s)                                                                                         | postgres
 SET_MARK_GROUP          | BEGIN                        | myGroup2                     | ASSIGN_3_TABLES                                                                                                        | postgres
 SET_MARK_GROUP          | END                          | myGroup2                     | ASSIGN_3_TABLES                                                                                                        | postgres
 ASSIGN_TABLES           | TABLE ADDED                  | myschema2."myTbl3"           | To the logging group myGroup2                                                                                          | postgres
 ASSIGN_TABLES           | TABLE ADDED                  | myschema2.mytbl1             | To the logging group myGroup2                                                                                          | postgres
 ASSIGN_TABLES           | TABLE ADDED                  | myschema2.mytbl2             | To the logging group myGroup2                                                                                          | postgres
 ASSIGN_TABLES           | END                          |                              | 3 tables assigned to the group myGroup2                                                                                | postgres
 ASSIGN_SEQUENCES        | BEGIN                        |                              |                                                                                                                        | postgres
 LOCK_GROUP              | BEGIN                        | myGroup2                     |                                                                                                                        | postgres
 LOCK_GROUP              | END                          | myGroup2                     | 6 tables locked, 0 deadlock(s)                                                                                         | postgres
 SET_MARK_GROUP          | BEGIN                        | myGroup2                     | ASSIGN_2_SEQUENCES                                                                                                     | postgres
 SET_MARK_GROUP          | END                          | myGroup2                     | ASSIGN_2_SEQUENCES                                                                                                     | postgres
 ASSIGN_SEQUENCES        | SEQUENCE ADDED               | myschema2.myseq1             | To the logging group myGroup2                                                                                          | postgres
 ASSIGN_SEQUENCES        | SEQUENCE ADDED               | myschema2.myseq2             | To the logging group myGroup2                                                                                          | postgres
 ASSIGN_SEQUENCES        | END                          |                              | 2 sequences assigned to the group myGroup2                                                                             | postgres
 DISABLE_PROTECTION      | EVENT TRIGGERS DISABLED      |                              | emaj_protection_trg, emaj_sql_drop_trg, emaj_table_rewrite_trg                                                         | postgres
 ENABLE_PROTECTION       | EVENT TRIGGERS ENABLED       |                              | emaj_protection_trg, emaj_sql_drop_trg, emaj_table_rewrite_trg                                                         | postgres
 REMOVE_TABLES           | BEGIN                        |                              |                                                                                                                        | postgres
 LOCK_GROUP              | BEGIN                        | myGroup2,myGroup2,myGroup2   |                                                                                                                        | postgres
 LOCK_GROUP              | END                          | myGroup2,myGroup2,myGroup2   | 6 tables locked, 0 deadlock(s)                                                                                         | postgres
 SET_MARK_GROUP          | BEGIN                        | myGroup2,myGroup2,myGroup2   | REMOVE_%                                                                                                               | postgres
 SET_MARK_GROUP          | END                          | myGroup2,myGroup2,myGroup2   | REMOVE_%                                                                                                               | postgres
 REMOVE_TABLES           | TABLE REMOVED                | myschema2."myTbl3"           | From the logging group myGroup2                                                                                        | postgres
 REMOVE_TABLES           | TABLE REMOVED                | myschema2.mytbl1             | From the logging group myGroup2                                                                                        | postgres
 REMOVE_TABLES           | TABLE REMOVED                | myschema2.mytbl2             | From the logging group myGroup2                                                                                        | postgres
 REMOVE_TABLES           | END                          |                              | 3 tables removed from their groups                                                                                     | postgres
 REMOVE_SEQUENCES        | BEGIN                        |                              |                                                                                                                        | postgres
 LOCK_GROUP              | BEGIN                        | myGroup2,myGroup2            |                                                                                                                        | postgres
 LOCK_GROUP              | END                          | myGroup2,myGroup2            | 3 tables locked, 0 deadlock(s)                                                                                         | postgres
 SET_MARK_GROUP          | BEGIN                        | myGroup2,myGroup2            | REMOVE_%                                                                                                               | postgres
 SET_MARK_GROUP          | END                          | myGroup2,myGroup2            | REMOVE_%                                                                                                               | postgres
 REMOVE_SEQUENCES        | SEQUENCE REMOVED             | myschema2.myseq1             | From the logging group myGroup2                                                                                        | postgres
 REMOVE_SEQUENCES        | SEQUENCE REMOVED             | myschema2.myseq2             | From the logging group myGroup2                                                                                        | postgres
 REMOVE_SEQUENCES        | END                          |                              | 2 sequences removed from their groups                                                                                  | postgres
 ASSIGN_TABLES           | BEGIN                        |                              |                                                                                                                        | postgres
 LOCK_GROUP              | BEGIN                        | myGroup2                     |                                                                                                                        | postgres
 LOCK_GROUP              | END                          | myGroup2                     | 3 tables locked, 0 deadlock(s)                                                                                         | postgres
 SET_MARK_GROUP          | BEGIN                        | myGroup2                     | ASSIGN_%                                                                                                               | postgres
 SET_MARK_GROUP          | END                          | myGroup2                     | ASSIGN_%                                                                                                               | postgres
 ASSIGN_TABLES           | TABLE ADDED                  | myschema2."myTbl3"           | To the logging group myGroup2                                                                                          | postgres
 ASSIGN_TABLES           | TABLE ADDED                  | myschema2.mytbl1             | To the logging group myGroup2                                                                                          | postgres
 ASSIGN_TABLES           | TABLE ADDED                  | myschema2.mytbl2             | To the logging group myGroup2                                                                                          | postgres
 ASSIGN_TABLES           | END                          |                              | 3 tables assigned to the group myGroup2                                                                                | postgres
 ASSIGN_SEQUENCES        | BEGIN                        |                              |                                                                                                                        | postgres
 LOCK_GROUP              | BEGIN                        | myGroup2                     |                                                                                                                        | postgres
 LOCK_GROUP              | END                          | myGroup2                     | 6 tables locked, 0 deadlock(s)                                                                                         | postgres
 SET_MARK_GROUP          | BEGIN                        | myGroup2                     | Mark_assign_sequences                                                                                                  | postgres
 SET_MARK_GROUP          | END                          | myGroup2                     | Mark_assign_sequences                                                                                                  | postgres
 ASSIGN_SEQUENCES        | SEQUENCE ADDED               | myschema2.myseq1             | To the logging group myGroup2                                                                                          | postgres
 ASSIGN_SEQUENCES        | SEQUENCE ADDED               | myschema2.myseq2             | To the logging group myGroup2                                                                                          | postgres
 ASSIGN_SEQUENCES        | END                          |                              | 2 sequences assigned to the group myGroup2                                                                             | postgres
 REMOVE_TABLE            | BEGIN                        |                              |                                                                                                                        | postgres
 LOCK_GROUP              | BEGIN                        | myGroup1                     |                                                                                                                        | postgres
 LOCK_GROUP              | END                          | myGroup1                     | 5 tables locked, 0 deadlock(s)                                                                                         | postgres
 SET_MARK_GROUP          | BEGIN                        | myGroup1                     | REMOVE_%                                                                                                               | postgres
 SET_MARK_GROUP          | END                          | myGroup1                     | REMOVE_%                                                                                                               | postgres
 REMOVE_TABLE            | TABLE REMOVED                | myschema1.mytbl4             | From the logging group myGroup1                                                                                        | postgres
 REMOVE_TABLE            | END                          |                              | 1 tables removed from their groups                                                                                     | postgres
 ASSIGN_TABLE            | BEGIN                        |                              |                                                                                                                        | postgres
 LOCK_GROUP              | BEGIN                        | myGroup1                     |                                                                                                                        | postgres
 LOCK_GROUP              | END                          | myGroup1                     | 4 tables locked, 0 deadlock(s)                                                                                         | postgres
 SET_MARK_GROUP          | BEGIN                        | myGroup1                     | ASSIGN_%                                                                                                               | postgres
 SET_MARK_GROUP          | END                          | myGroup1                     | ASSIGN_%                                                                                                               | postgres
 ASSIGN_TABLE            | TABLE ADDED                  | myschema1.mytbl4             | To the logging group myGroup1                                                                                          | postgres
 ASSIGN_TABLE            | END                          |                              | 1 tables assigned to the group myGroup1                                                                                | postgres
 REMOVE_TABLE            | BEGIN                        |                              |                                                                                                                        | postgres
 LOCK_GROUP              | BEGIN                        | myGroup1                     |                                                                                                                        | postgres
 LOCK_GROUP              | END                          | myGroup1                     | 5 tables locked, 0 deadlock(s)                                                                                         | postgres
 SET_MARK_GROUP          | BEGIN                        | myGroup1                     | REMOVE_%                                                                                                               | postgres
 SET_MARK_GROUP          | END                          | myGroup1                     | REMOVE_%                                                                                                               | postgres
 REMOVE_TABLE            | TABLE REMOVED                | myschema1.mytbl4             | From the logging group myGroup1                                                                                        | postgres
 REMOVE_TABLE            | END                          |                              | 1 tables removed from their groups                                                                                     | postgres
 ASSIGN_TABLE            | BEGIN                        |                              |                                                                                                                        | postgres
 LOCK_GROUP              | BEGIN                        | myGroup1                     |                                                                                                                        | postgres
 LOCK_GROUP              | END                          | myGroup1                     | 4 tables locked, 0 deadlock(s)                                                                                         | postgres
 SET_MARK_GROUP          | BEGIN                        | myGroup1                     | ASSIGN_%                                                                                                               | postgres
 SET_MARK_GROUP          | END                          | myGroup1                     | ASSIGN_%                                                                                                               | postgres
 ASSIGN_TABLE            | TABLE ADDED                  | myschema1.mytbl4             | To the logging group myGroup1                                                                                          | postgres
 ASSIGN_TABLE            | END                          |                              | 1 tables assigned to the group myGroup1                                                                                | postgres
 MOVE_TABLES             | BEGIN                        |                              |                                                                                                                        | postgres
 LOCK_GROUP              | BEGIN                        | myGroup1                     |                                                                                                                        | postgres
 LOCK_GROUP              | END                          | myGroup1                     | 5 tables locked, 0 deadlock(s)                                                                                         | postgres
 SET_MARK_GROUPS         | BEGIN                        | myGroup1                     | MOVE_TBL_idle_to_logging                                                                                               | postgres
 SET_MARK_GROUPS         | END                          | myGroup1                     | MOVE_TBL_idle_to_logging                                                                                               | postgres
 MOVE_TABLES             | TABLE MOVED                  | myschema4.mypartp1           | From the idle group myGroup4 to the logging group myGroup1                                                             | postgres
 MOVE_TABLES             | TABLE MOVED                  | myschema4.mypartp2           | From the idle group myGroup4 to the logging group myGroup1                                                             | postgres
 MOVE_TABLES             | TABLE MOVED                  | myschema4.mytblc1            | From the idle group myGroup4 to the logging group myGroup1                                                             | postgres
 MOVE_TABLES             | TABLE MOVED                  | myschema4.mytblc2            | From the idle group myGroup4 to the logging group myGroup1                                                             | postgres
 MOVE_TABLES             | TABLE MOVED                  | myschema4.mytblm             | From the idle group myGroup4 to the logging group myGroup1                                                             | postgres
 MOVE_TABLES             | END                          |                              | 5 tables moved to the new tables group myGroup1                                                                        | postgres
 MOVE_SEQUENCES          | BEGIN                        |                              |                                                                                                                        | postgres
 LOCK_GROUP              | BEGIN                        | myGroup1,myGroup2            |                                                                                                                        | postgres
 LOCK_GROUP              | END                          | myGroup1,myGroup2            | 16 tables locked, 0 deadlock(s)                                                                                        | postgres
 SET_MARK_GROUPS         | BEGIN                        | myGroup1,myGroup2            | MOVE_SEQ_idle_to_logging                                                                                               | postgres
 SET_MARK_GROUPS         | END                          | myGroup1,myGroup2            | MOVE_SEQ_idle_to_logging                                                                                               | postgres
 MOVE_SEQUENCES          | SEQUENCE MOVED               | myschema2."myTbl3_col31_seq" | From the logging group myGroup2 to the logging group myGroup1                                                          | postgres
 MOVE_SEQUENCES          | SEQUENCE MOVED               | myschema2.myseq1             | From the logging group myGroup2 to the logging group myGroup1                                                          | postgres
 MOVE_SEQUENCES          | SEQUENCE MOVED               | myschema2.myseq2             | From the logging group myGroup2 to the logging group myGroup1                                                          | postgres
 MOVE_SEQUENCES          | END                          |                              | 3 sequences moved to the new tables group myGroup1                                                                     | postgres
 MOVE_TABLES             | BEGIN                        |                              |                                                                                                                        | postgres
 LOCK_GROUP              | BEGIN                        | myGroup1,myGroup2            |                                                                                                                        | postgres
 LOCK_GROUP              | END                          | myGroup1,myGroup2            | 16 tables locked, 0 deadlock(s)                                                                                        | postgres
 SET_MARK_GROUPS         | BEGIN                        | myGroup1,myGroup2            | MOVE_TBL_logging_to_logging                                                                                            | postgres
 SET_MARK_GROUPS         | END                          | myGroup1,myGroup2            | MOVE_TBL_logging_to_logging                                                                                            | postgres
 MOVE_TABLES             | TABLE MOVED                  | myschema4.mypartp1           | From the logging group myGroup1 to the logging group myGroup2                                                          | postgres
 MOVE_TABLES             | TABLE MOVED                  | myschema4.mypartp2           | From the logging group myGroup1 to the logging group myGroup2                                                          | postgres
 MOVE_TABLES             | TABLE MOVED                  | myschema4.mytblc1            | From the logging group myGroup1 to the logging group myGroup2                                                          | postgres
 MOVE_TABLES             | TABLE MOVED                  | myschema4.mytblc2            | From the logging group myGroup1 to the logging group myGroup2                                                          | postgres
 MOVE_TABLES             | TABLE MOVED                  | myschema4.mytblm             | From the logging group myGroup1 to the logging group myGroup2                                                          | postgres
 MOVE_TABLES             | END                          |                              | 5 tables moved to the new tables group myGroup2                                                                        | postgres
 MOVE_SEQUENCES          | BEGIN                        |                              |                                                                                                                        | postgres
 LOCK_GROUP              | BEGIN                        | myGroup1,myGroup2            |                                                                                                                        | postgres
 LOCK_GROUP              | END                          | myGroup1,myGroup2            | 16 tables locked, 0 deadlock(s)                                                                                        | postgres
 SET_MARK_GROUPS         | BEGIN                        | myGroup1,myGroup2            | MOVE_SEQ_logging_to_logging                                                                                            | postgres
 SET_MARK_GROUPS         | END                          | myGroup1,myGroup2            | MOVE_SEQ_logging_to_logging                                                                                            | postgres
 MOVE_SEQUENCES          | SEQUENCE MOVED               | myschema2."myTbl3_col31_seq" | From the logging group myGroup1 to the logging group myGroup2                                                          | postgres
 MOVE_SEQUENCES          | SEQUENCE MOVED               | myschema2.myseq1             | From the logging group myGroup1 to the logging group myGroup2                                                          | postgres
 MOVE_SEQUENCES          | SEQUENCE MOVED               | myschema2.myseq2             | From the logging group myGroup1 to the logging group myGroup2                                                          | postgres
 MOVE_SEQUENCES          | END                          |                              | 3 sequences moved to the new tables group myGroup2                                                                     | postgres
 MOVE_TABLES             | BEGIN                        |                              |                                                                                                                        | postgres
 LOCK_GROUP              | BEGIN                        | myGroup2                     |                                                                                                                        | postgres
 LOCK_GROUP              | END                          | myGroup2                     | 11 tables locked, 0 deadlock(s)                                                                                        | postgres
 SET_MARK_GROUPS         | BEGIN                        | myGroup2                     | MOVE_TBL_logging_to_idle                                                                                               | postgres
 SET_MARK_GROUPS         | END                          | myGroup2                     | MOVE_TBL_logging_to_idle                                                                                               | postgres
 MOVE_TABLES             | TABLE MOVED                  | myschema4.mypartp1           | From the logging group myGroup2 to the idle group myGroup4                                                             | postgres
 MOVE_TABLES             | TABLE MOVED                  | myschema4.mypartp2           | From the logging group myGroup2 to the idle group myGroup4                                                             | postgres
 MOVE_TABLES             | TABLE MOVED                  | myschema4.mytblc1            | From the logging group myGroup2 to the idle group myGroup4                                                             | postgres
 MOVE_TABLES             | TABLE MOVED                  | myschema4.mytblc2            | From the logging group myGroup2 to the idle group myGroup4                                                             | postgres
 MOVE_TABLES             | TABLE MOVED                  | myschema4.mytblm             | From the logging group myGroup2 to the idle group myGroup4                                                             | postgres
 MOVE_TABLES             | END                          |                              | 5 tables moved to the new tables group myGroup4                                                                        | postgres
 MOVE_SEQUENCES          | BEGIN                        |                              |                                                                                                                        | postgres
 LOCK_GROUP              | BEGIN                        | myGroup2                     |                                                                                                                        | postgres
 LOCK_GROUP              | END                          | myGroup2                     | 6 tables locked, 0 deadlock(s)                                                                                         | postgres
 SET_MARK_GROUPS         | BEGIN                        | myGroup2                     | MOVE_SEQ_logging_to_idle                                                                                               | postgres
 SET_MARK_GROUPS         | END                          | myGroup2                     | MOVE_SEQ_logging_to_idle                                                                                               | postgres
 MOVE_SEQUENCES          | SEQUENCE MOVED               | myschema2."myTbl3_col31_seq" | From the logging group myGroup2 to the idle group myGroup4                                                             | postgres
 MOVE_SEQUENCES          | SEQUENCE MOVED               | myschema2.myseq1             | From the logging group myGroup2 to the idle group myGroup4                                                             | postgres
 MOVE_SEQUENCES          | SEQUENCE MOVED               | myschema2.myseq2             | From the logging group myGroup2 to the idle group myGroup4                                                             | postgres
 MOVE_SEQUENCES          | END                          |                              | 3 sequences moved to the new tables group myGroup4                                                                     | postgres
 MOVE_TABLE              | BEGIN                        |                              |                                                                                                                        | postgres
 LOCK_GROUP              | BEGIN                        | myGroup1,myGroup2            |                                                                                                                        | postgres
 LOCK_GROUP              | END                          | myGroup1,myGroup2            | 11 tables locked, 0 deadlock(s)                                                                                        | postgres
 SET_MARK_GROUPS         | BEGIN                        | myGroup1,myGroup2            | Move a table with fkey                                                                                                 | postgres
 SET_MARK_GROUPS         | END                          | myGroup1,myGroup2            | Move a table with fkey                                                                                                 | postgres
 MOVE_TABLE              | TABLE MOVED                  | myschema2.mytbl2             | From the logging group myGroup2 to the logging group myGroup1                                                          | postgres
 MOVE_TABLE              | END                          |                              | 1 tables moved to the new tables group myGroup1                                                                        | postgres
 ADJUST_GROUP_PROPERTIES |                              | myGroup1                     | Set the group_has_waiting_changes column to true                                                                       | postgres
 ADJUST_GROUP_PROPERTIES |                              | myGroup2                     | Set the group_has_waiting_changes column to true                                                                       | postgres
 ADJUST_GROUP_PROPERTIES |                              | myGroup4                     | Set the group_has_waiting_changes column to true                                                                       | postgres
 MOVE_TABLE              | BEGIN                        |                              |                                                                                                                        | postgres
 LOCK_GROUP              | BEGIN                        | myGroup1,myGroup2            |                                                                                                                        | postgres
 LOCK_GROUP              | END                          | myGroup1,myGroup2            | 11 tables locked, 0 deadlock(s)                                                                                        | postgres
 SET_MARK_GROUPS         | BEGIN                        | myGroup1,myGroup2            | Move a table with fkey back                                                                                            | postgres
 SET_MARK_GROUPS         | END                          | myGroup1,myGroup2            | Move a table with fkey back                                                                                            | postgres
 MOVE_TABLE              | TABLE MOVED                  | myschema2.mytbl2             | From the logging group myGroup1 to the logging group myGroup2                                                          | postgres
 MOVE_TABLE              | END                          |                              | 1 tables moved to the new tables group myGroup2                                                                        | postgres
 MODIFY_TABLE            | BEGIN                        |                              |                                                                                                                        | postgres
 LOCK_GROUP              | BEGIN                        | myGroup1                     |                                                                                                                        | postgres
 LOCK_GROUP              | END                          | myGroup1                     | 5 tables locked, 0 deadlock(s)                                                                                         | postgres
 SET_MARK_GROUPS         | BEGIN                        | myGroup1                     | Priority dynamically changed                                                                                           | postgres
 SET_MARK_GROUPS         | END                          | myGroup1                     | Priority dynamically changed                                                                                           | postgres
 MODIFY_TABLE            | PRIORITY CHANGED             | myschema1.mytbl1             | 2 => 3                                                                                                                 | postgres
 MODIFY_TABLE            | END                          |                              | 1 tables effectively modified                                                                                          | postgres
 MODIFY_TABLES           | BEGIN                        |                              |                                                                                                                        | postgres
 LOCK_GROUP              | BEGIN                        | myGroup1                     |                                                                                                                        | postgres
 LOCK_GROUP              | END                          | myGroup1                     | 5 tables locked, 0 deadlock(s)                                                                                         | postgres
 SET_MARK_GROUPS         | BEGIN                        | myGroup1                     | Log data tablespace dynamically changed                                                                                | postgres
 SET_MARK_GROUPS         | END                          | myGroup1                     | Log data tablespace dynamically changed                                                                                | postgres
 MODIFY_TABLES           | LOG DATA TABLESPACE CHANGED  | myschema1.mytbl2b            | tsp log'2 => Default tablespace                                                                                        | postgres
 MODIFY_TABLES           | END                          |                              | 1 tables effectively modified                                                                                          | postgres
 MODIFY_TABLES           | BEGIN                        |                              |                                                                                                                        | postgres
 LOCK_GROUP              | BEGIN                        | myGroup2                     |                                                                                                                        | postgres
 LOCK_GROUP              | END                          | myGroup2                     | 6 tables locked, 0 deadlock(s)                                                                                         | postgres
 SET_MARK_GROUPS         | BEGIN                        | myGroup2                     | Log index tablespace dynamically changed                                                                               | postgres
 SET_MARK_GROUPS         | END                          | myGroup2                     | Log index tablespace dynamically changed                                                                               | postgres
 MODIFY_TABLES           | LOG INDEX TABLESPACE CHANGED | myschema2.mytbl6             | Default tablespace => tsplog1                                                                                          | postgres
 MODIFY_TABLES           | END                          |                              | 1 tables effectively modified                                                                                          | postgres
 MODIFY_TABLE            | BEGIN                        |                              |                                                                                                                        | postgres
 LOCK_GROUP              | BEGIN                        | myGroup1                     |                                                                                                                        | postgres
 LOCK_GROUP              | END                          | myGroup1                     | 5 tables locked, 0 deadlock(s)                                                                                         | postgres
 SET_MARK_GROUPS         | BEGIN                        | myGroup1                     | MODIFY_%                                                                                                               | postgres
 SET_MARK_GROUPS         | END                          | myGroup1                     | MODIFY_%                                                                                                               | postgres
 MODIFY_TABLE            | PRIORITY CHANGED             | myschema1.mytbl1             | 3 => 2                                                                                                                 | postgres
 MODIFY_TABLE            | END                          |                              | 1 tables effectively modified                                                                                          | postgres
 MODIFY_TABLES           | BEGIN                        |                              |                                                                                                                        | postgres
 LOCK_GROUP              | BEGIN                        | myGroup1                     |                                                                                                                        | postgres
 LOCK_GROUP              | END                          | myGroup1                     | 5 tables locked, 0 deadlock(s)                                                                                         | postgres
 SET_MARK_GROUPS         | BEGIN                        | myGroup1                     | MODIFY_%                                                                                                               | postgres
 SET_MARK_GROUPS         | END                          | myGroup1                     | MODIFY_%                                                                                                               | postgres
 MODIFY_TABLES           | LOG DATA TABLESPACE CHANGED  | myschema1.mytbl2b            | Default tablespace => tsp log'2                                                                                        | postgres
 MODIFY_TABLES           | END                          |                              | 1 tables effectively modified                                                                                          | postgres
 MODIFY_TABLES           | BEGIN                        |                              |                                                                                                                        | postgres
 LOCK_GROUP              | BEGIN                        | myGroup2                     |                                                                                                                        | postgres
 LOCK_GROUP              | END                          | myGroup2                     | 6 tables locked, 0 deadlock(s)                                                                                         | postgres
 SET_MARK_GROUPS         | BEGIN                        | myGroup2                     | MODIFY_%                                                                                                               | postgres
 SET_MARK_GROUPS         | END                          | myGroup2                     | MODIFY_%                                                                                                               | postgres
 MODIFY_TABLES           | LOG INDEX TABLESPACE CHANGED | myschema2.mytbl6             | tsplog1 => Default tablespace                                                                                          | postgres
 MODIFY_TABLES           | END                          |                              | 1 tables effectively modified                                                                                          | postgres
 STOP_GROUP              | BEGIN                        | myGroup1                     |                                                                                                                        | postgres
 LOCK_GROUP              | BEGIN                        | myGroup1                     |                                                                                                                        | postgres
 LOCK_GROUP              | END                          | myGroup1                     | 5 tables locked, 0 deadlock(s)                                                                                         | postgres
 SET_MARK_GROUP          | BEGIN                        | myGroup1                     | STOP_%                                                                                                                 | postgres
 SET_MARK_GROUP          | END                          | myGroup1                     | STOP_%                                                                                                                 | postgres
 STOP_GROUP              | END                          | myGroup1                     | 7 tables/sequences processed                                                                                           | postgres
 DROP_GROUP              | BEGIN                        | myGroup1                     |                                                                                                                        | postgres
 DROP_GROUP              | LOG_SCHEMA DROPPED           | emaj_myschema1               |                                                                                                                        | postgres
 DROP_GROUP              | END                          | myGroup1                     | 7 tables/sequences processed                                                                                           | postgres
 STOP_GROUP              | BEGIN                        | myGroup2                     |                                                                                                                        | postgres
 LOCK_GROUP              | BEGIN                        | myGroup2                     |                                                                                                                        | postgres
 LOCK_GROUP              | END                          | myGroup2                     | 6 tables locked, 0 deadlock(s)                                                                                         | postgres
 SET_MARK_GROUP          | BEGIN                        | myGroup2                     | STOP_%                                                                                                                 | postgres
 SET_MARK_GROUP          | END                          | myGroup2                     | STOP_%                                                                                                                 | postgres
 STOP_GROUP              | END                          | myGroup2                     | 6 tables/sequences processed                                                                                           | postgres
 DROP_GROUP              | BEGIN                        | myGroup2                     |                                                                                                                        | postgres
 DROP_GROUP              | LOG_SCHEMA DROPPED           | emaj_myschema2               |                                                                                                                        | postgres
 DROP_GROUP              | END                          | myGroup2                     | 6 tables/sequences processed                                                                                           | postgres
 DROP_GROUP              | BEGIN                        | myGroup4                     |                                                                                                                        | postgres
 DROP_GROUP              | LOG_SCHEMA DROPPED           | emaj_myschema4               |                                                                                                                        | postgres
 DROP_GROUP              | END                          | myGroup4                     | 8 tables/sequences processed                                                                                           | postgres
(1054 rows)

select time_id, time_last_emaj_gid, time_event from emaj.emaj_time_stamp where time_id > 6000 order by time_id;
 time_id | time_last_emaj_gid | time_event 
---------+--------------------+------------
    6001 |              59999 | D
    6002 |              59999 | D
    6003 |              59999 | M
    6004 |              59999 | D
    6005 |              59999 | D
    6006 |              59999 | D
    6007 |              59999 | C
    6008 |              59999 | C
    6009 |              59999 | C
    6010 |              59999 | C
    6013 |              59999 | A
    6014 |              59999 | A
    6015 |              59999 | A
    6016 |              59999 | A
    6017 |              59999 | A
    6018 |              59999 | A
    6019 |              59999 | A
    6020 |              59999 | A
    6021 |              59999 | A
    6022 |              59999 | A
    6023 |              59999 | A
    6024 |              59999 | A
    6025 |              59999 | A
    6026 |              59999 | A
    6027 |              59999 | A
    6028 |              59999 | A
    6029 |              59999 | A
    6030 |              59999 | A
    6031 |              59999 | A
    6032 |              59999 | A
    6033 |              59999 | A
    6034 |              59999 | A
    6035 |              59999 | A
    6036 |              59999 | A
    6037 |              59999 | A
    6038 |              59999 | A
    6041 |              59999 | A
    6042 |              59999 | A
    6043 |              59999 | A
    6044 |              59999 | A
    6045 |              59999 | A
    6046 |              59999 | A
    6049 |              59999 | A
    6050 |              59999 | A
    6051 |              59999 | A
    6052 |              59999 | A
    6053 |              59999 | A
    6054 |              59999 | A
    6055 |              59999 | A
    6056 |              59999 | A
    6057 |              59999 | A
    6058 |              59999 | A
    6059 |              59999 | A
    6060 |              59999 | A
    6061 |              59999 | A
    6062 |              59999 | A
    6063 |              59999 | A
    6064 |              59999 | A
    6065 |              59999 | M
    6066 |              59999 | A
    6067 |              59999 | A
    6068 |              59999 | M
    6069 |              60001 | R
    6070 |              60001 | A
    6071 |              60001 | A
    6072 |              60001 | M
    6073 |              60001 | M
    6074 |              60001 | A
    6075 |              60001 | M
    6077 |              60001 | R
    6078 |              60001 | M
    6079 |              60001 | A
    6080 |              60001 | A
    6081 |              60001 | A
    6082 |              60001 | R
    6083 |              60001 | M
    6084 |              60001 | M
    6085 |              60001 | A
    6086 |              60001 | S
    6087 |              60001 | M
    6088 |              60001 | R
    6090 |              60001 | R
    6093 |              60001 | A
    6094 |              60001 | M
    6095 |              60001 | M
    6096 |              60001 | A
    6098 |              60003 | M
    6099 |              60004 | M
    6101 |              60004 | R
    6102 |              60008 | M
    6103 |              60011 | A
    6104 |              60011 | A
    6105 |              60012 | S
    6106 |              60012 | A
    6107 |              60012 | R
    6108 |              60013 | M
    6109 |              60014 | A
    6110 |              60014 | A
    6112 |              60014 | S
    6114 |              60015 | R
    6115 |              60016 | M
    6116 |              60016 | A
    6117 |              60016 | R
    6122 |              60016 | A
    6123 |              60016 | M
    6124 |              60016 | R
    6125 |              60016 | R
    6126 |              60016 | M
    6127 |              60016 | R
    6128 |              60016 | R
    6129 |              60016 | R
    6130 |              60016 | M
    6131 |              60016 | R
    6136 |              60016 | M
    6137 |              60019 | A
    6138 |              60019 | M
    6139 |              60021 | R
    6140 |              60025 | M
    6141 |              60025 | R
    6142 |              60025 | M
    6143 |              60025 | A
    6144 |              60025 | M
    6145 |              60026 | A
    6146 |              60026 | A
    6147 |              60026 | A
    6148 |              60026 | A
    6149 |              60027 | A
    6150 |              60027 | A
    6151 |              60027 | A
    6152 |              60027 | A
    6153 |              60027 | A
    6154 |              60027 | A
    6155 |              60027 | A
    6156 |              60027 | A
    6157 |              60027 | A
    6158 |              60027 | A
    6159 |              60027 | A
    6160 |              60027 | A
    6161 |              60027 | A
    6162 |              60027 | A
    6163 |              60027 | A
    6164 |              60027 | A
    6165 |              60027 | A
    6166 |              60027 | A
    6167 |              60027 | A
    6168 |              60027 | A
    6169 |              60027 | A
    6170 |              60027 | A
    6171 |              60027 | M
    6172 |              60027 | D
    6173 |              60027 | M
    6174 |              60027 | D
    6175 |              60027 | D
(153 rows)

select * from emaj.emaj_alter_plan order by 1,2,3,4,5;
 altr_time_id |        altr_step         | altr_schema |   altr_tblseq    | altr_group | altr_priority | altr_group_is_logging | altr_new_group | altr_new_group_is_logging | altr_rlbk_id 
--------------+--------------------------+-------------+------------------+------------+---------------+-----------------------+----------------+---------------------------+--------------
         6013 | RESET_GROUP              |             |                  | emptyGroup |               | f                     |                |                           |             
         6014 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                           |             
         6015 | REMOVE_TBL               | myschema1   | myTbl3           | myGroup1   |            10 | f                     |                |                           |             
         6015 | REMOVE_TBL               | myschema1   | mytbl2b          | myGroup1   |               | f                     |                |                           |             
         6015 | REMOVE_TBL               | myschema1   | mytbl4           | myGroup1   |            20 | f                     |                |                           |             
         6015 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                           |             
         6016 | REMOVE_SEQ               | myschema1   | myTbl3_col31_seq | myGroup1   |               | f                     |                |                           |             
         6016 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                           |             
         6017 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                           |             
         6017 | ADD_TBL                  | myschema1   | myTbl3           | myGroup1   |            10 | f                     |                |                           |             
         6017 | ADD_TBL                  | myschema1   | mytbl2b          | myGroup1   |               | f                     |                |                           |             
         6017 | ADD_TBL                  | myschema1   | mytbl4           | myGroup1   |            20 | f                     |                |                           |             
         6018 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                           |             
         6018 | ADD_SEQ                  | myschema1   | myTbl3_col31_seq | myGroup1   |               | f                     |                |                           |             
         6019 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                           |             
         6019 | CHANGE_TBL_LOG_DATA_TSP  | myschema1   | mytbl2b          | myGroup1   |               | f                     |                |                           |             
         6020 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                           |             
         6020 | CHANGE_TBL_LOG_DATA_TSP  | myschema1   | mytbl2b          | myGroup1   |               | f                     |                |                           |             
         6021 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                           |             
         6021 | CHANGE_TBL_LOG_DATA_TSP  | myschema1   | myTbl3           | myGroup1   |            10 | f                     |                |                           |             
         6021 | CHANGE_TBL_LOG_DATA_TSP  | myschema1   | mytbl1           | myGroup1   |            20 | f                     |                |                           |             
         6021 | CHANGE_TBL_LOG_DATA_TSP  | myschema1   | mytbl2           | myGroup1   |               | f                     |                |                           |             
         6021 | CHANGE_TBL_LOG_DATA_TSP  | myschema1   | mytbl2b          | myGroup1   |               | f                     |                |                           |             
         6021 | CHANGE_TBL_LOG_DATA_TSP  | myschema1   | mytbl4           | myGroup1   |            20 | f                     |                |                           |             
         6022 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                           |             
         6022 | CHANGE_TBL_LOG_DATA_TSP  | myschema1   | myTbl3           | myGroup1   |            10 | f                     |                |                           |             
         6022 | CHANGE_TBL_LOG_DATA_TSP  | myschema1   | mytbl1           | myGroup1   |            20 | f                     |                |                           |             
         6022 | CHANGE_TBL_LOG_DATA_TSP  | myschema1   | mytbl2           | myGroup1   |               | f                     |                |                           |             
         6022 | CHANGE_TBL_LOG_DATA_TSP  | myschema1   | mytbl2b          | myGroup1   |               | f                     |                |                           |             
         6022 | CHANGE_TBL_LOG_DATA_TSP  | myschema1   | mytbl4           | myGroup1   |            20 | f                     |                |                           |             
         6023 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                           |             
         6023 | CHANGE_TBL_LOG_INDEX_TSP | myschema1   | mytbl2b          | myGroup1   |               | f                     |                |                           |             
         6024 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                           |             
         6024 | CHANGE_TBL_LOG_INDEX_TSP | myschema1   | mytbl2b          | myGroup1   |               | f                     |                |                           |             
         6025 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                           |             
         6025 | CHANGE_REL_PRIORITY      | myschema1   | mytbl1           | myGroup1   |            30 | f                     |                |                           |             
         6026 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                           |             
         6026 | CHANGE_REL_PRIORITY      | myschema1   | mytbl1           | myGroup1   |               | f                     |                |                           |             
         6027 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                           |             
         6027 | CHANGE_REL_PRIORITY      | myschema1   | mytbl1           | myGroup1   |            20 | f                     |                |                           |             
         6028 | REPAIR_TBL               | myschema1   | mytbl1           | myGroup1   |            20 | f                     |                |                           |             
         6028 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                           |             
         6029 | REPAIR_TBL               | myschema1   | mytbl1           | myGroup1   |            20 | f                     |                |                           |             
         6029 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                           |             
         6030 | REPAIR_TBL               | myschema1   | mytbl1           | myGroup1   |            20 | f                     |                |                           |             
         6030 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                           |             
         6031 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                           |             
         6032 | REPAIR_TBL               | myschema1   | mytbl1           | myGroup1   |            20 | f                     |                |                           |             
         6032 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                           |             
         6033 | REMOVE_TBL               | myschema1   | mytbl1           | myGroup1   |            20 | f                     |                |                           |             
         6033 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                           |             
         6033 | ADD_TBL                  | myschema1   | mytbl1_new_name  | myGroup1   |            20 | f                     |                |                           |             
         6034 | REMOVE_TBL               | myschema1   | mytbl1_new_name  | myGroup1   |            20 | f                     |                |                           |             
         6034 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                           |             
         6034 | ADD_TBL                  | public      | mytbl1_new_name  | myGroup1   |            20 | f                     |                |                           |             
         6035 | REMOVE_TBL               | public      | mytbl1_new_name  | myGroup1   |            20 | f                     |                |                           |             
         6035 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                           |             
         6035 | ADD_TBL                  | myschema1   | mytbl1           | myGroup1   |            20 | f                     |                |                           |             
         6036 | REPAIR_TBL               | myschema1   | mytbl1           | myGroup1   |            20 | f                     |                |                           |             
         6036 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                           |             
         6037 | REPAIR_TBL               | myschema1   | mytbl1           | myGroup1   |            20 | f                     |                |                           |             
         6037 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                           |             
         6038 | REPAIR_TBL               | myschema1   | mytbl1           | myGroup1   |            20 | f                     |                |                           |             
         6038 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                           |             
         6041 | REMOVE_TBL               | myschema1   | myTbl3           | myGroup1   |            10 | f                     |                |                           |             
         6041 | REMOVE_TBL               | myschema1   | mytbl2b          | myGroup1   |               | f                     |                |                           |             
         6041 | REMOVE_TBL               | myschema2   | mytbl4           | myGroup2   |               | f                     |                |                           |             
         6041 | REMOVE_SEQ               | myschema1   | myTbl3_col31_seq | myGroup1   |               | f                     |                |                           |             
         6041 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                           |             
         6041 | RESET_GROUP              |             |                  | myGroup2   |               | f                     |                |                           |             
         6042 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                           |             
         6042 | RESET_GROUP              |             |                  | myGroup2   |               | f                     |                |                           |             
         6042 | ADD_TBL                  | myschema1   | myTbl3           | myGroup1   |            10 | f                     |                |                           |             
         6042 | ADD_TBL                  | myschema1   | mytbl2b          | myGroup1   |               | f                     |                |                           |             
         6042 | ADD_TBL                  | myschema2   | mytbl4           | myGroup2   |               | f                     |                |                           |             
         6042 | ADD_SEQ                  | myschema1   | myTbl3_col31_seq | myGroup1   |               | f                     |                |                           |             
         6043 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                           |             
         6043 | RESET_GROUP              |             |                  | myGroup2   |               | f                     |                |                           |             
         6043 | CHANGE_TBL_LOG_DATA_TSP  | myschema1   | mytbl2b          | myGroup1   |               | f                     |                |                           |             
         6043 | CHANGE_TBL_LOG_INDEX_TSP | myschema2   | mytbl6           | myGroup2   |               | f                     |                |                           |             
         6043 | CHANGE_REL_PRIORITY      | myschema1   | mytbl1           | myGroup1   |            30 | f                     |                |                           |             
         6044 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                           |             
         6044 | RESET_GROUP              |             |                  | myGroup2   |               | f                     |                |                           |             
         6044 | CHANGE_TBL_LOG_DATA_TSP  | myschema1   | mytbl2b          | myGroup1   |               | f                     |                |                           |             
         6044 | CHANGE_TBL_LOG_INDEX_TSP | myschema2   | mytbl6           | myGroup2   |               | f                     |                |                           |             
         6044 | CHANGE_REL_PRIORITY      | myschema1   | mytbl1           | myGroup1   |            20 | f                     |                |                           |             
         6045 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                           |             
         6045 | RESET_GROUP              |             |                  | myGroup2   |               | f                     |                |                           |             
         6045 | MOVE_TBL                 | myschema2   | myTbl3           | myGroup2   |               | f                     | myGroup1       | f                         |             
         6045 | MOVE_SEQ                 | myschema2   | myTbl3_col31_seq | myGroup2   |               | f                     | myGroup1       | f                         |             
         6046 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                           |             
         6046 | RESET_GROUP              |             |                  | myGroup2   |               | f                     |                |                           |             
         6046 | MOVE_TBL                 | myschema2   | myTbl3           | myGroup1   |               | f                     | myGroup2       | f                         |             
         6046 | MOVE_SEQ                 | myschema2   | myTbl3_col31_seq | myGroup1   |               | f                     | myGroup2       | f                         |             
         6050 | MOVE_TBL                 | myschema1   | mytbl1           | myGroup1   |               | f                     | myGroup2       | f                         |             
         6051 | MOVE_TBL                 | myschema1   | mytbl2           | myGroup1   |               | f                     | myGroup2       | f                         |             
         6051 | MOVE_TBL                 | myschema1   | mytbl2b          | myGroup1   |               | f                     | myGroup2       | f                         |             
         6052 | MOVE_TBL                 | myschema1   | mytbl1           | myGroup2   |               | f                     | myGroup1       | f                         |             
         6052 | MOVE_TBL                 | myschema1   | mytbl2b          | myGroup2   |               | f                     | myGroup1       | f                         |             
         6053 | MOVE_TBL                 | myschema1   | mytbl2           | myGroup2   |               | f                     | myGroup1       | f                         |             
         6055 | MOVE_SEQ                 | myschema2   | myseq1           | myGroup2   |               | f                     | myGroup1       | f                         |             
         6056 | MOVE_SEQ                 | myschema2   | myseq1           | myGroup1   |               | f                     | myGroup4       | f                         |             
         6057 | MOVE_SEQ                 | myschema2   | myseq1           | myGroup4   |               | f                     | myGroup2       | f                         |             
         6058 | CHANGE_REL_PRIORITY      | myschema1   | mytbl2           | myGroup1   |             1 | f                     |                |                           |             
         6059 | CHANGE_TBL_LOG_DATA_TSP  | myschema1   | mytbl1           | myGroup1   |               | f                     |                |                           |             
         6060 | CHANGE_TBL_LOG_INDEX_TSP | myschema1   | mytbl1           | myGroup1   |               | f                     |                |                           |             
         6061 | CHANGE_REL_PRIORITY      | myschema1   | mytbl2           | myGroup1   |               | f                     |                |                           |             
         6062 | CHANGE_TBL_LOG_DATA_TSP  | myschema1   | mytbl1           | myGroup1   |               | f                     |                |                           |             
         6062 | CHANGE_TBL_LOG_INDEX_TSP | myschema1   | mytbl1           | myGroup1   |               | f                     |                |                           |             
         6063 | CHANGE_TBL_LOG_DATA_TSP  | myschema2   | mytbl1           | myGroup2   |               | f                     |                |                           |             
         6063 | CHANGE_TBL_LOG_DATA_TSP  | myschema2   | mytbl2           | myGroup2   |               | f                     |                |                           |             
         6063 | CHANGE_REL_PRIORITY      | myschema2   | mytbl1           | myGroup2   |            10 | f                     |                |                           |             
         6063 | CHANGE_REL_PRIORITY      | myschema2   | mytbl2           | myGroup2   |            10 | f                     |                |                           |             
         6064 | CHANGE_TBL_LOG_DATA_TSP  | myschema2   | mytbl1           | myGroup2   |               | f                     |                |                           |             
         6064 | CHANGE_TBL_LOG_DATA_TSP  | myschema2   | mytbl2           | myGroup2   |               | f                     |                |                           |             
         6064 | CHANGE_REL_PRIORITY      | myschema2   | mytbl1           | myGroup2   |               | f                     |                |                           |             
         6064 | CHANGE_REL_PRIORITY      | myschema2   | mytbl2           | myGroup2   |               | f                     |                |                           |             
         6066 | CHANGE_REL_PRIORITY      | myschema1   | mytbl1           | myGroup1   |            30 | t                     |                |                           |         6015
         6067 | CHANGE_TBL_LOG_DATA_TSP  | myschema1   | mytbl2b          | myGroup1   |               | t                     |                |                           |         6015
         6067 | CHANGE_TBL_LOG_INDEX_TSP | myschema2   | mytbl6           | myGroup2   |               | t                     |                |                           |         6015
         6070 | CHANGE_REL_PRIORITY      | myschema1   | mytbl1           | myGroup1   |            20 | t                     |                |                           |         6013
         6071 | CHANGE_TBL_LOG_DATA_TSP  | myschema1   | mytbl2b          | myGroup1   |               | t                     |                |                           |         6013
         6071 | CHANGE_TBL_LOG_INDEX_TSP | myschema2   | mytbl6           | myGroup2   |               | t                     |                |                           |         6013
         6074 | ADD_SEQ                  | myschema2   | myseq2           | myGroup2   |               | t                     |                |                           |         6002
         6079 | REMOVE_SEQ               | myschema2   | myseq2           | myGroup2   |               | t                     |                |                           |         6003
         6080 | ADD_SEQ                  | myschema2   | myseq2           | myGroup2   |               | t                     |                |                           |         6003
         6081 | REMOVE_SEQ               | myschema2   | myseq2           | myGroup2   |               | t                     |                |                           |         6003
         6085 | REMOVE_SEQ               | myschema1   | myTbl3_col31_seq | myGroup1   |               | t                     |                |                           |         6010
         6093 | ADD_SEQ                  | myschema1   | myTbl3_col31_seq | myGroup1   |               | t                     |                |                           |         6010
         6096 | ADD_TBL                  | myschema2   | mytbl7           | myGroup2   |               | t                     |                |                           |         6007
         6103 | REMOVE_TBL               | myschema2   | mytbl7           | myGroup2   |               | t                     |                |                           |         6008
         6104 | ADD_TBL                  | myschema2   | mytbl7           | myGroup2   |               | t                     |                |                           |         6008
         6106 | REMOVE_TBL               | myschema2   | mytbl7           | myGroup2   |               | t                     |                |                           |         6008
         6109 | REMOVE_TBL               | myschema1   | myTbl3           | myGroup1   |               | t                     |                |                           |         6010
         6109 | REMOVE_TBL               | myschema1   | mytbl2b          | myGroup1   |               | t                     |                |                           |         6010
         6116 | REMOVE_TBL               | myschema1   | mytbl1           | myGroup1   |            20 | t                     |                |                           |         6011
         6122 | ADD_TBL                  | myschema1   | myTbl3           | myGroup1   |            10 | t                     |                |                           |         6013
         6122 | ADD_TBL                  | myschema1   | mytbl1           | myGroup1   |            20 | t                     |                |                           |         6013
         6122 | ADD_TBL                  | myschema1   | mytbl2b          | myGroup1   |               | t                     |                |                           |         6013
         6137 | CHANGE_TBL_LOG_DATA_TSP  | myschema2   | myTbl3           | myGroup2   |               | t                     | myGroup1       | t                         |         6019
         6137 | CHANGE_TBL_LOG_INDEX_TSP | myschema2   | myTbl3           | myGroup2   |               | t                     | myGroup1       | t                         |         6019
         6137 | MOVE_TBL                 | myschema2   | myTbl3           | myGroup2   |               | t                     | myGroup1       | t                         |         6019
         6137 | MOVE_SEQ                 | myschema2   | myTbl3_col31_seq | myGroup2   |               | t                     | myGroup1       | t                         |         6019
         6143 | RESET_GROUP              |             |                  | myGroup2   |               | f                     |                |                           |             
         6143 | CHANGE_TBL_LOG_DATA_TSP  | myschema2   | myTbl3           | myGroup1   |               | t                     | myGroup2       | f                         |             
         6143 | CHANGE_TBL_LOG_INDEX_TSP | myschema2   | myTbl3           | myGroup1   |               | t                     | myGroup2       | f                         |             
         6143 | MOVE_TBL                 | myschema2   | myTbl3           | myGroup1   |               | t                     | myGroup2       | f                         |             
         6143 | MOVE_SEQ                 | myschema2   | myTbl3_col31_seq | myGroup1   |               | t                     | myGroup2       | f                         |             
         6145 | REMOVE_TBL               | myschema2   | myTbl3           | myGroup2   |               | t                     |                |                           |             
         6145 | REMOVE_TBL               | myschema2   | mytbl1           | myGroup2   |               | t                     |                |                           |             
         6145 | REMOVE_TBL               | myschema2   | mytbl2           | myGroup2   |               | t                     |                |                           |             
         6146 | REMOVE_SEQ               | myschema2   | myseq1           | myGroup2   |               | t                     |                |                           |             
         6147 | ADD_TBL                  | myschema2   | myTbl3           | myGroup2   |               | t                     |                |                           |             
         6147 | ADD_TBL                  | myschema2   | mytbl1           | myGroup2   |               | t                     |                |                           |             
         6147 | ADD_TBL                  | myschema2   | mytbl2           | myGroup2   |               | t                     |                |                           |             
         6148 | ADD_SEQ                  | myschema2   | myseq1           | myGroup2   |               | t                     |                |                           |             
         6148 | ADD_SEQ                  | myschema2   | myseq2           | myGroup2   |               | t                     |                |                           |             
         6149 | REMOVE_TBL               | myschema2   | myTbl3           | myGroup2   |               | t                     |                |                           |             
         6149 | REMOVE_TBL               | myschema2   | mytbl1           | myGroup2   |               | t                     |                |                           |             
         6149 | REMOVE_TBL               | myschema2   | mytbl2           | myGroup2   |               | t                     |                |                           |             
         6150 | REMOVE_SEQ               | myschema2   | myseq1           | myGroup2   |               | t                     |                |                           |             
         6150 | REMOVE_SEQ               | myschema2   | myseq2           | myGroup2   |               | t                     |                |                           |             
         6151 | ADD_TBL                  | myschema2   | myTbl3           | myGroup2   |               | t                     |                |                           |             
         6151 | ADD_TBL                  | myschema2   | mytbl1           | myGroup2   |               | t                     |                |                           |             
         6151 | ADD_TBL                  | myschema2   | mytbl2           | myGroup2   |               | t                     |                |                           |             
         6152 | ADD_SEQ                  | myschema2   | myseq1           | myGroup2   |               | t                     |                |                           |             
         6152 | ADD_SEQ                  | myschema2   | myseq2           | myGroup2   |               | t                     |                |                           |             
         6153 | REMOVE_TBL               | myschema1   | mytbl4           | myGroup1   |               | t                     |                |                           |             
         6154 | ADD_TBL                  | myschema1   | mytbl4           | myGroup1   |               | t                     |                |                           |             
         6155 | REMOVE_TBL               | myschema1   | mytbl4           | myGroup1   |               | t                     |                |                           |             
         6156 | ADD_TBL                  | myschema1   | mytbl4           | myGroup1   |               | t                     |                |                           |             
         6157 | MOVE_TBL                 | myschema4   | mypartp1         | myGroup4   |               | f                     | myGroup1       | t                         |             
         6157 | MOVE_TBL                 | myschema4   | mypartp2         | myGroup4   |               | f                     | myGroup1       | t                         |             
         6157 | MOVE_TBL                 | myschema4   | mytblc1          | myGroup4   |               | f                     | myGroup1       | t                         |             
         6157 | MOVE_TBL                 | myschema4   | mytblc2          | myGroup4   |               | f                     | myGroup1       | t                         |             
         6157 | MOVE_TBL                 | myschema4   | mytblm           | myGroup4   |               | f                     | myGroup1       | t                         |             
         6158 | MOVE_SEQ                 | myschema2   | myTbl3_col31_seq | myGroup2   |               | t                     | myGroup1       | t                         |             
         6158 | MOVE_SEQ                 | myschema2   | myseq1           | myGroup2   |               | t                     | myGroup1       | t                         |             
         6158 | MOVE_SEQ                 | myschema2   | myseq2           | myGroup2   |               | t                     | myGroup1       | t                         |             
         6159 | MOVE_TBL                 | myschema4   | mypartp1         | myGroup1   |               | t                     | myGroup2       | t                         |             
         6159 | MOVE_TBL                 | myschema4   | mypartp2         | myGroup1   |               | t                     | myGroup2       | t                         |             
         6159 | MOVE_TBL                 | myschema4   | mytblc1          | myGroup1   |               | t                     | myGroup2       | t                         |             
         6159 | MOVE_TBL                 | myschema4   | mytblc2          | myGroup1   |               | t                     | myGroup2       | t                         |             
         6159 | MOVE_TBL                 | myschema4   | mytblm           | myGroup1   |               | t                     | myGroup2       | t                         |             
         6160 | MOVE_SEQ                 | myschema2   | myTbl3_col31_seq | myGroup1   |               | t                     | myGroup2       | t                         |             
         6160 | MOVE_SEQ                 | myschema2   | myseq1           | myGroup1   |               | t                     | myGroup2       | t                         |             
         6160 | MOVE_SEQ                 | myschema2   | myseq2           | myGroup1   |               | t                     | myGroup2       | t                         |             
         6161 | MOVE_TBL                 | myschema4   | mypartp1         | myGroup2   |               | t                     | myGroup4       | f                         |             
         6161 | MOVE_TBL                 | myschema4   | mypartp2         | myGroup2   |               | t                     | myGroup4       | f                         |             
         6161 | MOVE_TBL                 | myschema4   | mytblc1          | myGroup2   |               | t                     | myGroup4       | f                         |             
         6161 | MOVE_TBL                 | myschema4   | mytblc2          | myGroup2   |               | t                     | myGroup4       | f                         |             
         6161 | MOVE_TBL                 | myschema4   | mytblm           | myGroup2   |               | t                     | myGroup4       | f                         |             
         6162 | MOVE_SEQ                 | myschema2   | myTbl3_col31_seq | myGroup2   |               | t                     | myGroup4       | f                         |             
         6162 | MOVE_SEQ                 | myschema2   | myseq1           | myGroup2   |               | t                     | myGroup4       | f                         |             
         6162 | MOVE_SEQ                 | myschema2   | myseq2           | myGroup2   |               | t                     | myGroup4       | f                         |             
         6163 | MOVE_TBL                 | myschema2   | mytbl2           | myGroup2   |               | t                     | myGroup1       | t                         |             
         6164 | MOVE_TBL                 | myschema2   | mytbl2           | myGroup1   |               | t                     | myGroup2       | t                         |             
         6165 | CHANGE_REL_PRIORITY      | myschema1   | mytbl1           | myGroup1   |            31 | t                     |                |                           |             
         6166 | CHANGE_TBL_LOG_DATA_TSP  | myschema1   | mytbl2b          | myGroup1   |               | t                     |                |                           |             
         6167 | CHANGE_TBL_LOG_INDEX_TSP | myschema2   | mytbl6           | myGroup2   |               | t                     |                |                           |             
         6168 | CHANGE_REL_PRIORITY      | myschema1   | mytbl1           | myGroup1   |            20 | t                     |                |                           |             
         6169 | CHANGE_TBL_LOG_DATA_TSP  | myschema1   | mytbl2b          | myGroup1   |               | t                     |                |                           |             
         6170 | CHANGE_TBL_LOG_INDEX_TSP | myschema2   | mytbl6           | myGroup2   |               | t                     |                |                           |             
(203 rows)

select * from emaj.emaj_rel_hist order by 1,2,3;
  relh_schema   |    relh_tblseq    | relh_time_range |    relh_group    | relh_kind 
----------------+-------------------+-----------------+------------------+-----------
 myschema1      | myTbl3            | [1000,6001)     | myGroup1         | r
 myschema1      | myTbl3            | [6007,6015)     | myGroup1         | r
 myschema1      | myTbl3            | [6017,6041)     | myGroup1         | r
 myschema1      | myTbl3            | [6042,6109)     | myGroup1         | r
 myschema1      | myTbl3            | [6122,6172)     | myGroup1         | r
 myschema1      | myTbl3_col31_seq  | [1000,6001)     | myGroup1         | S
 myschema1      | myTbl3_col31_seq  | [6007,6016)     | myGroup1         | S
 myschema1      | myTbl3_col31_seq  | [6018,6041)     | myGroup1         | S
 myschema1      | myTbl3_col31_seq  | [6042,6085)     | myGroup1         | S
 myschema1      | myTbl3_col31_seq  | [6093,6172)     | myGroup1         | S
 myschema1      | mytbl1            | [1000,6001)     | myGroup1         | r
 myschema1      | mytbl1            | [6007,6028)     | myGroup1         | r
 myschema1      | mytbl1            | [6028,6029)     | myGroup1         | r
 myschema1      | mytbl1            | [6029,6030)     | myGroup1         | r
 myschema1      | mytbl1            | [6030,6032)     | myGroup1         | r
 myschema1      | mytbl1            | [6032,6033)     | myGroup1         | r
 myschema1      | mytbl1            | [6035,6036)     | myGroup1         | r
 myschema1      | mytbl1            | [6036,6037)     | myGroup1         | r
 myschema1      | mytbl1            | [6037,6038)     | myGroup1         | r
 myschema1      | mytbl1            | [6038,6050)     | myGroup1         | r
 myschema1      | mytbl1            | [6050,6052)     | myGroup2         | r
 myschema1      | mytbl1            | [6052,6116)     | myGroup1         | r
 myschema1      | mytbl1            | [6122,6172)     | myGroup1         | r
 myschema1      | mytbl1_new_name   | [6033,6034)     | myGroup1         | r
 myschema1      | mytbl2            | [1000,6001)     | myGroup1         | r
 myschema1      | mytbl2            | [6007,6051)     | myGroup1         | r
 myschema1      | mytbl2            | [6051,6053)     | myGroup2         | r
 myschema1      | mytbl2            | [6053,6172)     | myGroup1         | r
 myschema1      | mytbl2b           | [1000,6001)     | myGroup1         | r
 myschema1      | mytbl2b           | [6007,6015)     | myGroup1         | r
 myschema1      | mytbl2b           | [6017,6041)     | myGroup1         | r
 myschema1      | mytbl2b           | [6042,6051)     | myGroup1         | r
 myschema1      | mytbl2b           | [6051,6052)     | myGroup2         | r
 myschema1      | mytbl2b           | [6052,6109)     | myGroup1         | r
 myschema1      | mytbl2b           | [6122,6172)     | myGroup1         | r
 myschema1      | mytbl2b_col20_seq | [1000,6001)     | myGroup1         | S
 myschema1      | mytbl2b_col20_seq | [6007,6172)     | myGroup1         | S
 myschema1      | mytbl4            | [1000,6001)     | myGroup1         | r
 myschema1      | mytbl4            | [6007,6015)     | myGroup1         | r
 myschema1      | mytbl4            | [6017,6153)     | myGroup1         | r
 myschema1      | mytbl4            | [6154,6155)     | myGroup1         | r
 myschema1      | mytbl4            | [6156,6172)     | myGroup1         | r
 myschema2      | myTbl3            | [1001,6002)     | myGroup2         | r
 myschema2      | myTbl3            | [6008,6045)     | myGroup2         | r
 myschema2      | myTbl3            | [6045,6046)     | myGroup1         | r
 myschema2      | myTbl3            | [6046,6137)     | myGroup2         | r
 myschema2      | myTbl3            | [6137,6143)     | myGroup1         | r
 myschema2      | myTbl3            | [6143,6145)     | myGroup2         | r
 myschema2      | myTbl3            | [6147,6149)     | myGroup2         | r
 myschema2      | myTbl3            | [6151,6174)     | myGroup2         | r
 myschema2      | myTbl3_col31_seq  | [1001,6002)     | myGroup2         | S
 myschema2      | myTbl3_col31_seq  | [6008,6045)     | myGroup2         | S
 myschema2      | myTbl3_col31_seq  | [6045,6046)     | myGroup1         | S
 myschema2      | myTbl3_col31_seq  | [6046,6137)     | myGroup2         | S
 myschema2      | myTbl3_col31_seq  | [6137,6143)     | myGroup1         | S
 myschema2      | myTbl3_col31_seq  | [6143,6158)     | myGroup2         | S
 myschema2      | myTbl3_col31_seq  | [6158,6160)     | myGroup1         | S
 myschema2      | myTbl3_col31_seq  | [6160,6162)     | myGroup2         | S
 myschema2      | myTbl3_col31_seq  | [6162,6175)     | myGroup4         | S
 myschema2      | myseq1            | [1001,6002)     | myGroup2         | S
 myschema2      | myseq1            | [6008,6055)     | myGroup2         | S
 myschema2      | myseq1            | [6055,6056)     | myGroup1         | S
 myschema2      | myseq1            | [6056,6057)     | myGroup4         | S
 myschema2      | myseq1            | [6057,6146)     | myGroup2         | S
 myschema2      | myseq1            | [6148,6150)     | myGroup2         | S
 myschema2      | myseq1            | [6152,6158)     | myGroup2         | S
 myschema2      | myseq1            | [6158,6160)     | myGroup1         | S
 myschema2      | myseq1            | [6160,6162)     | myGroup2         | S
 myschema2      | myseq1            | [6162,6175)     | myGroup4         | S
 myschema2      | myseq2            | [6074,6079)     | myGroup2         | S
 myschema2      | myseq2            | [6080,6081)     | myGroup2         | S
 myschema2      | myseq2            | [6148,6150)     | myGroup2         | S
 myschema2      | myseq2            | [6152,6158)     | myGroup2         | S
 myschema2      | myseq2            | [6158,6160)     | myGroup1         | S
 myschema2      | myseq2            | [6160,6162)     | myGroup2         | S
 myschema2      | myseq2            | [6162,6175)     | myGroup4         | S
 myschema2      | mytbl1            | [1001,6002)     | myGroup2         | r
 myschema2      | mytbl1            | [6008,6145)     | myGroup2         | r
 myschema2      | mytbl1            | [6147,6149)     | myGroup2         | r
 myschema2      | mytbl1            | [6151,6174)     | myGroup2         | r
 myschema2      | mytbl2            | [1001,6002)     | myGroup2         | r
 myschema2      | mytbl2            | [6008,6145)     | myGroup2         | r
 myschema2      | mytbl2            | [6147,6149)     | myGroup2         | r
 myschema2      | mytbl2            | [6151,6163)     | myGroup2         | r
 myschema2      | mytbl2            | [6163,6164)     | myGroup1         | r
 myschema2      | mytbl2            | [6164,6174)     | myGroup2         | r
 myschema2      | mytbl4            | [1001,6002)     | myGroup2         | r
 myschema2      | mytbl4            | [6008,6041)     | myGroup2         | r
 myschema2      | mytbl4            | [6042,6174)     | myGroup2         | r
 myschema2      | mytbl5            | [1001,6002)     | myGroup2         | r
 myschema2      | mytbl5            | [6008,6174)     | myGroup2         | r
 myschema2      | mytbl6            | [1001,6002)     | myGroup2         | r
 myschema2      | mytbl6            | [6008,6174)     | myGroup2         | r
 myschema2      | mytbl7            | [6096,6103)     | myGroup2         | r
 myschema2      | mytbl7            | [6104,6106)     | myGroup2         | r
 myschema4      | mypartp1          | [9,6005)        | myGroup4         | r
 myschema4      | mypartp1          | [6010,6157)     | myGroup4         | r
 myschema4      | mypartp1          | [6157,6159)     | myGroup1         | r
 myschema4      | mypartp1          | [6159,6161)     | myGroup2         | r
 myschema4      | mypartp1          | [6161,6175)     | myGroup4         | r
 myschema4      | mypartp2          | [9,6005)        | myGroup4         | r
 myschema4      | mypartp2          | [6010,6157)     | myGroup4         | r
 myschema4      | mypartp2          | [6157,6159)     | myGroup1         | r
 myschema4      | mypartp2          | [6159,6161)     | myGroup2         | r
 myschema4      | mypartp2          | [6161,6175)     | myGroup4         | r
 myschema4      | mytblc1           | [9,6005)        | myGroup4         | r
 myschema4      | mytblc1           | [6010,6157)     | myGroup4         | r
 myschema4      | mytblc1           | [6157,6159)     | myGroup1         | r
 myschema4      | mytblc1           | [6159,6161)     | myGroup2         | r
 myschema4      | mytblc1           | [6161,6175)     | myGroup4         | r
 myschema4      | mytblc2           | [9,6005)        | myGroup4         | r
 myschema4      | mytblc2           | [6010,6157)     | myGroup4         | r
 myschema4      | mytblc2           | [6157,6159)     | myGroup1         | r
 myschema4      | mytblc2           | [6159,6161)     | myGroup2         | r
 myschema4      | mytblc2           | [6161,6175)     | myGroup4         | r
 myschema4      | mytblm            | [9,6005)        | myGroup4         | r
 myschema4      | mytblm            | [6010,6157)     | myGroup4         | r
 myschema4      | mytblm            | [6157,6159)     | myGroup1         | r
 myschema4      | mytblm            | [6159,6161)     | myGroup2         | r
 myschema4      | mytblm            | [6161,6175)     | myGroup4         | r
 phil's schema3 | myTbl2\           | [8,6004)        | phil's group#3", | r
 phil's schema3 | myTbl2\_col21_seq | [8,6004)        | phil's group#3", | S
 phil's schema3 | phil's seq\1      | [8,6004)        | phil's group#3", | S
 phil's schema3 | phil's tbl1       | [8,6004)        | phil's group#3", | r
 public         | mytbl1_new_name   | [6034,6035)     | myGroup1         | r
(125 rows)

truncate emaj.emaj_hist;
-- remove the temp directory
\! rm -R $EMAJTESTTMPDIR
